import"./Bzak7iHL.js";import"./DW9ov6mQ.js";import{o as Xe}from"./BKdxYII_.js";import{p as Ze,d as _,t as P,j as R,a as w,b as et,h as l,e as o,s as K,m as ve,g as t,r as s,aw as N,aC as tt,aD as x,i as h,f as at,aF as Te}from"./DFw88cu1.js";import{i as k}from"./CtMEnX0n.js";import{e as it,i as rt}from"./BTPm-04w.js";import{s as me,r as y,a as st,c as nt}from"./-87vorbC.js";import{b as J,c as L}from"./DDIA5LkU.js";import{i as ot}from"./BNOMXApT.js";import{a as lt,s as ct}from"./Ban245yS.js";import{g as ie,t as be}from"./DMmwAmNg.js";import{w as dt}from"./BZRUnIUX.js";var ut=_('<span class="text-blue-400">ğŸ”„</span> Analyzing...',1),pt=_('<span class="text-green-400">âœ¨</span> Generate Reminders',1),vt=_('<label class="text-white/80">Phone Number <input type="tel" placeholder="+1234567890" class="input w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"/></label>'),mt=_('<div class="manual-form-card backdrop-blur-lg bg-white/15 border border-white/30 rounded-2xl p-6 mb-6 shadow-2xl svelte-tnd5ji"><h3 class="text-xl font-semibold text-white mb-4 flex items-center gap-2"><span class="text-purple-400">ğŸ“</span> Create Manual Reminder</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><label class="text-white/80">Title * <input type="text" placeholder="Reminder title" class="input w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"/></label> <label class="text-white/80">Priority <div class="flex gap-4 mt-2"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">Low</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">Medium</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">High</span></label></div></label> <label class="text-white/80">Due Date * <input type="date" class="input w-full bg-white/10 border-white/20 text-white svelte-tnd5ji"/></label> <label class="text-white/80">Due Time <input type="time" class="input w-full bg-white/10 border-white/20 text-white svelte-tnd5ji"/></label> <label class="text-white/80">Notification Type <div class="flex flex-col gap-2 mt-2"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">ğŸ”Š Sound + Browser Notification</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">ğŸ“± SMS</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">ğŸ“ Call</span></label></div></label> <!> <label class="md:col-span-2 text-white/80">Description <textarea placeholder="Additional details..." rows="3" class="textarea w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"></textarea></label></div> <div class="flex gap-3 justify-end mt-6"><button class="btn btn-ghost text-white/80 hover:bg-white/10">Cancel</button> <button class="btn btn-primary"><span class="text-green-400">âœ“</span> Create Reminder</button></div></div>'),bt=_('<button class="btn btn-ghost btn-sm text-white/60 hover:text-white"> </button> <button class="btn btn-primary btn-sm" title="Trigger notification"> </button>',1),ft=_('<div class="mb-4 p-3 bg-white/5 rounded-lg border border-white/10"><div class="flex items-center gap-2 text-sm text-white/70"><span class="font-medium">Notification:</span> <span class="px-2 py-1 bg-white/10 rounded text-xs"> <!></span> <span> </span></div></div>'),wt=_('<div class="reminder-card backdrop-blur-lg bg-white/10 border border-white/20 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:transform hover:scale-105 svelte-tnd5ji"><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><span class="text-2xl"> </span> <div><h3 class="text-white font-semibold text-lg"> </h3> <span class="text-xs text-white/60 uppercase tracking-wide"> </span></div></div> <div class="flex items-center gap-2"><!> <button class="btn btn-ghost btn-sm text-white/60 hover:text-red-400" aria-label="Dismiss reminder">âœ•</button></div></div> <p class="text-white/80 mb-4 leading-relaxed"> </p> <!> <div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <span class="text-white/60 text-sm"> <!></span></div> <div class="w-4 h-4 rounded-full shadow-lg"></div></div></div>'),ht=_('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),xt=_('<div class="text-center py-16"><div class="text-8xl mb-6 text-white/20">ğŸ””</div> <h3 class="text-2xl font-semibold text-white mb-2">No Reminders Yet</h3> <p class="text-white/60 mb-6">Create some notes or calendar events to generate smart reminders</p> <button class="btn btn-primary btn-lg shadow-xl"><span class="text-blue-400">ğŸ”</span> Analyze Content</button></div>'),gt=_('<div class="reminders-page min-h-screen mountain-background p-6 svelte-tnd5ji"><div class="max-w-6xl mx-auto"><div class="text-center mb-8"><h1 class="text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3"><span class="text-5xl">ğŸ””</span> Smart Reminders</h1> <p class="text-white/70 text-lg">AI-powered reminders generated from your notes and calendar</p></div> <div class="flex justify-center mb-6 gap-4"><button><!></button> <button class="btn btn-secondary btn-lg shadow-xl hover:shadow-2xl transition-all duration-300"><span class="text-purple-400">â•</span> Create Manual</button></div> <!> <!></div></div>');function jt(De,Se){Ze(Se,!1);const fe=()=>ct(A,"$reminders",Ae),[Ae,$e]=lt(),re=[],se=[];let we=[],he=[],A=dt([]),B=ve(!1),V=ve(!1),i=ve({title:"",description:"",dueDate:"",dueTime:"",priority:"medium",notificationType:"sound",phoneNumber:"",isActive:!0});function Re(){const e=new window.AudioContext,a=e.createOscillator(),d=e.createGain();a.connect(d),d.connect(e.destination),a.frequency.setValueAtTime(800,e.currentTime),a.frequency.setValueAtTime(600,e.currentTime+.1),d.gain.setValueAtTime(.3,e.currentTime),d.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),a.start(e.currentTime),a.stop(e.currentTime+.5)}function Ne(e,a){alert(`SMS would be sent to ${e}: ${a}`),console.log(`SMS sent to ${e}: ${a}`)}function ke(e){e?window.open(`tel:${e}`,"_self"):alert("No phone number provided for call")}function Ce(e){const a=`${e.title}: ${e.description}`;switch(e.notificationType){case"sound":Re(),"Notification"in window&&Notification.permission==="granted"&&new Notification(e.title,{body:e.description});break;case"sms":e.phoneNumber&&Ne(e.phoneNumber,a);break;case"call":e.phoneNumber&&ke(e.phoneNumber);break}}Xe(async()=>{we=await ie("notes"),he=await ie("calendar");const e=await ie("reminders");A.set(e),ne(),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()});async function ne(){K(B,!0);const e=[],d=(await ie("reminders")).filter(n=>n.type==="manual");we.forEach(n=>{const u=n.body.toLowerCase(),m=n.title.toLowerCase();["tomorrow","today","next week","next month","deadline","due","meeting","appointment","call","remind","important","urgent"].some(T=>u.includes(T)||m.includes(T))&&e.push({id:`note-${n.id}`,type:"note",title:`Review: ${n.title}`,description:Me(n.body),priority:je(n.body),dueDate:Oe(n.body),source:"Notes Analysis",color:n.color||"#6366f1",createdAt:new Date().toISOString()})}),he.forEach(n=>{const u=new Date(n.date+(n.time?` ${n.time}`:"")),m=new Date,b=u.getTime()-m.getTime(),f=Math.ceil(b/(1e3*60*60*24));f>=0&&f<=7&&e.push({id:`event-${n.id}`,type:"event",title:`Upcoming: ${n.title}`,description:n.description||`Event scheduled for ${n.date}${n.time?` at ${n.time}`:""}`,priority:"medium",dueDate:n.date,source:"Calendar Events",color:n.color||"#10b981",createdAt:new Date().toISOString()}),f<0&&f>=-1&&e.push({id:`followup-${n.id}`,type:"followup",title:`Follow-up: ${n.title}`,description:`Follow up on the "${n.title}" event that occurred on ${n.date}`,priority:"low",dueDate:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0],source:"Event Follow-up",color:"#f59e0b",createdAt:new Date().toISOString()})}),e.sort((n,u)=>{const m={high:3,medium:2,low:1},b=m[u.priority]-m[n.priority];return b!==0?b:Number(new Date(n.dueDate))-Number(new Date(u.dueDate))});const r=[...d,...e];A.set(r),K(B,!1)}function Me(e){var d;return((d=e.split(/[.!?]+/).filter(r=>r.trim().length>10)[0])==null?void 0:d.trim())||e.slice(0,100)+"..."}function je(e){const a=["urgent","asap","critical","important","deadline","due today"],d=["soon","meeting","call","review","check"];return a.some(r=>e.includes(r))?"high":d.some(r=>e.includes(r))?"medium":"low"}function Oe(e){const a=new Date,d=e.toLowerCase();return d.includes("tomorrow")?new Date(a.getTime()+1440*60*1e3).toISOString().split("T")[0]:d.includes("next week")?new Date(a.getTime()+10080*60*1e3).toISOString().split("T")[0]:d.includes("next month")?new Date(a.getFullYear(),a.getMonth()+1,a.getDate()).toISOString().split("T")[0]:d.includes("today")?a.toISOString().split("T")[0]:new Date(a.getTime()+4320*60*1e3).toISOString().split("T")[0]}async function Ie(e){await Ee(e),A.update(a=>a.filter(d=>d.id!==e))}async function xe(e,a){try{await be("reminders").update(e,a)}catch(d){console.error("Error updating reminder in database:",d)}}async function Ee(e){try{await be("reminders").delete(e)}catch(a){console.error("Error deleting reminder from database:",a)}}async function Fe(e){try{await be("reminders").add(e)}catch(a){console.error("Error saving reminder to database:",a)}}async function Pe(){if(!t(i).title||!t(i).dueDate){alert("Please provide at least a title and due date");return}const e={id:`manual-${Date.now()}`,type:"manual",title:t(i).title,description:t(i).description||"Manual reminder",priority:t(i).priority,dueDate:t(i).dueDate,dueTime:t(i).dueTime,source:"Manual Creation",color:oe(t(i).priority).includes("red")?"#ef4444":oe(t(i).priority).includes("yellow")?"#f59e0b":"#10b981",createdAt:new Date().toISOString(),notificationType:t(i).notificationType,phoneNumber:t(i).phoneNumber,isActive:t(i).isActive};await Fe(e),A.update(a=>[...a,e]),K(i,{title:"",description:"",dueDate:"",dueTime:"",priority:"medium",notificationType:"sound",phoneNumber:"",isActive:!0}),K(V,!1),alert("Manual reminder created!")}async function Ke(e){if(!e.isActive)return;Ce(e);const a={...e,isActive:!1};await xe(e.id,{isActive:!1}),A.update(d=>d.map(r=>r.id===e.id?a:r))}async function Le(e){let a=[];A.subscribe(n=>{a=n})();const d=a.find(n=>n.id===e);if(!d)return;const r=!d.isActive;await xe(e,{isActive:r}),A.update(n=>n.map(u=>u.id===e?{...u,isActive:r}:u))}function oe(e){switch(e){case"high":return"text-red-400 border-red-400/30 bg-red-400/10";case"medium":return"text-yellow-400 border-yellow-400/30 bg-yellow-400/10";case"low":return"text-green-400 border-green-400/30 bg-green-400/10";default:return"text-blue-400 border-blue-400/30 bg-blue-400/10"}}function Be(e){switch(e){case"note":return"ğŸ“";case"event":return"ğŸ“…";case"followup":return"ğŸ”„";default:return"ğŸ””"}}ot();var le=gt(),ge=o(le),ce=l(o(ge),2),O=o(ce),Ve=o(O);{var qe=e=>{var a=ut();N(),w(e,a)},Ge=e=>{var a=pt();N(),w(e,a)};k(Ve,e=>{t(B)?e(qe):e(Ge,!1)})}s(O);var ze=l(O,2);s(ce);var ye=l(ce,2);{var Ue=e=>{var a=mt(),d=l(o(a),2),r=o(d),n=l(o(r));y(n),s(r);var u=l(r,2),m=l(o(u)),b=o(m),f=o(b);y(f),f.value=f.__value="low",N(2),s(b);var T=l(b,2),$=o(T);y($),$.value=$.__value="medium",N(2),s(T);var Q=l(T,2),C=o(Q);y(C),C.value=C.__value="high",N(2),s(Q),s(m),s(u);var q=l(u,2),G=l(o(q));y(G),s(q);var I=l(q,2),W=l(o(I));y(W),s(I);var z=l(I,2),E=l(o(z)),U=o(E),M=o(U);y(M),M.value=M.__value="sound",N(2),s(U);var Y=l(U,2),j=o(Y);y(j),j.value=j.__value="sms",N(2),s(Y);var F=l(Y,2),D=o(F);y(D),D.value=D.__value="call",N(2),s(F),s(E),s(z);var X=l(z,2);{var Z=c=>{var v=vt(),g=l(o(v));y(g),s(v),J(g,()=>t(i).phoneNumber,S=>x(i,t(i).phoneNumber=S)),w(c,v)};k(X,c=>{t(i).notificationType!=="sound"&&c(Z)})}var H=l(X,2),ee=l(o(H));tt(ee),s(H),s(d);var te=l(d,2),ae=o(te),p=l(ae,2);s(te),s(a),J(n,()=>t(i).title,c=>x(i,t(i).title=c)),L(re,[],f,()=>t(i).priority,c=>x(i,t(i).priority=c)),L(re,[],$,()=>t(i).priority,c=>x(i,t(i).priority=c)),L(re,[],C,()=>t(i).priority,c=>x(i,t(i).priority=c)),J(G,()=>t(i).dueDate,c=>x(i,t(i).dueDate=c)),J(W,()=>t(i).dueTime,c=>x(i,t(i).dueTime=c)),L(se,[],M,()=>t(i).notificationType,c=>x(i,t(i).notificationType=c)),L(se,[],j,()=>t(i).notificationType,c=>x(i,t(i).notificationType=c)),L(se,[],D,()=>t(i).notificationType,c=>x(i,t(i).notificationType=c)),J(ee,()=>t(i).description,c=>x(i,t(i).description=c)),R("click",ae,()=>K(V,!1)),R("click",p,Pe),w(e,a)};k(ye,e=>{t(V)&&e(Ue)})}var Ye=l(ye,2);{var He=e=>{var a=ht();it(a,5,fe,rt,(d,r)=>{var n=wt(),u=o(n),m=o(u),b=o(m),f=o(b,!0);s(b);var T=l(b,2),$=o(T),Q=o($,!0);s($);var C=l($,2),q=o(C,!0);s(C),s(T),s(m);var G=l(m,2),I=o(G);{var W=p=>{var c=bt(),v=at(c),g=o(v,!0);s(v);var S=l(v,2),de=o(S,!0);s(S),P(()=>{nt(v,"title",t(r).isActive?"Disable reminder":"Enable reminder"),h(g,t(r).isActive?"ğŸ”Š":"ğŸ”‡"),S.disabled=!t(r).isActive,h(de,t(r).notificationType==="sound"?"ğŸ”Š":t(r).notificationType==="sms"?"ğŸ“±":"ğŸ“")}),R("click",v,()=>Le(t(r).id)),R("click",S,()=>Ke(t(r))),w(p,c)};k(I,p=>{t(r).type==="manual"&&p(W)})}var z=l(I,2);s(G),s(u);var E=l(u,2),U=o(E,!0);s(E);var M=l(E,2);{var Y=p=>{var c=ft(),v=o(c),g=l(o(v),2),S=o(g),de=l(S);{var Qe=pe=>{var _e=Te();P(()=>h(_e,`(${t(r).phoneNumber??""})`)),w(pe,_e)};k(de,pe=>{t(r).phoneNumber&&pe(Qe)})}s(g);var ue=l(g,2),We=o(ue,!0);s(ue),s(v),s(c),P(()=>{h(S,`${t(r).notificationType==="sound"?"ğŸ”Š Sound + Browser":t(r).notificationType==="sms"?"ğŸ“± SMS":"ğŸ“ Call"} `),me(ue,1,`ml-auto text-xs ${t(r).isActive?"text-green-400":"text-red-400"}`),h(We,t(r).isActive?"Active":"Inactive")}),w(p,c)};k(M,p=>{t(r).type==="manual"&&p(Y)})}var j=l(M,2),F=o(j),D=o(F),X=o(D,!0);s(D);var Z=l(D,2),H=o(Z),ee=l(H);{var te=p=>{var c=Te();P(()=>h(c,`at ${t(r).dueTime??""}`)),w(p,c)};k(ee,p=>{t(r).dueTime&&p(te)})}s(Z),s(F);var ae=l(F,2);s(j),s(n),P((p,c,v,g)=>{h(f,p),h(Q,t(r).title),h(q,t(r).source),h(U,t(r).description),me(D,1,`px-3 py-1 rounded-full text-xs font-medium border ${c??""}`,"svelte-tnd5ji"),h(X,v),h(H,`Due: ${g??""} `),st(ae,`background-color: ${t(r).color??""}`)},[()=>Be(t(r).type),()=>oe(t(r).priority),()=>t(r).priority.toUpperCase(),()=>new Date(t(r).dueDate).toLocaleDateString()]),R("click",z,()=>Ie(t(r).id)),w(d,n)}),s(a),w(e,a)},Je=e=>{var a=xt(),d=l(o(a),6);s(a),R("click",d,ne),w(e,a)};k(Ye,e=>{fe().length>0?e(He):e(Je,!1)})}s(ge),s(le),P(()=>{me(O,1,`btn btn-primary btn-lg shadow-xl hover:shadow-2xl transition-all duration-300 ${t(B)?"loading":""}`,"svelte-tnd5ji"),O.disabled=t(B)}),R("click",O,ne),R("click",ze,()=>K(V,!t(V))),w(De,le),et(),$e()}export{jt as default};
