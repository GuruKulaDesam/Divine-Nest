import{as as t,at as C,I as S,F as m,l as b,y as h,au as E,av as A,a0 as V,G as w}from"./DFw88cu1.js";function q(e,r,a=r){var f=new WeakSet;t(e,"input",async c=>{var d=c?e.defaultValue:e.value;if(d=u(e)?n(d):d,a(d),h!==null&&f.add(h),await C(),d!==(d=r())){var v=e.selectionStart,s=e.selectionEnd;e.value=d??"",s!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(s,e.value.length))}}),(b&&e.defaultValue!==e.value||S(r)==null&&e.value)&&(a(u(e)?n(e.value):e.value),h!==null&&f.add(h)),m(()=>{var c=r();if(e===document.activeElement){var d=E??h;if(f.has(d))return}u(e)&&c===n(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const k=new Set;function B(e,r,a,f,c=f){var d=a.getAttribute("type")==="checkbox",v=e;let s=!1;if(r!==null)for(var _ of r)v=v[_]??(v[_]=[]);v.push(a),t(a,"change",()=>{var l=a.__value;d&&(l=y(v,l,a.checked)),c(l)},()=>c(d?[]:null)),m(()=>{var l=f();if(b&&a.defaultChecked!==a.checked){s=!0;return}d?(l=l||[],a.checked=l.includes(a.__value)):a.checked=A(a.__value,l)}),V(()=>{var l=v.indexOf(a);l!==-1&&v.splice(l,1)}),k.has(v)||(k.add(v),w(()=>{v.sort((l,o)=>l.compareDocumentPosition(o)===4?-1:1),k.delete(v)})),w(()=>{if(s){var l;if(d)l=y(v,l,a.checked);else{var o=v.find(i=>i.checked);l=o==null?void 0:o.__value}c(l)}})}function D(e,r,a=r){t(e,"change",f=>{var c=f?e.defaultChecked:e.checked;a(c)}),(b&&e.defaultChecked!==e.checked||S(r)==null)&&a(e.checked),m(()=>{var f=r();e.checked=!!f})}function y(e,r,a){for(var f=new Set,c=0;c<e.length;c+=1)e[c].checked&&f.add(e[c].__value);return a||f.delete(r),Array.from(f)}function u(e){var r=e.type;return r==="number"||r==="range"}function n(e){return e===""?null:+e}export{D as a,q as b,B as c};
