import"./Bzak7iHL.js";import"./vwNg4zDZ.js";import{p as xa,az as xe,s as f,g as e,m as E,a8 as K,aA as fa,d as k,e as a,r as t,h as r,ar as yt,I as o,t as C,i as d,j as J,a as A,b as _a,aD as ft,c as Na,f as Ia,M as da,aE as Aa,aF as rt}from"./D17TB34f.js";import{i as Fe}from"./CzCGRA_2.js";import{e as ke,i as Ve}from"./Cw7o17-n.js";import{r as na,s as be,b as _t,a as ha}from"./CFHZ0_TH.js";import{b as Qt}from"./aleVj_GK.js";import{i as ya}from"./YnfMsfdI.js";import{p as la}from"./C-YpgGKv.js";import{I as M}from"./B2ZXU26p.js";import"./veVAhr1m.js";import{o as Ta}from"./BQBbAM3R.js";import{p as Ma}from"./Bfc47y5P.js";const oa={APPA:"appa",AMMA:"amma",PAATI:"paati",THATHA:"thatha",AKKA:"akka",THAMBI:"thambi"},W={SPIRITUAL:"spiritual",EDUCATION:"education",HEALTH:"health",DIGITAL_SUBSCRIPTIONS:"digital_subscriptions",TRANSPORT:"transport",HOUSEHOLD:"household",FOOD:"food",ENTERTAINMENT:"entertainment"},R={PAID:"paid",PENDING:"pending",OVERDUE:"overdue",UPCOMING:"upcoming"},X=[{id:1,name:"Raman",role:oa.APPA,age:52,avatar:"ЁЯСиЁЯП╜тАНЁЯТ╝",responsibilities:["House rent","Vehicle maintenance","Insurance premiums"],monthlyBudget:25e3,preferredLanguage:"tamil",phoneNumber:"+91 98765 43210",whatsappNumber:"+91 98765 43210"},{id:2,name:"Lakshmi",role:oa.AMMA,age:48,avatar:"ЁЯСйЁЯП╜тАНЁЯПл",responsibilities:["Grocery shopping","Utility bills","Children's education"],monthlyBudget:2e4,preferredLanguage:"tamil",phoneNumber:"+91 98765 43211",whatsappNumber:"+91 98765 43211"},{id:3,name:"Kamala",role:oa.PAATI,age:75,avatar:"ЁЯС╡ЁЯП╜",responsibilities:["Temple donations","Medical expenses","Festival preparations"],monthlyBudget:8e3,preferredLanguage:"tamil",phoneNumber:"+91 98765 43212",whatsappNumber:"+91 98765 43212"},{id:4,name:"Krishnan",role:oa.THATHA,age:78,avatar:"ЁЯС┤ЁЯП╜",responsibilities:["Newspaper subscription","Medical checkups","Banking"],monthlyBudget:6e3,preferredLanguage:"tamil",phoneNumber:"+91 98765 43213",whatsappNumber:"+91 98765 43213"},{id:5,name:"Priya",role:oa.AKKA,age:22,avatar:"ЁЯСйЁЯП╜тАНЁЯОУ",responsibilities:["College fees","Books","Mobile recharge"],monthlyBudget:12e3,preferredLanguage:"english",phoneNumber:"+91 98765 43214",whatsappNumber:"+91 98765 43214"},{id:6,name:"Arjun",role:oa.THAMBI,age:18,avatar:"ЁЯСиЁЯП╜тАНЁЯОУ",responsibilities:["School fees","Sports equipment","Gaming subscriptions"],monthlyBudget:8e3,preferredLanguage:"english",phoneNumber:"+91 98765 43215",whatsappNumber:"+91 98765 43215"}],Re=[{id:1,type:"mobile",provider:"Airtel",number:"98765 43210",amount:599,dueDate:"2025-10-15",assignedTo:X[0],status:R.UPCOMING,category:W.DIGITAL_SUBSCRIPTIONS},{id:2,type:"mobile",provider:"Jio",number:"98765 43211",amount:399,dueDate:"2025-10-12",assignedTo:X[1],status:R.UPCOMING,category:W.DIGITAL_SUBSCRIPTIONS},{id:3,type:"broadband",provider:"BSNL Fiber",plan:"100 Mbps Unlimited",amount:849,dueDate:"2025-10-20",assignedTo:X[0],status:R.UPCOMING,category:W.DIGITAL_SUBSCRIPTIONS},{id:4,type:"dth",provider:"Tata Sky",plan:"South Plus HD",amount:315,dueDate:"2025-10-25",assignedTo:X[1],status:R.UPCOMING,category:W.ENTERTAINMENT},{id:5,type:"electricity",provider:"TNEB",account:"240156789012",amount:1200,dueDate:"2025-10-30",assignedTo:X[0],status:R.UPCOMING,category:W.HOUSEHOLD},{id:6,type:"water",provider:"Chennai Metro Water",account:"CW98765432",amount:180,dueDate:"2025-10-28",assignedTo:X[1],status:R.UPCOMING,category:W.HOUSEHOLD},{id:7,type:"gas",provider:"Indane Gas",connection:"17654321890",amount:450,dueDate:"2025-10-22",assignedTo:X[1],status:R.UPCOMING,category:W.HOUSEHOLD},{id:8,type:"streaming",provider:"Netflix",plan:"Premium",amount:649,dueDate:"2025-10-18",assignedTo:X[4],status:R.UPCOMING,category:W.ENTERTAINMENT},{id:9,type:"streaming",provider:"Amazon Prime",plan:"Annual",amount:1499,dueDate:"2025-10-15",assignedTo:X[0],status:R.UPCOMING,category:W.ENTERTAINMENT}],wa=Re.reduce((Ke,l)=>Ke+l.amount,0),Ye=[{id:1,type:"life_insurance",provider:"LIC",policyNumber:"240156789",amount:24e3,dueDate:"2025-12-15",assignedTo:X[0],status:R.UPCOMING,category:W.HEALTH},{id:2,type:"health_insurance",provider:"Star Health",policyNumber:"SH9876543",amount:18500,dueDate:"2025-11-20",assignedTo:X[1],status:R.UPCOMING,category:W.HEALTH},{id:3,type:"vehicle_insurance",provider:"ICICI Lombard",vehicleNumber:"TN 09 AB 1234",amount:8200,dueDate:"2026-03-10",assignedTo:X[0],status:R.UPCOMING,category:W.TRANSPORT},{id:4,type:"property_tax",provider:"Chennai Corporation",propertyId:"CC/2024/789456",amount:12e3,dueDate:"2026-03-31",assignedTo:X[0],status:R.UPCOMING,category:W.HOUSEHOLD}],ua=Ye.reduce((Ke,l)=>Ke+l.amount,0),ca=[{id:W.SPIRITUAL,name:"Spiritual & Cultural",nameTamil:"роЖройрпНрооро┐роХроорпН рооро▒рпНро▒рпБроорпН рокрогрпНрокро╛роЯрпБ",icon:"ЁЯХЙя╕П",color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200",examples:["Temple donations","Festival celebrations","Puja items","Religious books"]},{id:W.EDUCATION,name:"Education",nameTamil:"роХро▓рпНро╡ро┐",icon:"ЁЯУЪ",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",examples:["School fees","Tuition","Books","Educational supplies"]},{id:W.HEALTH,name:"Health & Medical",nameTamil:"роЙроЯро▓рпНроиро▓роорпН рооро▒рпНро▒рпБроорпН рооро░рпБродрпНродрпБро╡роорпН",icon:"ЁЯТК",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",examples:["Doctor visits","Medicines","Health insurance","Medical tests"]},{id:W.DIGITAL_SUBSCRIPTIONS,name:"Digital & Subscriptions",nameTamil:"роЯро┐роЬро┐роЯрпНроЯро▓рпН рооро▒рпНро▒рпБроорпН роЪроирпНродро╛роХрпНроХро│рпН",icon:"ЁЯУ▒",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",examples:["Mobile recharge","Internet","Streaming services","App subscriptions"]},{id:W.TRANSPORT,name:"Transport & Vehicle",nameTamil:"рокрпЛроХрпНроХрпБро╡ро░родрпНродрпБ рооро▒рпНро▒рпБроорпН ро╡ро╛роХройроорпН",icon:"ЁЯЪЧ",color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",examples:["Fuel","Vehicle maintenance","Auto/taxi","Public transport"]},{id:W.HOUSEHOLD,name:"Household & Utilities",nameTamil:"ро╡рпАроЯрпНроЯрпБ рооро▒рпНро▒рпБроорпН рокропройрпНрокро╛роЯрпБроХро│рпН",icon:"ЁЯПа",color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",examples:["Electricity","Water","Gas","House maintenance","Cleaning supplies"]},{id:W.FOOD,name:"Food & Groceries",nameTamil:"роЙрогро╡рпБ рооро▒рпНро▒рпБроорпН рооро│ро┐роХрпИ",icon:"ЁЯЫТ",color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",examples:["Groceries","Vegetables","Dairy","Eating out","Snacks"]},{id:W.ENTERTAINMENT,name:"Entertainment & Leisure",nameTamil:"рокрпКро┤рпБродрпБрокрпЛроХрпНроХрпБ рооро▒рпНро▒рпБроорпН ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ",icon:"ЁЯОм",color:"text-pink-600",bgColor:"bg-pink-50",borderColor:"border-pink-200",examples:["Movies","Games","Outings","Hobbies","Sports"]}],pa={sms:{tamil:{reminder:"ро╡рогроХрпНроХроорпН {name}! роЙроЩрпНроХро│рпН {service} рокро┐ро▓рпН тВ╣{amount} {date} роЕройрпНро▒рпБ роЪрпЖро▓рпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН. - роХрпБроЯрпБроорпНрокроорпН",overdue:"ро╡рогроХрпНроХроорпН {name}! роЙроЩрпНроХро│рпН {service} рокро┐ро▓рпН тВ╣{amount} родро╛роородрооро╛роХро┐ро╡ро┐роЯрпНроЯродрпБ. роЙроЯройрпЗ роЪрпЖро▓рпБродрпНродро╡рпБроорпН. - роХрпБроЯрпБроорпНрокроорпН"},english:{reminder:"Hi {name}! Your {service} bill of тВ╣{amount} is due on {date}. Please pay on time. - Family",overdue:"Hi {name}! Your {service} bill of тВ╣{amount} is overdue. Please pay immediately. - Family"}},whatsapp:{tamil:{reminder:`ЁЯЩП ро╡рогроХрпНроХроорпН {name}!

ЁЯТ░ роЙроЩрпНроХро│рпН {service} рокро┐ро▓рпН:
тАв родрпКроХрпИ: тВ╣{amount}
тАв роХроЯрпИроЪро┐ родрпЗродро┐: {date}

ЁЯУЕ роирпЗро░родрпНродро┐ро▓рпН роЪрпЖро▓рпБродрпНрод рооро▒роХрпНроХро╛родрпАро░рпНроХро│рпН!

ЁЯТЦ роЕройрпНрокрпБроЯройрпН,
роХрпБроЯрпБроорпНрокроорпН`,overdue:`тЪая╕П роХро╡ройроорпН {name}!

ЁЯТ╕ родро╛роородрооро╛рой рокро┐ро▓рпН:
тАв {service}: тВ╣{amount}
тАв роХроЯрпИроЪро┐ родрпЗродро┐: {date}

ЁЯЪи роЙроЯройрпЗ роЪрпЖро▓рпБродрпНродро╡рпБроорпН!

ЁЯТЦ роЕройрпНрокрпБроЯройрпН,
роХрпБроЯрпБроорпНрокроорпН`},english:{reminder:`ЁЯЩП Hi {name}!

ЁЯТ░ Your {service} bill:
тАв Amount: тВ╣{amount}
тАв Due date: {date}

ЁЯУЕ Please pay on time!

ЁЯТЦ With love,
Family`,overdue:`тЪая╕П Attention {name}!

ЁЯТ╕ Overdue bill:
тАв {service}: тВ╣{amount}
тАв Due date: {date}

ЁЯЪи Please pay immediately!

ЁЯТЦ With love,
Family`}}};var ka=k('<div class="mt-4 pt-4 border-t border-gray-100"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Status</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>All Status</option><option>Upcoming</option><option>Pending</option><option>Paid</option><option>Overdue</option></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Sort By</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>Due Date</option><option>Amount</option><option>Provider</option><option>Type</option></select></div> <div class="flex items-end"><button class="w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">Clear Filters</button></div></div></div>'),$a=k('<div class="text-center py-12 bg-white rounded-lg border"><!> <h3 class="text-lg font-medium text-gray-900 mb-2">No recharges found</h3> <p class="text-gray-500">Try adjusting your search or filter criteria.</p></div>'),Ca=k('<div class="flex justify-between"><span class="text-sm text-gray-600">Number</span> <span class="text-sm font-mono"> </span></div>'),Ea=k('<button class="flex-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors">Mark Paid</button>'),Ba=k('<div class="bg-white rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all duration-200"><div class="p-4"><div class="flex items-start justify-between mb-3"><div class="flex items-center space-x-3"><div class="p-2 bg-gray-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900"> </h3> <p class="text-sm text-gray-500 capitalize"> </p></div></div> <span> </span></div> <div class="space-y-2 mb-4"><div class="flex justify-between"><span class="text-sm text-gray-600">Amount</span> <span class="text-sm font-semibold"> </span></div> <div class="flex justify-between"><span class="text-sm text-gray-600">Due Date</span> <span class="text-sm font-medium"> </span></div> <div class="flex justify-between"><span class="text-sm text-gray-600">Assigned To</span> <span class="text-sm font-medium"> </span></div> <!></div> <div class="flex space-x-2"><!> <button class="px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors"><!></button></div></div></div>'),Ra=k('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Oa=k('<button class="text-green-600 hover:text-green-900">Mark Paid</button>'),La=k('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="p-2 bg-gray-100 rounded-lg mr-3"><!></div> <div><div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500 capitalize"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"><!> <button class="text-blue-600 hover:text-blue-900">Remind</button></td></tr>'),Ua=k('<div class="bg-white rounded-lg border overflow-hidden"><div class="overflow-x-auto"><table class="min-w-full"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Due Date</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Assigned To</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),ja=k('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white rounded-lg p-4 shadow-sm border border-blue-100"><div class="flex items-center space-x-3"><div class="p-2 bg-blue-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Total Monthly</p> <p class="text-xl font-bold text-blue-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-amber-100"><div class="flex items-center space-x-3"><div class="p-2 bg-amber-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Upcoming</p> <p class="text-xl font-bold text-amber-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-red-100"><div class="flex items-center space-x-3"><div class="p-2 bg-red-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Overdue</p> <p class="text-xl font-bold text-red-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-green-100"><div class="flex items-center space-x-3"><div class="p-2 bg-green-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Paid</p> <p class="text-xl font-bold text-green-600"> </p></div></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"><div class="relative flex-1 max-w-md"><!> <input type="text" placeholder="Search recharges..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div class="flex items-center space-x-4"><div class="flex items-center bg-gray-100 rounded-lg p-1"><button><!></button> <button><!></button></div> <button class="flex items-center space-x-2 px-3 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"><!> <span class="text-sm">Filters</span></button></div></div> <!></div> <div class="space-y-4"><!></div></div>');function wr(Ke,l){xa(l,!1);const n=E(),c=E(),b=E(),y=E(),$=E();let Y=la(l,"viewMode",12,"grid"),u=la(l,"filterStatus",12,"all"),De=la(l,"sortBy",12,"dueDate"),V=E(""),fe=E(!1),G=E([...Re]);function z(g){switch(g){case R.PAID:return"text-green-600 bg-green-50";case R.PENDING:return"text-yellow-600 bg-yellow-50";case R.OVERDUE:return"text-red-600 bg-red-50";case R.UPCOMING:return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}}function ht(g){switch(g){case"mobile":return"heroicons:device-phone-mobile";case"broadband":return"heroicons:wifi";case"dth":return"heroicons:tv";case"electricity":return"heroicons:bolt";case"water":return"heroicons:beaker";case"gas":return"heroicons:fire";case"streaming":return"heroicons:play-circle";default:return"heroicons:credit-card"}}function Oe(g){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(g)}function wt(g){const D=new Date(g),ne=new Date,Ie=D.getTime()-ne.getTime(),de=Math.ceil(Ie/(1e3*60*60*24));return de<0?`${Math.abs(de)} days overdue`:de===0?"Due today":de===1?"Due tomorrow":de<=7?`Due in ${de} days`:D.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:D.getFullYear()!==ne.getFullYear()?"numeric":void 0})}function Dt(g){f(G,e(G).map(D=>D.id===g?{...D,status:R.PAID}:D))}function qe(g){alert(`Reminder sent to ${g.assignedTo.name} for ${g.provider} ${g.type}`)}xe(()=>(e(G),K(u()),e(V),K(De())),()=>{f(n,e(G).filter(g=>{if(u()!=="all"&&g.status!==u())return!1;if(e(V)){const D=e(V).toLowerCase();return g.provider.toLowerCase().includes(D)||g.type.toLowerCase().includes(D)||g.assignedTo.name.toLowerCase().includes(D)||g.number&&g.number.includes(D)}return!0}).sort((g,D)=>{switch(De()){case"amount":return D.amount-g.amount;case"provider":return g.provider.localeCompare(D.provider);case"type":return g.type.localeCompare(D.type);case"dueDate":default:return new Date(g.dueDate).getTime()-new Date(D.dueDate).getTime()}}))}),xe(()=>e(n),()=>{f(c,e(n).reduce((g,D)=>g+D.amount,0))}),xe(()=>(e(G),R),()=>{f(b,e(G).filter(g=>g.status===R.UPCOMING).length)}),xe(()=>(e(G),R),()=>{f(y,e(G).filter(g=>g.status===R.OVERDUE).length)}),xe(()=>(e(G),R),()=>{f($,e(G).filter(g=>g.status===R.PAID).length)}),fa(),ya();var st=ja(),Qe=a(st),Ot=a(Qe),It=a(Ot),Lt=a(It),Jt=a(Lt);M(Jt,{icon:"heroicons:banknotes",class:"w-6 h-6 text-blue-600"}),t(Lt);var Ut=r(Lt,2),Je=r(a(Ut),2),it=a(Je,!0);t(Je),t(Ut),t(It),t(Ot);var ot=r(Ot,2),He=a(ot),Tt=a(He),jt=a(Tt);M(jt,{icon:"heroicons:calendar-days",class:"w-6 h-6 text-amber-600"}),t(Tt);var Ft=r(Tt,2),St=r(a(Ft),2),nt=a(St,!0);t(St),t(Ft),t(He),t(ot);var dt=r(ot,2),Xe=a(dt),Pt=a(Xe),Xt=a(Pt);M(Xt,{icon:"heroicons:exclamation-triangle",class:"w-6 h-6 text-red-600"}),t(Pt);var Nt=r(Pt,2),Zt=r(a(Nt),2),lt=a(Zt,!0);t(Zt),t(Nt),t(Xe),t(dt);var At=r(dt,2),Ze=a(At),ct=a(Ze),ea=a(ct);M(ea,{icon:"heroicons:check-circle",class:"w-6 h-6 text-green-600"}),t(ct);var vt=r(ct,2),ta=r(a(vt),2),Mt=a(ta,!0);t(ta),t(vt),t(Ze),t(At),t(Qe);var ut=r(Qe,2),Ge=a(ut),pt=a(Ge),Ht=a(pt);M(Ht,{icon:"heroicons:magnifying-glass",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"});var gt=r(Ht,2);na(gt),t(pt);var aa=r(pt,2),et=a(aa),Le=a(et),kt=a(Le);M(kt,{icon:"heroicons:squares-2x2",class:"w-4 h-4"}),t(Le);var mt=r(Le,2),Gt=a(mt);M(Gt,{icon:"heroicons:list-bullet",class:"w-4 h-4"}),t(mt),t(et);var bt=r(et,2),zt=a(bt);M(zt,{icon:"heroicons:funnel",class:"w-4 h-4"}),yt(2),t(bt),t(aa),t(Ge);var $t=r(Ge,2);{var Wt=g=>{var D=ka(),ne=a(D),Ie=a(ne),de=r(a(Ie),2);C(()=>{u(),ft(()=>{})});var ee=a(de);ee.value=ee.__value="all";var se=r(ee);se.value=se.__value="upcoming";var ie=r(se);ie.value=ie.__value="pending";var h=r(ie);h.value=h.__value="paid";var _e=r(h);_e.value=_e.__value="overdue",t(de),t(Ie);var le=r(Ie,2),I=r(a(le),2);C(()=>{De(),ft(()=>{})});var pe=a(I);pe.value=pe.__value="dueDate";var ce=r(pe);ce.value=ce.__value="amount";var $e=r(ce);$e.value=$e.__value="provider";var Ce=r($e);Ce.value=Ce.__value="type",t(I),t(le);var Te=r(le,2),ze=a(Te);t(Te),t(ne),t(D),_t(de,u),_t(I,De),J("click",ze,()=>{f(V,""),u("all"),De("dueDate")}),A(g,D)};Fe($t,g=>{e(fe)&&g(Wt)})}t(ut);var Ct=r(ut,2),Et=a(Ct);{var Yt=g=>{var D=$a(),ne=a(D);M(ne,{icon:"heroicons:inbox",class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),yt(4),t(D),A(g,D)},xt=g=>{var D=Na(),ne=Ia(D);{var Ie=ee=>{var se=Ra();ke(se,5,()=>e(n),ie=>ie.id,(ie,h)=>{var _e=Ba(),le=a(_e),I=a(le),pe=a(I),ce=a(pe),$e=a(ce);{let i=da(()=>(e(h),o(()=>ht(e(h).type))));M($e,{get icon(){return e(i)},class:"w-5 h-5 text-gray-600"})}t(ce);var Ce=r(ce,2),Te=a(Ce),ze=a(Te,!0);t(Te);var v=r(Te,2),p=a(v,!0);t(v),t(Ce),t(pe);var _=r(pe,2),j=a(_,!0);t(_),t(I);var w=r(I,2),T=a(w),ve=r(a(T),2),Se=a(ve,!0);t(ve),t(T);var ye=r(T,2),Pe=r(a(ye),2),ge=a(Pe,!0);t(Pe),t(ye);var me=r(ye,2),he=r(a(me),2),Ue=a(he,!0);t(he),t(me);var We=r(me,2);{var Ee=i=>{var s=Ca(),m=r(a(s),2),x=a(m,!0);t(m),t(s),C(()=>d(x,(e(h),o(()=>e(h).number)))),A(i,s)};Fe(We,i=>{e(h),o(()=>e(h).number)&&i(Ee)})}t(w);var Ne=r(w,2),te=a(Ne);{var ue=i=>{var s=Ea();J("click",s,()=>Dt(e(h).id)),A(i,s)};Fe(te,i=>{e(h),K(R),o(()=>e(h).status!==R.PAID)&&i(ue)})}var Ae=r(te,2),tt=a(Ae);M(tt,{icon:"heroicons:paper-airplane",class:"w-4 h-4"}),t(Ae),t(Ne),t(le),t(_e),C((i,s,m)=>{d(ze,(e(h),o(()=>e(h).provider))),d(p,(e(h),o(()=>e(h).type))),be(_,1,`px-2 py-1 rounded-full text-xs font-medium ${i??""}`),d(j,(e(h),o(()=>e(h).status))),d(Se,s),d(ge,m),d(Ue,(e(h),o(()=>e(h).assignedTo.name)))},[()=>(e(h),o(()=>z(e(h).status))),()=>(e(h),o(()=>Oe(e(h).amount))),()=>(e(h),o(()=>wt(e(h).dueDate)))]),J("click",Ae,()=>qe(e(h))),A(ie,_e)}),t(se),A(ee,se)},de=ee=>{var se=Ua(),ie=a(se),h=a(ie),_e=r(a(h));ke(_e,5,()=>e(n),le=>le.id,(le,I)=>{var pe=La(),ce=a(pe),$e=a(ce),Ce=a($e),Te=a(Ce);{let te=da(()=>(e(I),o(()=>ht(e(I).type))));M(Te,{get icon(){return e(te)},class:"w-4 h-4 text-gray-600"})}t(Ce);var ze=r(Ce,2),v=a(ze),p=a(v,!0);t(v);var _=r(v,2),j=a(_,!0);t(_),t(ze),t($e),t(ce);var w=r(ce),T=a(w,!0);t(w);var ve=r(w),Se=a(ve,!0);t(ve);var ye=r(ve),Pe=a(ye,!0);t(ye);var ge=r(ye),me=a(ge),he=a(me,!0);t(me),t(ge);var Ue=r(ge),We=a(Ue);{var Ee=te=>{var ue=Oa();J("click",ue,()=>Dt(e(I).id)),A(te,ue)};Fe(We,te=>{e(I),K(R),o(()=>e(I).status!==R.PAID)&&te(Ee)})}var Ne=r(We,2);t(Ue),t(pe),C((te,ue,Ae)=>{d(p,(e(I),o(()=>e(I).provider))),d(j,(e(I),o(()=>e(I).type))),d(T,te),d(Se,ue),d(Pe,(e(I),o(()=>e(I).assignedTo.name))),be(me,1,`px-2 py-1 rounded-full text-xs font-medium ${Ae??""}`),d(he,(e(I),o(()=>e(I).status)))},[()=>(e(I),o(()=>Oe(e(I).amount))),()=>(e(I),o(()=>wt(e(I).dueDate))),()=>(e(I),o(()=>z(e(I).status)))]),J("click",Ne,()=>qe(e(I))),A(le,pe)}),t(_e),t(h),t(ie),t(se),A(ee,se)};Fe(ne,ee=>{Y()==="grid"?ee(Ie):ee(de,!1)},!0)}A(g,D)};Fe(Et,g=>{e(n),o(()=>e(n).length===0)?g(Yt):g(xt,!1)})}t(Ct),t(st),C(g=>{d(it,g),d(nt,e(b)),d(lt,e(y)),d(Mt,e($)),be(Le,1,`p-2 rounded-md transition-colors ${Y()==="grid"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"}`),be(mt,1,`p-2 rounded-md transition-colors ${Y()==="list"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"}`)},[()=>(e(c),o(()=>Oe(e(c))))]),Qt(gt,()=>e(V),g=>f(V,g)),J("click",Le,()=>Y("grid")),J("click",mt,()=>Y("list")),J("click",bt,()=>f(fe,!e(fe))),A(Ke,st),_a()}var Fa=k("<option> </option>"),Ha=k("<option> </option>"),Ga=k('<div class="text-center py-12"><!> <h3 class="text-lg font-medium text-gray-900 mb-2">No expenses found</h3> <p class="text-gray-500">Add your first expense or adjust the filters.</p></div>'),za=k('<span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full"> </span>'),Wa=k('<div class="flex flex-wrap gap-1 mt-1"></div>'),Ya=k('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4"><div><div class="text-sm font-medium text-gray-900"> </div> <!></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><span class="mr-2"> </span> <span class="text-sm text-gray-900"> </span></div></td><td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full capitalize"> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"><button class="text-blue-600 hover:text-blue-900">Edit</button> <button class="text-red-600 hover:text-red-900">Delete</button></td></tr>'),Va=k('<div class="overflow-x-auto"><table class="min-w-full"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Paid By</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Payment</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),Ka=k("<option> </option>"),qa=k("<option> </option>"),Qa=k("<option> </option>"),Ja=k('<span class="flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-sm"><span> </span> <button type="button" class="text-blue-500 hover:text-blue-700"><!></button></span>'),Xa=k('<div class="flex flex-wrap gap-2"></div>'),Za=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex items-center justify-between mb-4"><h2 class="text-xl font-bold text-gray-900"> </h2> <button class="text-gray-400 hover:text-gray-600"><!></button></div> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Amount *</label> <input type="number" step="0.01" placeholder="Enter amount" class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500" required/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Date *</label> <input type="date" class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500" required/></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Description *</label> <input type="text" placeholder="What did you spend on?" class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500" required/></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Category *</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500" required><option>Select category</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Paid By *</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500" required><option>Select member</option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Beneficiary</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>Whole family</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Payment Method</label> <select class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>Cash</option><option>Debit/Credit Card</option><option>UPI</option><option>Net Banking</option><option>Other</option></select></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Tags</label> <div class="flex space-x-2 mb-2"><input type="text" placeholder="Add tag" class="flex-1 p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"/> <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Add</button></div> <!></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Notes</label> <textarea placeholder="Additional notes..." rows="3" class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea></div> <div class="flex justify-end space-x-3 pt-4 border-t"><button type="button" class="px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"> </button></div></form></div></div></div>'),er=k('<div class="space-y-6"><div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"><div><h1 class="text-2xl font-bold text-gray-900">Expense Tracker</h1> <p class="text-gray-600">Track and manage family expenses</p></div> <div class="flex space-x-3"><button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2"><!> <span>Add Expense</span></button> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2"><!> <span>Export</span></button></div></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white rounded-lg p-4 shadow-sm border border-blue-100"><div class="flex items-center space-x-3"><div class="p-2 bg-blue-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Total Expenses</p> <p class="text-xl font-bold text-blue-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-purple-100"><div class="flex items-center space-x-3"><div class="p-2 bg-purple-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Transactions</p> <p class="text-xl font-bold text-purple-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-emerald-100"><div class="flex items-center space-x-3"><div class="p-2 bg-emerald-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Categories</p> <p class="text-xl font-bold text-emerald-600"> </p></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-amber-100"><div class="flex items-center space-x-3"><div class="p-2 bg-amber-100 rounded-lg"><!></div> <div><p class="text-sm text-gray-600">Avg. per day</p> <p class="text-xl font-bold text-amber-600"> </p></div></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="grid grid-cols-1 md:grid-cols-5 gap-4"><div class="relative"><!> <input type="text" placeholder="Search expenses..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <select class="p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>All Categories</option><!></select> <select class="p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>All Members</option><!></select> <select class="p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"><option>All Time</option><option>Today</option><option>This Week</option><option>This Month</option><option>This Year</option></select> <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">Clear</button></div></div> <div class="bg-white rounded-lg shadow-sm border"><!></div></div> <!>',1);function Dr(Ke,l){xa(l,!1);const n=E(),c=E(),b=E();let y=la(l,"onExpenseAdded",8,null),$=E(!1),Y=E([]),u=E({id:null,amount:"",description:"",category:"",subcategory:"",memberPaidId:"",memberBeneficiaryId:"",date:new Date().toISOString().split("T")[0],paymentMethod:"cash",tags:[],receipt:null,notes:""}),De=E(""),V=E("all"),fe=E("all"),G=E("this_month"),z=E("");Ta(()=>{f(Y,[{id:1,amount:2500,description:"Groceries from Saravana Stores",category:W.FOOD,subcategory:"Groceries",memberPaidId:2,memberBeneficiaryId:null,date:"2025-10-05",paymentMethod:"upi",tags:["groceries","monthly"],receipt:null,notes:"Monthly grocery shopping"},{id:2,amount:500,description:"Temple donation - Vinayagar Chaturthi",category:W.SPIRITUAL,subcategory:"Temple donation",memberPaidId:3,memberBeneficiaryId:null,date:"2025-10-04",paymentMethod:"cash",tags:["temple","festival","donation"],receipt:null,notes:"Special festival donation"},{id:3,amount:1200,description:"College textbooks",category:W.EDUCATION,subcategory:"Books",memberPaidId:1,memberBeneficiaryId:5,date:"2025-10-03",paymentMethod:"card",tags:["education","books","college"],receipt:null,notes:"Engineering semester books"}])});function ht(v){return ca.find(p=>p.id===v)||{name:"Other",icon:"тЭУ",color:"text-gray-600"}}function Oe(v){if(!v)return"Family";const p=X.find(_=>_.id===v);return p?p.name:"Unknown"}function wt(v){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(v)}function Dt(v){return new Date(v).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function qe(){f(u,{id:null,amount:"",description:"",category:"",subcategory:"",memberPaidId:"",memberBeneficiaryId:"",date:new Date().toISOString().split("T")[0],paymentMethod:"cash",tags:[],receipt:null,notes:""}),f(z,"")}function st(){e(z).trim()&&!e(u).tags.includes(e(z).trim())&&(rt(u,e(u).tags=[...e(u).tags,e(z).trim()]),f(z,""))}function Qe(v){rt(u,e(u).tags=e(u).tags.filter(p=>p!==v))}function Ot(){if(!e(u).amount||!e(u).description||!e(u).category||!e(u).memberPaidId){alert("Please fill in all required fields");return}const v={...e(u),id:e(u).id||Date.now(),amount:parseFloat(e(u).amount),memberPaidId:parseInt(e(u).memberPaidId),memberBeneficiaryId:e(u).memberBeneficiaryId?parseInt(e(u).memberBeneficiaryId):null};e(u).id?f(Y,e(Y).map(p=>p.id===e(u).id?v:p)):f(Y,[v,...e(Y)]),y()&&y()(v),qe(),f($,!1)}function It(v){f(u,{...v,amount:v.amount.toString(),memberPaidId:v.memberPaidId.toString(),memberBeneficiaryId:v.memberBeneficiaryId?v.memberBeneficiaryId.toString():""}),f($,!0)}function Lt(v){confirm("Are you sure you want to delete this expense?")&&f(Y,e(Y).filter(p=>p.id!==v))}function Jt(){const v=[["Date","Description","Category","Amount","Paid By","Beneficiary","Payment Method","Tags","Notes"],...e(n).map(w=>[w.date,w.description,ht(w.category).name,w.amount,Oe(w.memberPaidId),Oe(w.memberBeneficiaryId),w.paymentMethod,w.tags.join("; "),w.notes])].map(w=>w.map(T=>`"${T}"`).join(",")).join(`
`),p=new Blob([v],{type:"text/csv"}),_=window.URL.createObjectURL(p),j=document.createElement("a");j.href=_,j.download=`expenses_${new Date().toISOString().split("T")[0]}.csv`,j.click(),window.URL.revokeObjectURL(_)}xe(()=>(e(Y),e(De),e(V),e(fe),e(G)),()=>{f(n,e(Y).filter(v=>{if(e(De)){const j=e(De).toLowerCase();if(!v.description.toLowerCase().includes(j)&&!v.tags.some(w=>w.toLowerCase().includes(j))&&!Oe(v.memberPaidId).toLowerCase().includes(j))return!1}if(e(V)!=="all"&&v.category!==e(V)||e(fe)!=="all"&&v.memberPaidId.toString()!==e(fe))return!1;const p=new Date(v.date),_=new Date;switch(e(G)){case"today":return p.toDateString()===_.toDateString();case"this_week":const j=new Date(_.getTime()-10080*60*1e3);return p>=j;case"this_month":return p.getMonth()===_.getMonth()&&p.getFullYear()===_.getFullYear();case"this_year":return p.getFullYear()===_.getFullYear();default:return!0}}))}),xe(()=>e(n),()=>{f(c,e(n).reduce((v,p)=>v+p.amount,0))}),xe(()=>e(n),()=>{f(b,e(n).reduce((v,p)=>(v[p.category]=(v[p.category]||0)+p.amount,v),{}))}),fa(),ya();var Ut=er(),Je=Ia(Ut),it=a(Je),ot=r(a(it),2),He=a(ot),Tt=a(He);M(Tt,{icon:"heroicons:plus",class:"w-4 h-4"}),yt(2),t(He);var jt=r(He,2),Ft=a(jt);M(Ft,{icon:"heroicons:arrow-down-tray",class:"w-4 h-4"}),yt(2),t(jt),t(ot),t(it);var St=r(it,2),nt=a(St),dt=a(nt),Xe=a(dt),Pt=a(Xe);M(Pt,{icon:"heroicons:banknotes",class:"w-6 h-6 text-blue-600"}),t(Xe);var Xt=r(Xe,2),Nt=r(a(Xt),2),Zt=a(Nt,!0);t(Nt),t(Xt),t(dt),t(nt);var lt=r(nt,2),At=a(lt),Ze=a(At),ct=a(Ze);M(ct,{icon:"heroicons:tag",class:"w-6 h-6 text-purple-600"}),t(Ze);var ea=r(Ze,2),vt=r(a(ea),2),ta=a(vt,!0);t(vt),t(ea),t(At),t(lt);var Mt=r(lt,2),ut=a(Mt),Ge=a(ut),pt=a(Ge);M(pt,{icon:"heroicons:chart-pie",class:"w-6 h-6 text-emerald-600"}),t(Ge);var Ht=r(Ge,2),gt=r(a(Ht),2),aa=a(gt,!0);t(gt),t(Ht),t(ut),t(Mt);var et=r(Mt,2),Le=a(et),kt=a(Le),mt=a(kt);M(mt,{icon:"heroicons:calculator",class:"w-6 h-6 text-amber-600"}),t(kt);var Gt=r(kt,2),bt=r(a(Gt),2),zt=a(bt,!0);t(bt),t(Gt),t(Le),t(et),t(St);var $t=r(St,2),Wt=a($t),Ct=a(Wt),Et=a(Ct);M(Et,{icon:"heroicons:magnifying-glass",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"});var Yt=r(Et,2);na(Yt),t(Ct);var xt=r(Ct,2);C(()=>{e(V),ft(()=>{})});var g=a(xt);g.value=g.__value="all";var D=r(g);ke(D,1,()=>ca,Ve,(v,p)=>{var _=Fa(),j=a(_);t(_);var w={};C(()=>{d(j,`${e(p),o(()=>e(p).icon)??""} ${e(p),o(()=>e(p).name)??""}`),w!==(w=(e(p),o(()=>e(p).id)))&&(_.value=(_.__value=(e(p),o(()=>e(p).id)))??"")}),A(v,_)}),t(xt);var ne=r(xt,2);C(()=>{e(fe),ft(()=>{})});var Ie=a(ne);Ie.value=Ie.__value="all";var de=r(Ie);ke(de,1,()=>X,Ve,(v,p)=>{var _=Ha(),j=a(_);t(_);var w={};C(()=>{d(j,`${e(p),o(()=>e(p).avatar)??""} ${e(p),o(()=>e(p).name)??""}`),w!==(w=(e(p),o(()=>e(p).id)))&&(_.value=(_.__value=(e(p),o(()=>e(p).id)))??"")}),A(v,_)}),t(ne);var ee=r(ne,2);C(()=>{e(G),ft(()=>{})});var se=a(ee);se.value=se.__value="all";var ie=r(se);ie.value=ie.__value="today";var h=r(ie);h.value=h.__value="this_week";var _e=r(h);_e.value=_e.__value="this_month";var le=r(_e);le.value=le.__value="this_year",t(ee);var I=r(ee,2);t(Wt),t($t);var pe=r($t,2),ce=a(pe);{var $e=v=>{var p=Ga(),_=a(p);M(_,{icon:"heroicons:receipt-percent",class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),yt(4),t(p),A(v,p)},Ce=v=>{var p=Va(),_=a(p),j=r(a(_));ke(j,5,()=>e(n),w=>w.id,(w,T)=>{const ve=da(()=>(e(T),o(()=>ht(e(T).category))));var Se=Ya(),ye=a(Se),Pe=a(ye,!0);t(ye);var ge=r(ye),me=a(ge),he=a(me),Ue=a(he,!0);t(he);var We=r(he,2);{var Ee=U=>{var O=Wa();ke(O,5,()=>(e(T),o(()=>e(T).tags)),Ve,(q,Q)=>{var oe=za(),we=a(oe,!0);t(oe),C(()=>d(we,e(Q))),A(q,oe)}),t(O),A(U,O)};Fe(We,U=>{e(T),o(()=>e(T).tags.length>0)&&U(Ee)})}t(me),t(ge);var Ne=r(ge),te=a(Ne),ue=a(te),Ae=a(ue,!0);t(ue);var tt=r(ue,2),i=a(tt,!0);t(tt),t(te),t(Ne);var s=r(Ne),m=a(s,!0);t(s);var x=r(s),F=a(x,!0);t(x);var S=r(x),H=a(S),B=a(H,!0);t(H),t(S);var L=r(S),ae=a(L),Z=r(ae,2);t(L),t(Se),C((U,O,q)=>{d(Pe,U),d(Ue,(e(T),o(()=>e(T).description))),d(Ae,(K(e(ve)),o(()=>e(ve).icon))),d(i,(K(e(ve)),o(()=>e(ve).name))),d(m,O),d(F,q),d(B,(e(T),o(()=>e(T).paymentMethod)))},[()=>(e(T),o(()=>Dt(e(T).date))),()=>(e(T),o(()=>wt(e(T).amount))),()=>(e(T),o(()=>Oe(e(T).memberPaidId)))]),J("click",ae,()=>It(e(T))),J("click",Z,()=>Lt(e(T).id)),A(w,Se)}),t(j),t(_),t(p),A(v,p)};Fe(ce,v=>{e(n),o(()=>e(n).length===0)?v($e):v(Ce,!1)})}t(pe),t(Je);var Te=r(Je,2);{var ze=v=>{var p=Za(),_=a(p),j=a(_),w=a(j),T=a(w),ve=a(T,!0);t(T);var Se=r(T,2),ye=a(Se);M(ye,{icon:"heroicons:x-mark",class:"w-6 h-6"}),t(Se),t(w);var Pe=r(w,2),ge=a(Pe),me=a(ge),he=r(a(me),2);na(he),t(me);var Ue=r(me,2),We=r(a(Ue),2);na(We),t(Ue),t(ge);var Ee=r(ge,2),Ne=r(a(Ee),2);na(Ne),t(Ee);var te=r(Ee,2),ue=a(te),Ae=r(a(ue),2);C(()=>{e(u),ft(()=>{})});var tt=a(Ae);tt.value=tt.__value="";var i=r(tt);ke(i,1,()=>ca,Ve,(P,N)=>{var re=Ka(),Rt=a(re);t(re);var je={};C(()=>{d(Rt,`${e(N),o(()=>e(N).icon)??""} ${e(N),o(()=>e(N).name)??""}`),je!==(je=(e(N),o(()=>e(N).id)))&&(re.value=(re.__value=(e(N),o(()=>e(N).id)))??"")}),A(P,re)}),t(Ae),t(ue);var s=r(ue,2),m=r(a(s),2);C(()=>{e(u),ft(()=>{})});var x=a(m);x.value=x.__value="";var F=r(x);ke(F,1,()=>X,Ve,(P,N)=>{var re=qa(),Rt=a(re);t(re);var je={};C(()=>{d(Rt,`${e(N),o(()=>e(N).avatar)??""} ${e(N),o(()=>e(N).name)??""}`),je!==(je=(e(N),o(()=>e(N).id)))&&(re.value=(re.__value=(e(N),o(()=>e(N).id)))??"")}),A(P,re)}),t(m),t(s),t(te);var S=r(te,2),H=a(S),B=r(a(H),2);C(()=>{e(u),ft(()=>{})});var L=a(B);L.value=L.__value="";var ae=r(L);ke(ae,1,()=>X,Ve,(P,N)=>{var re=Qa(),Rt=a(re);t(re);var je={};C(()=>{d(Rt,`${e(N),o(()=>e(N).avatar)??""} ${e(N),o(()=>e(N).name)??""}`),je!==(je=(e(N),o(()=>e(N).id)))&&(re.value=(re.__value=(e(N),o(()=>e(N).id)))??"")}),A(P,re)}),t(B),t(H);var Z=r(H,2),U=r(a(Z),2);C(()=>{e(u),ft(()=>{})});var O=a(U);O.value=O.__value="cash";var q=r(O);q.value=q.__value="card";var Q=r(q);Q.value=Q.__value="upi";var oe=r(Q);oe.value=oe.__value="netbanking";var we=r(oe);we.value=we.__value="other",t(U),t(Z),t(S);var Be=r(S,2),at=r(a(Be),2),Me=a(at);na(Me);var Vt=r(Me,2);t(at);var ra=r(at,2);{var Kt=P=>{var N=Xa();ke(N,5,()=>(e(u),o(()=>e(u).tags)),Ve,(re,Rt)=>{var je=Ja(),ma=a(je),Sa=a(ma,!0);t(ma);var ba=r(ma,2),Pa=a(ba);M(Pa,{icon:"heroicons:x-mark",class:"w-3 h-3"}),t(ba),t(je),C(()=>d(Sa,e(Rt))),J("click",ba,()=>Qe(e(Rt))),A(re,je)}),t(N),A(P,N)};Fe(ra,P=>{e(u),o(()=>e(u).tags.length>0)&&P(Kt)})}t(Be);var Bt=r(Be,2),qt=r(a(Bt),2);Aa(qt),t(Bt);var sa=r(Bt,2),ia=a(sa),va=r(ia,2),ga=a(va,!0);t(va),t(sa),t(Pe),t(j),t(_),t(p),C(()=>{d(ve,(e(u),o(()=>e(u).id?"Edit Expense":"Add New Expense"))),d(ga,(e(u),o(()=>e(u).id?"Update Expense":"Add Expense")))}),J("click",Se,()=>{f($,!1),qe()}),Qt(he,()=>e(u).amount,P=>rt(u,e(u).amount=P)),Qt(We,()=>e(u).date,P=>rt(u,e(u).date=P)),Qt(Ne,()=>e(u).description,P=>rt(u,e(u).description=P)),_t(Ae,()=>e(u).category,P=>rt(u,e(u).category=P)),_t(m,()=>e(u).memberPaidId,P=>rt(u,e(u).memberPaidId=P)),_t(B,()=>e(u).memberBeneficiaryId,P=>rt(u,e(u).memberBeneficiaryId=P)),_t(U,()=>e(u).paymentMethod,P=>rt(u,e(u).paymentMethod=P)),Qt(Me,()=>e(z),P=>f(z,P)),J("keydown",Me,P=>P.key==="Enter"&&(P.preventDefault(),st())),J("click",Vt,st),Qt(qt,()=>e(u).notes,P=>rt(u,e(u).notes=P)),J("click",ia,()=>{f($,!1),qe()}),J("submit",Pe,Ma(Ot)),A(v,p)};Fe(Te,v=>{e($)&&v(ze)})}C((v,p,_)=>{d(Zt,v),d(ta,(e(n),o(()=>e(n).length))),d(aa,p),d(zt,_)},[()=>(e(c),o(()=>wt(e(c)))),()=>(e(b),o(()=>Object.keys(e(b)).length)),()=>(e(c),o(()=>wt(e(c)/30)))]),J("click",He,()=>f($,!0)),J("click",jt,Jt),Qt(Yt,()=>e(De),v=>f(De,v)),_t(xt,()=>e(V),v=>f(V,v)),_t(ne,()=>e(fe),v=>f(fe,v)),_t(ee,()=>e(G),v=>f(G,v)),J("click",I,()=>{f(De,""),f(V,"all"),f(fe,"all"),f(G,"this_month")}),A(Ke,Ut),_a()}var tr=k('<div><span class="text-2xl"> </span> <div class="flex-1"><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p></div> <!></div>'),ar=k('<div class="bg-white rounded-lg border shadow-sm p-4"><h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center"><!> </h2> <div class="space-y-3"></div></div>'),rr=k('<div class="border rounded-lg p-4"><div class="flex items-center justify-between mb-2"><div class="flex items-center space-x-3"><span class="text-xl"> </span> <div><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p></div></div> <span> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div></div></div> <div class="mt-2 flex justify-between text-xs text-gray-600"><span> </span> <span> </span></div></div>'),sr=k('<div class="flex items-center justify-between"><div class="flex items-center space-x-3"><div></div> <span class="text-sm font-medium"> </span></div> <div class="text-right"><div class="text-sm font-semibold"> </div> <div class="text-xs text-gray-500"> </div></div></div>'),ir=k('<div class="border rounded-lg p-4"><div class="flex items-center space-x-3 mb-3"><span class="text-2xl"> </span> <div><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500 capitalize"> </p></div></div> <div class="space-y-2"><div class="flex justify-between text-sm"><span class="text-gray-600">Monthly Budget:</span> <span class="font-medium"> </span></div> <div class="flex justify-between text-sm"><span class="text-gray-600">Allocated Bills:</span> <span class="font-medium"> </span></div> <div class="flex justify-between text-sm"><span class="text-gray-600">Remaining:</span> <span> </span></div></div> <div class="mt-3"><div class="w-full bg-gray-200 rounded-full h-2"><div></div></div> <div class="mt-1 text-xs text-gray-600 text-center"> </div></div></div>'),or=k('<div class="bg-white rounded-lg shadow-sm border"><div class="p-6 border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-900">Budget Projections</h2></div> <div class="p-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="text-center p-4 bg-blue-50 rounded-lg"><h3 class="font-medium text-blue-900 mb-2">Projected Monthly</h3> <p class="text-2xl font-bold text-blue-600"> </p> <p class="text-sm text-blue-700 mt-1"> </p></div> <div class="text-center p-4 bg-purple-50 rounded-lg"><h3 class="font-medium text-purple-900 mb-2">Projected Yearly</h3> <p class="text-2xl font-bold text-purple-600"> </p> <p class="text-sm text-purple-700 mt-1">Based on current trends</p></div> <div class="text-center p-4 bg-green-50 rounded-lg"><h3 class="font-medium text-green-900 mb-2">Potential Savings</h3> <p> </p> <p class="text-sm text-green-700 mt-1"> </p></div></div></div></div>'),nr=k('<div class="space-y-6"><div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"><div><h1 class="text-2xl font-bold text-gray-900">Budget Dashboard</h1> <p class="text-gray-600">Track and analyze family spending patterns</p></div> <div class="flex space-x-3"><button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2"><!> <span>Projections</span></button> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2"><!> <span>Export</span></button></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white rounded-lg p-6 shadow-sm border"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">Total Budget</p> <p class="text-2xl font-bold text-blue-600"> </p></div> <div class="p-3 bg-blue-100 rounded-lg"><!></div></div></div> <div class="bg-white rounded-lg p-6 shadow-sm border"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">Total Spent</p> <p class="text-2xl font-bold text-orange-600"> </p></div> <div class="p-3 bg-orange-100 rounded-lg"><!></div></div></div> <div class="bg-white rounded-lg p-6 shadow-sm border"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">Remaining</p> <p> </p></div> <div><!></div></div></div> <div class="bg-white rounded-lg p-6 shadow-sm border"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">Budget Used</p> <p> </p></div> <div><!></div></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="bg-white rounded-lg shadow-sm border"><div class="p-6 border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-900">Category Breakdown</h2></div> <div class="p-6"><div class="space-y-4"></div></div></div> <div class="bg-white rounded-lg shadow-sm border"><div class="p-6 border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-900">Spending Distribution</h2></div> <div class="p-6"><div class="space-y-3"></div> <div class="mt-6 h-32 bg-gray-50 rounded-lg flex items-center justify-center"><div class="text-center text-gray-500"><!> <p class="text-sm">Interactive chart would render here</p></div></div></div></div></div> <div class="bg-white rounded-lg shadow-sm border"><div class="p-6 border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-900">Family Member Budgets</h2></div> <div class="p-6"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div></div></div> <!> <div class="bg-white rounded-lg shadow-sm border"><div class="p-6 border-b border-gray-100"><h2 class="text-lg font-semibold text-gray-900">Monthly Bills & Recharges</h2></div> <div class="p-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h3 class="font-medium text-gray-900 mb-3">Fixed Monthly Expenses</h3> <div class="space-y-2"><div class="flex justify-between"><span class="text-gray-600">Mobile Recharges:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Utilities (Electricity, Water, Gas):</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Internet & TV:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Streaming Services:</span> <span class="font-medium"> </span></div> <div class="flex justify-between font-semibold border-t pt-2"><span>Total Monthly Bills:</span> <span> </span></div></div></div> <div><h3 class="font-medium text-gray-900 mb-3">Yearly Renewals</h3> <div class="space-y-2"><div class="flex justify-between"><span class="text-gray-600">Insurance (Life & Health):</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Property Tax:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Vehicle Insurance:</span> <span class="font-medium"> </span></div> <div class="flex justify-between font-semibold border-t pt-2"><span>Total Yearly Renewals:</span> <span> </span></div> <div class="flex justify-between text-sm text-gray-600"><span>Monthly Average:</span> <span> </span></div></div></div></div></div></div></div>');function Ir(Ke,l){xa(l,!1);const n=E(),c=E(),b=E(),y=E(),$=E(),Y=E(),u=E();let De=la(l,"selectedPeriod",8,"monthly");la(l,"selectedMember",8,"all");let V=E([]),fe=E(!1),G=E([{category:"food",amount:8500,budget:12e3,date:"2025-10-01"},{category:"spiritual",amount:2500,budget:3e3,date:"2025-10-02"},{category:"education",amount:4200,budget:8e3,date:"2025-10-03"},{category:"health",amount:1800,budget:5e3,date:"2025-10-04"},{category:"transport",amount:6500,budget:8e3,date:"2025-10-05"},{category:"household",amount:3200,budget:4e3,date:"2025-10-06"},{category:"digital_subscriptions",amount:2800,budget:3500,date:"2025-10-07"},{category:"entertainment",amount:1500,budget:2500,date:"2025-10-08"}]);Ta(()=>{Oe()});function z(i){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(i)}function ht(i){switch(i){case"danger":case"over":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-amber-600 bg-amber-50 border-amber-200";case"good":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}function Oe(){const i=e(c)/new Date().getDate(),s=new Date(2025,9,0).getDate(),m=i*s,x=m*12;return{monthly:m,yearly:x,savings:e(n)-m}}function wt(){const i={period:De(),generatedAt:new Date().toISOString(),summary:{totalBudget:e(n),totalSpent:e(c),totalRemaining:e(b),budgetUtilization:e(y)},categoryBreakdown:e($),memberBudgets:e(Y),alerts:e(V),projections:Oe()},s=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),m=window.URL.createObjectURL(s),x=document.createElement("a");x.href=m,x.download=`budget_report_${new Date().toISOString().split("T")[0]}.json`,x.click(),window.URL.revokeObjectURL(m)}xe(()=>e(G),()=>{f(n,e(G).reduce((i,s)=>i+s.budget,0))}),xe(()=>e(G),()=>{f(c,e(G).reduce((i,s)=>i+s.amount,0))}),xe(()=>(e(n),e(c)),()=>{f(b,e(n)-e(c))}),xe(()=>(e(c),e(n)),()=>{f(y,e(c)/e(n)*100)}),xe(()=>(e(G),ca),()=>{f($,e(G).map(i=>{const s=ca.find(F=>F.id===i.category),m=i.amount/i.budget*100,x=i.budget-i.amount;return{...i,categoryDetails:s,utilization:m,remaining:x,status:m>90?"danger":m>75?"warning":"good"}}).sort((i,s)=>s.utilization-i.utilization))}),xe(()=>Ye,()=>{f(Y,X.map(i=>{const s=Re.filter(S=>S.assignedTo.id===i.id),m=Ye.filter(S=>S.assignedTo.id===i.id),x=s.reduce((S,H)=>S+H.amount,0),F=m.reduce((S,H)=>S+H.amount,0);return{...i,allocatedMonthly:x,allocatedYearly:F,budgetUtilization:x/i.monthlyBudget*100,remaining:i.monthlyBudget-x,status:x>i.monthlyBudget?"over":x>i.monthlyBudget*.9?"warning":"good"}}))}),xe(()=>(e($),e(Y)),()=>{f(V,[...e($).filter(i=>i.utilization>85).map(i=>({type:"category_high",severity:i.utilization>95?"danger":"warning",title:`${i.categoryDetails.name} Budget Alert`,message:`${i.utilization.toFixed(1)}% of budget used (тВ╣${i.amount.toLocaleString()} of тВ╣${i.budget.toLocaleString()})`,icon:i.categoryDetails.icon,category:i.category})),...e(Y).filter(i=>i.budgetUtilization>85).map(i=>({type:"member_high",severity:i.budgetUtilization>100?"danger":"warning",title:`${i.name} Budget Alert`,message:`${i.budgetUtilization.toFixed(1)}% of monthly budget allocated`,icon:i.avatar,memberId:i.id}))])}),xe(()=>e($),()=>{f(u,e($).map(i=>({label:i.categoryDetails.name,value:i.amount,color:i.categoryDetails.color.replace("text-","bg-"),icon:i.categoryDetails.icon})))}),fa(),ya();var Dt=nr(),qe=a(Dt),st=r(a(qe),2),Qe=a(st),Ot=a(Qe);M(Ot,{icon:"heroicons:chart-bar",class:"w-4 h-4"}),yt(2),t(Qe);var It=r(Qe,2),Lt=a(It);M(Lt,{icon:"heroicons:arrow-down-tray",class:"w-4 h-4"}),yt(2),t(It),t(st),t(qe);var Jt=r(qe,2);{var Ut=i=>{var s=ar(),m=a(s),x=a(m);M(x,{icon:"heroicons:exclamation-triangle",class:"w-5 h-5 text-amber-600 mr-2"});var F=r(x);t(m);var S=r(m,2);ke(S,5,()=>e(V),Ve,(H,B)=>{var L=tr(),ae=a(L),Z=a(ae,!0);t(ae);var U=r(ae,2),O=a(U),q=a(O,!0);t(O);var Q=r(O,2),oe=a(Q,!0);t(Q),t(U);var we=r(U,2);M(we,{icon:"heroicons:chevron-right",class:"w-4 h-4 text-gray-400"}),t(L),C(Be=>{be(L,1,`flex items-start space-x-3 p-3 rounded-lg border ${Be??""}`),d(Z,(e(B),o(()=>e(B).icon))),d(q,(e(B),o(()=>e(B).title))),d(oe,(e(B),o(()=>e(B).message)))},[()=>(e(B),o(()=>ht(e(B).severity)))]),A(H,L)}),t(S),t(s),C(()=>d(F,` Budget Alerts (${e(V),o(()=>e(V).length)??""})`)),A(i,s)};Fe(Jt,i=>{e(V),o(()=>e(V).length>0)&&i(Ut)})}var Je=r(Jt,2),it=a(Je),ot=a(it),He=a(ot),Tt=r(a(He),2),jt=a(Tt,!0);t(Tt),t(He);var Ft=r(He,2),St=a(Ft);M(St,{icon:"heroicons:banknotes",class:"w-6 h-6 text-blue-600"}),t(Ft),t(ot),t(it);var nt=r(it,2),dt=a(nt),Xe=a(dt),Pt=r(a(Xe),2),Xt=a(Pt,!0);t(Pt),t(Xe);var Nt=r(Xe,2),Zt=a(Nt);M(Zt,{icon:"heroicons:credit-card",class:"w-6 h-6 text-orange-600"}),t(Nt),t(dt),t(nt);var lt=r(nt,2),At=a(lt),Ze=a(At),ct=r(a(Ze),2),ea=a(ct,!0);t(ct),t(Ze);var vt=r(Ze,2),ta=a(vt);{let i=da(()=>e(b)>=0?"text-green-600":"text-red-600");M(ta,{icon:"heroicons:wallet",get class(){return`w-6 h-6 ${e(i)??""}`}})}t(vt),t(At),t(lt);var Mt=r(lt,2),ut=a(Mt),Ge=a(ut),pt=r(a(Ge),2),Ht=a(pt);t(pt),t(Ge);var gt=r(Ge,2),aa=a(gt);{let i=da(()=>e(y)>90?"text-red-600":e(y)>75?"text-amber-600":"text-green-600");M(aa,{icon:"heroicons:chart-pie",get class(){return`w-6 h-6 ${e(i)??""}`}})}t(gt),t(ut),t(Mt),t(Je);var et=r(Je,2),Le=a(et),kt=r(a(Le),2),mt=a(kt);ke(mt,5,()=>e($),Ve,(i,s)=>{var m=rr(),x=a(m),F=a(x),S=a(F),H=a(S,!0);t(S);var B=r(S,2),L=a(B),ae=a(L,!0);t(L);var Z=r(L,2),U=a(Z);t(Z),t(B),t(F);var O=r(F,2),q=a(O);t(O),t(x);var Q=r(x,2),oe=a(Q);t(Q);var we=r(Q,2),Be=a(we),at=a(Be);t(Be);var Me=r(Be,2),Vt=a(Me,!0);t(Me),t(we),t(m),C((ra,Kt,Bt,qt,sa,ia)=>{d(H,(e(s),o(()=>e(s).categoryDetails.icon))),d(ae,(e(s),o(()=>e(s).categoryDetails.name))),d(U,`${ra??""} of ${Kt??""}`),be(O,1,`text-sm font-medium ${e(s),o(()=>e(s).utilization>90?"text-red-600":e(s).utilization>75?"text-amber-600":"text-green-600")??""}`),d(q,`${Bt??""}%`),be(oe,1,`h-2 rounded-full transition-all duration-500 ${e(s),o(()=>e(s).utilization>90?"bg-red-500":e(s).utilization>75?"bg-amber-500":"bg-green-500")??""}`),ha(oe,`width: ${qt??""}%`),d(at,`Remaining: ${sa??""}`),be(Me,1,`px-2 py-1 rounded-full ${ia??""} text-xs`),d(Vt,(e(s),o(()=>e(s).status==="danger"?"Over Budget":e(s).status==="warning"?"Near Limit":"On Track")))},[()=>(e(s),o(()=>z(e(s).amount))),()=>(e(s),o(()=>z(e(s).budget))),()=>(e(s),o(()=>e(s).utilization.toFixed(1))),()=>(e(s),o(()=>Math.min(e(s).utilization,100))),()=>(e(s),o(()=>z(e(s).remaining))),()=>(e(s),o(()=>ht(e(s).status)))]),A(i,m)}),t(mt),t(kt),t(Le);var Gt=r(Le,2),bt=r(a(Gt),2),zt=a(bt);ke(zt,5,()=>(e(u),o(()=>e(u).slice(0,6))),Ve,(i,s)=>{var m=sr(),x=a(m),F=a(x),S=r(F,2),H=a(S,!0);t(S),t(x);var B=r(x,2),L=a(B),ae=a(L,!0);t(L);var Z=r(L,2),U=a(Z);t(Z),t(B),t(m),C((O,q,Q)=>{be(F,1,`w-4 h-4 rounded-full ${O??""}`),d(H,(e(s),o(()=>e(s).label))),d(ae,q),d(U,`${Q??""}%`)},[()=>(e(s),o(()=>e(s).color.replace("text-","bg-"))),()=>(e(s),o(()=>z(e(s).value))),()=>(e(s),e(c),o(()=>(e(s).value/e(c)*100).toFixed(1)))]),A(i,m)}),t(zt);var $t=r(zt,2),Wt=a($t),Ct=a(Wt);M(Ct,{icon:"heroicons:chart-pie",class:"w-8 h-8 mx-auto mb-2"}),yt(2),t(Wt),t($t),t(bt),t(Gt),t(et);var Et=r(et,2),Yt=r(a(Et),2),xt=a(Yt);ke(xt,5,()=>e(Y),Ve,(i,s)=>{var m=ir(),x=a(m),F=a(x),S=a(F,!0);t(F);var H=r(F,2),B=a(H),L=a(B,!0);t(B);var ae=r(B,2),Z=a(ae,!0);t(ae),t(H),t(x);var U=r(x,2),O=a(U),q=r(a(O),2),Q=a(q,!0);t(q),t(O);var oe=r(O,2),we=r(a(oe),2),Be=a(we,!0);t(we),t(oe);var at=r(oe,2),Me=r(a(at),2),Vt=a(Me,!0);t(Me),t(at),t(U);var ra=r(U,2),Kt=a(ra),Bt=a(Kt);t(Kt);var qt=r(Kt,2),sa=a(qt);t(qt),t(ra),t(m),C((ia,va,ga,P,N)=>{d(S,(e(s),o(()=>e(s).avatar))),d(L,(e(s),o(()=>e(s).name))),d(Z,(e(s),o(()=>e(s).role))),d(Q,ia),d(Be,va),be(Me,1,`font-medium ${e(s),o(()=>e(s).remaining>=0?"text-green-600":"text-red-600")??""}`),d(Vt,ga),be(Bt,1,`h-2 rounded-full transition-all duration-500 ${e(s),o(()=>e(s).status==="over"?"bg-red-500":e(s).status==="warning"?"bg-amber-500":"bg-green-500")??""}`),ha(Bt,`width: ${P??""}%`),d(sa,`${N??""}% used`)},[()=>(e(s),o(()=>z(e(s).monthlyBudget))),()=>(e(s),o(()=>z(e(s).allocatedMonthly))),()=>(e(s),o(()=>z(e(s).remaining))),()=>(e(s),o(()=>Math.min(e(s).budgetUtilization,100))),()=>(e(s),o(()=>e(s).budgetUtilization.toFixed(1)))]),A(i,m)}),t(xt),t(Yt),t(Et);var g=r(Et,2);{var D=i=>{const s=da(()=>o(Oe));var m=or(),x=r(a(m),2),F=a(x),S=a(F),H=r(a(S),2),B=a(H,!0);t(H);var L=r(H,2),ae=a(L,!0);t(L),t(S);var Z=r(S,2),U=r(a(Z),2),O=a(U,!0);t(U),yt(2),t(Z);var q=r(Z,2),Q=r(a(q),2),oe=a(Q,!0);t(Q);var we=r(Q,2),Be=a(we,!0);t(we),t(q),t(F),t(x),t(m),C((at,Me,Vt)=>{d(B,at),d(ae,(K(e(s)),e(n),o(()=>e(s).monthly>e(n)?"Over budget":"Within budget"))),d(O,Me),be(Q,1,`text-2xl font-bold ${K(e(s)),o(()=>e(s).savings>=0?"text-green-600":"text-red-600")??""}`),d(oe,Vt),d(Be,(K(e(s)),o(()=>e(s).savings>=0?"On track":"Need to cut back")))},[()=>(K(e(s)),o(()=>z(e(s).monthly))),()=>(K(e(s)),o(()=>z(e(s).yearly))),()=>(K(e(s)),o(()=>z(e(s).savings)))]),A(i,m)};Fe(g,i=>{e(fe)&&i(D)})}var ne=r(g,2),Ie=r(a(ne),2),de=a(Ie),ee=a(de),se=r(a(ee),2),ie=a(se),h=r(a(ie),2),_e=a(h);t(h),t(ie);var le=r(ie,2),I=r(a(le),2),pe=a(I);t(I),t(le);var ce=r(le,2),$e=r(a(ce),2),Ce=a($e);t($e),t(ce);var Te=r(ce,2),ze=r(a(Te),2),v=a(ze);t(ze),t(Te);var p=r(Te,2),_=r(a(p),2),j=a(_);t(_),t(p),t(se),t(ee);var w=r(ee,2),T=r(a(w),2),ve=a(T),Se=r(a(ve),2),ye=a(Se);t(Se),t(ve);var Pe=r(ve,2),ge=r(a(Pe),2),me=a(ge);t(ge),t(Pe);var he=r(Pe,2),Ue=r(a(he),2),We=a(Ue);t(Ue),t(he);var Ee=r(he,2),Ne=r(a(Ee),2),te=a(Ne);t(Ne),t(Ee);var ue=r(Ee,2),Ae=r(a(ue),2),tt=a(Ae);t(Ae),t(ue),t(T),t(w),t(de),t(Ie),t(ne),t(Dt),C((i,s,m,x,F,S,H,B,L,ae,Z,U,O,q)=>{d(jt,i),d(Xt,s),be(ct,1,`text-2xl font-bold ${e(b)>=0?"text-green-600":"text-red-600"}`),d(ea,m),be(vt,1,`p-3 ${e(b)>=0?"bg-green-100":"bg-red-100"} rounded-lg`),be(pt,1,`text-2xl font-bold ${e(y)>90?"text-red-600":e(y)>75?"text-amber-600":"text-green-600"}`),d(Ht,`${x??""}%`),be(gt,1,`p-3 ${e(y)>90?"bg-red-100":e(y)>75?"bg-amber-100":"bg-green-100"} rounded-lg`),d(_e,`тВ╣${F??""}`),d(pe,`тВ╣${S??""}`),d(Ce,`тВ╣${H??""}`),d(v,`тВ╣${B??""}`),d(j,`тВ╣${L??""}`),d(ye,`тВ╣${ae??""}`),d(me,`тВ╣${Z??""}`),d(We,`тВ╣${U??""}`),d(te,`тВ╣${O??""}`),d(tt,`тВ╣${q??""}`)},[()=>(e(n),o(()=>z(e(n)))),()=>(e(c),o(()=>z(e(c)))),()=>(e(b),o(()=>z(e(b)))),()=>(e(y),o(()=>e(y).toFixed(1))),()=>(K(Re),o(()=>Re.filter(i=>i.type==="mobile").reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(Re),o(()=>Re.filter(i=>["electricity","water","gas"].includes(i.type)).reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(Re),o(()=>Re.filter(i=>["broadband","dth"].includes(i.type)).reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(Re),o(()=>Re.filter(i=>i.type==="streaming").reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(wa),o(()=>wa.toLocaleString())),()=>(K(Ye),o(()=>Ye.filter(i=>i.type.includes("insurance")).reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(Ye),o(()=>Ye.filter(i=>i.type==="property_tax").reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(Ye),o(()=>Ye.filter(i=>i.type==="vehicle_insurance").reduce((i,s)=>i+s.amount,0).toLocaleString())),()=>(K(ua),o(()=>ua.toLocaleString())),()=>(K(ua),o(()=>Math.round(ua/12).toLocaleString()))]),J("click",Qe,()=>f(fe,!e(fe))),J("click",It,wt),A(Ke,Dt),_a()}class dr{constructor(){this.apiKeys={twilio:null,firebase:null,whatsapp:null},this.notificationQueue=[],this.sentNotifications=[],this.preferences={enableSMS:!0,enableWhatsApp:!0,enablePush:!0,reminderDaysBefore:[7,3,1],overdueReminders:!0,festivalReminders:!0}}init(){this.checkDuePayments(),this.scheduleReminders(),setInterval(()=>{this.checkDuePayments()},3600*1e3)}checkDuePayments(){const l=new Date;[...Re,...Ye].forEach(c=>{const b=new Date(c.dueDate),y=Math.ceil((b-l)/(1e3*60*60*24));this.preferences.reminderDaysBefore.includes(y)?this.createReminder(c,"upcoming"):y<0&&this.preferences.overdueReminders?this.createReminder(c,"overdue"):y===0&&this.createReminder(c,"due_today")}),this.processNotificationQueue()}createReminder(l,n){const c=l.assignedTo,b=`${l.id}_${n}_${new Date().toISOString().split("T")[0]}`;if(this.sentNotifications.includes(b))return;const y={id:b,type:n,payment:l,member:c,createdAt:new Date,methods:[]};this.preferences.enableSMS&&y.methods.push({type:"sms",to:c.phoneNumber,message:this.generateSMSMessage(l,c,n)}),this.preferences.enableWhatsApp&&y.methods.push({type:"whatsapp",to:c.whatsappNumber,message:this.generateWhatsAppMessage(l,c,n)}),this.preferences.enablePush&&y.methods.push({type:"push",title:this.generatePushTitle(l,n),body:this.generatePushBody(l,c,n),icon:"ЁЯТ░",data:{paymentId:l.id,type:n}}),this.notificationQueue.push(y)}generateSMSMessage(l,n,c){const b=pa.sms[n.preferredLanguage]||pa.sms.english,y=b[c]||b.reminder;return this.replaceMessageVariables(y,l,n)}generateWhatsAppMessage(l,n,c){const b=pa.whatsapp[n.preferredLanguage]||pa.whatsapp.english,y=b[c]||b.reminder;return this.replaceMessageVariables(y,l,n)}generatePushTitle(l,n){switch(n){case"overdue":return"тЪая╕П Overdue Payment";case"due_today":return"ЁЯУЕ Payment Due Today";case"upcoming":return"тП░ Upcoming Payment";default:return"ЁЯТ░ Payment Reminder"}}generatePushBody(l,n,c){const b=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(l.amount);switch(c){case"overdue":return`${n.name}, your ${l.provider} bill of ${b} is overdue!`;case"due_today":return`${n.name}, your ${l.provider} bill of ${b} is due today.`;case"upcoming":return`${n.name}, your ${l.provider} bill of ${b} is due soon.`;default:return`Payment reminder for ${l.provider}`}}replaceMessageVariables(l,n,c){const b=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(n.amount),y=new Date(n.dueDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"});return l.replace(/{name}/g,c.name).replace(/{service}/g,`${n.provider} ${n.type}`).replace(/{amount}/g,b).replace(/{date}/g,y)}async processNotificationQueue(){for(;this.notificationQueue.length>0;){const l=this.notificationQueue.shift();try{await this.sendNotification(l),this.sentNotifications.push(l.id),console.log(`Notification sent: ${l.id}`)}catch(n){console.error(`Failed to send notification ${l.id}:`,n)}}}async sendNotification(l){const n=l.methods.map(c=>{switch(c.type){case"sms":return this.sendSMS(c.to,c.message);case"whatsapp":return this.sendWhatsApp(c.to,c.message);case"push":return this.sendPushNotification(c);default:return Promise.resolve()}});await Promise.allSettled(n)}async sendSMS(l,n){if(!this.apiKeys.twilio)return console.log(`SMS to ${l}: ${n}`),{success:!0,mock:!0};try{return console.log(`SMS sent to ${l}: ${n}`),{success:!0}}catch(c){throw new Error(`SMS failed: ${c.message}`)}}async sendWhatsApp(l,n){if(!this.apiKeys.whatsapp)return console.log(`WhatsApp to ${l}: ${n}`),{success:!0,mock:!0};try{return console.log(`WhatsApp sent to ${l}: ${n}`),{success:!0}}catch(c){throw new Error(`WhatsApp failed: ${c.message}`)}}async sendPushNotification(l){if(!this.apiKeys.firebase)return console.log(`Push notification: ${l.title} - ${l.body}`),{success:!0,mock:!0};try{return console.log(`Push notification sent: ${l.title}`),{success:!0}}catch(n){throw new Error(`Push notification failed: ${n.message}`)}}async sendManualReminder(l,n=null){const c=[...Re,...Ye].find($=>$.id===l);if(!c)throw new Error("Payment not found");const y=(n?X.filter($=>n.includes($.id)):[c.assignedTo]).map($=>({id:`manual_${c.id}_${$.id}_${Date.now()}`,type:"manual",payment:c,member:$,createdAt:new Date,methods:[{type:"whatsapp",to:$.whatsappNumber,message:this.generateWhatsAppMessage(c,$,"reminder")}]}));for(const $ of y)await this.sendNotification($);return{success:!0,sent:y.length}}getNotificationHistory(l=30){const n=new Date;return n.setDate(n.getDate()-l),this.sentNotifications.filter(c=>{const b=c.split("_");return b.length>=3?new Date(b[2])>=n:!0}).slice(-50)}scheduleReminders(){[{name:"Diwali",date:"2025-10-31",days:[7,3,1]},{name:"Pongal",date:"2026-01-14",days:[14,7,3,1]},{name:"Navaratri",date:"2025-10-03",days:[7,3,1]},{name:"Ganesh Chaturthi",date:"2025-08-29",days:[7,3,1]}].forEach(n=>{n.days.forEach(c=>{const b=new Date(n.date);b.setDate(b.getDate()-c),b>=new Date&&setTimeout(()=>{this.sendFestivalReminder(n,c)},b-new Date)})})}async sendFestivalReminder(l,n){const c=`ЁЯОЙ ${l.name} is in ${n} day(s)! Time to start preparations. Check your festival expenses budget and shopping list.`;for(const b of X)await this.sendPushNotification({title:`ЁЯкФ ${l.name} Reminder`,body:c,icon:"ЁЯОЙ",data:{type:"festival",festival:l.name}})}updatePreferences(l){this.preferences={...this.preferences,...l},localStorage.setItem("notificationPreferences",JSON.stringify(this.preferences))}loadPreferences(){const l=localStorage.getItem("notificationPreferences");l&&(this.preferences={...this.preferences,...JSON.parse(l)})}getPreferences(){return{...this.preferences}}async testNotification(l,n="sms"){const c=X.find($=>$.id===l);if(!c)throw new Error("Member not found");const b={id:"test",provider:"Test Service",type:"test",amount:100,dueDate:new Date().toISOString().split("T")[0]},y=n==="sms"?this.generateSMSMessage(b,c,"reminder"):this.generateWhatsAppMessage(b,c,"reminder");return n==="sms"?await this.sendSMS(c.phoneNumber,y):await this.sendWhatsApp(c.whatsappNumber,y),{success:!0,message:y}}}const Da=new dr;typeof window<"u"&&(Da.loadPreferences(),Da.init());export{Ir as B,Dr as E,wr as R,ua as a,X as f,Re as m,Da as n,wa as t,Ye as y};
