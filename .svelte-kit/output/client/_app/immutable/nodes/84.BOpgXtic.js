import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as Xe}from"../chunks/DlrJBDXQ.js";import{ad as Ze,ag as _,ah as K,ap as R,ai as w,aj as et,ak as l,am as o,y as P,K as ve,t,an as s,ao as N,aC as tt,as as h,al as x,ar as at,aB as De}from"../chunks/B7bOZ5S9.js";import{i as k}from"../chunks/DIwmiGeX.js";import{e as it,i as rt}from"../chunks/BpwsUEBk.js";import{s as be,r as y,a as st,d as nt}from"../chunks/BUszLdvL.js";import{a as W,c as F}from"../chunks/DnAqKgy0.js";import{i as ot}from"../chunks/5L-6EDXk.js";import{s as lt,a as ct}from"../chunks/BeN61itl.js";import{g as ie,t as fe}from"../chunks/DKif01VT.js";import{w as dt}from"../chunks/HaWL_7Wj.js";var ut=_('<span class="text-blue-400">🔄</span> Analyzing...',1),pt=_('<span class="text-green-400">✨</span> Generate Reminders',1),mt=_('<label class="text-white/80">Phone Number <input type="tel" placeholder="+1234567890" class="input w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"/></label>'),vt=_('<div class="manual-form-card backdrop-blur-lg bg-white/15 border border-white/30 rounded-2xl p-6 mb-6 shadow-2xl svelte-tnd5ji"><h3 class="text-xl font-semibold text-white mb-4 flex items-center gap-2"><span class="text-purple-400">📝</span> Create Manual Reminder</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><label class="text-white/80">Title * <input type="text" placeholder="Reminder title" class="input w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"/></label> <label class="text-white/80">Priority <div class="flex gap-4 mt-2"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">Low</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">Medium</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">High</span></label></div></label> <label class="text-white/80">Due Date * <input type="date" class="input w-full bg-white/10 border-white/20 text-white svelte-tnd5ji"/></label> <label class="text-white/80">Due Time <input type="time" class="input w-full bg-white/10 border-white/20 text-white svelte-tnd5ji"/></label> <label class="text-white/80">Notification Type <div class="flex flex-col gap-2 mt-2"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">🔊 Sound + Browser Notification</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">📱 SMS</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" class="radio radio-primary"/> <span class="text-sm">📞 Call</span></label></div></label> <!> <label class="md:col-span-2 text-white/80">Description <textarea placeholder="Additional details..." rows="3" class="textarea w-full bg-white/10 border-white/20 text-white placeholder-white/50 svelte-tnd5ji"></textarea></label></div> <div class="flex gap-3 justify-end mt-6"><button class="btn btn-ghost text-white/80 hover:bg-white/10">Cancel</button> <button class="btn btn-primary"><span class="text-green-400">✓</span> Create Reminder</button></div></div>'),bt=_('<button class="btn btn-ghost btn-sm text-white/60 hover:text-white"> </button> <button class="btn btn-primary btn-sm" title="Trigger notification"> </button>',1),ft=_('<div class="mb-4 p-3 bg-white/5 rounded-lg border border-white/10"><div class="flex items-center gap-2 text-sm text-white/70"><span class="font-medium">Notification:</span> <span class="px-2 py-1 bg-white/10 rounded text-xs"> <!></span> <span> </span></div></div>'),wt=_('<div class="reminder-card backdrop-blur-lg bg-white/10 border border-white/20 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:transform hover:scale-105 svelte-tnd5ji"><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><span class="text-2xl"> </span> <div><h3 class="text-white font-semibold text-lg"> </h3> <span class="text-xs text-white/60 uppercase tracking-wide"> </span></div></div> <div class="flex items-center gap-2"><!> <button class="btn btn-ghost btn-sm text-white/60 hover:text-red-400" aria-label="Dismiss reminder">✕</button></div></div> <p class="text-white/80 mb-4 leading-relaxed"> </p> <!> <div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <span class="text-white/60 text-sm"> <!></span></div> <div class="w-4 h-4 rounded-full shadow-lg"></div></div></div>'),xt=_('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),ht=_('<div class="text-center py-16"><div class="text-8xl mb-6 text-white/20">🔔</div> <h3 class="text-2xl font-semibold text-white mb-2">No Reminders Yet</h3> <p class="text-white/60 mb-6">Create some notes or calendar events to generate smart reminders</p> <button class="btn btn-primary btn-lg shadow-xl"><span class="text-blue-400">🔍</span> Analyze Content</button></div>'),gt=_(`<div class="reminders-page min-h-screen nature-background p-6 svelte-tnd5ji" style="--background-png: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2070&amp;q=80')"><div class="max-w-6xl mx-auto"><div class="text-center mb-8"><h1 class="text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3"><span class="text-5xl">🔔</span> Smart Reminders</h1> <p class="text-white/70 text-lg">AI-powered reminders generated from your notes and calendar</p></div> <div class="flex justify-center mb-6 gap-4"><button><!></button> <button class="btn btn-secondary btn-lg shadow-xl hover:shadow-2xl transition-all duration-300"><span class="text-purple-400">➕</span> Create Manual</button></div> <!> <!></div></div>`);function yt(re,Ae){Ze(Ae,!1);const we=()=>ct(S,"$reminders",Se),[Se,$e]=lt(),se=[],ne=[];let xe=[],he=[],S=dt([]),L=ve(!1),G=ve(!1),i=ve({title:"",description:"",dueDate:"",dueTime:"",priority:"medium",notificationType:"sound",phoneNumber:"",isActive:!0});function Re(){const e=new window.AudioContext,a=e.createOscillator(),d=e.createGain();a.connect(d),d.connect(e.destination),a.frequency.setValueAtTime(800,e.currentTime),a.frequency.setValueAtTime(600,e.currentTime+.1),d.gain.setValueAtTime(.3,e.currentTime),d.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),a.start(e.currentTime),a.stop(e.currentTime+.5)}function Ne(e,a){alert(`SMS would be sent to ${e}: ${a}`),console.log(`SMS sent to ${e}: ${a}`)}function ke(e){e?window.open(`tel:${e}`,"_self"):alert("No phone number provided for call")}function Me(e){const a=`${e.title}: ${e.description}`;switch(e.notificationType){case"sound":Re(),"Notification"in window&&Notification.permission==="granted"&&new Notification(e.title,{body:e.description});break;case"sms":e.phoneNumber&&Ne(e.phoneNumber,a);break;case"call":e.phoneNumber&&ke(e.phoneNumber);break}}Xe(async()=>{xe=await ie("notes"),he=await ie("calendar");const e=await ie("reminders");S.set(e),oe(),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()});async function oe(){P(L,!0);const e=[],d=(await ie("reminders")).filter(n=>n.type==="manual");xe.forEach(n=>{const u=n.body.toLowerCase(),v=n.title.toLowerCase();["tomorrow","today","next week","next month","deadline","due","meeting","appointment","call","remind","important","urgent"].some(T=>u.includes(T)||v.includes(T))&&e.push({id:`note-${n.id}`,type:"note",title:`Review: ${n.title}`,description:Ce(n.body),priority:je(n.body),dueDate:Oe(n.body),source:"Notes Analysis",color:n.color||"#6366f1",createdAt:new Date().toISOString()})}),he.forEach(n=>{const u=new Date(n.date+(n.time?` ${n.time}`:"")),v=new Date,b=u.getTime()-v.getTime(),f=Math.ceil(b/(1e3*60*60*24));f>=0&&f<=7&&e.push({id:`event-${n.id}`,type:"event",title:`Upcoming: ${n.title}`,description:n.description||`Event scheduled for ${n.date}${n.time?` at ${n.time}`:""}`,priority:"medium",dueDate:n.date,source:"Calendar Events",color:n.color||"#10b981",createdAt:new Date().toISOString()}),f<0&&f>=-1&&e.push({id:`followup-${n.id}`,type:"followup",title:`Follow-up: ${n.title}`,description:`Follow up on the "${n.title}" event that occurred on ${n.date}`,priority:"low",dueDate:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0],source:"Event Follow-up",color:"#f59e0b",createdAt:new Date().toISOString()})}),e.sort((n,u)=>{const v={high:3,medium:2,low:1},b=v[u.priority]-v[n.priority];return b!==0?b:Number(new Date(n.dueDate))-Number(new Date(u.dueDate))});const r=[...d,...e];S.set(r),P(L,!1)}function Ce(e){var d;return((d=e.split(/[.!?]+/).filter(r=>r.trim().length>10)[0])==null?void 0:d.trim())||e.slice(0,100)+"..."}function je(e){const a=["urgent","asap","critical","important","deadline","due today"],d=["soon","meeting","call","review","check"];return a.some(r=>e.includes(r))?"high":d.some(r=>e.includes(r))?"medium":"low"}function Oe(e){const a=new Date,d=e.toLowerCase();return d.includes("tomorrow")?new Date(a.getTime()+1440*60*1e3).toISOString().split("T")[0]:d.includes("next week")?new Date(a.getTime()+10080*60*1e3).toISOString().split("T")[0]:d.includes("next month")?new Date(a.getFullYear(),a.getMonth()+1,a.getDate()).toISOString().split("T")[0]:d.includes("today")?a.toISOString().split("T")[0]:new Date(a.getTime()+4320*60*1e3).toISOString().split("T")[0]}async function Ie(e){await Ee(e),S.update(a=>a.filter(d=>d.id!==e))}async function ge(e,a){try{await fe("reminders").update(e,a)}catch(d){console.error("Error updating reminder in database:",d)}}async function Ee(e){try{await fe("reminders").delete(e)}catch(a){console.error("Error deleting reminder from database:",a)}}async function Be(e){try{await fe("reminders").add(e)}catch(a){console.error("Error saving reminder to database:",a)}}async function Ke(){if(!t(i).title||!t(i).dueDate){alert("Please provide at least a title and due date");return}const e={id:`manual-${Date.now()}`,type:"manual",title:t(i).title,description:t(i).description||"Manual reminder",priority:t(i).priority,dueDate:t(i).dueDate,dueTime:t(i).dueTime,source:"Manual Creation",color:le(t(i).priority).includes("red")?"#ef4444":le(t(i).priority).includes("yellow")?"#f59e0b":"#10b981",createdAt:new Date().toISOString(),notificationType:t(i).notificationType,phoneNumber:t(i).phoneNumber,isActive:t(i).isActive};await Be(e),S.update(a=>[...a,e]),P(i,{title:"",description:"",dueDate:"",dueTime:"",priority:"medium",notificationType:"sound",phoneNumber:"",isActive:!0}),P(G,!1),alert("Manual reminder created!")}async function Pe(e){if(!e.isActive)return;Me(e);const a={...e,isActive:!1};await ge(e.id,{isActive:!1}),S.update(d=>d.map(r=>r.id===e.id?a:r))}async function Fe(e){let a=[];S.subscribe(n=>{a=n})();const d=a.find(n=>n.id===e);if(!d)return;const r=!d.isActive;await ge(e,{isActive:r}),S.update(n=>n.map(u=>u.id===e?{...u,isActive:r}:u))}function le(e){switch(e){case"high":return"text-red-400 border-red-400/30 bg-red-400/10";case"medium":return"text-yellow-400 border-yellow-400/30 bg-yellow-400/10";case"low":return"text-green-400 border-green-400/30 bg-green-400/10";default:return"text-blue-400 border-blue-400/30 bg-blue-400/10"}}function Le(e){switch(e){case"note":return"📝";case"event":return"📅";case"followup":return"🔄";default:return"🔔"}}ot();var ce=gt(),ye=o(ce),de=l(o(ye),2),O=o(de),Ge=o(O);{var Ve=e=>{var a=ut();N(),w(e,a)},qe=e=>{var a=pt();N(),w(e,a)};k(Ge,e=>{t(L)?e(Ve):e(qe,!1)})}s(O);var He=l(O,2);s(de);var _e=l(de,2);{var Ye=e=>{var a=vt(),d=l(o(a),2),r=o(d),n=l(o(r));y(n),s(r);var u=l(r,2),v=l(o(u)),b=o(v),f=o(b);y(f),f.value=f.__value="low",N(2),s(b);var T=l(b,2),$=o(T);y($),$.value=$.__value="medium",N(2),s(T);var J=l(T,2),M=o(J);y(M),M.value=M.__value="high",N(2),s(J),s(v),s(u);var V=l(u,2),q=l(o(V));y(q),s(V);var I=l(V,2),Q=l(o(I));y(Q),s(I);var H=l(I,2),E=l(o(H)),Y=o(E),C=o(Y);y(C),C.value=C.__value="sound",N(2),s(Y);var z=l(Y,2),j=o(z);y(j),j.value=j.__value="sms",N(2),s(z);var B=l(z,2),D=o(B);y(D),D.value=D.__value="call",N(2),s(B),s(E),s(H);var X=l(H,2);{var Z=c=>{var m=mt(),g=l(o(m));y(g),s(m),W(g,()=>t(i).phoneNumber,A=>h(i,t(i).phoneNumber=A)),w(c,m)};k(X,c=>{t(i).notificationType!=="sound"&&c(Z)})}var U=l(X,2),ee=l(o(U));tt(ee),s(U),s(d);var te=l(d,2),ae=o(te),p=l(ae,2);s(te),s(a),W(n,()=>t(i).title,c=>h(i,t(i).title=c)),F(se,[],f,()=>t(i).priority,c=>h(i,t(i).priority=c)),F(se,[],$,()=>t(i).priority,c=>h(i,t(i).priority=c)),F(se,[],M,()=>t(i).priority,c=>h(i,t(i).priority=c)),W(q,()=>t(i).dueDate,c=>h(i,t(i).dueDate=c)),W(Q,()=>t(i).dueTime,c=>h(i,t(i).dueTime=c)),F(ne,[],C,()=>t(i).notificationType,c=>h(i,t(i).notificationType=c)),F(ne,[],j,()=>t(i).notificationType,c=>h(i,t(i).notificationType=c)),F(ne,[],D,()=>t(i).notificationType,c=>h(i,t(i).notificationType=c)),W(ee,()=>t(i).description,c=>h(i,t(i).description=c)),R("click",ae,()=>P(G,!1)),R("click",p,Ke),w(e,a)};k(_e,e=>{t(G)&&e(Ye)})}var ze=l(_e,2);{var Ue=e=>{var a=xt();it(a,5,we,rt,(d,r)=>{var n=wt(),u=o(n),v=o(u),b=o(v),f=o(b,!0);s(b);var T=l(b,2),$=o(T),J=o($,!0);s($);var M=l($,2),V=o(M,!0);s(M),s(T),s(v);var q=l(v,2),I=o(q);{var Q=p=>{var c=bt(),m=at(c),g=o(m,!0);s(m);var A=l(m,2),ue=o(A,!0);s(A),K(()=>{nt(m,"title",t(r).isActive?"Disable reminder":"Enable reminder"),x(g,t(r).isActive?"🔊":"🔇"),A.disabled=!t(r).isActive,x(ue,t(r).notificationType==="sound"?"🔊":t(r).notificationType==="sms"?"📱":"📞")}),R("click",m,()=>Fe(t(r).id)),R("click",A,()=>Pe(t(r))),w(p,c)};k(I,p=>{t(r).type==="manual"&&p(Q)})}var H=l(I,2);s(q),s(u);var E=l(u,2),Y=o(E,!0);s(E);var C=l(E,2);{var z=p=>{var c=ft(),m=o(c),g=l(o(m),2),A=o(g),ue=l(A);{var Je=me=>{var Te=De();K(()=>x(Te,`(${t(r).phoneNumber??""})`)),w(me,Te)};k(ue,me=>{t(r).phoneNumber&&me(Je)})}s(g);var pe=l(g,2),Qe=o(pe,!0);s(pe),s(m),s(c),K(()=>{x(A,`${t(r).notificationType==="sound"?"🔊 Sound + Browser":t(r).notificationType==="sms"?"📱 SMS":"📞 Call"} `),be(pe,1,`ml-auto text-xs ${t(r).isActive?"text-green-400":"text-red-400"}`),x(Qe,t(r).isActive?"Active":"Inactive")}),w(p,c)};k(C,p=>{t(r).type==="manual"&&p(z)})}var j=l(C,2),B=o(j),D=o(B),X=o(D,!0);s(D);var Z=l(D,2),U=o(Z),ee=l(U);{var te=p=>{var c=De();K(()=>x(c,`at ${t(r).dueTime??""}`)),w(p,c)};k(ee,p=>{t(r).dueTime&&p(te)})}s(Z),s(B);var ae=l(B,2);s(j),s(n),K((p,c,m,g)=>{x(f,p),x(J,t(r).title),x(V,t(r).source),x(Y,t(r).description),be(D,1,`px-3 py-1 rounded-full text-xs font-medium border ${c??""}`,"svelte-tnd5ji"),x(X,m),x(U,`Due: ${g??""} `),st(ae,`background-color: ${t(r).color??""}`)},[()=>Le(t(r).type),()=>le(t(r).priority),()=>t(r).priority.toUpperCase(),()=>new Date(t(r).dueDate).toLocaleDateString()]),R("click",H,()=>Ie(t(r).id)),w(d,n)}),s(a),w(e,a)},We=e=>{var a=ht(),d=l(o(a),6);s(a),R("click",d,oe),w(e,a)};k(ze,e=>{we().length>0?e(Ue):e(We,!1)})}s(ye),s(ce),K(()=>{be(O,1,`btn btn-primary btn-lg shadow-xl hover:shadow-2xl transition-all duration-300 ${t(L)?"loading":""}`,"svelte-tnd5ji"),O.disabled=t(L)}),R("click",O,oe),R("click",He,()=>P(G,!t(G))),w(re,ce),et(),$e()}function Ot(re){yt(re,{})}export{Ot as component};
