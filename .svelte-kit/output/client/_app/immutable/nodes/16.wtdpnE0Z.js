import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as Tt}from"../chunks/39fK5dpH.js";import{ad as Rt,ag as z,ay as It,ak as h,ar as G,ah as T,ap as F,ai as A,aj as Ct,az as Dt,am as c,y as S,K as j,t as d,ao as _,an as r,al as f,aD as Et,aq as Ft,aE as jt}from"../chunks/CirWT1vm.js";import{i as q}from"../chunks/Dn4D4y7S.js";import{e as Ye,i as Qe}from"../chunks/Bsg-a7gO.js";import{s as N}from"../chunks/C2NsQb6S.js";import{i as Lt}from"../chunks/CVl-uwuJ.js";import{I as $}from"../chunks/CCPGIiiA.js";import{w as Nt}from"../chunks/DWPppJ2y.js";import{a as Ot,b as Xe,d as Ze,c as Bt}from"../chunks/D3uUM0yQ.js";import{_ as Ut}from"../chunks/Dp1pzeXC.js";class L{constructor(e,t=[]){this.name=e,this.capabilities=t,this.memory=new Map,this.goals=[],this.isActive=!1}async initialize(){this.isActive=!0,console.log(`${this.name} agent initialized`)}async shutdown(){this.isActive=!1,console.log(`${this.name} agent shutdown`)}async process(e){return this.isActive?(this.memory.set(Date.now(),e),await this.execute(e)):null}async execute(e){return{response:"Base agent response",actions:[]}}addGoal(e){this.goals.push(e)}getMemory(e=10){return Array.from(this.memory.entries()).slice(-e).map(([s,n])=>({timestamp:new Date(s),data:n}))}}class Vt{constructor(){this.agents=new Map,this.activeRole="family",this.roles={paati:{name:"Paati",preferences:{tone:"gentle",language:"tamil",pace:"slow"}},appa:{name:"Appa",preferences:{tone:"practical",language:"english",pace:"efficient"}},amma:{name:"Amma",preferences:{tone:"nurturing",language:"mixed",pace:"organized"}},kids:{name:"Kids",preferences:{tone:"playful",language:"english",pace:"fun"}},family:{name:"Family",preferences:{tone:"warm",language:"mixed",pace:"balanced"}}}}registerAgent(e){this.agents.set(e.name,e)}setActiveRole(e){this.roles[e]&&(this.activeRole=e,console.log(`Active role changed to: ${this.roles[e].name}`))}getRolePreferences(){return this.roles[this.activeRole].preferences}async processWithAgents(e,t={}){const s=[],n=this.getRolePreferences(),i={...e,role:this.activeRole,preferences:n,context:t};for(const[a,u]of this.agents)try{const m=await u.process(i);m&&s.push({agent:a,result:m})}catch(m){console.error(`Error in ${a} agent:`,m)}return this.orchestrateResponses(s,i)}orchestrateResponses(e,t){const s=e.sort((i,a)=>{const u=["memory","planner","voice","ui","tool","music"],m=u.indexOf(i.agent),y=u.indexOf(a.agent);return m-y});return{responses:s.map(i=>i.result.response).filter(i=>i),actions:s.flatMap(i=>i.result.actions||[]),role:t.role,preferences:t.preferences}}async initializeAllAgents(){for(const e of this.agents.values())await e.initialize()}async shutdownAllAgents(){for(const e of this.agents.values())await e.shutdown()}}const v=new Vt,K=Nt({activeRole:"family",activeAgents:[],lastInteraction:null,memory:[],goals:[]});class Ht extends L{constructor(){super("memory",["store","recall","learn","context"]),this.longTermMemory=new Map,this.shortTermMemory=[],this.emotionalContext=new Map,this.userProfiles=new Map,this.routines=new Map}async initialize(){await super.initialize(),this.loadPersistedMemory(),this.initializeDefaultProfiles()}initializeDefaultProfiles(){this.userProfiles.set("paati",{name:"Paati",preferences:{tone:"gentle",language:"tamil",pace:"slow",interests:["devotional","health","family"],routines:["morning_prayers","temple_visits","grandchildren_time"]},emotional_patterns:["gratitude","concern","peace"],facts:["prefers_soft_reminders","loves_devotional_music","needs_help_with_technology"]}),this.userProfiles.set("appa",{name:"Appa",preferences:{tone:"practical",language:"english",pace:"efficient",interests:["work","health","projects"],routines:["morning_walk","work_tasks","family_time"]},emotional_patterns:["focused","concerned","proud"],facts:["early_riser","loves_voice_to_music","manages_finances"]}),this.userProfiles.set("amma",{name:"Amma",preferences:{tone:"nurturing",language:"mixed",pace:"organized",interests:["cooking","health","children"],routines:["meal_planning","shopping","wellness"]},emotional_patterns:["caring","worried","joyful"],facts:["meal_planner","health_conscious","manages_household"]}),this.userProfiles.set("kids",{name:"Kids",preferences:{tone:"playful",language:"english",pace:"fun",interests:["games","learning","stories"],routines:["school","playtime","bedtime_stories"]},emotional_patterns:["excited","curious","tired"],facts:["love_stories","learning_oriented","need_routines"]})}async execute(e){const{type:t,data:s,role:n}=e;switch(t){case"store_fact":return this.storeFact(s,n);case"recall_context":return this.recallContext(n,s==null?void 0:s.category);case"update_emotion":return this.updateEmotionalContext(n,s==null?void 0:s.emotion);case"learn_routine":return this.learnRoutine(s,n);case"get_profile":return this.getUserProfile(n);default:return this.provideContext(e)}}storeFact(e,t){const s=`${t}_${Date.now()}`;return this.longTermMemory.set(s,{fact:e,role:t,timestamp:new Date,confidence:1}),{response:`Learned: ${e}`,actions:[{type:"memory_stored",data:{key:s,fact:e,role:t}}]}}recallContext(e,t=null){const s=Array.from(this.longTermMemory.values()).filter(a=>a.role===e).filter(a=>!t||this.categorizeFact(a.fact)===t).sort((a,u)=>u.timestamp-a.timestamp).slice(0,5),n=this.userProfiles.get(e),i=this.emotionalContext.get(e)||"neutral";return{response:`Context for ${e}: ${s.length} relevant facts, emotional state: ${i}`,actions:[],context:{facts:s,profile:n,emotionalState:i,routines:this.routines.get(e)||[]}}}updateEmotionalContext(e,t){this.emotionalContext.set(e,t);const s=`emotion_${e}_${Date.now()}`;return this.longTermMemory.set(s,{fact:`Felt ${t}`,role:e,timestamp:new Date,type:"emotion",confidence:.8}),{response:`Emotional context updated for ${e}: ${t}`,actions:[{type:"emotion_updated",data:{role:e,emotion:t}}]}}learnRoutine(e,t){const s=this.routines.get(t)||[];return s.push({...e,learned:new Date,confidence:.6}),this.routines.set(t,s),{response:`Learned routine for ${t}: ${e.name}`,actions:[{type:"routine_learned",data:{role:t,routine:e}}]}}getUserProfile(e){const t=this.userProfiles.get(e);return t?{response:`Profile loaded for ${t.name}`,actions:[],profile:t}:{response:`No profile found for ${e}`,actions:[]}}provideContext(e){const t=e.role||"family",s=this.userProfiles.get(t),n=this.emotionalContext.get(t)||"neutral",i=Array.from(this.longTermMemory.values()).filter(a=>a.role===t).sort((a,u)=>u.timestamp-a.timestamp).slice(0,3);return{response:`Context provided for ${t}`,actions:[],context:{profile:s,emotionalState:n,recentFacts:i,preferences:(s==null?void 0:s.preferences)||{}}}}categorizeFact(e){const t={preference:["prefers","likes","loves","needs"],routine:["every day","usually","always","schedule"],health:["health","medicine","doctor","pain","tired"],emotion:["happy","sad","worried","excited","grateful"],family:["family","children","parents","relatives"]};for(const[s,n]of Object.entries(t))if(n.some(i=>e.toLowerCase().includes(i)))return s;return"general"}loadPersistedMemory(){try{const e=localStorage.getItem("shivo_memory");if(e){const t=JSON.parse(e);this.longTermMemory=new Map(t.longTermMemory||[]),this.emotionalContext=new Map(t.emotionalContext||[]),this.routines=new Map(t.routines||[])}}catch(e){console.warn("Failed to load persisted memory:",e)}}persistMemory(){try{const e={longTermMemory:Array.from(this.longTermMemory.entries()),emotionalContext:Array.from(this.emotionalContext.entries()),routines:Array.from(this.routines.entries())};localStorage.setItem("shivo_memory",JSON.stringify(e))}catch(e){console.warn("Failed to persist memory:",e)}}startAutoPersist(){setInterval(()=>this.persistMemory(),3e4)}}class Wt extends L{constructor(){super("planner",["schedule","remind","plan","coordinate"]),this.activePlans=new Map,this.routines=new Map,this.timeTriggers=new Map}async initialize(){await super.initialize(),this.initializeDefaultRoutines(),this.startTimeMonitoring()}initializeDefaultRoutines(){this.routines.set("paati",[{name:"morning_prayers",time:"06:00",action:"remind_prayer"},{name:"temple_visit",time:"07:00",days:[1,3,5],action:"plan_temple"},{name:"grandchildren_time",time:"16:00",action:"remind_family_time"},{name:"evening_meditation",time:"19:00",action:"suggest_meditation"}]),this.routines.set("appa",[{name:"morning_walk",time:"05:30",action:"remind_walk"},{name:"work_start",time:"09:00",action:"check_tasks"},{name:"lunch_break",time:"13:00",action:"suggest_meal"},{name:"family_time",time:"18:00",action:"plan_family_activity"}]),this.routines.set("amma",[{name:"meal_prep",time:"07:00",action:"plan_meals"},{name:"shopping_list",time:"10:00",action:"review_grocery"},{name:"kids_pickup",time:"15:30",action:"remind_pickup"},{name:"evening_routine",time:"20:00",action:"start_bedtime"}]),this.routines.set("kids",[{name:"school_prep",time:"07:30",action:"remind_school"},{name:"study_time",time:"17:00",action:"start_homework"},{name:"playtime",time:"16:00",action:"suggest_activities"},{name:"bedtime_story",time:"20:30",action:"tell_story"}])}async execute(e){const{type:t,data:s,role:n,preferences:i}=e;switch(t){case"create_plan":return this.createPlan(s,n);case"schedule_task":return this.scheduleTask(s,n);case"check_routines":return this.checkRoutines(n);case"coordinate_activity":return this.coordinateActivity(s,n);case"time_trigger":return this.handleTimeTrigger(s);default:return this.analyzeAndPlan(e)}}createPlan(e,t){const s=`plan_${t}_${Date.now()}`,n={id:s,...e,role:t,created:new Date,status:"active",steps:e.steps||[],deadline:e.deadline||null};return this.activePlans.set(s,n),{response:`Created plan: ${e.title} for ${t}`,actions:[{type:"plan_created",data:n},{type:"schedule_reminders",data:{planId:s,steps:n.steps}}]}}scheduleTask(e,t){const s={...e,role:t,scheduled:new Date,status:"pending"};return s.type==="todo"?Ot.update(n=>[...n,{...s,id:Date.now(),completed:!1}]):s.type==="reminder"?Xe.update(n=>[...n,{...s,id:Date.now(),completed:!1}]):s.type==="event"&&Ze.update(n=>[...n,{...s,id:Date.now()}]),{response:`Scheduled ${s.type}: ${s.title} for ${t}`,actions:[{type:"task_scheduled",data:s}]}}checkRoutines(e){const t=new Date,s=t.toTimeString().slice(0,5),n=t.getDay(),a=(this.routines.get(e)||[]).filter(u=>{const m=u.time===s,y=!u.days||u.days.includes(n);return m&&y});if(a.length>0){const u=a.map(m=>({type:m.action,data:{routine:m.name,role:e,time:m.time}}));return{response:`Time for ${e}'s ${a.map(m=>m.name).join(", ")}`,actions:u}}return{response:`No routines due for ${e} at this time`,actions:[]}}coordinateActivity(e,t){const s={activity:e.title,participants:e.participants||[t],time:e.time,coordination:this.generateCoordinationPlan(e,t)};return{response:`Coordinated ${e.title} for ${s.participants.join(", ")}`,actions:[{type:"activity_coordinated",data:s},{type:"send_notifications",data:{activity:s}}]}}handleTimeTrigger(e){const{time:t,action:s,context:n}=e;switch(s){case"remind_prayer":return this.createPrayerReminder(n);case"plan_temple":return this.planTempleVisit(n);case"remind_walk":return this.createWalkReminder(n);case"check_tasks":return this.checkPendingTasks(n);case"suggest_meal":return this.suggestMealBreak(n);case"plan_meals":return this.planMeals(n);case"remind_pickup":return this.createPickupReminder(n);case"start_bedtime":return this.startBedtimeRoutine(n);default:return{response:`Unknown time trigger: ${s}`,actions:[]}}}analyzeAndPlan(e){const{text:t,role:s,preferences:n}=e;return t.includes("tired")||t.includes("rest")?this.createRestPlan(s):t.includes("hungry")||t.includes("eat")?this.createMealPlan(s):t.includes("busy")||t.includes("work")?this.createFocusPlan(s):{response:`Analyzed input for ${s}, no specific plan needed`,actions:[]}}createPrayerReminder(e){return{response:"Time for morning prayers",actions:[{type:"create_reminder",data:{title:"Morning Prayers",message:"Time for your daily prayers and meditation",time:new Date(Date.now()+300*1e3).toISOString(),role:e.role}}]}}planTempleVisit(e){const t=new Date;return new Date(t).setHours(7,0,0,0),{response:"Planning temple visit for today",actions:[{type:"create_event",data:{title:"Temple Visit",date:t.toISOString().split("T")[0],time:"07:00",category:"spiritual",role:e.role}}]}}createWalkReminder(e){return{response:"Time for your morning walk",actions:[{type:"create_reminder",data:{title:"Morning Walk",message:"Time for your daily walk - stay healthy!",time:new Date(Date.now()+600*1e3).toISOString(),role:e.role}}]}}checkPendingTasks(e){return{response:"Checking your pending tasks for today",actions:[{type:"review_tasks",data:{role:e.role}}]}}suggestMealBreak(e){return{response:"Time for lunch break",actions:[{type:"create_reminder",data:{title:"Lunch Break",message:"Take a break and have your meal",time:new Date(Date.now()+300*1e3).toISOString(),role:e.role}}]}}planMeals(e){return{response:"Planning meals for the day",actions:[{type:"plan_meals",data:{role:e.role}}]}}createPickupReminder(e){return{response:"Time to pick up the children",actions:[{type:"create_reminder",data:{title:"School Pickup",message:"Time to pick up the children from school",time:new Date(Date.now()+300*1e3).toISOString(),role:e.role}}]}}startBedtimeRoutine(e){return{response:"Starting bedtime routine for the children",actions:[{type:"create_reminder",data:{title:"Bedtime Story",role:"kids"}},{type:"dim_lights",data:{}},{type:"play_soft_music",data:{}}]}}createRestPlan(e){return{response:`Creating a rest plan for ${e}`,actions:[{type:"create_plan",data:{title:"Rest and Recovery",steps:["Take a short break","Drink water","Do deep breathing","Rest for 15 minutes"],role:e}}]}}createMealPlan(e){return{response:`Planning a meal for ${e}`,actions:[{type:"suggest_meal",data:{role:e,time:new Date().toTimeString().slice(0,5)}}]}}createFocusPlan(e){return{response:`Creating focus plan for ${e}`,actions:[{type:"create_plan",data:{title:"Focus Session",steps:["Clear workspace","Set timer for 25 minutes","Work without distractions","Take a 5-minute break"],role:e}}]}}generateCoordinationPlan(e,t){return[`Notify all participants about ${e.title}`,`Check availability for ${e.time}`,"Prepare necessary items","Confirm participation","Execute activity"]}startTimeMonitoring(){setInterval(()=>{this.checkAllRoutines()},6e4)}checkAllRoutines(){["paati","appa","amma","kids"].forEach(t=>{const s=this.checkRoutines(t);s.actions.length>0&&s.actions.forEach(n=>{this.handleTimeTrigger({time:new Date().toTimeString().slice(0,5),action:n.type,context:{role:t}})})})}}class Gt extends L{constructor(){super("voice",["listen","speak","analyze","transcribe"]),this.isListening=!1,this.recognition=null,this.synthesis=null,this.emotionAnalyzer=new qt,this.intentParser=new Kt,this.languageDetector=new Jt}async initialize(){await super.initialize(),this.initializeSpeechRecognition(),this.initializeSpeechSynthesis()}initializeSpeechRecognition(){if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-IN",this.recognition.onresult=t=>{let s="";for(let n=t.resultIndex;n<t.results.length;n++){const i=t.results[n][0].transcript;t.results[n].isFinal&&(s+=i)}s&&this.processTranscript(s)},this.recognition.onerror=t=>{console.error("Speech recognition error:",t.error)}}}initializeSpeechSynthesis(){"speechSynthesis"in window&&(this.synthesis=window.speechSynthesis,this.voicePreferences={paati:{lang:"ta-IN",rate:.8,pitch:1.1},appa:{lang:"en-IN",rate:1,pitch:1},amma:{lang:"en-IN",rate:.9,pitch:1},kids:{lang:"en-IN",rate:1.1,pitch:1.2},family:{lang:"en-IN",rate:.95,pitch:1}})}async execute(e){const{type:t,data:s,role:n,preferences:i}=e;switch(t){case"start_listening":return this.startListening(n);case"stop_listening":return this.stopListening();case"speak_response":return this.speakResponse(s.text,n);case"analyze_emotion":return this.analyzeEmotion(s.audio||s.text);case"process_command":return this.processCommand(s.text,n);default:return this.handleVoiceInput(e)}}startListening(e){if(this.recognition&&!this.isListening){const t=this.voicePreferences[e]||this.voicePreferences.family;return this.recognition.lang=t.lang,this.recognition.start(),this.isListening=!0,{response:`Started listening for ${e}`,actions:[{type:"listening_started",data:{role:e}}]}}return{response:"Speech recognition not available or already listening",actions:[]}}stopListening(){return this.recognition&&this.isListening?(this.recognition.stop(),this.isListening=!1,{response:"Stopped listening",actions:[{type:"listening_stopped"}]}):{response:"Not currently listening",actions:[]}}async speakResponse(e,t){if(!this.synthesis)return{response:"Speech synthesis not available",actions:[]};const s=new SpeechSynthesisUtterance(e),n=this.voicePreferences[t]||this.voicePreferences.family;s.lang=n.lang,s.rate=n.rate,s.pitch=n.pitch;const a=this.synthesis.getVoices().find(u=>u.lang.startsWith(n.lang.split("-")[0]));return a&&(s.voice=a),this.synthesis.speak(s),{response:`Speaking response for ${t}`,actions:[{type:"speech_started",data:{text:e,role:t}}]}}async analyzeEmotion(e){const t=await this.emotionAnalyzer.analyze(e);return{response:`Detected emotion: ${t.primary}`,actions:[{type:"emotion_detected",data:t},{type:"update_memory",data:{type:"emotion",emotion:t.primary}}],emotion:t}}async processCommand(e,t){const s=this.languageDetector.detect(e),n=await this.intentParser.parse(e,t,s),i=await this.emotionAnalyzer.analyze(e);return{response:`Processed command for ${t}`,actions:[{type:"intent_parsed",data:n},{type:"emotion_analyzed",data:i},{type:"execute_intent",data:{intent:n,role:t,language:s,emotion:i}}],intent:n,emotion:i,language:s}}async processTranscript(e){return console.log("Processing transcript:",e),["shivo","‡Æö‡Æø‡Æµ‡Øã","nanbaa","‡Æ®‡Æ£‡Øç‡Æ™‡Ææ","ai","assistant"].some(n=>e.toLowerCase().includes(n.toLowerCase()))?{...await this.processCommand(e,"family"),wakeWord:!0}:await this.processCommand(e,"family")}handleVoiceInput(e){const{audio:t,text:s,role:n}=e;return t?this.processAudio(t,n):s?this.processCommand(s,n):{response:"No audio or text input provided",actions:[]}}async processAudio(e,t){const s=await this.transcribeAudio(e),n=await this.emotionAnalyzer.analyzeAudio(e);return{...await this.processCommand(s,t),transcript:s,emotion:n}}async transcribeAudio(e){return"Transcribed text from audio"}}class qt{async analyze(e){const t={joy:["happy","excited","wonderful","great","love","‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø","‡Æö‡Æ®‡Øç‡Æ§‡Øã‡Æ∑‡ÆÆ‡Øç"],stress:["worried","stressed","anxious","tired","‡Æ™‡Æ§‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç","‡Æï‡Æµ‡Æ≤‡Øà"],gratitude:["thank you","grateful","blessed","‡Æ®‡Æ©‡Øç‡Æ±‡Æø","‡Æ®‡Æ©‡Øç‡Æ±‡Ææ‡Æï"],neutral:["okay","fine","alright","‡Æö‡Æ∞‡Æø","‡Æ®‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ"]},s=typeof e=="string"?e.toLowerCase():"",n={};for(const[a,u]of Object.entries(t))n[a]=u.reduce((m,y)=>m+(s.includes(y)?1:0),0);return{primary:Object.entries(n).reduce((a,u)=>n[a[0]]>n[u[0]]?a:u)[0],scores:n,confidence:Math.max(...Object.values(n))/Math.max(1,s.split(" ").length)}}async analyzeAudio(e){return{primary:"neutral",scores:{neutral:1},confidence:.5}}}class Kt{async parse(e,t,s){const n=e.toLowerCase(),i={createTodo:["add todo","‡Æ™‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡Øç","create task"],setReminder:["remind","‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡ØÅ","reminder"],createNote:["note","‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ","write down"],setEvent:["event","‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æµ‡ØÅ","schedule"],startRecording:["record","‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç","start recording"],playMusic:["play music","‡Æá‡Æö‡Øà","music"],getWeather:["weather","‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà"],checkHealth:["health","‡Æâ‡Æü‡Æ≤‡Øç ‡Æ®‡Æ≤‡ÆÆ‡Øç","how are you"]};for(const[a,u]of Object.entries(i))if(u.some(m=>n.includes(m)))return{type:a,text:e,role:t,language:s,confidence:.8,extracted:this.extractEntities(e,a)};return{type:"unknown",text:e,role:t,language:s,confidence:0}}extractEntities(e,t){const s={};switch(t){case"createTodo":case"setReminder":case"createNote":s.content=e.replace(/^(add todo|‡Æ™‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡Øç|remind|‡Æ®‡Æø‡Æ©‡Øà‡Æµ‡ØÇ‡Æü‡Øç‡Æü‡ØÅ|note|‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ)/i,"").trim();break;case"setEvent":s.title=e.replace(/^(event|‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æµ‡ØÅ)/i,"").trim();break}return s}}class Jt{detect(e){return/[\u0B80-\u0BFF]/.test(e)?"ta":"en"}}class Yt extends L{constructor(){super("ui",["adapt","personalize","optimize","guide"]),this.currentTheme="default",this.roleThemes=new Map,this.emotionThemes=new Map,this.contextualElements=new Map}async initialize(){await super.initialize(),this.initializeThemes(),this.initializeContextualElements()}initializeThemes(){this.roleThemes.set("paati",{colors:{primary:"emerald",background:"warm",text:"gentle"},layout:{fontSize:"large",spacing:"comfortable",navigation:"simple"},content:{language:"tamil",tone:"respectful",icons:"traditional"},interactions:{pace:"slow",feedback:"verbal",gestures:"minimal"}}),this.roleThemes.set("appa",{colors:{primary:"blue",background:"professional",text:"clear"},layout:{fontSize:"medium",spacing:"efficient",navigation:"structured"},content:{language:"english",tone:"practical",icons:"modern"},interactions:{pace:"fast",feedback:"minimal",gestures:"precise"}}),this.roleThemes.set("amma",{colors:{primary:"purple",background:"warm",text:"nurturing"},layout:{fontSize:"medium",spacing:"organized",navigation:"categorized"},content:{language:"mixed",tone:"caring",icons:"friendly"},interactions:{pace:"balanced",feedback:"encouraging",gestures:"supportive"}}),this.roleThemes.set("kids",{colors:{primary:"orange",background:"playful",text:"fun"},layout:{fontSize:"large",spacing:"spacious",navigation:"visual"},content:{language:"english",tone:"exciting",icons:"animated"},interactions:{pace:"engaging",feedback:"celebratory",gestures:"expressive"}}),this.emotionThemes.set("joy",{colors:{brightness:1.2,saturation:1.1},animations:"celebratory",content:"positive"}),this.emotionThemes.set("stress",{colors:{brightness:.9,saturation:.8},layout:"calming",content:"soothing"}),this.emotionThemes.set("gratitude",{colors:{warmth:1.2},content:"appreciative",interactions:"grateful"})}initializeContextualElements(){this.contextualElements.set("prayer_time",{show:["paati"],elements:["devotional_music","temple_reminder","peaceful_background"]}),this.contextualElements.set("meal_time",{show:["amma","family"],elements:["recipe_suggestions","grocery_reminder","cooking_timer"]}),this.contextualElements.set("study_time",{show:["kids"],elements:["study_timer","break_reminder","achievement_badges"]}),this.contextualElements.set("work_time",{show:["appa"],elements:["focus_timer","task_priorities","meeting_reminder"]})}async execute(e){const{type:t,data:s,role:n,preferences:i,emotion:a}=e;switch(t){case"adapt_interface":return this.adaptInterface(n,a,s==null?void 0:s.context);case"personalize_content":return this.personalizeContent(s==null?void 0:s.content,n,i);case"optimize_layout":return this.optimizeLayout(s==null?void 0:s.screen,n);case"guide_interaction":return this.guideInteraction(s==null?void 0:s.action,n);default:return this.provideUIAdaptation(e)}}adaptInterface(e,t,s){const n=this.roleThemes.get(e)||this.roleThemes.get("family"),i=this.emotionThemes.get(t),a=this.combineThemes(n,i),u=this.getContextualElements(s,e);return{response:`Adapted interface for ${e} with ${t} emotion`,actions:[{type:"apply_theme",data:a},{type:"show_elements",data:u},{type:"update_navigation",data:{role:e,theme:a}}],theme:a,elements:u}}personalizeContent(e,t,s){var a,u;const n=this.roleThemes.get(t),i={...e,language:(s==null?void 0:s.language)||((a=n==null?void 0:n.content)==null?void 0:a.language)||"english",tone:((u=n==null?void 0:n.content)==null?void 0:u.tone)||"neutral",style:this.adaptContentStyle(e,n)};return{response:`Personalized content for ${t}`,actions:[{type:"render_content",data:i}],content:i}}optimizeLayout(e,t){var m,y,O;const s=this.roleThemes.get(t),{width:n,height:i,device:a}=e||{},u={fontSize:this.calculateFontSize(n,(m=s==null?void 0:s.layout)==null?void 0:m.fontSize),spacing:((y=s==null?void 0:s.layout)==null?void 0:y.spacing)||"normal",columns:this.calculateColumns(n,a),navigation:this.optimizeNavigation(n,(O=s==null?void 0:s.layout)==null?void 0:O.navigation)};return{response:`Optimized layout for ${t} on ${a}`,actions:[{type:"apply_layout",data:u}],layout:u}}guideInteraction(e,t){var i,a;const s=this.roleThemes.get(t),n={action:e,role:t,style:((i=s==null?void 0:s.interactions)==null?void 0:i.pace)||"normal",feedback:this.generateFeedback(e,s),gestures:((a=s==null?void 0:s.interactions)==null?void 0:a.gestures)||"standard"};return{response:`Guiding interaction for ${t}`,actions:[{type:"show_guidance",data:n}],guidance:n}}provideUIAdaptation(e){const{role:t,preferences:s,emotion:n}=e,i={theme:this.getAdaptedTheme(t,n),layout:this.getOptimizedLayout(t,s),content:this.getPersonalizedContent(t,s),interactions:this.getInteractionGuide(t)};return{response:`Provided UI adaptation for ${t}`,actions:[{type:"apply_adaptation",data:i}],adaptation:i}}combineThemes(e,t){return t?{...e,colors:{...e.colors,...t.colors},animations:t.animations||e.animations,content:{...e.content,...t.content}}:e}getContextualElements(e,t){const s=[];for(const[n,i]of this.contextualElements)e===n&&i.show.includes(t)&&s.push(...i.elements);return s}adaptContentStyle(e,t){var s,n,i,a,u,m;return{...e.style,tone:((s=t==null?void 0:t.content)==null?void 0:s.tone)||((n=e.style)==null?void 0:n.tone),language:((i=t==null?void 0:t.content)==null?void 0:i.language)||((a=e.style)==null?void 0:a.language),visual:((u=t==null?void 0:t.content)==null?void 0:u.icons)||((m=e.style)==null?void 0:m.visual)}}calculateFontSize(e,t){const s={small:14,medium:16,large:18,xlarge:20};let n=s[t]||s.medium;return e<768?n=Math.max(n-2,12):e>1200&&(n=Math.min(n+2,22)),n}calculateColumns(e,t){return t==="mobile"||e<768?1:e<1024?2:3}optimizeNavigation(e,t){return e<768?"bottom_tabs":t==="simple"?"sidebar_simple":"sidebar_full"}generateFeedback(e,t){var i;const s=((i=t==null?void 0:t.interactions)==null?void 0:i.feedback)||"standard",n={standard:"Action completed successfully",encouraging:"Great job! That was perfect",celebratory:"üéâ Excellent work!",verbal:"I have completed that task for you",minimal:"‚úì Done"};return n[s]||n.standard}getAdaptedTheme(e,t){const s=this.roleThemes.get(e),n=this.emotionThemes.get(t);return this.combineThemes(s,n)}getOptimizedLayout(e,t){var n,i,a;const s=this.roleThemes.get(e);return{fontSize:((n=s==null?void 0:s.layout)==null?void 0:n.fontSize)||"medium",spacing:((i=s==null?void 0:s.layout)==null?void 0:i.spacing)||"normal",navigation:((a=s==null?void 0:s.layout)==null?void 0:a.navigation)||"standard"}}getPersonalizedContent(e,t){var n,i,a;const s=this.roleThemes.get(e);return{language:(t==null?void 0:t.language)||((n=s==null?void 0:s.content)==null?void 0:n.language)||"english",tone:((i=s==null?void 0:s.content)==null?void 0:i.tone)||"neutral",style:((a=s==null?void 0:s.content)==null?void 0:a.icons)||"modern"}}getInteractionGuide(e){var s,n,i;const t=this.roleThemes.get(e);return{pace:((s=t==null?void 0:t.interactions)==null?void 0:s.pace)||"normal",feedback:((n=t==null?void 0:t.interactions)==null?void 0:n.feedback)||"standard",gestures:((i=t==null?void 0:t.interactions)==null?void 0:i.gestures)||"standard"}}applyTheme(e){const t=document.documentElement;e.colors&&Object.entries(e.colors).forEach(([s,n])=>{t.style.setProperty(`--theme-${s}`,n)}),document.body.className=`theme-${e.name||"default"}`}showElements(e){document.querySelectorAll("[data-contextual]").forEach(t=>{t.style.display="none"}),e.forEach(t=>{const s=document.querySelector(`[data-contextual="${t}"]`);s&&(s.style.display="block")})}}class Qt extends L{constructor(){super("tool",["execute","integrate","automate","control"]),this.availableTools=new Map,this.activeIntegrations=new Set,this.toolHistory=[]}async initialize(){await super.initialize(),this.registerTools(),this.initializeIntegrations()}registerTools(){this.availableTools.set("calendar",new Xt),this.availableTools.set("notes",new Zt),this.availableTools.set("music",new es),this.availableTools.set("reminders",new ts),this.availableTools.set("home_automation",new ss),this.availableTools.set("weather",new ns),this.availableTools.set("health",new is),this.availableTools.set("shopping",new as),this.availableTools.set("communication",new rs)}initializeIntegrations(){this.activeIntegrations.add("local_calendar"),this.activeIntegrations.add("local_notes"),this.activeIntegrations.add("local_music")}async execute(e){const{type:t,data:s,role:n,preferences:i}=e;switch(t){case"execute_action":return this.executeAction(s.action,s.params,n);case"integrate_service":return this.integrateService(s.service,s.config);case"automate_routine":return this.automateRoutine(s.routine,n);case"control_device":return this.controlDevice(s.device,s.command);default:return this.handleToolRequest(e)}}async executeAction(e,t,s){const n=this.findToolForAction(e);if(!n)return{response:`No tool available for action: ${e}`,actions:[]};try{const i=await n.execute(e,t,s);return this.toolHistory.push({timestamp:new Date,action:e,params:t,result:i,role:s}),{response:`Executed ${e} successfully`,actions:[{type:"action_completed",data:{action:e,result:i,role:s}}],result:i}}catch(i){return console.error("Tool execution failed:",i),{response:`Failed to execute ${e}: ${i.message}`,actions:[{type:"action_failed",data:{action:e,error:i,role:s}}]}}}findToolForAction(e){const s={create_event:"calendar",update_event:"calendar",delete_event:"calendar",get_events:"calendar",create_note:"notes",update_note:"notes",delete_note:"notes",search_notes:"notes",play_music:"music",stop_music:"music",generate_music:"music",set_volume:"music",create_reminder:"reminders",update_reminder:"reminders",delete_reminder:"reminders",turn_on_light:"home_automation",turn_off_light:"home_automation",adjust_temperature:"home_automation",lock_door:"home_automation",get_weather:"weather",get_forecast:"weather",log_weight:"health",log_blood_pressure:"health",schedule_checkup:"health",add_to_cart:"shopping",create_list:"shopping",check_price:"shopping",send_message:"communication",make_call:"communication",send_email:"communication"}[e];return s?this.availableTools.get(s):null}async integrateService(e,t){try{const s=await this.initializeServiceIntegration(e,t);return this.activeIntegrations.add(e),{response:`Integrated ${e} successfully`,actions:[{type:"service_integrated",data:{service:e,config:t}}],integration:s}}catch(s){return{response:`Failed to integrate ${e}: ${s.message}`,actions:[]}}}async automateRoutine(e,t){const s={id:`automation_${Date.now()}`,routine:e,role:t,triggers:e.triggers||[],actions:e.actions||[],active:!0};return this.automations=this.automations||new Map,this.automations.set(s.id,s),{response:`Automated routine for ${t}: ${e.name}`,actions:[{type:"routine_automated",data:s}]}}async controlDevice(e,t){const s=this.availableTools.get("home_automation");return s?await s.controlDevice(e,t):{response:"Home automation not available",actions:[]}}handleToolRequest(e){const{intent:t,role:s}=e;return t?this.executeAction(t.type,t.extracted,s):{response:"No intent provided for tool execution",actions:[]}}async initializeServiceIntegration(e,t){switch(e){case"google_calendar":return{status:"connected",api:"google"};case"spotify":return{status:"connected",api:"spotify"};case"alexa":return{status:"connected",api:"alexa"};default:return{status:"connected",api:"local"}}}getToolHistory(e=10){return this.toolHistory.slice(-e)}getAvailableTools(){return Array.from(this.availableTools.keys())}getActiveIntegrations(){return Array.from(this.activeIntegrations)}}class Xt{async execute(e,t,s){switch(e){case"create_event":return Ze.update(n=>[...n,{id:Date.now(),title:t.title,date:t.date,time:t.time,category:t.category||"custom",voiceCreated:!0}]),{success:!0,event:t};case"get_events":return{success:!0,events:[]};default:throw new Error(`Unknown calendar action: ${e}`)}}}class Zt{async execute(e,t,s){switch(e){case"create_note":return Bt.update(n=>[...n,{id:Date.now(),content:t.content,emotionTag:t.emotion||"neutral",voiceCreated:!0,timestamp:new Date}]),{success:!0,note:t};case"search_notes":return{success:!0,results:[]};default:throw new Error(`Unknown notes action: ${e}`)}}}class es{async execute(e,t,s){switch(e){case"play_music":return{success:!0,track:t.track};case"generate_music":return{success:!0,prompt:t.prompt};case"set_volume":return{success:!0,volume:t.volume};default:throw new Error(`Unknown music action: ${e}`)}}}class ts{async execute(e,t,s){switch(e){case"create_reminder":return Xe.update(n=>[...n,{id:Date.now(),message:t.message,time:t.time,repeat:t.repeat||"none",completed:!1,voiceCreated:!0}]),{success:!0,reminder:t};default:throw new Error(`Unknown reminder action: ${e}`)}}}class ss{async execute(e,t,s){switch(e){case"turn_on_light":case"turn_off_light":return{success:!0,device:t.device,state:e.includes("on")?"on":"off"};case"adjust_temperature":return{success:!0,temperature:t.temperature};default:throw new Error(`Unknown home automation action: ${e}`)}}async controlDevice(e,t){return this.execute(t,{device:e},"family")}}class ns{async execute(e,t,s){switch(e){case"get_weather":return{success:!0,weather:{temperature:28,condition:"sunny",location:"Coimbatore"}};case"get_forecast":return{success:!0,forecast:[]};default:throw new Error(`Unknown weather action: ${e}`)}}}class is{async execute(e,t,s){switch(e){case"log_weight":return{success:!0,weight:t.weight,date:new Date};case"log_blood_pressure":return{success:!0,systolic:t.systolic,diastolic:t.diastolic};default:throw new Error(`Unknown health action: ${e}`)}}}class as{async execute(e,t,s){switch(e){case"add_to_cart":return{success:!0,item:t.item,quantity:t.quantity};case"create_list":return{success:!0,list:t.items};default:throw new Error(`Unknown shopping action: ${e}`)}}}class rs{async execute(e,t,s){switch(e){case"send_message":return{success:!0,recipient:t.recipient,message:t.message};case"make_call":return{success:!0,number:t.number};case"send_email":return{success:!0,to:t.to,subject:t.subject};default:throw new Error(`Unknown communication action: ${e}`)}}}class os extends L{constructor(){super("music",["generate","play","compose","analyze"]),this.currentTrack=null,this.isPlaying=!1,this.volume=.8,this.musicHistory=[],this.emotionalThemes=new Map}async initialize(){await super.initialize(),this.initializeEmotionalThemes(),this.initializeAudioContext()}initializeEmotionalThemes(){this.emotionalThemes.set("joy",{genres:["upbeat","folk","electronic"],tempo:"fast",instruments:["flute","percussion","strings"],mood:"celebratory"}),this.emotionalThemes.set("stress",{genres:["ambient","meditative","classical"],tempo:"slow",instruments:["piano","harp","nature_sounds"],mood:"calming"}),this.emotionalThemes.set("gratitude",{genres:["devotional","spiritual","acoustic"],tempo:"moderate",instruments:["veena","sitar","vocal"],mood:"peaceful"}),this.emotionalThemes.set("neutral",{genres:["ambient","folk","instrumental"],tempo:"moderate",instruments:["flute","guitar","percussion"],mood:"balanced"})}initializeAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported:",e)}}async execute(e){const{type:t,data:s,role:n,preferences:i,emotion:a}=e;switch(t){case"generate_music":return this.generateMusic(s.prompt,a,n);case"play_music":return this.playMusic(s.track);case"stop_music":return this.stopMusic();case"compose_from_humming":return this.composeFromHumming(s.audio,n);case"adjust_mood":return this.adjustMoodMusic(a);case"create_playlist":return this.createPlaylist(s.theme,n);default:return this.handleMusicRequest(e)}}async generateMusic(e,t,s){try{const n=this.enhancePrompt(e,t,s),i=await this.generateMusicFromPrompt(n),a={id:`track_${Date.now()}`,prompt:n,emotion:t,role:s,buffer:i,duration:i.duration,created:new Date};return this.musicHistory.push(a),{response:`Generated music for ${s} with ${t} emotion`,actions:[{type:"music_generated",data:a},{type:"auto_play",data:{track:a}}],track:a}}catch(n){return{response:`Failed to generate music: ${n.message}`,actions:[]}}}async playMusic(e){if(!e||!e.buffer)return{response:"No track to play",actions:[]};try{return await this.playAudioBuffer(e.buffer),this.currentTrack=e,this.isPlaying=!0,{response:`Playing music: ${e.prompt}`,actions:[{type:"music_playing",data:{track:e,volume:this.volume}}]}}catch(t){return{response:`Failed to play music: ${t.message}`,actions:[]}}}async stopMusic(){return this.currentTrack&&this.isPlaying?(this.stopAudioPlayback(),this.isPlaying=!1,{response:"Music stopped",actions:[{type:"music_stopped",data:{track:this.currentTrack}}]}):{response:"No music playing",actions:[]}}async composeFromHumming(e,t){try{const s=await this.analyzeMelody(e),n=this.createPromptFromMelody(s,t);return await this.generateMusic(n,"joy",t)}catch(s){return{response:`Failed to compose from humming: ${s.message}`,actions:[]}}}async adjustMoodMusic(e){const t=this.emotionalThemes.get(e)||this.emotionalThemes.get("neutral"),s=this.createMoodPrompt(t);return await this.generateMusic(s,e,"family")}async createPlaylist(e,t){const s=[];for(let i=0;i<3;i++){const a=`${e} music variation ${i+1} for ${t}`,u=await this.generateMusic(a,"neutral",t);u.track&&s.push(u.track)}const n={id:`playlist_${Date.now()}`,theme:e,role:t,tracks:s,created:new Date};return{response:`Created playlist with ${s.length} tracks`,actions:[{type:"playlist_created",data:n}],playlist:n}}handleMusicRequest(e){const{text:t,role:s,emotion:n}=e;if(t.includes("play")||t.includes("music")){const i=this.extractMusicPrompt(t);return this.generateMusic(i,n,s)}return t.includes("stop")||t.includes("quiet")?this.stopMusic():t.includes("mood")||t.includes("feeling")?this.adjustMoodMusic(n):{response:"Music request not recognized",actions:[]}}enhancePrompt(e,t,s){const n=this.emotionalThemes.get(t),i=this.getRoleMusicPreferences(s);let a=e;return n&&(a+=`, ${n.mood} mood, ${n.tempo} tempo`,n.instruments.length>0&&(a+=`, featuring ${n.instruments.slice(0,2).join(" and ")}`)),i&&(a+=`, ${i.style}`),a}async generateMusicFromPrompt(e){try{const{generateMusic:t,buildMusicPrompt:s}=await Ut(async()=>{const{generateMusic:n,buildMusicPrompt:i}=await import("../chunks/BKKHa0w5.js");return{generateMusic:n,buildMusicPrompt:i}},[],import.meta.url);return await t(s(e))}catch{return console.warn("Music generation not available, using fallback"),this.createFallbackAudioBuffer()}}async playAudioBuffer(e){if(!this.audioContext)return;const t=this.audioContext.createBufferSource();t.buffer=e,t.connect(this.audioContext.destination),t.start(),this.currentSource=t}stopAudioPlayback(){this.currentSource&&(this.currentSource.stop(),this.currentSource=null)}async analyzeMelody(e){return{key:"C",tempo:120,duration:5,notes:["C4","D4","E4","C4"]}}createPromptFromMelody(e,t){const{key:s,tempo:n,notes:i}=e,a=this.getRoleMusicPreferences(t);return`Music in ${s} key, ${n} BPM, based on melody ${i.join(" ")}, ${(a==null?void 0:a.style)||"instrumental"}`}createMoodPrompt(e){return`${e.genres[0]} ${e.mood} music with ${e.instruments[0]}, ${e.tempo} tempo`}extractMusicPrompt(e){const t=["play","music","song","melody","tune"],s=["classical","folk","devotional","ambient","electronic"];let n=e;return t.forEach(i=>{n=n.replace(new RegExp(i,"gi"),"")}),n=n.trim(),n.length<3&&(n=s.find(a=>e.includes(a))||"ambient instrumental"),n}getRoleMusicPreferences(e){const t={paati:{style:"devotional with traditional instruments like veena and flute"},appa:{style:"instrumental with focus on melody and rhythm"},amma:{style:"soothing and peaceful with gentle instrumentation"},kids:{style:"upbeat and playful with fun melodies"},family:{style:"warm and harmonious with family-friendly instrumentation"}};return t[e]||t.family}createFallbackAudioBuffer(){if(!this.audioContext)return null;const e=3,t=this.audioContext.sampleRate,s=e*t,n=this.audioContext.createBuffer(1,s,t),i=n.getChannelData(0);for(let a=0;a<s;a++)i[a]=Math.sin(2*Math.PI*440*a/t)*.1;return n}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),this.currentSource&&this.currentSource.gainNode&&(this.currentSource.gainNode.gain.value=this.volume)}getMusicHistory(e=10){return this.musicHistory.slice(-e)}getCurrentTrack(){return this.currentTrack}isMusicPlaying(){return this.isPlaying}}const et=new Ht,ge=new Wt,ye=new Gt,tt=new Yt,st=new Qt,cs=new os;v.registerAgent(et);v.registerAgent(ge);v.registerAgent(ye);v.registerAgent(tt);v.registerAgent(st);v.registerAgent(cs);class ls{constructor(){this.isInitialized=!1,this.currentRole="family",this.systemStatus="asleep"}async initialize(){if(!this.isInitialized)try{console.log("Initializing Shivo Agentic AI System..."),await v.initializeAllAgents(),this.setupRoleDetection(),this.setupAutonomousRoutines(),this.isInitialized=!0,this.systemStatus="active",console.log("Shivo AI System initialized successfully"),K.update(e=>({...e,activeAgents:v.agents.keys(),activeRole:this.currentRole}))}catch(e){console.error("Failed to initialize Shivo AI System:",e),this.systemStatus="error"}}async shutdown(){await v.shutdownAllAgents(),this.systemStatus="shutdown"}async processInteraction(e){this.isInitialized||await this.initialize();try{const t=this.detectRole(e);t!==this.currentRole&&await this.switchRole(t);const s=v.getRolePreferences(),n={...e,role:this.currentRole,preferences:s,context:await this.getContext()},i=await v.processWithAgents(n);return this.updateSystemState(i),i}catch(t){return console.error("Error processing interaction:",t),{responses:["I apologize, but I encountered an error processing your request."],actions:[],error:t.message}}}async startVoiceListening(){return await ye.process({type:"start_listening",role:this.currentRole})}async stopVoiceListening(){return await ye.process({type:"stop_listening"})}async processVoiceCommand(e){return await this.processInteraction({type:"voice_command",text:e,source:"voice"})}async switchRole(e){if(!v.roles[e])throw new Error(`Unknown role: ${e}`);this.currentRole=e,v.setActiveRole(e),await tt.process({type:"adapt_interface",role:e,context:"role_switch"}),K.update(t=>({...t,activeRole:e})),console.log(`Switched to role: ${e}`)}detectRole(e){const{text:t,context:s}=e;if(!t)return this.currentRole;const n=t.toLowerCase(),i={paati:["paati","grandma","grandmother","‡ÆÖ‡ÆÆ‡Øç‡ÆÆ‡Ææ","‡Æ™‡Ææ‡Æü‡Øç‡Æü‡Æø"],appa:["appa","dad","father","‡ÆÖ‡Æ™‡Øç‡Æ™‡Ææ"],amma:["amma","mom","mother","‡ÆÖ‡ÆÆ‡Øç‡ÆÆ‡Ææ"],kids:["kids","children","‡Æ™‡Æø‡Æ≥‡Øç‡Æ≥‡Øà‡Æï‡Æ≥‡Øç","‡Æï‡ØÅ‡Æ¥‡Æ®‡Øç‡Æ§‡Øà‡Æï‡Æ≥‡Øç"]};for(const[a,u]of Object.entries(i))if(u.some(m=>n.includes(m)))return a;return this.detectRoleByTime()}detectRoleByTime(){const e=new Date().getHours();return e>=5&&e<9?"paati":e>=9&&e<17?"appa":e>=17&&e<21?"amma":e>=21||e<5?"kids":"family"}async getContext(){var t,s;const e=await et.process({type:"recall_context",role:this.currentRole});return{role:this.currentRole,time:new Date,recentActivities:((t=e.context)==null?void 0:t.recentFacts)||[],emotionalState:((s=e.context)==null?void 0:s.emotionalState)||"neutral",preferences:v.getRolePreferences()}}setupAutonomousRoutines(){setInterval(async()=>{try{const e=await ge.process({type:"check_routines",role:this.currentRole});if(e.actions.length>0)for(const t of e.actions)await this.executeAutonomousAction(t)}catch(e){console.warn("Autonomous routine check failed:",e)}},6e4)}async executeAutonomousAction(e){try{switch(e.type){case"remind_prayer":await this.processInteraction({type:"autonomous",text:"Time for morning prayers",context:"routine"});break;case"plan_temple":await this.processInteraction({type:"autonomous",text:"Plan temple visit for today",context:"routine"});break;case"remind_walk":await this.processInteraction({type:"autonomous",text:"Time for morning walk",context:"routine"});break;default:console.log("Unknown autonomous action:",e.type)}}catch(t){console.warn("Autonomous action execution failed:",t)}}updateSystemState(e){K.update(t=>{var s;return{...t,lastInteraction:{timestamp:new Date,role:this.currentRole,result:e},memory:((s=e.context)==null?void 0:s.recentFacts)||t.memory}})}async pursueGoal(e){const t=await ge.process({type:"create_plan",data:e,role:this.currentRole});if(t.actions)for(const s of t.actions)await st.process({type:"execute_action",data:{action:s.type,params:s.data},role:this.currentRole});return t}getStatus(){return{initialized:this.isInitialized,status:this.systemStatus,currentRole:this.currentRole,activeAgents:Array.from(v.agents.keys()),rolePreferences:v.getRolePreferences()}}async handleEmergency(e){await this.switchRole("family");const t={type:"emergency",situation:e,priority:"high"};return await this.processInteraction({type:"emergency",text:`Emergency: ${e}`,context:t})}}const R=new ls;async function us(){await R.initialize()}async function he(g){return await R.processInteraction(g)}async function ds(g){await R.switchRole(g)}function ms(){return R.getStatus()}typeof window<"u"&&document.addEventListener("DOMContentLoaded",async()=>{try{await us(),console.log("Shivo AI auto-initialized")}catch(g){console.warn("Shivo AI auto-initialization failed:",g)}});var ps=z('<button><div class="flex items-center gap-3"><div class="text-2xl"> </div> <div><div class="font-medium text-gray-800"> </div> <div class="text-xs text-gray-600"> </div></div></div></button>'),hs=z('<div class="flex items-center gap-2"><span class="text-lg">üòä</span> <span> </span></div>'),gs=z('<div class="flex items-center gap-2"><!> <span> </span></div>'),ys=z('<div class="whitespace-pre-wrap"> </div>'),fs=z('<div><div><!> <div class="text-xs opacity-70 mt-1"> </div></div></div>'),vs=z("<!> Listening...",1),ws=z("<!> Voice",1),_s=z('<div class="mt-3 p-3 bg-blue-50 rounded-lg"><div class="text-sm text-blue-800"><strong>Transcript:</strong> </div></div>'),xs=z(`/** * Shivo Agentic AI Page - Main interface for the agentic AI system * Provides role-aware interactions and autonomous agent coordination */ <div class="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-emerald-50"><div class="bg-white/80 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-10"><div class="max-w-6xl mx-auto px-6 py-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center"><!></div> <div><h1 class="text-2xl font-bold text-gray-800">Shivo Agentic AI</h1> <p class="text-sm text-gray-600">Your intelligent family assistant</p></div></div> <div class="flex items-center gap-4"><div class="flex items-center gap-2 text-sm"><div></div> <span class="text-gray-600 capitalize"> </span></div> <div class="text-xs text-gray-500"> </div></div></div></div></div> <div class="max-w-6xl mx-auto p-6"><div class="grid grid-cols-1 lg:grid-cols-4 gap-6"><div class="lg:col-span-1"><div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg"><h3 class="text-lg font-semibold text-gray-800 mb-4">Family Roles</h3> <div class="space-y-3"></div> <div class="mt-6 pt-6 border-t border-gray-200"><h4 class="text-sm font-medium text-gray-700 mb-3">Agent Activity</h4> <div class="space-y-2 text-xs text-gray-600"><div class="flex justify-between"><span>Active Agents:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span>Memory Items:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span>Plans Created:</span> <span class="font-medium"> </span></div></div></div></div></div> <div class="lg:col-span-3"><div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden"><div class="p-6 border-b border-gray-200"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="text-2xl"> </div> <div><h2 class="text-xl font-semibold text-gray-800"> </h2> <p class="text-sm text-gray-600"> </p></div></div> <div class="flex gap-2"><button class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2"><!> Capabilities</button> <button class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2"><!> Demo Autonomy</button></div></div></div> <div class="h-96 overflow-y-auto p-6 space-y-4 svelte-103w443" id="conversation"></div> <div class="p-6 border-t border-gray-200"><div class="flex gap-3"><input id="text-input" type="text" placeholder="Type your message or say 'Shivo' to wake me..." class="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/> <button class="px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl transition-colors duration-200 flex items-center gap-2"><!></button> <button><!></button></div> <!></div></div> <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"><div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg"><div class="flex items-center gap-3 mb-3"><!> <h3 class="font-semibold text-gray-800">Memory Agent</h3></div> <p class="text-sm text-gray-600">Learns preferences, routines, and emotional patterns</p></div> <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg"><div class="flex items-center gap-3 mb-3"><!> <h3 class="font-semibold text-gray-800">Planner Agent</h3></div> <p class="text-sm text-gray-600">Creates plans, schedules tasks, and manages routines</p></div> <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg"><div class="flex items-center gap-3 mb-3"><!> <h3 class="font-semibold text-gray-800">Music Agent</h3></div> <p class="text-sm text-gray-600">Generates personalized music and audio experiences</p></div></div></div></div></div></div>`,1);function bs(g,e){Rt(e,!1);let t=j("family"),s=j(!1),n=j(""),i=j([]),a=j("initializing"),u=j({activeAgents:0,memoryItems:0,plansCreated:0});const m={paati:{name:"Paati",icon:"heroicons:sparkles",color:"emerald",description:"Gentle care and spiritual guidance",avatar:"üëµ"},appa:{name:"Appa",icon:"heroicons:user",color:"blue",description:"Practical planning and task management",avatar:"üë®"},amma:{name:"Amma",icon:"heroicons:heart",color:"purple",description:"Nurturing care and family coordination",avatar:"üë©"},kids:{name:"Kids",icon:"heroicons:star",color:"orange",description:"Fun learning and playful interactions",avatar:"üë∂"},family:{name:"Family",icon:"heroicons:users",color:"green",description:"Unified family assistance",avatar:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶"}};Tt(async()=>{try{await R.initialize(),S(a,"active");const o=K.subscribe(l=>{var p,w,x;S(t,l.activeRole),S(u,{activeAgents:((p=l.activeAgents)==null?void 0:p.length)||0,memoryItems:((w=l.memory)==null?void 0:w.length)||0,plansCreated:((x=l.goals)==null?void 0:x.length)||0})});return y("assistant","‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç! ‡Æ®‡Ææ‡Æ©‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡ØÅ‡Æü‡ØÅ‡ÆÆ‡Øç‡Æ™ ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç ‡Æö‡Æø‡Æµ‡Øã. ‡Æé‡Æ©‡Øç‡Æ© ‡Æâ‡Æ§‡Æµ‡Æø ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç?","greeting"),o}catch(o){console.error("Failed to initialize Shivo AI:",o),S(a,"error")}});function y(o,l,p="message"){S(i,[...d(i),{id:Date.now(),speaker:o,message:l,type:p,timestamp:new Date,role:d(t)}])}async function O(o){try{await ds(o),y("system",`Switched to ${m[o].name} mode`,"system")}catch(l){y("error",`Failed to switch role: ${l.message}`,"error")}}async function nt(){try{S(s,!0),S(n,"");const o=await R.startVoiceListening();o.actions&&o.actions.forEach(l=>{l.type==="listening_started"&&y("system","Listening for your voice...","system")})}catch(o){y("error",`Voice interaction failed: ${o.message}`,"error"),S(s,!1)}}async function it(){try{S(s,!1);const o=await R.stopVoiceListening();d(n)&&(y("user",d(n),"voice"),await at(d(n)))}catch(o){y("error",`Failed to stop voice interaction: ${o.message}`,"error")}}async function at(o){try{const l=await he({type:"voice_command",text:o,source:"voice"});l.responses&&l.responses.length>0&&y("assistant",l.responses[0],"response"),l.actions&&l.actions.forEach(p=>{ve(p)})}catch(l){y("error",`Failed to process command: ${l.message}`,"error")}}async function fe(){const o=document.getElementById("text-input");if(!o||!o.value.trim())return;const l=o.value.trim();o.value="",y("user",l,"text");try{const p=await he({type:"text_message",text:l,source:"text"});p.responses&&p.responses.length>0&&y("assistant",p.responses[0],"response"),p.actions&&p.actions.forEach(w=>{ve(w)})}catch(p){y("error",`Failed to send message: ${p.message}`,"error")}}function ve(o){switch(o.type){case"music_generated":y("system",`üéµ Generated music: ${o.data.prompt}`,"action");break;case"plan_created":y("system",`üìã Created plan: ${o.data.title}`,"action");break;case"task_scheduled":y("system",`‚úÖ Scheduled task: ${o.data.title}`,"action");break;case"emotion_detected":y("system",`üòä Detected emotion: ${o.data.primary}`,"emotion");break;default:console.log("Agent action:",o)}}function rt(o){o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),fe())}async function ot(){y("system","ü§ñ Demonstrating autonomous behavior...","demo"),setTimeout(async()=>{try{const o=await he({type:"check_routines",context:"demo"});o.responses&&o.responses.length>0&&y("assistant",o.responses[0],"autonomous")}catch(o){y("error",`Autonomy demo failed: ${o.message}`,"error")}},2e3)}async function ct(){ms(),y("assistant",`Here are my agentic capabilities:

${["üéØ Goal-oriented task planning","üß† Contextual memory and learning","üéôÔ∏è Voice command processing","üéº AI music generation","üé® Role-aware UI adaptation","üîß Tool integration and automation","‚è∞ Autonomous routine execution"].map(l=>`‚Ä¢ ${l}`).join(`
`)}`,"info")}Lt(),_();var we=xs();It(o=>{Dt.title="Shivo Agentic AI - Smart Family Assistant"});var _e=h(G(we)),J=c(_e),xe=c(J),be=c(xe),Y=c(be),ke=c(Y),lt=c(ke);$(lt,{icon:"heroicons:sparkles",class:"w-6 h-6 text-white"}),r(ke),_(2),r(Y);var Ae=h(Y,2),Q=c(Ae),$e=c(Q),Se=h($e,2),ut=c(Se,!0);r(Se),r(Q);var ze=h(Q,2),dt=c(ze);r(ze),r(Ae),r(be),r(xe),r(J);var Me=h(J,2),Pe=c(Me),X=c(Pe),Te=c(X),Z=h(c(Te),2);Ye(Z,5,()=>Object.entries(m),Qe,(o,l)=>{var p=Et(()=>jt(d(l),2));let w=()=>d(p)[0],x=()=>d(p)[1];var M=ps(),H=c(M),I=c(H),me=c(I,!0);r(I);var b=h(I,2),k=c(b),C=c(k,!0);r(k);var D=h(k,2),pe=c(D,!0);r(D),r(b),r(H),r(M),T(()=>{N(M,1,`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${d(t)===w()?`border-${x().color}-500 bg-${x().color}-50`:"border-gray-200 hover:border-gray-300"}`),f(me,x().avatar),f(C,x().name),f(pe,x().description)}),F("click",M,()=>O(w())),A(o,M)}),r(Z);var Re=h(Z,2),Ie=h(c(Re),2),ee=c(Ie),Ce=h(c(ee),2),mt=c(Ce,!0);r(Ce),r(ee);var te=h(ee,2),De=h(c(te),2),pt=c(De,!0);r(De),r(te);var Ee=h(te,2),Fe=h(c(Ee),2),ht=c(Fe,!0);r(Fe),r(Ee),r(Ie),r(Re),r(Te),r(X);var je=h(X,2),se=c(je),ne=c(se),Le=c(ne),ie=c(Le),ae=c(ie),gt=c(ae,!0);r(ae);var Ne=h(ae,2),re=c(Ne),yt=c(re);r(re);var Oe=h(re,2),ft=c(Oe,!0);r(Oe),r(Ne),r(ie);var Be=h(ie,2),B=c(Be),vt=c(B);$(vt,{icon:"heroicons:information-circle",class:"w-4 h-4"}),_(),r(B);var oe=h(B,2),wt=c(oe);$(wt,{icon:"heroicons:play",class:"w-4 h-4"}),_(),r(oe),r(Be),r(Le),r(ne);var ce=h(ne,2);Ye(ce,5,()=>d(i),Qe,(o,l)=>{var p=fs(),w=c(p),x=c(w);{var M=b=>{var k=hs(),C=h(c(k),2),D=c(C,!0);r(C),r(k),T(()=>f(D,d(l).message)),A(b,k)},H=b=>{var k=Ft(),C=G(k);{var D=E=>{var P=gs(),W=c(P);$(W,{icon:"heroicons:check-circle",class:"w-4 h-4"});var Je=h(W,2),Pt=c(Je,!0);r(Je),r(P),T(()=>f(Pt,d(l).message)),A(E,P)},pe=E=>{var P=ys(),W=c(P,!0);r(P),T(()=>f(W,d(l).message)),A(E,P)};q(C,E=>{d(l).type==="action"?E(D):E(pe,!1)},!0)}A(b,k)};q(x,b=>{d(l).type==="emotion"?b(M):b(H,!1)})}var I=h(x,2),me=c(I,!0);r(I),r(w),r(p),T(b=>{N(p,1,`flex ${d(l).speaker==="user"?"justify-end":"justify-start"}`),N(w,1,`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${d(l).speaker==="user"?"bg-blue-500 text-white":d(l).type==="error"?"bg-red-100 text-red-800":d(l).type==="system"?"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-800"}`),f(me,b)},[()=>d(l).timestamp.toLocaleTimeString()]),A(o,p)}),r(ce);var Ue=h(ce,2),le=c(Ue),Ve=c(le),U=h(Ve,2),_t=c(U);$(_t,{icon:"heroicons:paper-airplane",class:"w-5 h-5"}),r(U);var V=h(U,2),xt=c(V);{var bt=o=>{var l=vs(),p=G(l);$(p,{icon:"heroicons:microphone",class:"w-5 h-5 animate-pulse"}),_(),A(o,l)},kt=o=>{var l=ws(),p=G(l);$(p,{icon:"heroicons:microphone",class:"w-5 h-5"}),_(),A(o,l)};q(xt,o=>{d(s)?o(bt):o(kt,!1)})}r(V),r(le);var At=h(le,2);{var $t=o=>{var l=_s(),p=c(l),w=h(c(p));r(p),r(l),T(()=>f(w,` ${d(n)??""}`)),A(o,l)};q(At,o=>{d(n)&&o($t)})}r(Ue),r(se);var He=h(se,2),ue=c(He),We=c(ue),St=c(We);$(St,{icon:"heroicons:brain",class:"w-6 h-6 text-purple-600"}),_(2),r(We),_(2),r(ue);var de=h(ue,2),Ge=c(de),zt=c(Ge);$(zt,{icon:"heroicons:calendar",class:"w-6 h-6 text-blue-600"}),_(2),r(Ge),_(2),r(de);var qe=h(de,2),Ke=c(qe),Mt=c(Ke);$(Mt,{icon:"heroicons:musical-note",class:"w-6 h-6 text-green-600"}),_(2),r(Ke),_(2),r(qe),r(He),r(je),r(Pe),r(Me),r(_e),T(()=>{var o,l,p;N($e,1,`w-2 h-2 rounded-full ${d(a)==="active"?"bg-green-500":d(a)==="error"?"bg-red-500":"bg-yellow-500"}`),f(ut,d(a)),f(dt,`${d(u).activeAgents??""} agents ‚Ä¢ ${d(u).memoryItems??""} memories`),f(mt,d(u).activeAgents),f(pt,d(u).memoryItems),f(ht,d(u).plansCreated),f(gt,((o=m[d(t)])==null?void 0:o.avatar)||"ü§ñ"),f(yt,`${(((l=m[d(t)])==null?void 0:l.name)||"Shivo")??""} Mode`),f(ft,((p=m[d(t)])==null?void 0:p.description)||"Intelligent assistance"),N(V,1,`px-6 py-3 ${d(s)?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"} text-white rounded-xl transition-colors duration-200 flex items-center gap-2`)}),F("click",B,ct),F("click",oe,ot),F("keydown",Ve,rt),F("click",U,fe),F("click",V,function(...o){var l;(l=d(s)?it:nt)==null||l.apply(this,o)}),A(g,we),Ct()}function Es(g){bs(g,{})}export{Es as component};
