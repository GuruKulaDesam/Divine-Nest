var ao=Object.defineProperty;var nr=n=>{throw TypeError(n)};var ro=(n,t,e)=>t in n?ao(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var se=(n,t,e)=>ro(n,typeof t!="symbol"?t+"":t,e),ca=(n,t,e)=>t.has(n)||nr("Cannot "+e);var Pe=(n,t,e)=>(ca(n,t,"read from private field"),e?e.call(n):t.get(n)),xn=(n,t,e)=>t.has(n)?nr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),da=(n,t,e,a)=>(ca(n,t,"write to private field"),a?a.call(n,e):t.set(n,e),e),ar=(n,t,e)=>(ca(n,t,"access private method"),e);import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{l as Qr,u as nn,bd as dt,ad as ft,ag as H,aC as io,ah as L,ai as k,aj as ht,am as A,ak as tt,an as I,t as l,aD as F,aq as at,ar as K,aB as ee,al as ut,R as te,J as mn,aO as At,aY as lt,y as G,ao as Ke,aS as ta,ay as oo,ap as Ye,x as ue,au as Kr,a_ as Jr,aZ as Zr,W as qe,K as ua}from"../chunks/CirWT1vm.js";import{i as z}from"../chunks/Dn4D4y7S.js";import{b as Ut}from"../chunks/C4FjXvtf.js";import{i as Na}from"../chunks/CVl-uwuJ.js";import{p as E,s as Fa,r as Ya}from"../chunks/zUXBVMR_.js";import{w as $r}from"../chunks/DWPppJ2y.js";import{s as vt,d as st,c as Hn,r as sn,a as bt,f as so,e as ti}from"../chunks/C2NsQb6S.js";import{a as Mn}from"../chunks/-jVUd4rq.js";import{s as we,o as ze,a as lo}from"../chunks/39fK5dpH.js";import{e as Jt,i as be}from"../chunks/Bsg-a7gO.js";import{a as he}from"../chunks/DTOIJTcU.js";import{a as ct,s as ge}from"../chunks/BFUbdx6v.js";import{c as le}from"../chunks/BnR7P2hC.js";import{h as co,I as uo}from"../chunks/CCPGIiiA.js";var Fe,fn,En,Zn,ei;const $n=class $n{constructor(t){xn(this,Zn);xn(this,Fe,new WeakMap);xn(this,fn);xn(this,En);da(this,En,t)}observe(t,e){var a=Pe(this,Fe).get(t)||new Set;return a.add(e),Pe(this,Fe).set(t,a),ar(this,Zn,ei).call(this).observe(t,Pe(this,En)),()=>{var r=Pe(this,Fe).get(t);r.delete(e),r.size===0&&(Pe(this,Fe).delete(t),Pe(this,fn).unobserve(t))}}};Fe=new WeakMap,fn=new WeakMap,En=new WeakMap,Zn=new WeakSet,ei=function(){return Pe(this,fn)??da(this,fn,new ResizeObserver(t=>{for(var e of t){$n.entries.set(e.target,e);for(var a of Pe(this,Fe).get(e.target)||[])a(e)}}))},se($n,"entries",new WeakMap);let Ma=$n;var fo=new Ma({box:"border-box"});function ln(n,t,e){var a=fo.observe(n,()=>e(n[t]));Qr(()=>(nn(()=>e(n[t])),a))}function xe(n,t="data-id"){let e=n;for(!e.tagName&&n.target&&(e=n.target);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}return null}function Da(n,t="data-id"){const e=xe(n,t);return e?e.getAttribute(t):null}function On(n,t="data-id"){const e=xe(n,t);return e?ea(e.getAttribute(t)):null}function ea(n){if(typeof n=="string"){const t=n*1;if(!isNaN(t))return t}return n}function ho(){return{detect:()=>!0,addEvent:function(n,t,e){return n.addEventListener(t,e),()=>n.removeEventListener(t,e)},addGlobalEvent:function(n,t){return document.addEventListener(n,t),()=>document.removeEventListener(n,t)},getTopNode:function(){return window.document.body}}}var cn=ho();function Aa(n){Object.assign(cn,n)}function rr(n,t,e){function a(r){const i=xe(r);if(!i)return;const o=ea(i.dataset.id);if(typeof t=="function")return t(o,r);let s,c=r.target;for(;c!=i;){if(s=c.dataset?c.dataset.action:null,s&&t[s]){t[s](o,r);return}c=c.parentNode}t[e]&&t[e](o,r)}cn.addEvent(n,e,a)}function _e(n,t){rr(n,t,"click"),t.dblclick&&rr(n,t.dblclick,"dblclick")}function go(n,t){for(let e=n.length-1;e>=0;e--)if(n[e]===t){n.splice(e,1);break}}var ni=new Date,Un=!1,Yn=[],Ue=[],ir=n=>{if(Un){Un=!1;return}for(let t=Ue.length-1;t>=0;t--){const{node:e,date:a,props:r}=Ue[t];if(!(a>ni)&&!e.contains(n.target)&&e!==n.target&&(r.callback&&r.callback(n),r.modal||n.defaultPrevented))break}},mo=n=>{ni=new Date,Un=!0;for(let t=Ue.length-1;t>=0;t--){const{node:e}=Ue[t];if(!e.contains(n.target)&&e!==n.target){Un=!1;break}}};function Ee(n,t){Yn.length||(Yn=[cn.addGlobalEvent("click",ir,n),cn.addGlobalEvent("contextmenu",ir,n),cn.addGlobalEvent("mousedown",mo,n)]),typeof t!="object"&&(t={callback:t});const e={node:n,date:new Date,props:t};return Ue.push(e),{destroy(){go(Ue,e),Ue.length||(Yn.forEach(a=>a()),Yn=[])}}}var or=new Date().valueOf();function na(){return or+=1,or}function ve(n){return n<10?"0"+n:n.toString()}function vo(n){const t=ve(n);return t.length==2?"0"+t:t}function ai(n){const t=Math.floor(n/11)*11;return{start:t,end:t+11}}function wo(n){let t=n.getDay();t===0&&(t=7);const e=new Date(n.valueOf());e.setDate(n.getDate()+(4-t));const a=e.getFullYear(),r=Math.floor((e.getTime()-new Date(a,0,1).getTime())/864e5);return 1+Math.floor(r/7)}var sr=["",""];function yo(n,t,e){switch(n){case"%d":return ve(t.getDate());case"%m":return ve(t.getMonth()+1);case"%j":return t.getDate();case"%n":return t.getMonth()+1;case"%y":return ve(t.getFullYear()%100);case"%Y":return t.getFullYear();case"%D":return e.dayShort[t.getDay()];case"%l":return e.dayFull[t.getDay()];case"%M":return e.monthShort[t.getMonth()];case"%F":return e.monthFull[t.getMonth()];case"%h":return ve((t.getHours()+11)%12+1);case"%g":return(t.getHours()+11)%12+1;case"%G":return t.getHours();case"%H":return ve(t.getHours());case"%i":return ve(t.getMinutes());case"%a":return((t.getHours()>11?e.pm:e.am)||sr)[0];case"%A":return((t.getHours()>11?e.pm:e.am)||sr)[1];case"%s":return ve(t.getSeconds());case"%S":return vo(t.getMilliseconds());case"%W":return ve(wo(t));case"%c":{let a=t.getFullYear()+"";return a+="-"+ve(t.getMonth()+1),a+="-"+ve(t.getDate()),a+="T",a+=ve(t.getHours()),a+=":"+ve(t.getMinutes()),a+=":"+ve(t.getSeconds()),a}default:return n}}var xo=/%[a-zA-Z]/g;function fa(n,t){return typeof n=="function"?n:function(e){return e?(e.getMonth||(e=new Date(e)),n.replace(xo,a=>yo(a,e,t))):""}}function lr(n){return n&&typeof n=="object"&&!Array.isArray(n)}function Ta(n,t){for(const e in t){const a=t[e];lr(n[e])&&lr(a)?n[e]=Ta({...n[e]},t[e]):n[e]=t[e]}return n}function za(n){return{getGroup(t){const e=n[t];return a=>e&&e[a]||a},getRaw(){return n},extend(t,e){if(!t)return this;let a;return e?a=Ta({...t},n):a=Ta({...n},t),za(a)}}}var _o=(n,t,e)=>t.onchange&&t.onchange({value:e(),input:!0}),bo=(n,t,e)=>t.onchange&&t.onchange({value:e()}),ko=H("<textarea></textarea>");function po(n,t){ft(t,!0);let e=E(t,"value",15,""),a=E(t,"id",19,na),r=E(t,"placeholder",3,""),i=E(t,"title",3,""),o=E(t,"disabled",3,!1),s=E(t,"error",3,!1),c=E(t,"readonly",3,!1);var d=ko();io(d);let u;d.__input=[_o,t,e],d.__change=[bo,t,e],L(f=>{u=vt(d,1,"wx-textarea svelte-1293639",null,u,f),st(d,"id",a()),d.disabled=o(),st(d,"placeholder",r()),d.readOnly=c(),st(d,"title",i())},[()=>({"wx-error":s()})]),Mn(d,e),k(n,d),ht()}dt(["input","change"]);const So=(n,t)=>{t.onclick&&t.onclick(n)};var Mo=H("<i></i>"),Do=H("<button><!> <!></button>");function ri(n,t){ft(t,!0);let e=E(t,"type",3,""),a=E(t,"css",3,""),r=E(t,"icon",3,""),i=E(t,"disabled",3,!1),o=E(t,"title",3,""),s=E(t,"text",3,""),c=F(()=>{let v=e()?e().split(" ").filter(x=>x!=="").map(x=>"wx-"+x).join(" "):"";return a()+(a()?" ":"")+v});var d=Do();let u;d.__click=[So,t];var f=A(d);{var g=v=>{var x=Mo();L(()=>vt(x,1,Hn(r()),"svelte-1gdo8eb")),k(v,x)};z(f,v=>{r()&&v(g)})}var h=tt(f,2);{var m=v=>{var x=at(),_=K(x);we(_,()=>t.children),k(v,x)},w=v=>{var x=ee();L(()=>ut(x,s())),k(v,x)};z(h,v=>{t.children?v(m):v(w,!1)})}I(d),L(v=>{st(d,"title",o()),u=vt(d,1,`wx-button ${l(c)}`,"svelte-1gdo8eb",u,v),d.disabled=i()},[()=>({"wx-icon":r()&&!t.children})]),k(n,d),ht()}dt(["click"]);function To({target:n},t,e,a){t(n.checked),e.onchange&&e.onchange({value:t(),inputValue:a()})}var Co=H('<span class="svelte-1em60wg"> </span>'),Wo=H('<div class="wx-checkbox svelte-1em60wg"><input type="checkbox" class="svelte-1em60wg"/> <label class="svelte-1em60wg"><span class="svelte-1em60wg"></span> <!></label></div>');function Po(n,t){ft(t,!0);let e=E(t,"id",19,na),a=E(t,"label",3,""),r=E(t,"inputValue",3,""),i=E(t,"value",15,!1),o=E(t,"style",3,""),s=E(t,"disabled",3,!1);var c=Wo(),d=A(c);sn(d),d.__change=[To,i,t,r];var u=tt(d,2),f=tt(A(u),2);{var g=h=>{var m=Co(),w=A(m,!0);I(m),L(()=>ut(w,a())),k(h,m)};z(f,h=>{a()&&h(g)})}I(u),I(c),L(()=>{bt(c,o()),st(d,"id",e()),d.disabled=s(),so(d,i()),ti(d,r()),st(u,"for",e())}),k(n,c),ht()}dt(["change"]);var Eo=H("<div><!></div>");function ii(n,t){ft(t,!0);let e=E(t,"position",7,"bottom"),a=E(t,"align",7,"start"),r=E(t,"autoFit",3,!0),i=E(t,"width",3,"100%"),o;te(()=>{if(r()){const u=o.getBoundingClientRect(),f=cn.getTopNode(o).getBoundingClientRect();return u.right>=f.right&&a("end"),u.bottom>=f.bottom&&e("top"),`${e()}-${a()}`}});function s(u){t.oncancel&&t.oncancel(u)}var c=Eo(),d=A(c);we(d,()=>t.children??mn),I(c),he(c,(u,f)=>Ee==null?void 0:Ee(u,f),()=>s),Ut(c,u=>o=u,()=>o),L(()=>{vt(c,1,`wx-dropdown ${`wx-${e()}-${a()}`}`,"svelte-x4xo5c"),bt(c,`width:${i()??""}`)}),k(n,c),ht()}dt(["click"]);const Ho="en-US",Oo={monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today",am:["am","AM"],pm:["pm","PM"],weekStart:0,clockFormat:24},Io={ok:"OK",cancel:"Cancel",select:"Select","No data":"No data","Rows per page":"Rows per page","Total pages":"Total pages"},Ro={timeFormat:"%H:%i",dateFormat:"%m/%d/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},oi={core:Io,calendar:Oo,formats:Ro,lang:Ho};function si(){return za(oi)}dt(["keydown","change"]);dt(["click"]);function Lo(){let n=null,t=!1,e,a,r,i;const o=(g,h,m,w)=>{e=g,a=h,r=m,i=w},s=g=>{n=g,t=n!==null,r(n)},c=(g,h)=>{const m=g===null?null:Math.max(0,Math.min(n+g,a.length-1));m!==n&&(s(m),e?d(m,h):requestAnimationFrame(()=>d(m,h)))},d=(g,h)=>{if(g!==null&&e){const m=e.querySelectorAll(".wx-list > .wx-item")[g];m&&(m.scrollIntoView({block:"nearest"}),h&&h.preventDefault())}};return{move:g=>{const h=On(g),m=a.findIndex(w=>w.id==h);m!==n&&s(m)},keydown:(g,h)=>{switch(g.code){case"Enter":t?i():s(0);break;case"Space":t||s(0);break;case"Escape":r(n=null);break;case"Tab":r(n=null);break;case"ArrowDown":c(t?1:h||0,g);break;case"ArrowUp":c(t?-1:h||0,g);break}},init:o,navigate:c}}var No=H("<div><!></div>"),Fo=H('<div class="wx-no-data svelte-1eimhpm"> </div>'),Yo=H('<div class="wx-list svelte-1eimhpm"><!></div>');function ja(n,t){ft(t,!0);let e=E(t,"items",19,()=>[]),a=lt(void 0),r=lt(null);const i=(At("wx-i18n")||si()).getGroup("core"),{move:o,keydown:s,init:c,navigate:d}=Lo(),u=m=>{var w;m&&m.stopPropagation(),t.onselect&&t.onselect({id:(w=e()[l(r)])==null?void 0:w.id})};te(()=>{c(l(a),e(),m=>G(r,m,!0),u)}),ze(()=>{t.onready&&t.onready({navigate:d,keydown:s,move:o})});var f=at(),g=K(f);{var h=m=>{ii(m,{oncancel:()=>d(null),children:(w,v)=>{var x=Yo();x.__click=u,x.__mousemove=o;var _=A(x);{var b=M=>{var y=at(),D=K(y);Jt(D,19,e,C=>C.id,(C,S,W)=>{var P=No();let T;var j=A(P);{var R=J=>{var N=at(),Z=K(N);we(Z,()=>t.children,()=>({option:l(S)})),k(J,N)},U=J=>{var N=ee();L(()=>ut(N,l(S).label)),k(J,N)};z(j,J=>{t.children?J(R):J(U,!1)})}I(P),L(J=>{T=vt(P,1,"wx-item svelte-1eimhpm",null,T,J),st(P,"data-id",l(S).id)},[()=>({"wx-focus":l(W)===l(r)})]),k(C,P)}),k(M,y)},p=M=>{var y=Fo(),D=A(y,!0);I(y),L(C=>ut(D,C),[()=>i("No data")]),k(M,y)};z(_,M=>{e().length?M(b):M(p,!1)})}I(x),Ut(x,M=>G(a,M),()=>l(a)),k(w,x)},$$slots:{default:!0}})};z(g,m=>{l(r)!==null&&m(h)})}k(n,f),ht()}dt(["click","mousemove"]);dt(["click","keydown","input"]);const ha=(n,t,e)=>t.onchange&&t.onchange({value:e(),input:!0}),ga=(n,t,e)=>t.onchange&&t.onchange({value:e()});function Ao(n,t,e){n.stopPropagation(),t(""),e.onchange&&e.onchange({value:t()})}var zo=H('<input type="password" class="svelte-1uul0pm"/>'),jo=H('<input type="number" class="svelte-1uul0pm"/>'),qo=H('<input class="svelte-1uul0pm"/>'),Bo=H("<i></i>"),Vo=H('<i class="wx-icon wxi-close svelte-1uul0pm"></i> <!>',1),Uo=H("<i></i>"),Xo=H("<div><!> <!></div>");function li(n,t){ft(t,!0);let e=E(t,"value",15,""),a=E(t,"id",19,na),r=E(t,"readonly",3,!1),i=E(t,"focus",3,!1),o=E(t,"select",3,!1),s=E(t,"type",3,"text"),c=E(t,"placeholder",3,""),d=E(t,"disabled",3,!1),u=E(t,"error",3,!1),f=E(t,"inputStyle",3,""),g=E(t,"title",3,""),h=E(t,"css",3,""),m=E(t,"icon",3,""),w=E(t,"clear",3,!1),v=F(()=>m()&&h().indexOf("wx-icon-left")===-1?"wx-icon-right "+h():h()),x=F(()=>m()&&h().indexOf("wx-icon-left")!==-1),_;ze(()=>{setTimeout(()=>{i()&&_&&_.focus(),o()&&_&&_.select()},1)});var b=Xo();let p;var M=A(b);{var y=P=>{var T=zo();sn(T),T.__input=[ha,t,e],T.__change=[ga,t,e],Ut(T,j=>_=j,()=>_),L(()=>{st(T,"id",a()),T.readOnly=r(),T.disabled=d(),st(T,"placeholder",c()),bt(T,f()),st(T,"title",g())}),Mn(T,e),k(P,T)},D=P=>{var T=at(),j=K(T);{var R=J=>{var N=jo();sn(N),N.__input=[ha,t,e],N.__change=[ga,t,e],Ut(N,Z=>_=Z,()=>_),L(()=>{st(N,"id",a()),N.readOnly=r(),N.disabled=d(),st(N,"placeholder",c()),bt(N,f()),st(N,"title",g())}),Mn(N,e),k(J,N)},U=J=>{var N=qo();sn(N),N.__input=[ha,t,e],N.__change=[ga,t,e],Ut(N,Z=>_=Z,()=>_),L(()=>{st(N,"id",a()),N.readOnly=r(),N.disabled=d(),st(N,"placeholder",c()),st(N,"title",g()),bt(N,f())}),Mn(N,e),k(J,N)};z(j,J=>{s()=="number"?J(R):J(U,!1)},!0)}k(P,T)};z(M,P=>{s()=="password"?P(y):P(D,!1)})}var C=tt(M,2);{var S=P=>{var T=Vo(),j=K(T);j.__click=[Ao,e,t];var R=tt(j,2);{var U=J=>{var N=Bo();L(()=>vt(N,1,`wx-icon ${m()??""}`,"svelte-1uul0pm")),k(J,N)};z(R,J=>{l(x)&&J(U)})}k(P,T)},W=P=>{var T=at(),j=K(T);{var R=U=>{var J=Uo();L(()=>vt(J,1,`wx-icon ${m()??""}`,"svelte-1uul0pm")),k(U,J)};z(j,U=>{m()&&U(R)},!0)}k(P,T)};z(C,P=>{w()&&!d()&&e()?P(S):P(W,!1)})}I(b),L(P=>p=vt(b,1,`wx-text ${l(v)??""}`,"svelte-1uul0pm",p,P),[()=>({"wx-error":u(),"wx-disabled":d(),"wx-clear":w()})]),k(n,b),ht()}dt(["input","change","click"]);function Go(n,t){t.onshift&&t.onshift({diff:0,type:t.type})}var Qo=(n,t)=>t.onshift&&t.onshift({diff:-1,type:t.type}),Ko=H('<i class="wx-pager wxi-angle-left svelte-4lsrsp"></i>'),Jo=H('<span class="wx-spacer svelte-4lsrsp"></span>'),Zo=(n,t)=>t.onshift&&t.onshift({diff:1,type:t.type}),$o=H('<i class="wx-pager wxi-angle-right svelte-4lsrsp"></i>'),ts=H('<span class="wx-spacer svelte-4lsrsp"></span>'),es=H('<div class="wx-header svelte-4lsrsp"><!>  <span class="wx-label svelte-4lsrsp"> </span> <!></div>');function ns(n,t){ft(t,!0);const{calendar:e,formats:a}=At("wx-i18n").getRaw(),r=F(()=>t.date.getFullYear()),i=F(()=>{switch(t.type){case"month":return fa(a.monthYearFormat,e)(t.date);case"year":return fa(a.yearFormat,e)(t.date);case"duodecade":{const{start:w,end:v}=ai(l(r)),x=fa(a.yearFormat,e);return`${x(new Date(w,0,1))} - ${x(new Date(v,11,31))}`}}});var o=es(),s=A(o);{var c=w=>{var v=Ko();v.__click=[Qo,t],k(w,v)},d=w=>{var v=Jo();k(w,v)};z(s,w=>{t.part!="right"?w(c):w(d,!1)})}var u=tt(s,2);u.__click=[Go,t];var f=A(u,!0);I(u);var g=tt(u,2);{var h=w=>{var v=$o();v.__click=[Zo,t],k(w,v)},m=w=>{var v=ts();k(w,v)};z(g,w=>{t.part!="left"?w(h):w(m,!1)})}I(o),L(()=>ut(f,l(i))),k(n,o),ht()}dt(["click"]);var as=H('<button class="svelte-2s2nwk"><!></button>');function qa(n,t){var e=as();e.__click=function(...r){var i;(i=t.onclick)==null||i.apply(this,r)};var a=A(e);we(a,()=>t.children??mn),I(e),k(n,e)}dt(["click"]);var rs=H('<div class="wx-weekday svelte-16msgyq"> </div>'),is=H("<div> </div>"),os=H('<div><div class="wx-weekdays svelte-16msgyq"></div> <div class="wx-days svelte-16msgyq"></div></div>');function ss(n,t){ft(t,!0);let e=E(t,"part",3,""),a=E(t,"markers",3,null);const r=(At("wx-i18n")||si()).getRaw().calendar,i=(r.weekStart||7)%7,o=r.dayShort.slice(i).concat(r.dayShort.slice(0,i)),s=(b,p,M)=>new Date(b.getFullYear(),b.getMonth()+(p||0),b.getDate()+(M||0));let c=e()!=="normal";function d(b){const p=b.getDay();return p===0||p===6}function u(){const b=s(t.current,0,1-t.current.getDate());return b.setDate(b.getDate()-(b.getDay()-(i-7))%7),b}function f(){const b=s(t.current,1,-t.current.getDate());return b.setDate(b.getDate()+(6-b.getDay()+i)%7),b}const g={click:h};function h(b,p){p.stopPropagation(),t.onchange&&t.onchange(new Date(new Date(b))),t.oncancel&&t.oncancel()}const m=F(()=>e()=="normal"?[t.value?s(t.value).valueOf():0]:t.value?[t.value.start?s(t.value.start).valueOf():0,t.value.end?s(t.value.end).valueOf():0]:[0,0]),w=F(()=>{const b=u(),p=f(),M=t.current.getMonth();let y=[];for(let D=b;D<=p;D.setDate(D.getDate()+1)){const C={day:D.getDate(),in:D.getMonth()===M,date:D.valueOf()};let S="";if(S+=C.in?"":" wx-inactive",S+=l(m).indexOf(C.date)>-1?" wx-selected":"",c){const W=C.date==l(m)[0],P=C.date==l(m)[1];W&&!P?S+=" wx-left":P&&!W&&(S+=" wx-right"),C.date>l(m)[0]&&C.date<l(m)[1]&&(S+=" wx-inrange")}if(S+=d(D)?" wx-weekend":"",a()){const W=a()(D);W&&(S+=" "+W)}y.push({...C,css:S})}return y});var v=os(),x=A(v);Jt(x,21,()=>o,be,(b,p)=>{var M=rs(),y=A(M,!0);I(M),L(()=>ut(y,l(p))),k(b,M)}),I(x);var _=tt(x,2);Jt(_,21,()=>l(w),b=>b.date,(b,p)=>{var M=is();let y;var D=A(M,!0);I(M),L(C=>{y=vt(M,1,`wx-day ${l(p).css??""}`,"svelte-16msgyq",y,C),st(M,"data-id",l(p).date),ut(D,l(p).day)},[()=>({"wx-out":!l(p).in})]),k(b,M)}),I(_),he(_,(b,p)=>_e==null?void 0:_e(b,p),()=>g),I(v),k(n,v),ht()}var ls=H("<div> </div>"),cs=H('<div class="wx-months svelte-9himwl"></div> <div class="wx-buttons svelte-9himwl"><!></div>',1);function ds(n,t){ft(t,!0);let e=E(t,"value",15),a=E(t,"current",15);const r=At("wx-i18n").getRaw().calendar,i=r.monthShort,o=F(()=>a().getMonth()),s={click:c};function c(m,w){(m||m===0)&&(w.stopPropagation(),a().setMonth(m),a(new Date(a())),t.onshift&&t.onshift({})),t.part==="normal"&&e(new Date(a())),t.oncancel&&t.oncancel()}function d(){const m=new Date(ci(e(),t.part)||a());m.setMonth(a().getMonth()),m.setFullYear(a().getFullYear()),t.onchange&&t.onchange(m)}var u=cs(),f=K(u);Jt(f,21,()=>i,be,(m,w,v)=>{var x=ls();let _;st(x,"data-id",v);var b=A(x,!0);I(x),L(p=>{_=vt(x,1,"wx-month svelte-9himwl",null,_,p),ut(b,l(w))},[()=>({"wx-current":l(o)===v})]),k(m,x)}),I(f),he(f,(m,w)=>_e==null?void 0:_e(m,w),()=>s);var g=tt(f,2),h=A(g);qa(h,{onclick:d,children:(m,w)=>{Ke();var v=ee();L(()=>ut(v,r.done)),k(m,v)}}),I(g),k(n,u),ht()}var us=H("<div> </div>"),fs=H('<div class="wx-years svelte-8yi4l4"></div> <div class="wx-buttons svelte-8yi4l4"><!></div>',1);function hs(n,t){ft(t,!0);const e=At("wx-i18n").getRaw().calendar;let a=E(t,"value",15),r=E(t,"current",15);const i=F(()=>r().getFullYear()),o=F(()=>{const{start:m,end:w}=ai(l(i)),v=[];for(let x=m;x<=w;++x)v.push(x);return v}),s={click:c};function c(m,w){m&&(w.stopPropagation(),r().setFullYear(m),r(new Date(r())),t.onshift&&t.onshift({})),t.part==="normal"&&a(new Date(r())),t.oncancel&&t.oncancel()}function d(){const m=new Date(ci(a(),t.part)||r());m.setFullYear(r().getFullYear()),t.onchange&&t.onchange(m)}var u=fs(),f=K(u);Jt(f,21,()=>l(o),be,(m,w,v)=>{var x=us();let _;var b=A(x,!0);I(x),L(p=>{_=vt(x,1,"wx-year svelte-8yi4l4",null,_,p),st(x,"data-id",l(w)),ut(b,l(w))},[()=>({"wx-current":l(i)==l(w),"wx-prev-decade":v===0,"wx-next-decade":v===11})]),k(m,x)}),I(f),he(f,(m,w)=>_e==null?void 0:_e(m,w),()=>s);var g=tt(f,2),h=A(g);qa(h,{onclick:d,children:(m,w)=>{Ke();var v=ee();L(()=>ut(v,e.done)),k(m,v)}}),I(g),k(n,u),ht()}const cr={month:{component:ss,next:ms,prev:gs},year:{component:ds,next:ws,prev:vs},duodecade:{component:hs,next:xs,prev:ys}};function gs(n){return n=new Date(n),n.setMonth(n.getMonth()-1),n}function ms(n){return n=new Date(n),n.setMonth(n.getMonth()+1),n}function vs(n){return n=new Date(n),n.setFullYear(n.getFullYear()-1),n}function ws(n){return n=new Date(n),n.setFullYear(n.getFullYear()+1),n}function ys(n){return n=new Date(n),n.setFullYear(n.getFullYear()-10),n}function xs(n){return n=new Date(n),n.setFullYear(n.getFullYear()+10),n}function ci(n,t){let e;if(t==="normal")e=n;else{const{start:a,end:r}=n;t==="left"?e=a:t=="right"?e=r:e=a&&r}return e}var _s=H('<div class="wx-button-item svelte-msimvu"><!></div>'),bs=H('<div class="wx-buttons svelte-msimvu"></div>'),ks=H('<div><div class="wx-wrap svelte-msimvu"><!> <div><!> <!></div></div></div>');function ps(n,t){ft(t,!0);const e=At("wx-i18n").getGroup("calendar");let a=E(t,"current",15),r=E(t,"part",3,"normal"),i=E(t,"markers",3,null),o=E(t,"buttons",19,()=>["clear","today"]),s=lt("month"),c=F(()=>Array.isArray(o())?o():o()?["clear","today"]:[]);function d(y,D){y.preventDefault(),t.onchange&&t.onchange({value:D})}function u(){l(s)==="duodecade"?G(s,"year"):l(s)==="year"&&G(s,"month")}function f(y){const{diff:D}=y;if(D===0){l(s)==="month"?G(s,"year"):l(s)==="year"&&G(s,"duodecade");return}if(D){const C=cr[l(s)];a(D>0?C.next(a()):C.prev(a()))}t.onshift&&t.onshift()}function g(y){G(s,"month"),t.onchange&&t.onchange({select:!0,value:y})}function h(y){if(y==="done")return-1;if(y==="clear")return null;if(y==="today")return new Date}const m=F(()=>cr[l(s)].component);var w=ks(),v=A(w),x=A(v);ns(x,{get date(){return a()},get part(){return r()},get type(){return l(s)},onshift:f});var _=tt(x,2),b=A(_);le(b,()=>l(m),(y,D)=>{D(y,{get value(){return t.value},get part(){return r()},get markers(){return i()},onchange:g,oncancel:u,onshift:f,get current(){return a()},set current(C){a(C)}})});var p=tt(b,2);{var M=y=>{var D=bs();Jt(D,21,()=>l(c),be,(C,S)=>{var W=_s(),P=A(W);qa(P,{onclick:T=>d(T,h(l(S))),children:(T,j)=>{Ke();var R=ee();L(U=>ut(R,U),[()=>e(l(S))]),k(T,R)}}),I(W),k(C,W)}),I(D),k(y,D)};z(p,y=>{l(s)==="month"&&l(c).length>0&&y(M)})}I(_),I(v),I(w),L(()=>vt(w,1,`wx-calendar ${r()!=="normal"&&r()!=="both"?"wx-part":""}`,"svelte-msimvu")),k(n,w),ht()}function Ba(n,t){ft(t,!0);let e=E(t,"words",3,null),a=E(t,"optional",3,!1),r=At("wx-i18n");(!r||e()!==null)&&(r||(r=za(oi)),r=r.extend(e(),a()),ta("wx-i18n",r));var i=at(),o=K(i);we(o,()=>t.children??mn),k(n,i),ht()}function Ss(n,t){ft(t,!0);let e=E(t,"value",15),a=E(t,"current",15),r=E(t,"markers",3,null),i=E(t,"buttons",19,()=>["clear","today"]);function o(c){(!a()||c)&&a(e()?new Date(e()):new Date),a().setDate(1)}o(e());function s(c){const d=c.value;d?(e(new Date(d)),o(!0)):e(null),t.onchange&&t.onchange({value:e()})}Ba(n,{children:(c,d)=>{ps(c,{get value(){return e()},get markers(){return r()},get buttons(){return i()},onchange:s,get current(){return a()},set current(u){a(u)}})},$$slots:{default:!0}}),ht()}dt(["click"]);dt(["click"]);dt(["click"]);dt(["click","keydown","input"]);dt(["input","click"]);dt(["change"]);function Ms(n,t,e){n.stopPropagation(),t(""),e.onchange&&e.onchange({value:t()})}var Ds=H('<span class="wx-placeholder svelte-e7wnft"> </span>'),Ts=H('<i class="wx-icon wxi-close svelte-e7wnft"></i>'),Cs=H('<i class="wx-icon wxi-angle-down svelte-e7wnft"></i>'),Ws=H('<div tabindex="0"><div class="wx-label svelte-e7wnft"><!></div> <!> <!></div>');function Ps(n,t){ft(t,!0);let e=E(t,"value",15,""),a=E(t,"options",19,()=>[]),r=E(t,"textOptions",3,null),i=E(t,"placeholder",3,""),o=E(t,"disabled",3,!1),s=E(t,"error",3,!1),c=E(t,"title",3,""),d=E(t,"textField",3,"label"),u=E(t,"clear",3,!1),f,g;function h(T){f=T.navigate,g=T.keydown}let m=F(()=>e()||e()===0?(r()||a()).find(T=>T.id===e()):null);function w({id:T}){(T||T===0)&&(e(T),f(null),t.onchange&&t.onchange({value:e()}))}const v=()=>a().findIndex(T=>T.id===e());var x=Ws();let _;x.__click=()=>f==null?void 0:f(v()),x.__keydown=T=>g==null?void 0:g(T,v());var b=A(x),p=A(b);{var M=T=>{var j=at(),R=K(j);{var U=N=>{var Z=at(),gt=K(Z);we(gt,()=>t.children,()=>l(m)),k(N,Z)},J=N=>{var Z=ee();L(()=>ut(Z,l(m)[d()])),k(N,Z)};z(R,N=>{t.children?N(U):N(J,!1)})}k(T,j)},y=T=>{var j=at(),R=K(j);{var U=N=>{var Z=Ds(),gt=A(Z,!0);I(Z),L(()=>ut(gt,i())),k(N,Z)},J=N=>{var Z=ee(" ");k(N,Z)};z(R,N=>{i()?N(U):N(J,!1)},!0)}k(T,j)};z(p,T=>{l(m)?T(M):T(y,!1)})}I(b);var D=tt(b,2);{var C=T=>{var j=Ts();j.__click=[Ms,e,t],k(T,j)},S=T=>{var j=Cs();k(T,j)};z(D,T=>{u()&&!o()&&e()?T(C):T(S,!1)})}var W=tt(D,2);{var P=T=>{ja(T,{get items(){return a()},onready:h,onselect:w,children:(R,U)=>{let J=()=>U==null?void 0:U().option;var N=at(),Z=K(N);{var gt=Q=>{var et=at(),St=K(et);we(St,()=>t.children,J),k(Q,et)},Ct=Q=>{var et=ee();L(()=>ut(et,J()[d()])),k(Q,et)};z(Z,Q=>{t.children?Q(gt):Q(Ct,!1)})}k(R,N)},$$slots:{default:!0}})};z(W,T=>{o()||T(P)})}I(x),L(T=>{_=vt(x,1,"wx-richselect svelte-e7wnft",null,_,T),st(x,"title",c())},[()=>({"wx-error":s(),"wx-disabled":o(),"wx-nowrap":!t.children})]),k(n,x),ht()}dt(["click","keydown"]);dt(["click"]);dt(["change","click"]);dt(["input","change"]);dt(["change"]);dt(["click"]);dt(["click","input"]);dt(["click"]);dt(["keydown"]);var Es=H('<label class="svelte-u2ug1v"> </label>'),Hs=H("<div><!> <div><!></div></div>");function Os(n,t){ft(t,!0);let e=E(t,"label",3,""),a=E(t,"position",3,""),r=E(t,"width",3,""),i=E(t,"error",3,!1),o=E(t,"type",3,""),s=E(t,"required",3,!1),c=na();var d=Hs();let u;var f=A(d);{var g=w=>{var v=Es(),x=A(v,!0);I(v),L(()=>{st(v,"for",c),ut(x,e())}),k(w,v)};z(f,w=>{e()&&w(g)})}var h=tt(f,2),m=A(h);we(m,()=>t.children??mn,()=>({id:c})),I(h),I(d),L(w=>{u=vt(d,1,`wx-field wx-${a()??""}`,"svelte-u2ug1v",u,w),bt(d,r()?`width: ${r()}`:""),vt(h,1,`wx-field-control wx-${o()??""}`,"svelte-u2ug1v")},[()=>({"wx-error":i(),"wx-required":s()})]),k(n,d),ht()}dt(["click"]);function Is(n){var t=at(),e=K(t);co(e,()=>`<style>
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 500;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/500.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/500.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 400;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/regular.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/regular.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 600;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/600.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/600.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 700;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/700.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/700.woff') format('woff');
}
  </style>`),k(n,t)}var Rs=H('<link rel="preconnect" href="https://cdn.svar.dev" crossorigin=""/> <!> <link rel="stylesheet" href="https://cdn.svar.dev/fonts/wxi/wx-icons.css"/>',1),Ls=H('<div class="wx-willow-theme" style="height:100%"><!></div>');function dr(n,t){ft(t,!0);let e=E(t,"fonts",3,!0);ta("wx-theme","willow");var a=at();oo(o=>{var s=at(),c=K(s);{var d=u=>{var f=Rs(),g=tt(K(f),2);Is(g),Ke(2),k(u,f)};z(c,u=>{e()&&u(d)})}k(o,s)});var r=K(a);{var i=o=>{var s=Ls(),c=A(s);we(c,()=>t.children),I(s),k(o,s)};z(r,o=>{t.children&&o(i)})}k(n,a),ht()}new Date().valueOf();var di=class{constructor(n){this._nextHandler=null,this._dispatch=n,this.exec=this.exec.bind(this)}async exec(n,t){return this._dispatch(n,t),this._nextHandler&&await this._nextHandler.exec(n,t),t}setNext(n){return this._nextHandler=n}},Ns=Array.isArray,Fs=Object.defineProperty;function Ys(n){for(var t=0;t<n.length;t++)n[t]()}var Xr,Gr,ur=(Gr=(Xr=globalThis.process)==null?void 0:Xr.env)==null?void 0:Gr.NODE_ENV,ui=ur&&!ur.toLowerCase().startsWith("prod");function As(n){if(ui){const t=new Error(`rune_outside_svelte
The \`${n}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}var an=[];function zs(){var n=an;an=[],Ys(n)}function js(n){if(an.length===0){var t=an;queueMicrotask(()=>{t===an&&zs()})}an.push(n)}function qs(n){try{return n()}finally{}}function Bs(n,t,e,a={}){function r(i){if(a.capture||Us.call(t,i),!i.cancelBubble)return qs(()=>e==null?void 0:e.call(this,i))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?js(()=>{t.addEventListener(n,r,a)}):t.addEventListener(n,r,a),r}function Vs(n,t,e,a={}){var r=Bs(t,n,e,a);return()=>{n.removeEventListener(t,r,a)}}var fr=null;function Us(n){var v;var t=this,e=t.ownerDocument,a=n.type,r=((v=n.composedPath)==null?void 0:v.call(n))||[],i=r[0]||n.target;fr=n;var o=0,s=fr===n&&n.__root;if(s){var c=r.indexOf(s);if(c!==-1&&(t===document||t===window)){n.__root=t;return}var d=r.indexOf(t);if(d===-1)return;c<=d&&(o=c)}if(i=r[o]||n.target,i!==t){Fs(n,"currentTarget",{configurable:!0,get(){return i||e}});try{for(var u,f=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var h=i["__"+a];if(h!=null&&(!i.disabled||n.target===i))if(Ns(h)){var[m,...w]=h;m.apply(i,[n,...w])}else h.call(i,n)}catch(x){u?f.push(x):u=x}if(n.cancelBubble||g===t||g===null)break;i=g}if(u){for(let x of f)queueMicrotask(()=>{throw x});throw u}}finally{n.__root=t,delete n.currentTarget}}}if(ui){let n=function(t){if(!(t in globalThis)){let e;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(e!==void 0)return e;As(t)},set:a=>{e=a}})}};n("$state"),n("$effect"),n("$derived"),n("$inspect"),n("$props"),n("$bindable")}var Va={addEvent:Vs};Aa(Va);const Xs={gantt:{"Task name":"Task name","Start date":"Start date","Add task":"Add task",Duration:"Duration",Task:"Task",Milestone:"Milestone","Summary task":"Summary task",Save:"Save",Delete:"Delete",Name:"Name",Description:"Description","Select type":"Select type",Type:"Type","End date":"End date",Progress:"Progress",Predecessors:"Predecessors",Successors:"Successors","Add task name":"Add task name","Add description":"Add description","Select link type":"Select link type","End-to-start":"End-to-start","Start-to-start":"Start-to-start","End-to-end":"End-to-end","Start-to-end":"Start-to-end",Add:"Add","Child task":"Child task","Task above":"Task above","Task below":"Task below","Convert to":"Convert to",Edit:"Edit",Cut:"Cut",Copy:"Copy",Paste:"Paste",Move:"Move",Up:"Up",Down:"Down",Indent:"Indent",Outdent:"Outdent","Split task":"Split task","New task":"New task","Move up":"Move up","Move down":"Move down"}};var fi=new Date().valueOf(),Gs=()=>fi++;function hi(){return"temp://"+fi++}var hr=class{constructor(n){this._data=n,this._pool=new Map;for(let t=0;t<n.length;t++){const e=n[t];this._pool.set(e.id,e)}}add(n){n={id:Gs(),...n},this._data.push(n),this._pool.set(n.id,n)}update(n,t){const e=this._data.findIndex(r=>r.id==n),a={...this._data[e],...t};this._data[e]=a,this._pool.set(a.id,a)}remove(n){this._data=this._data.filter(t=>t.id!=n),this._pool.delete(n)}filter(n){this._data=this._data.filter(t=>{const e=n(t);return e||this._pool.delete(t.id),e})}byId(n){return this._pool.get(n)}map(n){return this._data.map(n)}forEach(n){this._data.forEach(n)}},Qs=class{constructor(t){const e={id:0,$level:0,data:[],parent:null},a=new Map;a.set(0,e),this._pool=a,t&&t.length&&this.parse(t,0)}parse(t,e){const a=this._pool;for(let i=0;i<t.length;i++){const o=t[i];o.parent=o.parent||e,o.data=null,a.set(o.id,o)}for(let i=0;i<t.length;i++){const o=t[i],s=a.get(o.parent);s&&(s.data||(s.data=[]),s.data.push(o))}const r=a.get(e);this.setLevel(r,r.$level+1,!1)}add(t,e){const a=this._pool.get(t.parent||0);t.$level=a.$level+1,this._pool.set(t.id,t),a.data?e===-1?a.data=[...a.data,t]:gr(a,e,t):a.data=[t]}addAfter(t,e){if(!e)return this.add(t,-1);const a=this.byId(e),r=this.byId(a.parent),i=An(r,a.id)+1;t.parent=r.id,t.$level=r.$level+1,this.add(t,i)}remove(t){const e=this._pool.get(t);this._remove(e);const a=this._pool.get(e.parent);a.data=a.data.filter(r=>r.id!=t),this._clearBranch(a)}_remove(t){t.data&&t.data.forEach(e=>this._remove(e)),this._pool.delete(t.id)}update(t,e){let a=this._pool.get(t);const r=this._pool.get(a.parent),i=An(r,a.id);a={...a,...e},r&&i>=0&&(r.data[i]=a,r.data=[...r.data]),this._pool.set(a.id,a)}move(t,e,a){const r=this._pool.get(t),i=e==="child",o=this._pool.get(a),s=o.$level+(i?1:0);if(!r||!o)return;const c=this._pool.get(r.parent),d=i?o:this._pool.get(o.parent);d.data||(d.data=[]);const u=An(c,r.id);Ks(c,u);const f=i?d.data.length:An(d,o.id)+(e==="after"?1:0);if(gr(d,f,r),c.id===d.id&&u===f)return null;r.parent=d.id,r.$level!==s&&(r.$level=s,this.setLevel(r,s+1,!0)),this.update(r.id,r),this._clearBranch(c)}_clearBranch(t){t.data&&!t.data.length&&(t.open&&delete t.open,this.update(t.id,{data:null}))}toArray(){const t=[],e=this._pool.get(0).data;return e&&gi(e,t),t}byId(t){return this._pool.get(t)}getBranch(t){return this._pool.get(t).data}forEach(t){this._pool.forEach((e,a)=>{a!==0&&t(e)})}eachChild(t,e){const a=this.byId(e);!a||!a.data||a.data.forEach((r,i)=>{t(this.byId(r.id),i),this.eachChild(t,r.id)})}setLevel(t,e,a){t.data&&(t.data=t.data.map(r=>(a&&(r={...r},this._pool.set(r.id,r)),r.$level=e,r.data&&this.setLevel(r,e+1,a),r)))}};function gi(n,t){n.forEach(e=>{t.push(e),e.open===!0&&gi(e.data,t)})}function Ks(n,t){const e=[...n.data];e.splice(t,1),n.data=e}function gr(n,t,e){const a=[...n.data];a.splice(t,0,e),n.data=a}function An(n,t){return n==null?void 0:n.data.findIndex(e=>e.id===t)}var mi=2,Js=class{constructor(t){t&&(this._writable=t.writable,this._async=t.async),this._values={},this._state={}}setState(t,e=0){const a={};return this._wrapProperties(t,this._state,this._values,"",a,e),a}getState(){return this._values}getReactive(){return this._state}_wrapProperties(t,e,a,r,i,o){for(const s in t){const c=e[s],d=a[s],u=t[s];if(c&&(d===u&&typeof u!="object"||u instanceof Date&&d instanceof Date&&d.getTime()===u.getTime()))continue;const f=r+(r?".":"")+s;c?(c.__parse(u,f,i,o)&&(a[s]=u),o&mi?i[f]=c.__trigger:c.__trigger()):(u&&u.__reactive?e[s]=this._wrapNested(u,u,f,i):e[s]=this._wrapWritable(u),a[s]=u),i[f]=i[f]||null}}_wrapNested(t,e,a,r){const i=this._wrapWritable(t);return this._wrapProperties(t,i,e,a,r,0),i.__parse=(o,s,c,d)=>(this._wrapProperties(o,i,e,s,c,d),!1),i}_wrapWritable(t){const e=[],a=function(){for(let r=0;r<e.length;r++)e[r](t)};return{subscribe:r=>(e.push(r),this._async?setTimeout(r,1,t):r(t),()=>{const i=e.indexOf(r);i>=0&&e.splice(i,1)}),__trigger:()=>{e.length&&(this._async?setTimeout(a,1):a())},__parse:function(r){return t=r,!0}}}},Zs=class{constructor(t,e,a,r){typeof t=="function"?this._setter=t:this._setter=t.setState.bind(t),this._routes=e,this._parsers=a,this._prev={},this._triggers=new Map,this._sources=new Map,this._routes.forEach(i=>{i.in.forEach(o=>{const s=this._triggers.get(o)||[];s.push(i),this._triggers.set(o,s)}),i.out.forEach(o=>{const s=this._sources.get(o)||{};i.in.forEach(c=>s[c]=!0),this._sources.set(o,s)})}),this._routes.forEach(i=>{i.length=Math.max(...i.in.map(o=>vi(o,this._sources,1)))}),this._bus=r}init(t){const e={};for(const a in t)if(this._prev[a]!==t[a]){const r=this._parsers[a];e[a]=r?r(t[a]):t[a]}this._prev=this._prev?{...this._prev,...t}:{...t},this.setState(e),this._bus&&this._bus.exec("init-state",e)}setStateAsync(t){const e=this._setter(t,mi);return this._async?Object.assign(this._async.signals,e):this._async={signals:e,timer:setTimeout(this._applyState.bind(this),1)},e}_applyState(){const t=this._async;if(t){this._async=null,this._triggerUpdates(t.signals,[]);for(const e in t.signals){const a=t.signals[e];a&&a()}}}setState(t,e=[]){const a=this._setter(t);return this._triggerUpdates(a,e),a}_triggerUpdates(t,e){const a=Object.keys(t),r=!e.length;e=e||[];for(let i=0;i<a.length;i++){const o=a[i],s=this._triggers.get(o);s&&s.forEach(c=>{e.indexOf(c)==-1&&e.push(c)})}r&&this._execNext(e)}_execNext(t){for(;t.length;){t.sort((a,r)=>a.length<r.length?1:-1);const e=t[t.length-1];t.splice(t.length-1),e.exec(t)}}};function vi(n,t,e){const a=t.get(n);if(!a)return e;const r=Object.keys(a).map(i=>vi(i,t,e+1));return Math.max(...r)}var $s=class{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(t,e,a){let r=this._handlers[t];r?a&&a.intercept?r.unshift(e):r.push(e):r=this._handlers[t]=[e],a&&a.tag&&this._tag.set(e,a.tag)}intercept(t,e,a){this.on(t,e,{...a,intercept:!0})}detach(t){for(const e in this._handlers){const a=this._handlers[e];for(let r=a.length-1;r>=0;r--)this._tag.get(a[r])===t&&a.splice(r,1)}}async exec(t,e){const a=this._handlers[t];if(a)for(let r=0;r<a.length;r++){const i=a[r](e);if(i===!1||i&&i.then&&await i===!1)return}return this._nextHandler&&await this._nextHandler.exec(t,e),e}setNext(t){return this._nextHandler=t}};function tl(n,t){return typeof n=="string"?n.localeCompare(t,void 0,{numeric:!0}):typeof n=="object"?n.getTime()-t.getTime():(n??0)-(t??0)}function el(n,t){return typeof n=="string"?-n.localeCompare(t,void 0,{numeric:!0}):typeof t=="object"?t.getTime()-n.getTime():(t??0)-(n??0)}function nl({key:n,order:t}){const e=t==="asc"?tl:el;return(a,r)=>e(a[n],r[n])}function al(n){if(!n||!n.length)return;const t=n.map(e=>nl(e));return n.length===1?t[0]:function(e,a){for(let r=0;r<t.length;r++){const i=t[r](e,a);if(i!==0)return i}return 0}}function rl(n,t){return n.sort(al(t))}function Mt(n){const t=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&t==="[object Date]"?new n.constructor(+n):typeof n=="number"||t==="[object Number]"||typeof n=="string"||t==="[object String]"?new Date(n):new Date(NaN)}function ke(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}function aa(n,t){const e=Mt(n);return isNaN(t)?ke(n,NaN):(t&&e.setDate(e.getDate()+t),e)}function Ua(n,t){const e=Mt(n);if(isNaN(t))return ke(n,NaN);if(!t)return e;const a=e.getDate(),r=ke(n,e.getTime());r.setMonth(e.getMonth()+t+1,0);const i=r.getDate();return a>=i?r:(e.setFullYear(r.getFullYear(),r.getMonth(),a),e)}function wi(n,t){const e=+Mt(n);return ke(n,e+t)}const ra=6048e5,il=864e5,yi=6e4,xi=36e5;function ol(n,t){return wi(n,t*xi)}let sl={};function ia(){return sl}function Ae(n,t){var s,c,d,u;const e=ia(),a=(t==null?void 0:t.weekStartsOn)??((c=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??e.weekStartsOn??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,r=Mt(n),i=r.getDay(),o=(i<a?7:0)+i-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function hn(n){return Ae(n,{weekStartsOn:1})}function _i(n){const t=Mt(n),e=t.getFullYear(),a=ke(n,0);a.setFullYear(e+1,0,4),a.setHours(0,0,0,0);const r=hn(a),i=ke(n,0);i.setFullYear(e,0,4),i.setHours(0,0,0,0);const o=hn(i);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function Xe(n){const t=Mt(n);return t.setHours(0,0,0,0),t}function Xn(n){const t=Mt(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Xa(n,t){const e=Xe(n),a=Xe(t),r=+e-Xn(e),i=+a-Xn(a);return Math.round((r-i)/il)}function Ca(n){const t=_i(n),e=ke(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),hn(e)}function ll(n,t){return wi(n,t*yi)}function cl(n,t){const e=t*3;return Ua(n,e)}function bi(n,t){const e=t*7;return aa(n,e)}function dl(n,t){return Ua(n,t*12)}function Dn(n,t){const e=Mt(n),a=Mt(t),r=e.getTime()-a.getTime();return r<0?-1:r>0?1:r}function ul(n,t){const e=Xe(n),a=Xe(t);return+e==+a}function fl(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function hl(n){if(!fl(n)&&typeof n!="number")return!1;const t=Mt(n);return!isNaN(Number(t))}function Ga(n,t){const e=hn(n),a=hn(t),r=+e-Xn(e),i=+a-Xn(a);return Math.round((r-i)/ra)}function gl(n,t){const e=Mt(n),a=Mt(t),r=e.getFullYear()-a.getFullYear(),i=e.getMonth()-a.getMonth();return r*12+i}function ml(n,t){const e=Mt(n),a=Mt(t);return e.getFullYear()-a.getFullYear()}function Qa(n){return t=>{const e=(n?Math[n]:Math.trunc)(t);return e===0?0:e}}function ki(n,t){return+Mt(n)-+Mt(t)}function vl(n,t,e){const a=ki(n,t)/xi;return Qa(e==null?void 0:e.roundingMethod)(a)}function wl(n,t,e){const a=ki(n,t)/yi;return Qa(e==null?void 0:e.roundingMethod)(a)}function yl(n){const t=Mt(n);return t.setHours(23,59,59,999),t}function pi(n){const t=Mt(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function xl(n){const t=Mt(n);return+yl(t)==+pi(t)}function Si(n,t){const e=Mt(n),a=Mt(t),r=Dn(e,a),i=Math.abs(gl(e,a));let o;if(i<1)o=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*i);let s=Dn(e,a)===-r;xl(Mt(n))&&i===1&&Dn(n,a)===1&&(s=!1),o=r*(i-Number(s))}return o===0?0:o}function _l(n,t,e){const a=Si(n,t)/3;return Qa(e==null?void 0:e.roundingMethod)(a)}function bl(n,t){const e=Mt(n),a=Mt(t),r=Dn(e,a),i=Math.abs(ml(e,a));e.setFullYear(1584),a.setFullYear(1584);const o=Dn(e,a)===-r,s=r*(i-+o);return s===0?0:s}function Cn(n){const t=Mt(n),e=t.getMonth(),a=e-e%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}function Mi(n){const t=Mt(n);return t.setDate(1),t.setHours(0,0,0,0),t}function Di(n){const t=Mt(n),e=ke(n,0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Ti(n){const t=Mt(n),e=t.getMonth(),a=e-e%3+3;return t.setMonth(a,0),t.setHours(23,59,59,999),t}const kl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pl=(n,t,e)=>{let a;const r=kl[n];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+a:a+" ago":a};function ma(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const Sl={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ml={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dl={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tl={date:ma({formats:Sl,defaultWidth:"full"}),time:ma({formats:Ml,defaultWidth:"full"}),dateTime:ma({formats:Dl,defaultWidth:"full"})},Cl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wl=(n,t,e,a)=>Cl[n];function _n(n){return(t,e)=>{const a=e!=null&&e.context?String(e.context):"standalone";let r;if(a==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,s=e!=null&&e.width?String(e.width):o;r=n.formattingValues[s]||n.formattingValues[o]}else{const o=n.defaultWidth,s=e!=null&&e.width?String(e.width):n.defaultWidth;r=n.values[s]||n.values[o]}const i=n.argumentCallback?n.argumentCallback(t):t;return r[i]}}const Pl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},El={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hl={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ol={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Il={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rl={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ll=(n,t)=>{const e=Number(n),a=e%100;if(a>20||a<10)switch(a%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Nl={ordinalNumber:Ll,era:_n({values:Pl,defaultWidth:"wide"}),quarter:_n({values:El,defaultWidth:"wide",argumentCallback:n=>n-1}),month:_n({values:Hl,defaultWidth:"wide"}),day:_n({values:Ol,defaultWidth:"wide"}),dayPeriod:_n({values:Il,defaultWidth:"wide",formattingValues:Rl,defaultFormattingWidth:"wide"})};function bn(n){return(t,e={})=>{const a=e.width,r=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],i=t.match(r);if(!i)return null;const o=i[0],s=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(s)?Yl(s,f=>f.test(o)):Fl(s,f=>f.test(o));let d;d=n.valueCallback?n.valueCallback(c):c,d=e.valueCallback?e.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function Fl(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Yl(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function Al(n){return(t,e={})=>{const a=t.match(n.matchPattern);if(!a)return null;const r=a[0],i=t.match(n.parsePattern);if(!i)return null;let o=n.valueCallback?n.valueCallback(i[0]):i[0];o=e.valueCallback?e.valueCallback(o):o;const s=t.slice(r.length);return{value:o,rest:s}}}const zl=/^(\d+)(th|st|nd|rd)?/i,jl=/\d+/i,ql={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bl={any:[/^b/i,/^(a|c)/i]},Vl={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ul={any:[/1/i,/2/i,/3/i,/4/i]},Xl={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Gl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ql={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Kl={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zl={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$l={ordinalNumber:Al({matchPattern:zl,parsePattern:jl,valueCallback:n=>parseInt(n,10)}),era:bn({matchPatterns:ql,defaultMatchWidth:"wide",parsePatterns:Bl,defaultParseWidth:"any"}),quarter:bn({matchPatterns:Vl,defaultMatchWidth:"wide",parsePatterns:Ul,defaultParseWidth:"any",valueCallback:n=>n+1}),month:bn({matchPatterns:Xl,defaultMatchWidth:"wide",parsePatterns:Gl,defaultParseWidth:"any"}),day:bn({matchPatterns:Ql,defaultMatchWidth:"wide",parsePatterns:Kl,defaultParseWidth:"any"}),dayPeriod:bn({matchPatterns:Jl,defaultMatchWidth:"any",parsePatterns:Zl,defaultParseWidth:"any"})},tc={code:"en-US",formatDistance:pl,formatLong:Tl,formatRelative:Wl,localize:Nl,match:$l,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ec(n){const t=Mt(n);return Xa(t,Di(t))+1}function nc(n){const t=Mt(n),e=+hn(t)-+Ca(t);return Math.round(e/ra)+1}function Ci(n,t){var u,f,g,h;const e=Mt(n),a=e.getFullYear(),r=ia(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(g=r.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=ke(n,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const s=Ae(o,t),c=ke(n,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Ae(c,t);return e.getTime()>=s.getTime()?a+1:e.getTime()>=d.getTime()?a:a-1}function ac(n,t){var o,s,c,d;const e=ia(),a=(t==null?void 0:t.firstWeekContainsDate)??((s=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:s.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(c=e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,r=Ci(n,t),i=ke(n,0);return i.setFullYear(r,0,a),i.setHours(0,0,0,0),Ae(i,t)}function rc(n,t){const e=Mt(n),a=+Ae(e,t)-+ac(e,t);return Math.round(a/ra)+1}function Ft(n,t){const e=n<0?"-":"",a=Math.abs(n).toString().padStart(t,"0");return e+a}const Le={y(n,t){const e=n.getFullYear(),a=e>0?e:1-e;return Ft(t==="yy"?a%100:a,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):Ft(e+1,2)},d(n,t){return Ft(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Ft(n.getHours()%12||12,t.length)},H(n,t){return Ft(n.getHours(),t.length)},m(n,t){return Ft(n.getMinutes(),t.length)},s(n,t){return Ft(n.getSeconds(),t.length)},S(n,t){const e=t.length,a=n.getMilliseconds(),r=Math.trunc(a*Math.pow(10,e-3));return Ft(r,t.length)}},tn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mr={G:function(n,t,e){const a=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(a,{width:"abbreviated"});case"GGGGG":return e.era(a,{width:"narrow"});case"GGGG":default:return e.era(a,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const a=n.getFullYear(),r=a>0?a:1-a;return e.ordinalNumber(r,{unit:"year"})}return Le.y(n,t)},Y:function(n,t,e,a){const r=Ci(n,a),i=r>0?r:1-r;if(t==="YY"){const o=i%100;return Ft(o,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):Ft(i,t.length)},R:function(n,t){const e=_i(n);return Ft(e,t.length)},u:function(n,t){const e=n.getFullYear();return Ft(e,t.length)},Q:function(n,t,e){const a=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Ft(a,2);case"Qo":return e.ordinalNumber(a,{unit:"quarter"});case"QQQ":return e.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(a,{width:"wide",context:"formatting"})}},q:function(n,t,e){const a=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Ft(a,2);case"qo":return e.ordinalNumber(a,{unit:"quarter"});case"qqq":return e.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(a,{width:"wide",context:"standalone"})}},M:function(n,t,e){const a=n.getMonth();switch(t){case"M":case"MM":return Le.M(n,t);case"Mo":return e.ordinalNumber(a+1,{unit:"month"});case"MMM":return e.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(a,{width:"wide",context:"formatting"})}},L:function(n,t,e){const a=n.getMonth();switch(t){case"L":return String(a+1);case"LL":return Ft(a+1,2);case"Lo":return e.ordinalNumber(a+1,{unit:"month"});case"LLL":return e.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(a,{width:"wide",context:"standalone"})}},w:function(n,t,e,a){const r=rc(n,a);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):Ft(r,t.length)},I:function(n,t,e){const a=nc(n);return t==="Io"?e.ordinalNumber(a,{unit:"week"}):Ft(a,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Le.d(n,t)},D:function(n,t,e){const a=ec(n);return t==="Do"?e.ordinalNumber(a,{unit:"dayOfYear"}):Ft(a,t.length)},E:function(n,t,e){const a=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(a,{width:"short",context:"formatting"});case"EEEE":default:return e.day(a,{width:"wide",context:"formatting"})}},e:function(n,t,e,a){const r=n.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ft(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,a){const r=n.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ft(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){const a=n.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return Ft(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(a,{width:"short",context:"formatting"});case"iiii":default:return e.day(a,{width:"wide",context:"formatting"})}},a:function(n,t,e){const a=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,t,e){const a=n.getHours();let r;switch(a===12?r=tn.noon:a===0?r=tn.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){const a=n.getHours();let r;switch(a>=17?r=tn.evening:a>=12?r=tn.afternoon:a>=4?r=tn.morning:r=tn.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let a=n.getHours()%12;return a===0&&(a=12),e.ordinalNumber(a,{unit:"hour"})}return Le.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Le.H(n,t)},K:function(n,t,e){const a=n.getHours()%12;return t==="Ko"?e.ordinalNumber(a,{unit:"hour"}):Ft(a,t.length)},k:function(n,t,e){let a=n.getHours();return a===0&&(a=24),t==="ko"?e.ordinalNumber(a,{unit:"hour"}):Ft(a,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Le.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Le.s(n,t)},S:function(n,t){return Le.S(n,t)},X:function(n,t,e){const a=n.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return wr(a);case"XXXX":case"XX":return Be(a);case"XXXXX":case"XXX":default:return Be(a,":")}},x:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"x":return wr(a);case"xxxx":case"xx":return Be(a);case"xxxxx":case"xxx":default:return Be(a,":")}},O:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vr(a,":");case"OOOO":default:return"GMT"+Be(a,":")}},z:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vr(a,":");case"zzzz":default:return"GMT"+Be(a,":")}},t:function(n,t,e){const a=Math.trunc(n.getTime()/1e3);return Ft(a,t.length)},T:function(n,t,e){const a=n.getTime();return Ft(a,t.length)}};function vr(n,t=""){const e=n>0?"-":"+",a=Math.abs(n),r=Math.trunc(a/60),i=a%60;return i===0?e+String(r):e+String(r)+t+Ft(i,2)}function wr(n,t){return n%60===0?(n>0?"-":"+")+Ft(Math.abs(n)/60,2):Be(n,t)}function Be(n,t=""){const e=n>0?"-":"+",a=Math.abs(n),r=Ft(Math.trunc(a/60),2),i=Ft(a%60,2);return e+r+t+i}const yr=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wi=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ic=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],a=e[1],r=e[2];if(!r)return yr(n,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",yr(a,t)).replace("{{time}}",Wi(r,t))},oc={p:Wi,P:ic},sc=/^D+$/,lc=/^Y+$/,cc=["D","DD","YY","YYYY"];function dc(n){return sc.test(n)}function uc(n){return lc.test(n)}function fc(n,t,e){const a=hc(n,t,e);if(console.warn(a),cc.includes(n))throw new RangeError(a)}function hc(n,t,e){const a=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${a} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vc=/^'([^]*?)'?$/,wc=/''/g,yc=/[a-zA-Z]/;function Wa(n,t,e){var u,f,g,h,m,w,v,x;const a=ia(),r=(e==null?void 0:e.locale)??a.locale??tc,i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(g=a.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=(e==null?void 0:e.weekStartsOn)??((w=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??a.weekStartsOn??((x=(v=a.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,s=Mt(n);if(!hl(s))throw new RangeError("Invalid time value");let c=t.match(mc).map(_=>{const b=_[0];if(b==="p"||b==="P"){const p=oc[b];return p(_,r.formatLong)}return _}).join("").match(gc).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const b=_[0];if(b==="'")return{isToken:!1,value:xc(_)};if(mr[b])return{isToken:!0,value:_};if(b.match(yc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:_}});r.localize.preprocessor&&(c=r.localize.preprocessor(s,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return c.map(_=>{if(!_.isToken)return _.value;const b=_.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&uc(b)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&dc(b))&&fc(b,t,String(n));const p=mr[b[0]];return p(s,b,r.localize,d)}).join("")}function xc(n){const t=n.match(vc);return t?t[1].replace(wc,"'"):n}function Pi(n){const t=Mt(n),e=t.getFullYear(),a=t.getMonth(),r=ke(n,0);return r.setFullYear(e,a+1,0),r.setHours(0,0,0,0),r.getDate()}function _c(n){const t=Mt(n).getFullYear();return t%400===0||t%4===0&&t%100!==0}function Ei(n){const t=Mt(n);return String(new Date(t))==="Invalid Date"?NaN:_c(t)?366:365}function bc(n){const t=Ca(n),e=+Ca(bi(t,60))-+t;return Math.round(e/ra)}function rn(n,t){const e=Mt(n),a=Mt(t);return+e==+a}function kc(n){const t=Mt(n);return t.setMinutes(0,0,0),t}function pc(n,t,e){const a=Ae(n,e),r=Ae(t,e);return+a==+r}function Sc(n,t){const e=Mt(n),a=Mt(t);return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()}function Mc(n,t){const e=Cn(n),a=Cn(t);return+e==+a}function Dc(n,t){const e=Mt(n),a=Mt(t);return e.getFullYear()===a.getFullYear()}const Pa=8,Hi=4,Tc=3,xr=7,Cc=Pa+Hi;function Oi(n,t){var e;(n.open||n.type!="summary")&&((e=n.data)==null||e.forEach(a=>{a.$x+=t,Oi(a,t)}))}function Ea(n,t,e,a){const r=n.getSummaryId(t.id);if(r){const i=n.byId(r),o={xMin:1/0,xMax:0};Ii(i,o,e,a),i.$x=o.xMin,i.$w=o.xMax-o.xMin,Ea(n,i,e,a)}}function Ii(n,t,e,a){var o;const{lengthUnit:r,start:i}=e;(o=n.data)==null||o.forEach(s=>{if(!s.unscheduled){typeof s.$x>"u"&&(s.$x=Math.round(e.diff(s.start,i,r)*a),s.$w=Math.round(e.diff(s.end,s.start,r,!0)*a));const c=s.type==="milestone"&&s.$h?s.$h/2:0;t.xMin>s.$x&&(t.xMin=s.$x+c);const d=s.$x+s.$w-c;t.xMax<d&&(t.xMax=d)}s.type!=="summary"&&Ii(s,t,e,a)})}function Ka(n,t){var r;let e;t&&(e=t.filter(i=>i.parent==n.id));const a={data:e,...n};if((r=a.data)!=null&&r.length)a.data.forEach(i=>{if(i.unscheduled&&!i.data)return;(t||i.type!="summary"&&i.data)&&(i.unscheduled&&(i={...i,start:void 0,end:void 0}),i=Ka(i,t)),i.start&&(!a.start||a.start>i.start)&&(a.start=new Date(i.start));const o=i.type==="milestone"?i.start:i.end;o&&(!a.end||a.end<o)&&(a.end=new Date(o))});else if(n.type==="summary")throw Error("Summary tasks must have start and end dates if they have no subtasks");return a}function Wc(n,t,e,a,r,i){return _r(n,t,e,a,r,i,!1),i&&_r(n,t,e,a,r,i,!0),n}function _r(n,t,e,a,r,i,o){const{start:s,end:c,lengthUnit:d,diff:u}=r,f=(o?"base_":"")+"start",g=(o?"base_":"")+"end",h="$x"+(o?"_base":""),m="$y"+(o?"_base":""),w="$w"+(o?"_base":""),v="$h"+(o?"_base":""),x="$skip"+(o?"_baseline":"");let _=n[f],b=n[g];if(o&&!_){n[x]=!0;return}n[f]<s&&(n[g]<s||rn(n[g],s))?_=b=s:n[f]>c&&(_=b=c),n[h]=Math.round(u(_,s,d)*e),n[m]=o?n.$y+n.$h+Hi:a*t+Tc,n[w]=Math.round(u(b,_,d,!0)*e),n[v]=o?Pa:i?a-xr-Cc:a-xr,n.type==="milestone"&&(n[h]=n[h]-n.$h/2,n[w]=n.$h,o&&(n[m]=n.$y+Pa,n[w]=n[v]=n.$h)),n.unscheduled&&!o?n.$skip=!0:n[x]=rn(_,b)}class Pc extends Qs{constructor(e){super();se(this,"_sort");this.parse(e,0)}parse(e,a){if(!e||!e.length)return;const r=e.map(i=>this.normalizeTask(i,e));super.parse(r,a),this._sort&&this.sortBranch(this._sort,a)}getBranch(e){const a=this._pool.get(e);return this._pool.get(a.parent||0).data}contains(e,a){const r=this._pool.get(e).data;let i=!1;if(r)for(let o=0;o<r.length;o++){if(r[o].id===a){i=!0;break}if(r[o].data&&(i=this.contains(r[o].id,a),i))break}return i}getIndexById(e){return this.getBranch(e).findIndex(a=>a.id===e)}add(e,a){const r=this.normalizeTask(e);return super.add(r,a),r}copy(e,a,r){var s;const i=this.add({...e,id:null,data:null,parent:a},r);let o=[[e.id,i.id]];return(s=e.data)==null||s.forEach((c,d)=>{const u=this.copy(c,i.id,d);o=o.concat(u)}),o}normalizeTask(e,a){const r=e.id||hi(),i=e.parent||0,o=e.text||"",s=e.type||"task",c=e.progress||0,d=e.details||"",u={...e,id:r,text:o,parent:i,progress:c,type:s,details:d};if(u.type==="summary"&&!(u.start&&u.end)){const{start:f,end:g}=Ka({...u},a);u.start=f,u.end=g}return u}getSummaryId(e){const a=this._pool.get(e);if(!a.parent)return null;const r=this._pool.get(a.parent);return r.type==="summary"?r.id:this.getSummaryId(r.id)}sort(e){this._sort=e,e&&this.sortBranch(e,0)}sortBranch(e,a){const r=this._pool.get(a||0).data;r&&(rl(r,e),r.forEach(i=>{this.sortBranch(e,i.id)}))}serialize(){const e=[],a=this._pool.get(0).data;return a&&Ri(a,e),e}}function Ri(n,t){n.forEach(e=>{t.push(e),e.data&&Ri(e.data,t)})}const br={year:bl,quarter:_l,month:Si,week:Ga,day:Xa,hour:vl,minute:wl},Wn={year:{quarter:4,month:12,week:bc,day:Ec,hour:Hc},quarter:{month:3,week:Oc,day:Li,hour:Ic},month:{week:Rc,day:Lc,hour:Nc},week:{day:7,hour:168},day:{hour:24},hour:{minute:60}};function Ec(n){return n?Ei(n):365}function Hc(n){return Ei(n)*24}function Oc(n){const t=Cn(n),e=aa(Xe(Ti(n)),1);return Ga(e,t)}function Li(n){if(n){const t=Cn(n),e=Ti(n);return Xa(e,t)+1}return 91}function Ic(n){return Li(n)*24}function Rc(n){if(n){const t=Mi(n),e=aa(Xe(pi(n)),1);return Ga(e,t)}return 5}function Lc(n){return n?Pi(n):30}function Nc(n){return Pi(n)*24}function Gn(n,t,e){const a=Wn[n][t];return a?typeof a=="number"?a:a(e):1}function Fc(n,t){return n===t||!!(Wn[n]&&Wn[n][t])}const Ha={year:dl,quarter:cl,month:Ua,week:bi,day:aa,hour:ol,minute:ll};function Ja(n){return(t,e,a,r)=>!Wn[n][a]||typeof Wn[n][a]=="number"||Ni(n,t,e)?Sn(n,t,e,a,r):Yc(t,e,n,a,r)}function Sn(n,t,e,a,r){const i=a||n;let o=e,s=t;if(r&&(o=He(i,e),s=He(i,t),s<t&&(s=Te(i)(s,1))),n!==i){const c=br[i](s,o),d=Gn(n,i,e);return c/d}else return br[i](s,o)}function Yc(n,t,e,a,r){let i=0;const o=He(e,t);if(t>o){const c=Ha[e](o,1);i=Sn(e,c,t,a),t=c}let s=0;return Ni(e,t,n)||(s=Sn(e,He(e,n),t),t=Ha[e](t,s)),s+=i+Sn(e,n,t,a),!s&&r&&(s=Sn(e,n,t,a,r)),s}function Te(n){return Ha[n]}const Ac={year:Di,quarter:Cn,month:Mi,week:n=>Ae(n,{weekStartsOn:1}),day:Xe,hour:kc};function He(n,t){const e=Ac[n];return e?e(t):new Date(t)}const zc={year:Dc,quarter:Mc,month:Sc,week:(n,t)=>pc(n,t,{weekStartsOn:1}),day:ul};function Ni(n,t,e){const a=zc[n];return a?a(t,e):!1}function gn(n){const t=new Date;return n.map(e=>({item:e,len:Te(e.unit)(t,1)})).sort((e,a)=>e.len<a.len?-1:1)[0].item}const dn=["year","quarter","month","week","day","hour"],zn={year:"yyyy",quarter:"QQQ",month:"MMM",week:"w",day:"MMM d",hour:"HH:mm"},Oa=50,Ia=300;function jc(n,t,e,a,r){let i=n,o=t,s=!1,c=!1;r&&r.forEach(u=>{(!n||e)&&(!i||u.start<=i)&&(i=u.start,s=!0);const f=u.type==="milestone"?u.start:u.end;(!t||e)&&(!o||f>=o)&&(o=f,c=!0)});const d=Te(a||"day");return i?s&&(i=d(i,-1)):o?i=d(o,-30):i=new Date,o?c&&(o=d(o,1)):o=d(i,30),{_start:i,_end:o}}function qc(n,t,e,a,r,i){const o=gn(i).unit,s=Ja(o),c=s(t,n,"",!0),d=He(o,t);n=He(o,n),t=d<t?Te(o)(d,1):d;const u=c*a,f=r*i.length,g=i.map(m=>{const w=[],v=Te(m.unit);let x=He(m.unit,n);for(;x<t;){let _=v(x,m.step);x<n&&(x=n),_>t&&(_=t);const b=s(_,x,"",!0)*a,p=typeof m.format=="function"?m.format(x,_):Wa(x,m.format,{firstWeekContainsDate:4,weekStartsOn:1});let M="";m.css&&(M+=typeof m.css=="function"?m.css(x):m.css),w.push({width:b,value:p,date:x,css:M,unit:m.unit}),x=_}return{cells:w,add:v,height:r}});let h=a;return o!==e&&(h=Math.round(h/Gn(o,e))||1),{rows:g,width:u,height:f,diff:s,start:n,end:t,lengthUnit:e,minUnit:o,lengthUnitWidth:h}}function Bc(n,t,e){const a=typeof n=="boolean"?{}:n,r=dn.indexOf(gn(t).unit);if(typeof a.level>"u"&&(a.level=r),a.levels)a.levels.forEach(s=>{s.minCellWidth||(s.minCellWidth=jn(a.minCellWidth,Oa)),s.maxCellWidth||(s.maxCellWidth=jn(a.maxCellWidth,Ia))});else{const s=[],c=t.length||1,d=jn(a.minCellWidth,Oa),u=jn(a.maxCellWidth,Ia);t.forEach(f=>{f.format&&!zn[f.unit]&&(zn[f.unit]=f.format)}),dn.forEach((f,g)=>{if(g===r)s.push({minCellWidth:d,maxCellWidth:u,scales:t});else{const h=[];if(g)for(let m=c-1;m>0;m--){const w=dn[g-m];w&&h.push({unit:w,step:1,format:zn[w]})}h.push({unit:f,step:1,format:zn[f]}),s.push({minCellWidth:d,maxCellWidth:u,scales:h})}}),a.levels=s}a.levels[a.level]||(a.level=0);const i=a.levels[a.level],o=Math.min(Math.max(e,i.minCellWidth),i.maxCellWidth);return{_zoom:a,scales:i.scales,cellWidth:o}}function Vc(n,t,e,a,r,i,o){n.level=e;let s;const c=a.scales||a,d=gn(c).unit,u=Uc(d,r);if(t===-1){const h=Gn(d,r);s=o*h}else{const h=Gn(gn(i).unit,d);s=Math.round(o/h)}const f=a.minCellWidth??Oa,g=a.maxCellWidth??Ia;return{scales:c,cellWidth:Math.min(g,Math.max(f,s)),lengthUnit:u,zoom:n}}function Uc(n,t){const e=dn.indexOf(n),a=dn.indexOf(t);return a>=e?n==="hour"?"hour":"day":dn[a]}function jn(n,t){return n??t}const va=20,Xc=function(n,t,e,a,r){const i=Math.round(a/2)-3;if(!t||!e||!t.$y||!e.$y||t.$skip||e.$skip)return n.$p="",n;let o=!1,s=!1;switch(n.type){case"e2s":s=!0;break;case"s2s":o=!0,s=!0;break;case"s2e":o=!0;break}const c=o?t.$x:t.$x+t.$w,d=r?t.$y-7:t.$y,u=s?e.$x:e.$x+e.$w,f=r?e.$y-7:e.$y;if(c!==u||d!==f){const g=Gc(c,d+i,u,f+i,o,s,a/2,r),h=Qc(u,f+i,s);n.$p=`${g},${h}`}return n};function Gc(n,t,e,a,r,i,o,s){const c=va*(r?-1:1),d=va*(i?-1:1),u=n+c,f=e+d,g=[n,t,u,t,0,0,0,0,f,a,e,a],h=f-u;let m=a-t;const w=i===r;return w||(f<=n+va-2&&i||f>n&&!i)&&(m=s?m-o+6:m-o),w&&i&&u>f||w&&!i&&u<f?(g[4]=g[2]+h,g[5]=g[3],g[6]=g[4],g[7]=g[5]+m):(g[4]=g[2],g[5]=g[3]+m,g[6]=g[4]+h,g[7]=g[5]),g.join(",")}function Qc(n,t,e){return e?`${n-5},${t-3},${n-5},${t+3},${n},${t}`:`${n+5},${t+3},${n+5},${t-3},${n},${t}`}const Fi=["start","end","duration"];function Kc(n,t){const{type:e,unscheduled:a}=n;return a||e==="summary"?!Fi.includes(t):e==="milestone"?!["end","duration"].includes(t):!0}function Jc(n,t){return typeof t=="function"?t:Fi.includes(n)?(typeof t=="string"&&(t={type:t,config:{}}),t.config||(t.config={}),t.type==="datepicker"&&(t.config.buttons=["today"]),(e,a)=>Kc(e,a.id)?t:null):t}function Zc(n){return!n||!n.length?[]:n.map(t=>{const e=t.align||"left",a=t.id==="add-task",r=!a&&t.flexgrow?t.flexgrow:null,i=r?1:t.width||(a?50:120);let o=t.template;if(!o)switch(t.id){case"start":o=c=>Wa(c,"dd-MM-yyyy");break;case"end":o=c=>c?Wa(c,"dd-MM-yyyy"):"-";break}const s=t.editor&&Jc(t.id,t.editor);return{width:i,align:e,header:t.header,id:t.id,template:o,...r&&{flexgrow:r},cell:t.cell,resize:t.resize??!0,sort:t.sort??!a,...s&&{editor:s},...t.options&&{options:t.options}}})}const $c=[{id:"text",header:"Task name",flexgrow:1,sort:!0},{id:"start",header:"Start date",align:"center",sort:!0},{id:"duration",header:"Duration",width:100,align:"center",sort:!0},{id:"add-task",header:"Add task",width:50,align:"center",sort:!1,resize:!1}];function td(){let n=!0;return n=!1,n}function qn(n,t,e,a){const{selected:r,tasks:i}=n.getState(),o=r.length,s=!o&&t==="add-task",c=["edit-task","paste-task"],d=["copy-task","cut-task"],u=["copy-task","cut-task","delete-task","indent-task:remove","move-task:down"],f=["indent-task:add","move-task:down","move-task:up"],g={"indent-task:remove":2},h={parent:f.includes(t),level:g[t]};if(e=e||(o?r[r.length-1]:null),!(!e&&!s)){if(t!=="paste-task"&&(n._temp=null),c.includes(t)||s||r.length===1)kr(n,t,e,a);else if(o){const m=d.includes(t)?r:ed(r,i,h);u.includes(t)&&m.reverse(),m.forEach(w=>kr(n,t,w,a))}}}function ed(n,t,e){let a=n.map(r=>{const i=t.byId(r);return{id:r,level:i.$level,parent:i.parent,index:t.getIndexById(r)}});return(e.parent||e.level)&&(a=a.filter(r=>e.level&&r.level<=e.level||!n.includes(r.parent))),a.sort((r,i)=>r.level-i.level||r.index-i.index),a.map(r=>r.id)}function kr(n,t,e,a){const r=n.exec?n.exec:n.in.exec;let i=t.split(":")[0],o=t.split(":")[1],s={id:e},c={};if(i=="copy-task"||i=="cut-task"){n._temp||(n._temp=[]),n._temp.push({id:e,cut:i=="cut-task"});return}else if(i=="paste-task"){n._temp&&n._temp.length&&(n._temp.forEach(d=>{r(d.cut?"move-task":"copy-task",{id:d.id,target:e,mode:"after"})}),n._temp=null);return}else i==="add-task"?(c={task:{type:"task",text:a("New Task")},target:e},s={}):i==="edit-task"?i="show-editor":i==="convert-task"?(i="update-task",c={task:{type:o}},o=void 0):i==="indent-task"&&(o=o==="add");typeof o<"u"&&(c={mode:o,...c}),s={...s,...c},r(i,s)}const nd=n=>Te(n),ad=n=>Ja(n);function pr(n,t,e){Sr(n,t),n.base_start&&Sr(n,t,!0),Qn(t,e)}function Qn(n,t,e,a){n.unscheduled||(e&&rd(n,a),Mr(n,t)),n.base_start&&Mr(n,t,!0)}function Sr(n,t,e=!1){t.type=t.type||n.type;const[a,r,i]=Yi(e);t.type!=="milestone"?(n[r]&&t[a]||(t[a]=n[a]),t[a]&&!(t[i]||t[r])?(t[r]=n[r]>t[a]?n[r]:null,t[r]||(t[i]=1)):t[r]&&!(t[i]||t[a])?(t[a]=n[a]<t[r]?n[a]:t[r],t[a]===t[r]&&(t[i]=1,delete t[r])):t[i]&&!(t[a]||t[r])&&(t[a]=n[a])):(t[r]&&delete t[r],n[r]&&delete n[r])}function Mr(n,t="day",e){const[a,r,i]=Yi(e);n.type==="milestone"?n[i]=0:n[a]&&(n[i]?n[r]||(n[r]=nd(t)(n[a],n[i])):n[r]?n[i]=ad(t)(n[r],n[a]):(n[r]=n[a],n[i]=0))}function Yi(n){return n?["base_start","base_end","base_duration"]:["start","end","duration"]}function rd(n,t){t==="duration"&&(n.end=null),n.start&&n.end&&(n.start>=n.end?n.end=null:n.duration=null),n.base_start&&n.base_end&&(n.base_start>=n.base_end?n.base_end=null:n.base_duration=null)}class id extends Js{constructor(e){super({writable:e,async:!1});se(this,"in");se(this,"_router");this._router=new Zs(super.setState.bind(this),[{in:["tasks","start","end","scales","autoScale"],out:["_start","_end"],exec:i=>{const{_end:o,_start:s,start:c,end:d,tasks:u,scales:f,autoScale:g}=this.getState();if(!c||!d||g){const h=gn(f).unit,m=jc(c,d,g,h,u);(m._end!=o||m._start!=s)&&this.setState(m,i)}else this.setState({_start:c,_end:d},i)}},{in:["_start","_end","cellWidth","scaleHeight","scales","lengthUnit"],out:["_scales"],exec:i=>{const o=this.getState();let{lengthUnit:s}=o;const{_start:c,_end:d,cellWidth:u,scaleHeight:f,scales:g}=o,h=gn(g).unit;Fc(h,s)||(s=h);const m=qc(c,d,s,u,f,g);this.setState({_scales:m},i)}},{in:["_scales","tasks","cellHeight","baselines"],out:["_tasks"],exec:i=>{const{cellWidth:o,cellHeight:s,tasks:c,_scales:d,baselines:u}=this.getState(),f=c.toArray().map((g,h)=>Wc(g,h,o,s,d,u));this.setState({_tasks:f},i)}},{in:["_tasks","links","cellHeight"],out:["_links"],exec:i=>{const{tasks:o,links:s,cellHeight:c,baselines:d}=this.getState(),u=s.map(f=>{const g=o.byId(f.source),h=o.byId(f.target);return Xc(f,g,h,c,d)}).filter(f=>f!==null);this.setState({_links:u},i)}},{in:["tasks","activeTask"],out:["_activeTask"],exec:i=>{const{tasks:o,activeTask:s}=this.getState();this.setState({_activeTask:o.byId(s)||null},i)}},{in:["tasks","selected"],out:["_selected"],exec:i=>{const{tasks:o,selected:s}=this.getState(),c=s.map(d=>o.byId(d)).filter(d=>!!d);this.setState({_selected:c},i)}},{in:["start","end"],out:["cellWidth"],exec:i=>{const{_cellWidth:o,cellWidth:s}=this.getState();o!=s&&this.setState({cellWidth:o},i)}},{in:["markers","_scales","cellWidth"],out:["_markers"],exec:i=>{const{markers:o,_scales:s,cellWidth:c}=this.getState(),{start:d,diff:u}=s,f=o.map(g=>(g.left=u(g.start,d)*c,g));this.setState({_markers:f},i)}}],{tasks:i=>new Pc(i),links:i=>new hr(i),columns:i=>Zc(i)});const a=this.in=new $s;a.on("show-editor",({id:i})=>{this.setStateAsync({activeTask:i})}),a.on("select-task",({id:i,toggle:o,range:s,show:c})=>{const{selected:d,_tasks:u,activeTask:f}=this.getState();let g=!1,h;if(d.length&&(o||s)){const w=[...d];if(s){const v=w[w.length-1],x=u.findIndex(y=>y.id==v),_=u.findIndex(y=>y.id==i),b=Math.min(x,_),p=Math.max(x,_)+1,M=u.slice(b,p).map(y=>y.id);x>_&&M.reverse(),M.forEach(y=>{w.includes(y)||w.push(y)})}else if(o){const v=w.findIndex(x=>x==i);v===-1?w.push(i):(g=!0,w.splice(v,1))}h=w}else h=[i];const m={selected:h};c&&h.length&&(m._scrollTask={id:h[0],mode:c}),this.setStateAsync(m),!g&&f&&f!=i&&a.exec("show-editor",{id:i})}),a.on("delete-link",({id:i})=>{const{links:o}=this.getState();o.remove(i),this.setStateAsync({links:o})}),a.on("update-link",i=>{const{links:o}=this.getState(),{id:s,link:c}=i;o.update(s,c),this.setStateAsync({links:o}),i.link=o.byId(s)}),a.on("add-link",i=>{const{link:o}=i,{links:s}=this.getState();!o.source||!o.target||(o.type||(o.type="e2s"),o.id=o.id||hi(),s.add(o),this.setStateAsync({links:s}),i.id=o.id,i.link=s.byId(o.id))});let r=null;a.on("move-task",i=>{const{tasks:o}=this.getState();let{mode:s,target:c}=i;const{id:d,inProgress:u}=i,f=o.byId(d);if(typeof u>"u"?i.source=f.parent:i.source=r=r??f.parent,u===!1){o.update(f.id,{$reorder:!1}),this.setState({tasks:o}),r=null;return}if(c===d||o.contains(d,c)){i.skipProvider=!0;return}if(s==="up"||s==="down"){const g=o.getBranch(d);let h=o.getIndexById(d);if(s==="up"){const m=f.parent===0;if(h===0&&m){i.skipProvider=!0;return}h-=1,s="before"}else if(s==="down"){const m=h===g.length-1,w=f.parent===0;if(m&&w){i.skipProvider=!0;return}h+=1,s="after"}if(c=g[h]&&g[h].id||f.parent,c){const m=o.getBranch(c);let w=o.getIndexById(c),v=m[w];if(v.data){if(s==="before"){if(v.parent===f.parent){for(;v.data;)v.open||a.exec("open-task",{id:v.id,mode:!0}),v=v.data[v.data.length-1];c=v.id}}else if(s==="after"){let b;v.parent===f.parent?(b=v,v=v.data[0],c=v.id,s="before"):m.length-1!==w&&(b=v,w+=1,v=m[w],f.$level>v.$level&&v.data?(b=v,v=v.data[0],c=v.id,s="before"):c=v.id),b&&!b.open&&a.exec("open-task",{id:b.id,mode:!0})}}const x=o.getSummaryId(f.id);o.move(d,s,c);const _=o.getSummaryId(d);x!=_&&(x&&this.resetSummaryDates(x,"move-task"),_&&this.resetSummaryDates(_,"move-task"))}}else{const g=o.byId(c);let h=g,m=!1;for(;h.$level>f.$level;)h=o.byId(h.parent),h.id===d&&(m=!0);if(m)return;const w=o.getSummaryId(f.id);if(o.move(d,s,c),s=="child"){let x=g;for(;x.id!==0&&!x.open;)a.exec("open-task",{id:x.id,mode:!0}),x=o.byId(x.parent)}const v=o.getSummaryId(d);w!=v&&(w&&this.resetSummaryDates(w,"move-task"),v&&this.resetSummaryDates(v,"move-task"))}u?this.setState({tasks:o}):this.setStateAsync({tasks:o}),i.target=c,i.mode=s}),a.on("drag-task",i=>{const{id:o,width:s,left:c,top:d,inProgress:u}=i,f=this.getState(),{tasks:g,_tasks:h,_selected:m,_scales:w,cellWidth:v}=f,x={_tasks:h,_selected:m},_=g.byId(o);typeof s<"u"&&(_.$w=s,Ea(g,_,w,v)),typeof c<"u"&&(_.type==="summary"&&Oi(_,c-_.$x),_.$x=c,Ea(g,_,w,v)),typeof d<"u"&&(_.$y=d+4,_.$reorder=u),typeof s<"u"&&(_.$w=s),typeof c<"u"&&(_.$x=c),typeof d<"u"&&(_.$y=d+4,_.$reorder=u),this.setState(x)}),a.on("update-task",i=>{var _;const{id:o,task:s,eventSource:c}=i;let d=i.diff;const{tasks:u,_scales:f,durationUnit:g}=this.getState(),h=u.byId(o);if(c==="add-task"||c==="copy-task"||c==="move-task"||c==="update-task"||c==="delete-task"){pr(h,s,g),u.update(o,s);return}const m=f.lengthUnit,w=Te(m),v=Ja(m);if(d&&(s.start&&(s.start=w(s.start,d)),s.end&&(s.end=w(s.end,d))),s.start&&s.end){if((!rn(s.start,h.start)||!rn(s.end,h.end))&&h.type==="summary"&&(!s.type||s.type==="summary")&&((_=h.data)!=null&&_.length)){if(!d&&(d=v(s.start,h.start),v(s.end,h.end)!==d))return;this.moveSummaryKids(h,b=>w(b,d),"update-task")}}else if(h.type=="summary"&&(s.start&&!s.end||s.end&&!s.start||s.duration))return;pr(h,s,g),u.update(o,s),s.type==="summary"&&h.type!=="summary"&&this.resetSummaryDates(o,"update-task");const x=u.getSummaryId(o);x&&this.resetSummaryDates(x,"update-task"),this.setStateAsync({tasks:u}),i.task=u.byId(o)}),a.on("add-task",i=>{const{tasks:o,_scales:s,baselines:c,unscheduledTasks:d,durationUnit:u}=this.getState(),{target:f,mode:g,task:h,show:m}=i;h.unscheduled=d;let w=-1,v,x;if(f?(x=o.byId(f),g=="child"?(v=x,h.parent=v.id):(x.parent!==null&&(v=o.byId(x.parent),h.parent=v.id),w=o.getIndexById(f),g=="after"&&(w+=1))):h.parent&&(v=o.byId(h.parent)),!h.start){if(v!=null&&v.start)h.start=new Date(v.start.valueOf());else if(x)h.start=new Date(x.start.valueOf());else{const p=o.getBranch(0);let M;if(p!=null&&p.length){const y=p[p.length-1];if(!y.$skip){const D=new Date(y.start.valueOf());s.start<=D&&(M=D)}}h.start=M||Te(u)(s.start,1)}h.duration=1,c&&(h.base_start=h.start,h.base_duration=h.duration)}Qn(h,u);const _=o.add(h,w);if(v)for(;v&&v.id;)a.exec("open-task",{id:v.id,mode:!0}),v=o.byId(v.parent);i.id=_.id;const b=o.getSummaryId(_.id);b&&this.resetSummaryDates(b,"add-task"),this.setStateAsync({tasks:o}),a.exec("select-task",{id:_.id,show:m||!1}),i.id=_.id,i.task=_}),a.on("delete-task",i=>{const{id:o}=i,{tasks:s,links:c,selected:d}=this.getState();i.source=s.byId(o).parent;const u=s.getSummaryId(o),f=[o];s.eachChild(h=>f.push(h.id),o),c.filter(h=>!(f.includes(h.source)||f.includes(h.target)));const g={tasks:s,links:c};d.includes(o)&&(g.selected=d.filter(h=>h!==o)),s.remove(o),u&&this.resetSummaryDates(u,"delete-task"),this.setStateAsync(g)}),a.on("indent-task",({id:i,mode:o})=>{const{tasks:s}=this.getState();if(o){const c=s.getBranch(i)[s.getIndexById(i)-1];c&&a.exec("move-task",{id:i,mode:"child",target:c.id})}else{const c=s.byId(i),d=s.byId(c.parent);d&&d.parent!==null&&a.exec("move-task",{id:i,mode:"after",target:c.parent})}}),a.on("copy-task",i=>{const{id:o,target:s,mode:c,eventSource:d}=i;if(d==="copy-task")return;const{tasks:u,links:f}=this.getState();if(u.contains(o,s)){i.skipProvider=!0;return}const g=u.getSummaryId(o),h=u.getSummaryId(s);let m=u.getIndexById(s);c=="before"&&(m-=1);const w=u.byId(o),v=u.copy(w,u.byId(s).parent,m+1);i.source=i.id,i.id=v[0][1],w.lazy&&(i.lazy=!0),g!=h&&h&&this.resetSummaryDates(h,"copy-task");let x=[];for(let _=1;_<v.length;_++){const[b,p]=v[_];f.forEach(M=>{if(M.source===b){const y={...M};delete y.target,x.push({...y,source:p})}else if(M.target===b){const y={...M};delete y.source,x.push({...y,target:p})}})}x=x.reduce((_,b)=>{const p=_.findIndex(M=>M.id===b.id);return p>-1?_[p]={..._[p],...b}:_.push(b),_},[]);for(let _=1;_<v.length;_++){const[b,p]=v[_],M=u.byId(p);a.exec("copy-task",{source:b,id:p,lazy:!!M.lazy,eventSource:"copy-task",target:M.parent,mode:"child"})}x.forEach(_=>{a.exec("add-link",{link:{source:_.source,target:_.target,type:_.type}})}),this.setStateAsync({tasks:u})}),a.on("open-task",({id:i,mode:o})=>{const{tasks:s}=this.getState(),c=s.byId(i);c.lazy?a.exec("request-data",{id:c.id}):(s.toArray().forEach(d=>d.$y=0),s.update(i,{open:o}),this.setState({tasks:s}))}),a.on("scroll-chart",({left:i,top:o})=>{if(!isNaN(i)){const s=this.calcScaleDate(i);this.setState({scrollLeft:i,_scaleDate:s})}isNaN(o)||this.setState({scrollTop:o})}),a.on("render-data",i=>{this.setState({area:i})}),a.on("provide-data",i=>{const{tasks:o,links:s}=this.getState(),c=o.byId(i.id);c.lazy?(c.lazy=!1,c.open=!0):c.data=[],o.parse(i.data.tasks,i.id),this.setStateAsync({tasks:o,links:new hr(s.map(d=>d).concat(i.data.links))})}),a.on("zoom-scale",({dir:i,offset:o})=>{const{zoom:s,cellWidth:c,_cellWidth:d,scrollLeft:u}=this.getState(),f=o+u,g=this.calcScaleDate(f);let h=c;i<0&&(h=d||c);const m=h+i*50,w=s.levels[s.level],v=i<0&&c>w.maxCellWidth;if(m<w.minCellWidth||m>w.maxCellWidth||v){if(!this.changeScale(s,i))return}else this.setState({cellWidth:m,_cellWidth:m});const{_scales:x,_start:_,cellWidth:b}=this.getState(),p=He(x.minUnit,_),M=x.diff(g,p,"hour");typeof o>"u"&&(o=b);let y=Math.round(M*b)-o;y<0&&(y=0),this.setState({scrollLeft:y,_scaleDate:g,_zoomOffset:o})}),a.on("expand-scale",({minWidth:i})=>{const{_start:o,_scales:s,start:c,end:d,_end:u,cellWidth:f,_scaleDate:g,_zoomOffset:h}=this.getState(),m=Te(s.minUnit);let w=s.width;if(c&&d){if(w<i&&w){const p=i/w;this.setState({cellWidth:f*p})}return!0}let v=0;for(;w<i;)w+=f,v++;const x=v?d?-v:-1:0,_=c||m(o,x);let b=0;if(g){const p=s.diff(g,_,"hour");b=Math.max(0,Math.round(p*f)-(h||0))}this.setState({_start:_,_end:d||m(u,v),scrollLeft:b})}),a.on("sort-tasks",({key:i,order:o,add:s})=>{const c=this.getState(),{tasks:d}=c;let u=c._sort;const f={key:i,order:o};let g=(u==null?void 0:u.length)||0;g&&s?(u.forEach((h,m)=>{h.key===i&&(g=m)}),u[g]=f):u=[f],d.sort(u),this.setState({_sort:u,tasks:d})}),a.on("hotkey",({key:i,event:o,eventSource:s})=>{var c,d,u,f;switch(i){case"arrowup":case"arrowdown":{const{selected:g,_tasks:h}=this.getState();o.preventDefault();const m=g.length;let w;if(i==="arrowup"?w=m?(c=this.getPrevRow(g[m-1]))==null?void 0:c.id:(d=h[h.length-1])==null?void 0:d.id:w=m?(u=this.getNextRow(g[m-1]))==null?void 0:u.id:(f=h[0])==null?void 0:f.id,w){const v=s==="chart"?"xy":!0;this.in.exec("select-task",{id:w,show:v})}break}case"ctrl+c":{qn(this,"copy-task",null,null);break}case"ctrl+x":{qn(this,"cut-task",null,null);break}case"ctrl+v":{qn(this,"paste-task",null,null);break}case"ctrl+d":case"backspace":{o.preventDefault(),qn(this,"delete-task",null,null);break}}})}init(e){const a=this.getState().area?{}:{scrollLeft:0,scrollTop:0,area:{from:0,start:0,end:0}};if(e.cellWidth&&(e._cellWidth=e.cellWidth),e._sort=null,td()&&(e.unscheduledTasks=!1,e.baselines=!1,e.markers=[]),Array.isArray(e.tasks)&&e.tasks.forEach(r=>Qn(r,e.durationUnit)),this._router.init({_scrollTask:null,selected:[],markers:[],autoScale:!0,durationUnit:"day",...a,...e}),e.zoom){const r=Bc(e.zoom,e.scales,e.cellWidth);this.setState({zoom:r._zoom,cellWidth:r.cellWidth,_cellWidth:r.cellWidth,scales:r.scales})}}setState(e,a){return this._router.setState(e,a)}setStateAsync(e){this._router.setStateAsync(e)}getTask(e){const{tasks:a}=this.getState();return a.byId(e)}serialize(){const{tasks:e}=this.getState();return e.serialize()}changeScale(e,a){const r=e.level+a,i=e.levels[r];if(i){const{cellWidth:o,scales:s,_scales:c}=this.getState(),d=Vc(e,a,r,i,c.lengthUnit,s,o);return d._cellWidth=d.cellWidth,this.setState(d),!0}return!1}isScheduled(e){return this.getState().unscheduledTasks?e.some(a=>!a.unscheduled||a.data&&this.isScheduled(a.data)):!0}resetSummaryDates(e,a){const{tasks:r}=this.getState(),i=r.byId(e),o=i.data;if(o!=null&&o.length&&this.isScheduled(o)){const s=Ka({...i,start:void 0,end:void 0,duration:void 0});if(!rn(i.start,s.start)||!rn(i.end,s.end)){this.in.exec("update-task",{id:e,task:s,eventSource:a});const c=r.getSummaryId(e);c&&this.resetSummaryDates(c,a)}}}moveSummaryKids(e,a,r){const{tasks:i}=this.getState();e.data.forEach(o=>{var c;const s={...i.byId(o.id),start:a(o.start)};s.type!=="milestone"&&(s.end=a(o.end)),delete s.id,this.in.exec("update-task",{id:o.id,task:s,eventSource:r}),(c=o.data)!=null&&c.length&&this.moveSummaryKids(o,a,r)})}calcScaleDate(e){const{_scales:a,_start:r}=this.getState(),i=a.lengthUnit==="day"?a.lengthUnitWidth/24:a.lengthUnitWidth;return Te("hour")(He(a.minUnit,r),Math.floor(e/i))}getNextRow(e){const a=this.getState()._tasks,r=a.findIndex(i=>i.id==e);return a[r+1]}getPrevRow(e){const a=this.getState()._tasks,r=a.findIndex(i=>i.id==e);return a[r-1]}}function od(n,t,e,a){if(typeof document>"u")return"";const r=document.createElement("canvas");{const i=sd(r,n,t,1,e);ld(i,a,0,n,0,t)}return r.toDataURL()}function sd(n,t,e,a,r){n.setAttribute("width",(t*a).toString()),n.setAttribute("height",(e*a).toString());const i=n.getContext("2d");return i.translate(-.5,-.5),i.strokeStyle=r,i}function ld(n,t,e,a,r,i){n.beginPath(),n.moveTo(a,r),n.lineTo(a,i),t==="full"&&n.lineTo(e,i),n.stroke()}function Za(n){return n.map(t=>{switch(t.data&&Za(t.data),t.id){case"add-task:before":case"move-task:up":t.check=(e,a)=>!dd(e,a);break;case"move-task:down":t.check=(e,a)=>!ud(e,a);break;case"indent-task:add":t.check=(e,a)=>fd(e,a)!==e.parent;break;case"indent-task:remove":t.check=e=>!cd(e);break}return t})}function cd(n){return n.parent===0}function dd(n,t){var e;return((e=t[0])==null?void 0:e.id)===n.id}function ud(n,t){var e;return((e=t[t.length-1])==null?void 0:e.id)===n.id}function fd(n,t){var a;const e=t.findIndex(r=>r.id===n.id);return((a=t[e-1])==null?void 0:a.id)??n.parent}const hd=n=>t=>t.type!==n;Za([{id:"add-task",text:"Add",icon:"wxi-plus",data:[{id:"add-task:child",text:"Child task"},{id:"add-task:before",text:"Task above"},{id:"add-task:after",text:"Task below"}]},{type:"separator"},{id:"convert-task",text:"Convert to",icon:"wxi-swap-horizontal",dataFactory:n=>({id:`convert-task:${n.id}`,text:`${n.label}`,check:hd(n.id)})},{id:"edit-task",text:"Edit",icon:"wxi-edit",subtext:"Ctrl+E"},{id:"cut-task",text:"Cut",icon:"wxi-content-cut",subtext:"Ctrl+X"},{id:"copy-task",text:"Copy",icon:"wxi-content-copy",subtext:"Ctrl+C"},{id:"paste-task",text:"Paste",icon:"wxi-content-paste",subtext:"Ctrl+V"},{id:"move-task",text:"Move",icon:"wxi-swap-vertical",data:[{id:"move-task:up",text:"Up"},{id:"move-task:down",text:"Down"}]},{type:"separator"},{id:"indent-task:add",text:"Indent",icon:"wxi-indent"},{id:"indent-task:remove",text:"Outdent",icon:"wxi-unindent"},{type:"separator"},{id:"delete-task",icon:"wxi-delete",text:"Delete",subtext:"Ctrl+D / BS"}]);Za([{id:"add-task",comp:"button",icon:"wxi-plus",text:"New task",type:"primary"},{id:"edit-task",comp:"icon",icon:"wxi-edit",menuText:"Edit",text:"Ctrl+E"},{id:"delete-task",comp:"icon",icon:"wxi-delete",menuText:"Delete",text:"Ctrl+D, Backspace"},{comp:"separator"},{id:"move-task:up",comp:"icon",icon:"wxi-angle-up",menuText:"Move up"},{id:"move-task:down",comp:"icon",icon:"wxi-angle-down",menuText:"Move down"},{comp:"separator"},{id:"copy-task",comp:"icon",icon:"wxi-content-copy",menuText:"Copy",text:"Ctrl+V"},{id:"cut-task",comp:"icon",icon:"wxi-content-cut",menuText:"Cut",text:"Ctrl+X"},{id:"paste-task",comp:"icon",icon:"wxi-content-paste",menuText:"Paste",text:"Ctrl+V"},{comp:"separator"},{id:"indent-task:add",comp:"icon",icon:"wxi-indent",menuText:"Indent"},{id:"indent-task:remove",comp:"icon",icon:"wxi-unindent",menuText:"Outdent"}]);const gd=[{id:"task",label:"Task"},{id:"summary",label:"Summary task"},{id:"milestone",label:"Milestone"}];new Date().valueOf();function md(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in t){const a=n[e],r=t[e];if(!In(a,r))return!1}return!0}function In(n,t){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||n===null)return n===t;if(typeof n!=typeof t||(n===null||t===null)&&n!==t||n instanceof Date&&t instanceof Date&&n.getTime()!==t.getTime())return!1;if(typeof n=="object")if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;for(let e=n.length-1;e>=0;e--)if(!In(n[e],t[e]))return!1;return!0}else return md(n,t);return n===t}function Ra(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(n instanceof Array)return n.map(Ra);const t={};for(const e in n)t[e]=Ra(n[e]);return t}var Ai=2,vd=class{constructor(n){n&&(this._writable=n.writable,this._async=n.async),this._values={},this._state={}}setState(n,t=0){const e={};return this._wrapProperties(n,this._state,this._values,"",e,t),e}getState(){return this._values}getReactive(){return this._state}_wrapProperties(n,t,e,a,r,i){for(const o in n){const s=t[o],c=e[o],d=n[o];if(s&&(c===d&&typeof d!="object"||d instanceof Date&&c instanceof Date&&c.getTime()===d.getTime()))continue;const u=a+(a?".":"")+o;s?(s.__parse(d,u,r,i)&&(e[o]=d),i&Ai?r[u]=s.__trigger:s.__trigger()):(d&&d.__reactive?t[o]=this._wrapNested(d,d,u,r):t[o]=this._wrapWritable(d),e[o]=d),r[u]=r[u]||null}}_wrapNested(n,t,e,a){const r=this._wrapWritable(n);return this._wrapProperties(n,r,t,e,a,0),r.__parse=(i,o,s,c)=>(this._wrapProperties(i,r,t,o,s,c),!1),r}_wrapWritable(n){const t=[],e=function(){for(let a=0;a<t.length;a++)t[a](n)};return{subscribe:a=>(t.push(a),this._async?setTimeout(a,1,n):a(n),()=>{const r=t.indexOf(a);r>=0&&t.splice(r,1)}),__trigger:()=>{t.length&&(this._async?setTimeout(e,1):e())},__parse:function(a){return n=a,!0}}}},wd=class{constructor(n,t,e,a){typeof n=="function"?this._setter=n:this._setter=n.setState.bind(n),this._routes=t,this._parsers=e,this._prev={},this._triggers=new Map,this._sources=new Map,this._routes.forEach(r=>{r.in.forEach(i=>{const o=this._triggers.get(i)||[];o.push(r),this._triggers.set(i,o)}),r.out.forEach(i=>{const o=this._sources.get(i)||{};r.in.forEach(s=>o[s]=!0),this._sources.set(i,o)})}),this._routes.forEach(r=>{r.length=Math.max(...r.in.map(i=>zi(i,this._sources,1)))}),this._bus=a}init(n){const t={};for(const e in n)if(this._prev[e]!==n[e]){const a=this._parsers[e];t[e]=a?a(n[e]):n[e]}this._prev=this._prev?{...this._prev,...n}:{...n},this.setState(t),this._bus&&this._bus.exec("init-state",t)}setStateAsync(n){const t=this._setter(n,Ai);return this._async?Object.assign(this._async.signals,t):this._async={signals:t,timer:setTimeout(this._applyState.bind(this),1)},t}_applyState(){const n=this._async;if(n){this._async=null,this._triggerUpdates(n.signals,[]);for(const t in n.signals){const e=n.signals[t];e&&e()}}}setState(n,t=[]){const e=this._setter(n);return this._triggerUpdates(e,t),e}_triggerUpdates(n,t){const e=Object.keys(n),a=!t.length;t=t||[];for(let r=0;r<e.length;r++){const i=e[r],o=this._triggers.get(i);o&&o.forEach(s=>{t.indexOf(s)==-1&&t.push(s)})}a&&this._execNext(t)}_execNext(n){for(;n.length;){n.sort((e,a)=>e.length<a.length?1:-1);const t=n[n.length-1];n.splice(n.length-1),t.exec(n)}}};function zi(n,t,e){const a=t.get(n);if(!a)return e;const r=Object.keys(a).map(i=>zi(i,t,e+1));return Math.max(...r)}var yd=class{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(n,t,e){let a=this._handlers[n];a?e&&e.intercept?a.unshift(t):a.push(t):a=this._handlers[n]=[t],e&&e.tag&&this._tag.set(t,e.tag)}intercept(n,t,e){this.on(n,t,{...e,intercept:!0})}detach(n){for(const t in this._handlers){const e=this._handlers[t];for(let a=e.length-1;a>=0;a--)this._tag.get(e[a])===n&&e.splice(a,1)}}async exec(n,t){const e=this._handlers[n];if(e)for(let a=0;a<e.length;a++){const r=e[a](t);if(r===!1||r&&r.then&&await r===!1)return}return this._nextHandler&&await this._nextHandler.exec(n,t),t}setNext(n){return this._nextHandler=n}};function xd(n){return t=>t[n]}function _d(n){return(t,e)=>t[n]=e}function Ge(n,t){return(t.getter||xd(t.id))(n)}function Dr(n,t,e){return(t.setter||_d(t.id))(n,e)}function Tr(n,t){const e=document.createElement("a");e.href=URL.createObjectURL(n),e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}function vn(n,t){let e=Ge(n,t)??"";return t.template&&(e=t.template(e,n,t)),t.optionsMap&&(Array.isArray(e)?e=e.map(a=>t.optionsMap.get(a)):e=t.optionsMap.get(e)),typeof e>"u"?"":e+""}function bd(n,t){const e=/\n|"|;|,/;let a="";const r=t.rows||`
`,i=t.cols||"	",o=n._columns,s=n.flatData;t.header!==!1&&o[0].header&&(a=Cr("header",o,a,i,r));for(let c=0;c<s.length;c++){const d=[];for(let u=0;u<o.length;u++){let f=vn(s[c],o[u]);e.test(f)&&(f='"'+f.replace(/"/g,'""')+'"'),d.push(f)}a+=(a?r:"")+d.join(i)}return t.footer!==!1&&o[0].footer&&(a=Cr("footer",o,a,i,r)),a}function Cr(n,t,e,a,r){const i=/\n|"|;|,/;for(let o=0;o<t[0][n].length;o++){const s=[];for(let c=0;c<t.length;c++){let d=(t[c][n][o].text||"")+"";i.test(d)&&(d='"'+d.replace(/"/g,'""')+'"'),s.push(d)}e+=(e?r:"")+s.join(a)}return e}function kd(n,t,e){const a=[],r=[],i=[];let o=[];const s=n._columns,c=n.flatData,d=n._sizes;for(const f of s)i.push({width:f.flexgrow?d.columnWidth:f.width});let u=0;t.header!==!1&&s[0].header&&(Wr("header",s,a,r,u,t,e),o=o.concat(d.headerRowHeights.map(f=>({height:f}))),u+=s[0].header.length);for(let f=0;f<c.length;f++){const g=[];for(let h=0;h<s.length;h++){const m=c[f],w=s[h],v=Ge(m,w)??"";let x=vn(m,w),_;t.cellStyle&&(_=t.cellStyle(v,m,w)),t.cellTemplate&&(x=t.cellTemplate(v,m,w)??x);const b=ji(x,2,_,e);g.push(b)}a.push(g),o.push({height:d.rowHeight})}return u+=c.length,t.footer!==!1&&s[0].footer&&(Wr("footer",s,a,r,u,t,e),o=o.concat(d.footerRowHeights.map(f=>({height:f})))),{cells:a,merged:r,rowSizes:o,colSizes:i,styles:e}}function Wr(n,t,e,a,r,i,o){for(let s=0;s<t[0][n].length;s++){const c=[];for(let d=0;d<t.length;d++){const u=t[d][n][s],f=u.colspan?u.colspan-1:0,g=u.rowspan?u.rowspan-1:0;(f||g)&&a.push({from:{row:s+r,column:d},to:{row:s+r+g,column:d+f}});let h=u.text??"",m;i.headerCellStyle&&(m=i.headerCellStyle(h,u,t[d],n)),i.headerCellTemplate&&(h=i.headerCellTemplate(h,u,t[d],n)??h);let w;n=="header"?s==t[0][n].length-1?w=1:w=0:s?w=4:w=3;const v=ji(h,w,m,o);c.push(v)}e.push(c)}}function ji(n,t,e,a){let r=t;if(n&&n instanceof Date&&(n=Sd(n),e=e||{},e.format=e.format||"dd/mm/yyyy"),e){e={...a[t],...e};const i=a.findIndex(o=>In(o,e));i<0?(a.push(e),r=a.length-1):r=i}return{v:n+"",s:r}}function pd(n){const t={material:"#000000",willow:"#000000","willow-dark":"#ffffff"},e={material:"none",willow:"none","willow-dark":"#2a2b2d"},a={material:"#fafafb",willow:"#f2f3f7","willow-dark":"#20262b"},r={material:"0.5px solid #dfdfdf",willow:"0.5px solid #e6e6e6","willow-dark":"0.5px solid #384047"},i={material:"#dfdfdf",willow:"#e6e6e6","willow-dark":"#384047"},o=t[n],s="0.5px solid "+i[n],c={verticalAlign:"center",align:"left"},d={fontWeight:"bold",color:o,background:a[n],...c,borderBottom:s,borderRight:s};return{cell:{color:o,background:e[n],borderBottom:r[n],borderRight:r[n],...c},header:{...d},footer:{...d}}}function Sd(n){return n?25569+(n.getTime()-n.getTimezoneOffset()*6e4)/(86400*1e3):null}const Md="portrait",Dd=100,Td="a4",Cd={a3:{width:11.7,height:16.5},a4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};function Wd(n,t){const e=[];let a=[],r=0;const i=n.filter(s=>!s.hidden),o=Pd(t);return i.forEach((s,c)=>{r+s.width<=o?(r+=s.width,a.push(s)):(a.length&&e.push(a),a=[s],r=s.width),c===i.length-1&&a.length&&e.push(a)}),e}function Pr(n,t,e){const a=[];return n.forEach((r,i)=>{const o=r[t];for(let s=0;s<e.length;s++){a[s]||(a[s]=[]);const c={...o[s]};if(a[s][i]!==null){if(!i&&!c.rowspan&&!c.colspan){let d=1,u=n[i+d][t][s],f=c.width;for(;!u.rowspan&&!u.colspan;)d++,u=n[i+d][t][s],f+=u.width;c.colspan=d,c.width=f,c.height=e[s]}if(a[s].push(c),!c.collapsed&&c.colspan>1){let d=c.colspan-1;if(c.colspan+i>n.length){const u=c.colspan-(c.colspan+i-n.length);c.colspan=u,c.width=n.slice(i,i+d+1).reduce((f,g)=>f+g.width,0),u>1&&(d=u-1)}for(let u=0;u<d;u++)a[s].push(null)}if(c.rowspan>1){const d=c.rowspan;for(let u=1;u<d;u++)a[s+u]||(a[s+u]=[]),a[s+u].push(null)}}}if(r.collapsed)for(let s=0;s<a.length;s++){const c=a[s],d=c[i];if(d&&d.collapsed){if(c[i]=null,!s)break}else{const u=d||c.findLast(f=>(f==null?void 0:f.colspan)>=1);u&&(u.colspan=u.colspan-1,u.width=u.width-r.width)}}}),a.map(r=>r.filter(i=>i&&i.colspan!==0))}function Pd(n){const{mode:t,ppi:e,paper:a}=n,{width:r,height:i}=Cd[a];return Ed(t==="portrait"?r:i,e)}function Ed(n,t){return n*t}function Hd(n={}){const{mode:t,ppi:e,paper:a}=n;return{mode:t||Md,ppi:e||Dd,paper:a||Td}}function qi(n,t){return n.flexgrow?`min-width:${t}px;width:auto`:`width:${n.width}px; max-width:${n.width}px; height:${n.height}px`}function Od(n,t,e){var r;let a=n[e.id];if(e.filter.type==="richselect"&&a){const i=((r=e.filter.config)==null?void 0:r.options)||t.find(({id:o})=>o==e.id).options;i&&(a=i.find(({id:o})=>o==a).label)}return a??""}const Er=["resize-column","hide-column","update-cell"],Id=["delete-row","update-row","update-cell"],Rd=["move-item"],Ld=["resize-column","move-item"];class Nd{constructor(t,e,a){se(this,"undo",[]);se(this,"redo",[]);se(this,"progress",{});se(this,"in");se(this,"getState");se(this,"setState");se(this,"_previousValues",{});this.in=t,this.getState=e,this.setState=a,this.setHandlers(),this.resetStateHistory()}getHandlers(){return{"add-row":{handler:t=>({action:"delete-row",data:{id:t.id},source:{action:"add-row",data:t}})},"delete-row":{handler:t=>{const{id:e}=t,{data:a}=this.getPrev(),r=a.findIndex(i=>i.id==e);return{action:"add-row",data:{id:e,row:a[r],before:r<a.length-1?a[r+1].id:void 0},source:{action:"delete-row",data:t}}}},"update-cell":{handler:t=>{const{id:e,column:a}=t,r=this.getRow(e),i=this.getColumn(a),o=Ge(r,i);return In(o,t.value)?null:{action:"update-cell",data:{id:e,column:a,value:o},source:{action:"update-cell",data:t}}}},"update-row":{handler:t=>{const{id:e}=t,a=this.getRow(e);return{action:"update-row",data:{id:e,row:a},source:{action:"update-row",data:t}}}},"resize-column":{handler:t=>{const{id:e,width:a}=t,r=this.getColumn(e),{_sizes:i}=this.getState();return{action:"resize-column",data:{id:e,width:r.width??i.columnWidth},source:{action:"resize-column",data:{id:e,width:a}}}}},"hide-column":{handler:t=>{const{id:e}=t,a=this.getColumn(e);return{action:"hide-column",data:{id:e,mode:a.hidden},source:{action:"hide-column",data:t}}}},"collapse-column":{handler:t=>{const{id:e,row:a,mode:r}=t;return{action:"collapse-column",data:{id:e,row:a,mode:typeof r=="boolean"?!r:r},source:{action:"collapse-column",data:t}}}},"move-item":{handler:t=>{const{id:e,target:a,mode:r}=t,{flatData:i}=this.getPrev(),o=i.findIndex(s=>s.id==e);return{action:"move-item",data:{id:e,target:i[o+(o?-1:1)].id,mode:o?"after":"before"},source:{action:"move-item",data:{id:e,target:a,mode:r}}}}},"open-row":{handler:t=>{const{id:e,nested:a}=t;return{action:"close-row",data:{id:e,nested:a},source:{action:"open-row",data:t}}}},"close-row":{handler:t=>{const{id:e,nested:a}=t;return{action:"open-row",data:{id:e,nested:a},source:{action:"close-row",data:t}}}}}}resetHistory(){this.undo=[],this.redo=[],this.progress={},this.resetStateHistory()}getPrev(){return this._previousValues}setHandlers(){const t=this.getHandlers();for(const e in t)this.in.intercept(e,a=>{if(!(a.eventSource==="undo"||a.eventSource==="redo"||a.skipUndo)){if(Ld.includes(e)){(a.inProgress&&!this.progress[e]||typeof a.inProgress!="boolean")&&(Rd.includes(e)&&this.setPrev("flatData"),Er.includes(e)&&this.setPrev("columns")),this.progress[e]=a.inProgress;return}Id.includes(e)&&this.setPrev("data"),Er.includes(e)&&this.setPrev("columns")}}),this.in.on(e,a=>{if(a.eventSource==="undo"||a.eventSource==="redo"||a.skipUndo||a.inProgress)return;const r=t[e].handler(a);r&&this.addToHistory(r)})}setPrev(t){this._previousValues[t]=Ra(this.getState()[t])}addToHistory(t){this.undo.push(t),this.redo=[],this.setStateHistory()}handleUndo(){if(!this.undo.length)return;const t=this.undo.pop();this.redo.push({...t.source,source:t}),this.in.exec(t.action,{...t.data,eventSource:"undo"}),this.setStateHistory()}handleRedo(){if(!this.redo.length)return;const t=this.redo.pop();this.undo.push({...t.source,source:t}),this.in.exec(t.action,{...t.data,eventSource:"redo"}),this.setStateHistory()}resetStateHistory(){this.setState({history:{undo:0,redo:0}})}setStateHistory(){this.setState({history:{undo:this.undo.length,redo:this.redo.length}})}getRow(t){const{data:e}=this.getPrev();return this.getState().tree?this.getTreeRow(e,t):e.find(a=>a.id==t)}getTreeRow(t,e){for(let a=0;a<t.length;a++){if(t[a].id==e)return t[a];if(t[a].data){const r=this.getTreeRow(t[a].data,e);if(r)return r}}return null}getColumn(t){const{columns:e}=this.getPrev();return e.find(a=>a.id==t)}}function $a(){let n=!0;return n=!1,n}function Bi(n,t){return typeof n>"u"||n===null?-1:typeof t>"u"||t===null?1:n===t?0:n>t?1:-1}function Fd(n,t){return-Bi(n,t)}function Yd(n,t){const e=n==="asc"?Bi:Fd;return function(a,r){return e(Ge(a,t),Ge(r,t))}}function Ad(n,t){if(!n||!n.length)return;const e=n.map(a=>Yd(a.order,t.find(r=>r.id==a.key)));return n.length===1?e[0]:function(a,r){for(let i=0;i<e.length;i++){const o=e[i](a,r);if(o!==0)return o}return 0}}const Bn=28,zd=20;function jd(){if(typeof document>"u")return"willow";const n=document.querySelector('[class^="wx"][class$="theme"]');return n?n.className.substring(3,n.className.length-6):"willow"}function Kn(n,t,e,a,r){const i=document.createElement("div"),o=document.createElement("div"),s=document.body;r=r?`${r}px`:"auto";let c,d;o.className=t,i.classList.add(`wx-${e}-theme`),i.style.cssText=`height:auto;position:absolute;top:0px;left:100px;overflow:hidden;width=${r};white-space:nowrap;`,i.appendChild(o),s.appendChild(i),typeof n!="object"&&(n=[n]);for(let u=0;u<n.length;u++){o.innerText=n[u]+"";const f=i.getBoundingClientRect(),g=Math.ceil(f.width)+(a&&a.length?a[u]:0),h=Math.ceil(f.height);c=Math.max(c||0,g),d=Math.max(d||0,h)}return i.remove(),{width:c,height:d}}function Hr(n,t,e,a,r){const i=[];for(let o=0;o<n.length;o++){const s=n[o][t],c=s.length;for(let d=0;d<c;d++){const{text:u,vertical:f,collapsed:g,rowspan:h,css:m}=s[d];if(!u){i[d]=Math.max(i[d]||0,a);continue}let w=0;if(f&&!g){let v=`wx-measure-cell-${t}`;if(v+=m?` ${m}`:"",w=Kn(u,v,r).width,(h>1||!s[d+1])&&e>d+1){const x=h||e-d,_=i.slice(d,d+x).reduce((b,p)=>b+p,0);if(_<w){const b=Math.ceil((w-_)/x);for(let p=d;p<d+x;p++)i[p]=(i[p]||a)+b}continue}}i[d]=Math.max(i[d]||a,w)}}return i}function qd(n,t,e){const a=[],r=[];let i="wx-measure-cell-body";i+=n.css?` ${n.css}`:"";for(let o=0;o<t.length;o++){const s=t[o],c=vn(s,n);c&&(a.push(c),n.treetoggle?r.push(t[o].$level*Bn+(t[o].$count?Bn:0)+(n.draggable?Bn:0)):n.draggable&&r.push(Bn))}return Kn(a,i,e,r).width}function Bd(n,t){const e="wx-measure-cell-header",a=n.sort?zd:0;let r=n.header;if(typeof r=="string")return Kn(r,e,t).width+a;let i;Array.isArray(r)||(r=[r]);for(let o=0;o<r.length;o++){const s=r[o],c=typeof s=="string"?s:s.text,d=e+(typeof s=="string"?"":` ${s.css}`);let u=Kn(c,d,t).width;o===r.length-1&&(u+=a),i=Math.max(i||0,u)}return i}const Vd={text:(n,t)=>n?n.toLowerCase().indexOf(t.toLowerCase())!==-1:!t,richselect:(n,t)=>typeof t!="number"&&!t?!0:n==t};function Ud(n){return Vd[n]}class Xd extends vd{constructor(e){super({writable:e,async:!1});se(this,"in");se(this,"_router");se(this,"_branches");se(this,"_xlsxWorker");se(this,"_historyManager");const a={rowHeight:37,columnWidth:160,headerHeight:36,footerHeight:36};this._router=new wd(super.setState.bind(this),[{in:["columns","sizes","_skin"],out:["_columns","_sizes"],exec:i=>{const{columns:o,sizes:s,_skin:c}=this.getState(),d=this.copyColumns(o),u=d.reduce((h,m)=>Math.max(m.header.length,h),0),f=d.reduce((h,m)=>Math.max(m.footer.length,h),0);d.forEach(this.setCollapsibleColumns);const g=this.normalizeSizes(d,s,u,f,c);d.forEach((h,m)=>{this.normalizeColumns(d,m,"header",u,g),this.normalizeColumns(d,m,"footer",f,g)}),this.setState({_columns:d,_sizes:g},i)}},{in:["data","tree","_filterIds"],out:["flatData"],exec:i=>{const{data:o,tree:s,_filterIds:c}=this.getState(),d=s?this.flattenRows(o,[],c):o.filter(u=>!c||c.includes(u.id));this.setState({flatData:d},i)}}],{sizes:i=>({...a,...i})});const r=this.in=new yd;r.on("close-editor",({ignore:i})=>{const{editor:o}=this.getState();o&&(i||r.exec("update-cell",o),this.setState({editor:null}))}),r.on("open-editor",({id:i,column:o})=>{let s=this.getState().editor;s&&r.exec("close-editor",{});const c=this.getRow(i),d=o?this.getColumn(o):this.getNextEditor(c);if(d!=null&&d.editor){let u=d.editor;if(typeof u=="function"&&(u=u(c,d)),!u)return;s={column:d.id,id:i,value:Ge(c,d)??"",renderedValue:vn(c,d)},typeof u=="object"&&u.config&&(s.config=u.config,u.config.options&&(s.options=u.config.options)),d.options&&!s.options&&(s.options=d.options),this.setState({editor:s})}}),r.on("editor",({value:i})=>{const o=this.getState().editor;o&&(o.value=i,this.setState({editor:o}))}),r.on("add-row",i=>{const o=this.getState();let{data:s}=o;const{select:c,_filterIds:d}=o,{row:u,before:f,after:g,select:h}=i;if(i.id=u.id=i.id||u.id||wa(),f||g){const w=f||g,v=s.findIndex(x=>x.id===w);s.splice(v+(g?1:0),0,i.row),s=[...s]}else s=[...s,i.row];const m={data:s};d&&(m._filterIds=[...d,i.id]),this.setState(m),!(typeof h=="boolean"&&!h)&&(h||c)&&r.exec("select-row",{id:u.id,show:!0})}),r.on("delete-row",i=>{const{data:o,selectedRows:s,focusCell:c}=this.getState(),{id:d}=i,u={data:o.filter(f=>f.id!==d)};this.isSelected(d)&&(u.selectedRows=s.filter(f=>f!==d)),this.setState(u),(c==null?void 0:c.row)===d&&this.in.exec("focus-cell",{eventSource:"delete-row"})}),r.on("update-cell",i=>{const o=this.getState();let{data:s}=o;s=[...s];const{tree:c}=o,{id:d,column:u,value:f}=i,g=this.getColumn(u);if(c){const h={...this._branches[d]};Dr(h,g,f);const m=this.updateTreeRow(h);h.$parent===0&&(s=m)}else{const h=s.findIndex(w=>w.id==d),m={...s[h]};Dr(m,g,f),s[h]=m}this.setState({data:s})}),r.on("update-row",i=>{let{data:o}=this.getState();const{id:s,row:c}=i,d=o.findIndex(u=>u.id==s);o=[...o],o[d]={...o[d],...c},this.setState({data:o})}),r.on("select-row",({id:i,toggle:o,range:s,mode:c,show:d,column:u})=>{const f=this.getState(),{focusCell:g}=f;let{selectedRows:h}=f;if(h.length||(s=o=!1),s){const{data:m}=this.getState();let w=m.findIndex(x=>x.id==h[h.length-1]),v=m.findIndex(x=>x.id==i);w>v&&([w,v]=[v,w]),m.slice(w,v+1).forEach(x=>{h.indexOf(x.id)===-1&&h.push(x.id)})}else if(o&&this.isSelected(i)){if(c===!0)return;h=h.filter(m=>m!==i)}else if(o){if(c===!1)return;h.push(i)}else h=[i];this.setState({selectedRows:h}),(g==null?void 0:g.row)!==i&&this.in.exec("focus-cell",{eventSource:"select-row"}),d&&this.in.exec("scroll",{row:i,column:u})}),this.in.on("focus-cell",i=>{const{row:o,column:s,eventSource:c}=i,{_columns:d,split:u}=this.getState();o&&s?(this.setState({focusCell:{row:o,column:s}}),c!=="click"&&((!u.left||d.findIndex(f=>f.id==i.column)>=u.left)&&(!u.right||d.findIndex(f=>f.id==i.column)<d.length-u.right)?this.in.exec("scroll",{row:o,column:s}):this.in.exec("scroll",{row:o}))):this.setState({focusCell:null})}),r.on("resize-column",i=>{const{id:o,auto:s,maxRows:c,inProgress:d}=i;if(d===!1)return;let u=i.width||0;const f=[...this.getState().columns],g=f.find(h=>h.id==o);if(s){if(s=="data"||s===!0){const{flatData:h,_skin:m}=this.getState();let w=h.length;c&&(w=Math.min(c,w));const v=h.slice(0,w);u=qd(g,v,m)}if(s=="header"||s===!0){const{_skin:h}=this.getState();u=Math.max(Bd(g,h),u)}}g.width=Math.max(17,u),delete g.flexgrow,this.setState({columns:f})}),r.on("hide-column",i=>{const{id:o,mode:s}=i,c=[...this.getState().columns],d=c.find(f=>f.id==o),u=c.reduce((f,g)=>f+(g.hidden?0:1),0);!s||u>1?(d.hidden=!d.hidden,this.setState({columns:c})):i.skipUndo=!0}),r.on("sort-rows",i=>{var _;const{key:o,add:s}=i;let{order:c="asc"}=i;const d=this.getState();let u=d.sortMarks;const{columns:f,data:g,tree:h}=d,m=Object.keys(u),w=m.length;u[o]&&(c=u[o].order==="asc"?"desc":"asc"),!s||!w||w===1&&u[o]?u={[o]:{order:c}}:(w===1&&(u[m[0]]={...u[m[0]],index:0}),u={...u,[o]:{order:c,index:((_=u[o])==null?void 0:_.index)??w}});const v=Object.keys(u).sort((b,p)=>u[b].index-u[p].index).map(b=>({key:b,order:u[b].order}));this.setState({sortMarks:u});const x=Ad(v,f);if(x){const b=[...g];h?this.sortTree(b,x):b.sort(x),this.setState({data:b})}}),r.on("filter-rows",i=>{const{value:o,key:s,filter:c}=i;if(!Object.keys(i).length){this.setState({filterValues:{},_filterIds:null});return}const d=this.getState(),{data:u,tree:f}=d;let g=d.filterValues;const h={};s&&(g={...g,[s]:o},h.filterValues=g);const m=c??this.createFilter(g);let w=[];f?w=this.filterTree(u,m,w):u.forEach(v=>{m(v)&&w.push(v.id)}),h._filterIds=w,this.setState(h)}),r.on("collapse-column",i=>{const{id:o,row:s,mode:c}=i,d=[...this.getState().columns],u=this.getColumn(o).header,f=Array.isArray(u)?u[s]:u;typeof f=="object"&&(f.collapsed=c??!f.collapsed,this.setState({columns:d}))}),r.on("move-item",i=>{const{id:o,target:s,mode:c="after",inProgress:d}=i,{data:u,flatData:f,tree:g}=this.getState(),h=f.findIndex(v=>v.id==o),m=f.findIndex(v=>v.id==s);if(h===-1||m===-1||d===!1)return;let w;g?w=this.moveItem(o,s,u,c):w=this.moveItem(o,s,u,c),this.setState({data:g?this.normalizeTreeRows(w):w})}),r.on("open-row",i=>{const{id:o,nested:s}=i;this.toggleBranch(o,!0,s)}),r.on("close-row",i=>{const{id:o,nested:s}=i;this.toggleBranch(o,!1,s)}),r.on("export",i=>new Promise((o,s)=>{const c=i.options||{},d=`${c.fileName||"data"}.${c.format}`;if(c.format=="csv"){const u=bd(this.getState(),c);c.download!==!1?Tr(new Blob(["\uFEFF"+u],{type:"text/csv"}),d):i.result=u,o(!0)}else if(c.format=="xlsx"){let u=c.styles;!u&&u!==!1&&(u=pd(this.getState()._skin));const f=u,g=f?[{...f.header},{...f.lastHeaderCell||f.header},{...f.cell},{...f.firstFooterCell||f.footer},{...f.footer}]:Array(5).fill({}),{cells:h,merged:m,rowSizes:w,colSizes:v,styles:x}=kd(this.getState(),c,g),_=c.cdn||"https://cdn.dhtmlx.com/libs/json2excel/1.3.2/worker.js";this.getXlsxWorker(_).then(b=>{b.onmessage=p=>{if(p.data.type=="ready"){const M=p.data.blob;c.download!==!1?Tr(M,d):i.result=M,o(!0)}},b.postMessage({type:"convert",data:{data:[{name:c.sheetName||"data",cells:h,cols:v,rows:w,merged:m}],styles:x}})})}else s()})),r.on("hotkey",({key:i,event:o,isInput:s})=>{var c,d,u,f,g,h,m,w,v,x,_,b,p;switch(i){case"arrowup":{const{flatData:M,focusCell:y,select:D}=this.getState();if(o.preventDefault(),s)return;const C=y?y.column:(c=this._getFirstVisibleColumn())==null?void 0:c.id,S=y?(d=this.getPrevRow(y.row))==null?void 0:d.id:(u=M[M.length-1])==null?void 0:u.id;C&&S&&(this.in.exec("focus-cell",{row:S,column:C,eventSource:"key"}),D&&this.in.exec("select-row",{id:S}));break}case"arrowdown":{const{flatData:M,focusCell:y,select:D}=this.getState();if(o.preventDefault(),s)return;const C=y?y.column:(f=this._getFirstVisibleColumn())==null?void 0:f.id,S=y?(g=this.getNextRow(y.row))==null?void 0:g.id:(h=M[0])==null?void 0:h.id;C&&S&&(this.in.exec("focus-cell",{row:S,column:C,eventSource:"key"}),D&&this.in.exec("select-row",{id:S}));break}case"arrowright":{const{focusCell:M}=this.getState();if(s)return;if(o.preventDefault(),M){const y=(m=this.getNextColumn(M.column,!0))==null?void 0:m.id;y&&this.in.exec("focus-cell",{row:M.row,column:y,eventSource:"key"})}break}case"arrowleft":{const{focusCell:M}=this.getState();if(s)return;if(o.preventDefault(),M){const y=(w=this.getPrevColumn(M.column,!0))==null?void 0:w.id;y&&this.in.exec("focus-cell",{row:M.row,column:y,eventSource:"key"})}break}case"tab":{const{editor:M,focusCell:y,select:D}=this.getState();if(M){o.preventDefault();const C=M.column;let S=M.id,W=this.getNextEditor(this.getRow(S),this.getColumn(C));if(!W){const P=this.getNextRow(S);P&&(S=P.id,W=this.getNextEditor(P))}W&&(this.in.exec("open-editor",{id:S,column:W.id}),this.in.exec("focus-cell",{row:S,column:W.id,eventSource:"key"}),D&&!this.isSelected(S)&&this.in.exec("select-row",{id:S}))}else y&&this.in.exec("focus-cell",{eventSource:"key"});break}case"shift+tab":{const{editor:M,focusCell:y,select:D}=this.getState();if(M){o.preventDefault();const C=M.column;let S=M.id,W=this.getPrevEditor(this.getRow(S),this.getColumn(C));if(!W){const P=this.getPrevRow(S);P&&(S=P.id,W=this.getPrevEditor(P))}W&&(this.in.exec("open-editor",{id:S,column:W.id}),this.in.exec("focus-cell",{row:S,column:W.id,eventSource:"key"}),D&&!this.isSelected(S)&&this.in.exec("select-row",{id:S}))}else y&&this.in.exec("focus-cell",{eventSource:"key"});break}case"escape":{const{editor:M}=this.getState();M&&(this.in.exec("close-editor",{ignore:!0}),this.in.exec("focus-cell",{row:M.id,column:M.column,eventSource:"key"}));break}case"f2":{const{editor:M,focusCell:y}=this.getState();!M&&y&&this.in.exec("open-editor",{id:y.row,column:y.column});break}case"enter":{const{focusCell:M,tree:y}=this.getState();if(!s&&y&&M&&this.getColumn(M.column).treetoggle){const D=this.getRow(M.row);if(!D.data)return;this.in.exec(D.open?"close-row":"open-row",{id:M.row,nested:!0})}break}case"home":{const{editor:M,focusCell:y}=this.getState();if(!M&&y){o.preventDefault();const D=(v=this._getFirstVisibleColumn())==null?void 0:v.id;this.in.exec("focus-cell",{row:y.row,column:D,eventSource:"key"})}break}case"ctrl+home":{const{editor:M,focusCell:y,flatData:D,select:C}=this.getState();if(!M&&y){o.preventDefault();const S=(x=D[0])==null?void 0:x.id,W=(_=this._getFirstVisibleColumn())==null?void 0:_.id;S&&W&&(this.in.exec("focus-cell",{row:S,column:W,eventSource:"key"}),C&&!this.isSelected(S)&&this.in.exec("select-row",{id:S}))}break}case"end":{const{editor:M,focusCell:y}=this.getState();if(!M&&y){o.preventDefault();const D=(b=this._getLastVisibleColumn())==null?void 0:b.id,C=y.row;this.in.exec("focus-cell",{row:C,column:D,eventSource:"key"})}break}case"ctrl+end":{const{editor:M,focusCell:y,flatData:D,select:C}=this.getState();if(!M&&y){o.preventDefault();const S=D.at(-1).id,W=(p=this._getLastVisibleColumn())==null?void 0:p.id;S&&W&&(this.in.exec("focus-cell",{row:S,column:W,eventSource:"key"}),C&&!this.isSelected(S)&&this.in.exec("select-row",{id:S}))}break}case"ctrl+z":{this.in.exec("undo",{});break}case"ctrl+y":{this.in.exec("redo",{});break}}}),r.on("scroll",i=>{const{_columns:o,split:s,_sizes:c,flatData:d,dynamic:u}=this.getState();let f=-1,g=-1,h=0;if(i.column){f=0;const m=o.findIndex(w=>w.id==i.column);h=o[m].width;for(let w=s.left??0;w<m;w++){const v=o[w];v.hidden||(f+=v.width)}}if(i.row&&!u){const m=d.findIndex(w=>w.id===i.row);m>=0&&(g=c.rowHeight*m)}this.setState({scroll:{top:g,left:f,width:h,height:c.rowHeight}})}),r.on("print",i=>{const o=Hd(i);this.setState({_print:o}),this.setStateAsync({_print:null})}),r.on("undo",()=>{var i;(i=this._historyManager)==null||i.handleUndo()}),r.on("redo",()=>{var i;(i=this._historyManager)==null||i.handleRedo()}),this.initOnce()}getXlsxWorker(e){if(!this._xlsxWorker){const a=window.URL.createObjectURL(new Blob([`importScripts('${e}');`],{type:"text/javascript"}));this._xlsxWorker=new Promise(r=>{const i=new Worker(a);i.addEventListener("message",o=>{o.data.type==="init"&&r(i)})})}return this._xlsxWorker}initOnce(){const e={sortMarks:{},_filterIds:null,data:[],filterValues:{},scroll:null,editor:null,focusCell:null,_print:null,history:{undo:0,redo:0}};this._router.init(e)}init(e){var a;e.hasOwnProperty("_skin")&&!e._skin&&(e._skin=jd()),e.columns&&e.columns.forEach(r=>{r.options&&(r.optionsMap=new Map(r.options.map(i=>[i.id,i.label])))}),In(this.getState().data,e.data)||(e.tree?(this._branches={0:{data:e.data}},e.data=this.normalizeTreeRows(e.data)):e.data=this.normalizeRows(e.data),this.setState({_filterIds:null,filterValues:{},sortMarks:{}}),this._historyManager&&this._historyManager.resetHistory()),$a()&&(e.tree&&(e.undo=!1),(a=e.split)!=null&&a.right&&(e.split.right=0)),e.undo&&!this._historyManager&&(this._historyManager=new Nd(this.in,this.getState.bind(this),this.setState.bind(this))),this._router.init({...e})}setState(e,a){return this._router.setState(e,a)}setStateAsync(e){this._router.setStateAsync(e)}getRow(e){const{tree:a}=this.getState();return a?this._branches[e]:this.getState().data.find(r=>r.id==e)}getRowIndex(e,a){return a||(a=this.getState().flatData),a.findIndex(r=>r.id==e)}getNextRow(e){const a=this.getState().flatData,r=this.getRowIndex(e,a);return a[r+1]}getPrevRow(e){const a=this.getState().flatData,r=this.getRowIndex(e,a);return a[r-1]}getColumn(e){return this.getState().columns.find(a=>a.id==e)}getNextColumn(e,a){const r=this.getState()._columns,i=r.findIndex(o=>o.id==e);return a?this._getFirstVisibleColumn(i+1):r[i+1]}getPrevColumn(e,a){const r=this.getState()._columns,i=r.findIndex(o=>o.id==e);return a?this._getLastVisibleColumn(i-1):r[i-1]}_getFirstVisibleColumn(e){var i,o;const a=this.getState()._columns;let r=e??0;for(;r<a.length&&((i=a[r])!=null&&i.hidden||(o=a[r])!=null&&o.collapsed);)r++;return a[r]}_getLastVisibleColumn(e){var i,o;const a=this.getState()._columns;let r=e??a.length-1;for(;r<a.length&&((i=a[r])!=null&&i.hidden||(o=a[r])!=null&&o.collapsed);)r--;return a[r]}isCellEditable(e,a){const{editor:r,hidden:i}=a;return!r||i?!1:typeof r=="function"?r(e,a):!0}getNextEditor(e,a){let r=this.getState().columns;if(a){const i=r.findIndex(o=>o.id==a.id);r=r.slice(i+1)}return r.find(i=>this.isCellEditable(e,i))}getPrevEditor(e,a){let r=this.getState().columns;if(a){const i=r.findLastIndex(o=>o.id==a.id);r=r.slice(0,i)}return r.findLast(i=>this.isCellEditable(e,i))}toggleBranch(e,a,r){var s;let i=this._branches[e],{data:o}=this.getState();if(o=[...o],e!==0){i={...i,open:a};const c=this.updateTreeRow(i);i.$parent===0&&(o=c)}r&&((s=i.data)!=null&&s.length)&&i.data.forEach(c=>{const d=this.toggleKids(c,a,r);e===0&&(o=d)}),this.setState({data:o})}toggleKids(e,a,r){var o;e={...e,open:a};const i=this.updateTreeRow(e);return r&&((o=e.data)!=null&&o.length)&&e.data.forEach(s=>{this.toggleKids(s,a,r)}),i}updateTreeRow(e){const a=e.id;this._branches[a]=e;const r=this._branches[e.$parent],i=r.data.findIndex(o=>o.id==a);return r.data=[...r.data],r.data[i]=e,r.data}isSelected(e){return this.getState().selectedRows.indexOf(e)!==-1}findAndRemove(e,a){for(let r=0;r<e.length;r++){if(e[r].id==a)return e.splice(r,1)[0];if(e[r].data){const i=[...e[r].data],o=this.findAndRemove(i,a);if(o)return e[r]={...e[r],data:i},o}}return null}insertItem(e,a,r,i){for(let o=0;o<e.length;o++){if(e[o].id==a){const s=e[o],c=i==="before"?o:o+1;if(s.data){if(i==="before"){const d=o>0?e[o-1]:null;return d!=null&&d.data&&d.open?e[o-1]={...d,data:[...d.data,r]}:e.splice(c,0,r),!0}else if(s.open)return e[o]={...s,data:[r,...s.data]},!0}return e.splice(c,0,r),!0}if(e[o].data&&(e[o]={...e[o],data:[...e[o].data]},this.insertItem(e[o].data,a,r,i)))return!0}return!1}moveItem(e,a,r,i){const o=[...r],s=this.findAndRemove(o,e);return this.insertItem(o,a,s,i),o}copyColumns(e){const a=[];return e.forEach(r=>{const i={...r};this.copyHeaderFooter(i,"header"),this.copyHeaderFooter(i,"footer"),a.push(i)}),a}copyHeaderFooter(e,a){let r=e[a];r=Array.isArray(r)?[...r]:[r],r.forEach((i,o)=>{r[o]=typeof i=="string"?{text:i}:{...i}}),e[a]=r}setCollapsibleColumns(e,a,r){let i=e.header;for(let o=0;o<i.length;o++){const s=i[o];if(s.collapsible&&s.collapsed){if(s.collapsible!=="first"){e.collapsed=!0,e.width=36,s.vertical=!0;const d=i.length-o;i=i.slice(0,o+1),i[o].rowspan=d}const c=s.colspan;if(c){const d=i[o+1];let u=1;d&&d.colspan&&!d.collapsed&&(u=d.colspan);for(let f=u;f<c;f++){const g=r[a+f];g&&(g.hidden=!0)}}}}}normalizeColumns(e,a,r,i,o){const s=e[a];s.width||(s.width=s.flexgrow?17:o.columnWidth),s._colindex=a+1;const c=s[r],d=o[`${r}RowHeights`];for(let u=0;u<i;u++){const f=c[u];f.id=s.id,u===c.length-1&&(f.rowspan=f.rowspan?Math.min(f.rowspan,i-u):i-u);for(let g=1;g<f.rowspan;g++){c.splice(u+g,0,{_hidden:!0});for(let h=1;h<f.colspan;h++)e[a+h][r].splice(u+g,0,{})}if(f.rowspan){const g=(f.rowspan===i?d:d.slice(u,f.rowspan+u)).reduce((h,m)=>h+m,0);f.height=g,u+f.rowspan!=i&&f.height--}if(f.colspan){let g=s.width,h=s.flexgrow||0;const m=f.colspan;for(let w=1;w<m;w++){const v=e[a+w];v&&(v.hidden?f.colspan-=1:v.flexgrow?h+=v.flexgrow:g+=v.width||o.columnWidth),h?f.flexgrow=h:f.width=g}}else f.width=s.width,f.flexgrow=s.flexgrow;r==="header"&&f.filter&&typeof f.filter=="string"&&(f.filter={type:f.filter})}c.length>i&&(c.length=i),s[r]=c}normalizeRows(e){return e.forEach(a=>{a.id||(a.id=wa())}),e}normalizeTreeRows(e,a,r){return e.forEach(i=>{i.id||(i.id=wa()),i.$level=a||0,i.$parent=r||0,this._branches[i.id]=i,i.data&&(i.data.length?(i.$count=i.data.length,this.normalizeTreeRows(i.data,i.$level+1,i.id)):(delete i.data,delete i.$count,delete i.open))}),e}sortTree(e,a){e.sort(a),e.forEach(r=>{r.data&&this.sortTree(r.data,a)})}filterTree(e,a,r){return e.forEach(i=>{a(i)&&r.push(i.id),i.data&&this.filterTree(i.data,a,r)}),r}flattenRows(e,a,r){const i=a;return e.forEach(o=>{var s;(!r||r.includes(o.id))&&i.push(o),(s=o.data)!=null&&s.length&&o.open!==!1&&this.flattenRows(o.data,i,r)}),i}createFilter(e){const{_columns:a}=this.getState(),r=[];for(const i in e){const{config:o,type:s}=a.find(d=>d.id==i).header.find(d=>d.filter).filter,c=e[i];r.push(d=>o!=null&&o.handler?o.handler(d[i],c):Ud(s)(d[i],c))}return i=>{for(let o=0;o<r.length;o++)if(!r[o](i))return!1;return!0}}normalizeSizes(e,a,r,i,o){const s=Hr(e,"header",r,a.headerHeight,o),c=Hr(e,"footer",i,a.footerHeight,o),d=s.reduce((f,g)=>f+g,0),u=c.reduce((f,g)=>f+g,0);return{...a,headerRowHeights:s,footerRowHeights:c,headerHeight:d,footerHeight:u}}}let Gd=new Date().valueOf();function wa(){return"temp://"+Gd++}function Qd(n,t="data-id"){let e=n;for(!e.tagName&&n.target&&(e=n.target);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}return null}new Date().valueOf();function Oe(n,{keys:t,exec:e}){for(const r in t){const i=r.toLowerCase().replace(/ /g,"");i!==r&&(t[i]=t[r])}function a(r){var c;let i=r.code.replace("Key","").toLowerCase();i===" "&&(i="space");const o=`${r.ctrlKey||r.metaKey?"ctrl+":""}${r.shiftKey?"shift+":""}${r.altKey?"alt+":""}${i.replace(/^key/,"")}`,s=t[o];if(typeof s<"u"){const d=r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||((c=Qd(r.target,"data-header-id"))==null?void 0:c.classList.contains("wx-filter"))||!!r.target.closest(".wx-cell.wx-editor");typeof s=="function"?s({key:o,event:r,node:n,isInput:d}):s&&e({key:o,event:r,node:n,isInput:d})}}return n.addEventListener("keydown",a),{destroy:()=>{n.removeEventListener("keydown",a)}}}function ya(n,t){let e=null;t.scroll.subscribe(a=>{if(!a||a===e)return;e=a;const{left:r,top:i,height:o,width:s}=a,c=t.getHeight(),d=t.getWidth(),u=t.getScrollMargin();if(i>=0){const f=n.scrollTop;i<f?n.scrollTop=i:i+o>f+c&&(n.scrollTop=i-c+o)}if(r>=0){const f=n.scrollLeft;r<f?n.scrollLeft=r:r+s>f+d-u&&(n.scrollLeft=r-d+s+u)}})}var Kd=H("<div> </div>"),Jd=H('<div class="wx-row svelte-1gfkr4f"></div>'),Zd=H('<div class="wx-scale svelte-1gfkr4f"></div>');function $d(n,t){ft(t,!0);const e=()=>ct(s,"$scales",r),a=()=>ct(c,"$scrollLeft",r),[r,i]=ge(),o=At("gantt-store"),{_scales:s,scrollLeft:c}=o.getReactiveState();var d=Zd();Jt(d,5,()=>e().rows,be,(u,f)=>{var g=Jd();Jt(g,21,()=>l(f).cells,be,(h,m)=>{var w=Kd(),v=A(w,!0);I(w),L(x=>{vt(w,1,`wx-cell ${l(m).css??""} ${x??""}`,"svelte-1gfkr4f"),bt(w,`width:${l(m).width??""}px`),ut(v,l(m).value)},[()=>t.highlightTime?t.highlightTime(l(m).date,l(m).unit):""]),k(h,w)}),I(g),L(()=>bt(g,`height:${l(f).height??""}px`)),k(u,g)}),I(d),L(()=>bt(d,`width:${e().width??""}px;left:${-a()}px`)),k(n,d),ht(),i()}function Tn(n){const t=n.getAttribute("data-id"),e=parseInt(t);return isNaN(e)||e.toString()!=t?t:e}function tu(n,t,e){const a=n.getBoundingClientRect(),r=t.querySelector(".wx-body").getBoundingClientRect();return{top:a.top-r.top,left:a.left-r.left,dt:a.bottom-e.clientY,db:e.clientY-a.top}}function Or(n){return n&&n.getAttribute("data-context-id")}const Ir=5;function xa(n,t){let e,a,r,i,o,s,c,d,u;function f(y){i=y.clientX,o=y.clientY,s={...tu(e,n,y),y:t.getTask(r).$y},document.body.style.userSelect="none"}function g(y){e=xe(y),Or(e)&&(r=Tn(e),u=setTimeout(()=>{d=!0,t&&t.touchStart&&t.touchStart(),f(y.touches[0])},500),n.addEventListener("touchmove",_),n.addEventListener("contextmenu",h),window.addEventListener("touchend",b))}function h(y){if(d||u)return y.preventDefault(),!1}function m(y){y.which===1&&(e=xe(y),Or(e)&&(r=Tn(e),n.addEventListener("mousemove",x),window.addEventListener("mouseup",p),f(y)))}function w(y){n.removeEventListener("mousemove",x),n.removeEventListener("touchmove",_),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("touchend",b),document.body.style.userSelect="",y&&(n.removeEventListener("mousedown",m),n.removeEventListener("touchstart",g))}function v(y){const D=y.clientX-i,C=y.clientY-o;if(!a){if(Math.abs(D)<Ir&&Math.abs(C)<Ir||t&&t.start&&t.start({id:r,e:y})===!1)return;a=e.cloneNode(!0),a.style.pointerEvents="none",a.classList.add("wx-reorder-task"),a.style.position="absolute",a.style.left=s.left+"px",a.style.top=s.top+"px",e.style.visibility="hidden",e.parentNode.insertBefore(a,e)}if(a){const S=Math.round(Math.max(0,s.top+C));if(t&&t.move&&t.move({id:r,top:S,detail:c})===!1)return;const W=t.getTask(r),P=W.$y;if(!s.start&&s.y==P)return M();s.start=!0,s.y=W.$y-4,a.style.top=S+"px";const T=document.elementFromPoint(y.clientX,y.clientY),j=xe(T);if(j&&j!==e){const R=Tn(j),U=j.getBoundingClientRect(),J=U.top+U.height/2,N=y.clientY+s.db>J&&j.nextElementSibling!==e,Z=y.clientY-s.dt<J&&j.previousElementSibling!==e;(c==null?void 0:c.after)==R||(c==null?void 0:c.before)==R?c=null:N?c={id:r,after:R}:Z&&(c={id:r,before:R})}}}function x(y){v(y)}function _(y){d?(y.preventDefault(),v(y.touches[0])):u&&(clearTimeout(u),u=null)}function b(){d=null,u&&(clearTimeout(u),u=null),M()}function p(){M()}function M(){e&&(e.style.visibility=""),a&&(a.parentNode.removeChild(a),t&&t.end&&t.end({id:r,top:s.top})),r=e=a=s=c=null,w()}return n.style.position!=="absolute"&&(n.style.position="relative"),n.addEventListener("mousedown",m),n.addEventListener("touchstart",g),{destroy(){w(!0)}}}const eu={grid:{"Add before":"Add before","Add after":"Add after",Copy:"Copy",Delete:"Delete"}};function _a(n,t){const e=new ResizeObserver(a=>{requestAnimationFrame(()=>t(a[0].contentRect))});return e.observe(n.parentNode),{destroy(){e.disconnect()}}}const Rr=5,nu=700;function au(n){return ea(n.getAttribute("data-id"))}function Vn(n){const t=n.getBoundingClientRect(),e=document.body,a=t.top+e.scrollTop-e.clientTop||0,r=t.left+e.scrollLeft-e.clientLeft||0;return{y:Math.round(a),x:Math.round(r),width:n.offsetWidth,height:n.offsetHeight}}function La(n,t){const e=Vn(t);return{x:n.clientX-e.x,y:n.clientY-e.y}}function ba(n,t){let e=null,a,r,i=!1,o=!1;const s=document.createElement("DIV");s.className="wx-drag-zone",s.setAttribute("tabindex",-1);function c(){clearTimeout(a),a=null}function d(y){const D=xe(y);D&&(e={container:s,sourceNode:y.target,from:au(D),pos:La(y,n)},r=e.pos,u(y))}function u(y){var C;if(!e)return;const D=e.pos=La(y,n);if(!i){if(!o&&!((C=y==null?void 0:y.target)!=null&&C.getAttribute("draggable-data"))&&Math.abs(r.x-D.x)<Rr&&Math.abs(r.y-D.y)<Rr)return;if(p(y)===!1)return M()}if(o){const S=window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft,W=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;e.targetNode=document.elementFromPoint(y.pageX-S,y.pageY-W)}else e.targetNode=y.target;t!=null&&t.move&&t.move(y,e),s.style.left=-(e.offset?e.offset.x:0)+"px",s.style.top=e.pos.y+(e.offset?e.offset.y:0)+"px"}function f(y){s.parentNode&&s.parentNode.removeChild(s),s.innerHTML="",i&&(t!=null&&t.end)&&t.end(y,e),e=r=null,M()}function g(y){t!=null&&t.getReorder()&&y.button===0&&(b(y),window.addEventListener("mousemove",h),window.addEventListener("mouseup",m),d(y))}function h(y){u(y)}function m(y){f(y)}function w(y){if(!(t!=null&&t.getReorder()))return;a=setTimeout(()=>{o=!0,d(y.touches[0])},nu),b(y);function D(){a&&c(),y.target.removeEventListener("touchmove",v),y.target.removeEventListener("touchend",D),f(y)}y.target.addEventListener("touchmove",v),y.target.addEventListener("touchend",D),n.addEventListener("contextmenu",x)}function v(y){i?(y.preventDefault(),u(y.touches[0])):a&&c()}function x(y){if(i||a)return y.preventDefault(),!1}function _(y){y.preventDefault()}function b(y){const{hasDraggable:D}=t.getDraggableInfo();(!D||y.target.getAttribute("draggable-data"))&&(document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")}function p(y){if(i=!0,t!=null&&t.start){if(t.start(y,e)===!1)return!1;n.appendChild(s),document.body.style.cursor="move"}}function M(y){i=o=!1,document.body.style.cursor="",document.body.style.userSelect="",document.body.style.webkitUserSelect="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m),y&&(n.removeEventListener("mousedown",g),n.removeEventListener("touchstart",w),n.removeEventListener("dragstart",_))}return n.addEventListener("mousedown",g),n.addEventListener("touchstart",w),n.addEventListener("dragstart",_),{destroy(){M(!0)}}}const ru=.004;function iu(){return{dirX:0,dirY:0,scrollSpeedFactor:1}}function ou(n,t,e,a){const{node:r,left:i,top:o,bottom:s,sense:c,xScroll:d,yScroll:u}=a,f=La(n,r);e.scrollState||(e.scrollState=iu());let g=0,h=0;f.x<i+c?g=-1:f.x>t.width-c&&(g=1),f.y<o+Math.round(c/2)?h=-1:f.y>t.height-s-Math.round(c/2)&&(h=1),(e.scrollState.dirX!==g||e.scrollState.dirY!==h)&&(Vi(e),e.scrollState.dirX=g,e.scrollState.dirY=h),(d&&e.scrollState.dirX!==0||u&&e.scrollState.dirY!==0)&&su(e,a,{x:e.scrollState.dirX,y:e.scrollState.dirY})}function su(n,t,e){n.autoScrollTimer||(n.autoScrollTimer=setTimeout(()=>{n.activeAutoScroll=setInterval(lu,15,n,t,e)},250))}function Vi(n){n.scrollSpeedFactor=1,n.autoScrollTimer&&(n.autoScrollTimer=clearTimeout(n.autoScrollTimer),n.activeAutoScroll=clearInterval(n.activeAutoScroll))}function lu(n,t,e){const{x:a,y:r}=e;n.scrollSpeedFactor+=ru,a!==0&&du(n,t,a),r!==0&&cu(n,t,r)}function cu(n,t,e){const a=t.node.scrollTop;Ui(a+Math.round(t.sense/3)*n.scrollSpeedFactor*e,"scrollTop",t)}function du(n,t,e){const a=t.node.scrollLeft;Ui(a+Math.round(t.sense/3)*n.scrollSpeedFactor*e,"scrollLeft",t)}function Ui(n,t,e){e.node[t]=n}function uu(n){return{tab:!0,"shift+tab":!0,arrowup:!0,arrowdown:!0,arrowright:!0,arrowleft:!0,enter:!0,escape:!0,f2:!0,home:!0,end:!0,"ctrl+home":!0,"ctrl+end":!0,"ctrl+z":n.undo,"ctrl+y":n.undo}}function oa(n,t,e,a,r,i){const o=n?`width:${n}px;`:"",s=n?`min-width:${n}px;`:"",c=t?`flex-grow:${t};`:"",d=i?`height:${i}px;`:"";let u="";return e&&(e.left&&(u=`position:sticky;left:${a}px;`),e.right&&(u=`position:sticky;right:${r}px;`)),`${s}${o}${d}${c}${u}`}function Xi(n,t,e){let a="";if(n.fixed)for(const r in n.fixed)a+=n.fixed[r]===-1?"wx-shadow ":"wx-fixed ";return a+=t.rowspan>1?"wx-rowspan ":"",a+=t.colspan>1?"wx-colspan ":"",a+=t.vertical?"wx-vertical ":"",a+=e?e(n)+" ":"",a}var fu=H('<i draggable-data="true" class="wx-draggable wxi-drag svelte-16nunsy"></i>'),hu=H('<i class="wx-draggable-stub svelte-16nunsy"></i>'),gu=H('<i data-action="toggle-row"></i>'),mu=H("<span></span> <!>",1),vu=H("<div><!> <!> <!></div>");function wu(n,t){ft(t,!0);const e=()=>ct(f,"$focusCell",a),[a,r]=ge();let i=E(t,"cellStyle",3,null),o=E(t,"columnStyle",3,null),s=E(t,"focusable",7),c=F(()=>oa(t.column.width,t.column.flexgrow,t.column.fixed,t.column.left,t.column.right)),d=F(()=>m(o(),i()));const u=At("grid-store"),{focusCell:f}=u.getReactiveState(),g=F(()=>typeof t.column.draggable=="function"?t.column.draggable(t.row,t.column)!==!1:t.column.draggable);let h;te(()=>{var W,P;const S=((W=e())==null?void 0:W.row)===t.row.id&&((P=e())==null?void 0:P.column)===t.column.id;h&&s()&&S&&h.focus()});function m(S,W){let P="wx-cell";return P+=t.column.fixed?" "+(t.column.fixed===-1?"wx-shadow":"wx-fixed"):"",P+=S?" "+S(t.column):"",P+=W?" "+W(t.row,t.column):"",P+=t.column.treetoggle?" wx-tree-cell":"",P}function w(){s()&&!e()&&u.exec("focus-cell",{row:t.row.id,column:t.column.id,eventSource:"focus"})}lo(()=>{s()&&e()&&(u.exec("focus-cell",{eventSource:"destroy"}),s(!1))});var v=vu();let x;st(v,"role","gridcell");var _=A(v);{var b=S=>{var W=at(),P=K(W);{var T=R=>{var U=fu();k(R,U)},j=R=>{var U=hu();k(R,U)};z(P,R=>{l(g)?R(T):R(j,!1)})}k(S,W)};z(_,S=>{t.reorder&&t.column.draggable&&S(b)})}var p=tt(_,2);{var M=S=>{var W=mu(),P=K(W),T=tt(P,2);{var j=R=>{var U=gu();L(()=>vt(U,1,`wx-table-tree-toggle wxi-menu-${t.row.open!==!1?"down":"right"}`,"svelte-16nunsy")),k(R,U)};z(T,R=>{t.row.$count&&R(j)})}L(()=>bt(P,`margin-left:${t.row.$level*28}px;`)),k(S,W)};z(p,S=>{t.column.treetoggle&&S(M)})}var y=tt(p,2);{var D=S=>{var W=at(),P=K(W);le(P,()=>t.column.cell,(T,j)=>{j(T,{get api(){return u},get row(){return t.row},get column(){return t.column},onaction:({action:R,data:U})=>u.exec(R,U)})}),k(S,W)},C=S=>{var W=at(),P=K(W);{var T=R=>{var U=at(),J=K(U);we(J,()=>t.children),k(R,U)},j=R=>{var U=ee();L(J=>ut(U,J),[()=>vn(t.row,t.column)]),k(R,U)};z(P,R=>{t.children?R(T):R(j,!1)},!0)}k(S,W)};z(y,S=>{t.column.cell?S(D):S(C,!1)})}I(v),Ut(v,S=>h=S,()=>h),L(S=>{x=vt(v,1,Hn(l(d)),"svelte-16nunsy",x,S),bt(v,l(c)),st(v,"data-row-id",t.row.id),st(v,"data-col-id",t.column.id),st(v,"tabindex",s()?"0":"-1"),st(v,"aria-colindex",t.column._colindex),st(v,"aria-readonly",t.column.editor?void 0:!0)},[()=>({"wx-shadow":t.column.fixed&&t.column.fixed.left===-1||t.column.fixed.right===-1,"wx-fixed-right":t.column.fixed&&t.column.fixed.right})]),Ye("focus",v,w),k(n,v),ht(),r()}function ka(n,t){let e,a;function r(s){e=s.clientX,n.style.opacity=1,document.body.style.cursor="ew-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),t&&t.down&&t.down(n)}function i(s){a=s.clientX-e,t&&t.move&&t.move(a)}function o(){n.style.opacity="",document.body.style.cursor="",document.body.style.userSelect="",t&&t.up&&t.up(a),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)}return n.addEventListener("mousedown",r),{destroy(){n.removeEventListener("mousedown",r)}}}function yu(n,t){ft(t,!0);function e({value:a}){t.action({value:a,key:t.column.id})}li(n,Fa(()=>t.filter.config??{},{get value(){return t.filterValue},onchange:e})),ht()}function xu(n){n.key!=="Tab"&&n.preventDefault()}var _u=H('<div style="width:100%;"><!></div>');function bu(n,t){ft(t,!0);const e=()=>ct(o,"$data",a),[a,r]=ge(),i=At("grid-store"),{flatData:o}=i.getReactiveState();let s=F(()=>{var h,m;return((m=(h=t.filter)==null?void 0:h.config)==null?void 0:m.options)||t.column.options||d(e())}),c=F(()=>{var h,m;return(m=(h=t.filter)==null?void 0:h.config)==null?void 0:m.template});function d(){const h=[];return e().forEach(m=>{const w=Ge(m,t.column);h.includes(w)||h.push(w)}),h.map(m=>({id:m,label:m}))}function u({value:h}){t.action({value:h,key:t.column.id})}var f=_u();f.__keydown=[xu];var g=A(f);Ps(g,Fa({placeholder:"",clear:!0},()=>t.filter.config??{},{get options(){return l(s)},get value(){return t.filterValue},onchange:u,children:(m,w=mn)=>{var v=at(),x=K(v);{var _=p=>{var M=ee();L(y=>ut(M,y),[()=>l(c)(w())]),k(p,M)},b=p=>{var M=ee();L(()=>ut(M,w().label)),k(p,M)};z(x,p=>{l(c)?p(_):p(b,!1)})}k(m,v)},$$slots:{default:!0}})),I(f),k(n,f),ht(),r()}dt(["keydown"]);const ku={text:yu,richselect:bu};function pu(n,t){ft(t,!0);const e=()=>ct(o,"$filterValues",a),[a,r]=ge(),i=At("grid-store"),{filterValues:o}=i.getReactiveState();function s(f){i.exec("filter-rows",f)}const c=F(()=>ku[t.filter.type]);var d=at(),u=K(d);le(u,()=>l(c),(f,g)=>{g(f,{get filter(){return t.filter},get column(){return t.column},action:s,get filterValue(){return e()[t.column.id]}})}),k(n,d),ht(),r()}function Lr(n,t){n.key==="Enter"&&t()}function Su(n,t,e){n.key==="Enter"&&!t.cell.filter&&e(n)}var Mu=H('<div role="button" tabindex="0"><div class="wx-text svelte-i0lrhp"> </div></div>'),Du=H('<div class="wx-collapse svelte-i0lrhp" role="button" tabindex="0"><i></i></div>'),Tu=H('<div class="wx-text svelte-i0lrhp"> </div>'),Cu=n=>n.stopPropagation(),Wu=H('<div class="wx-grip svelte-i0lrhp" role="presentation" aria-label="Resize column"><div class="svelte-i0lrhp"></div></div>'),Pu=H('<div class="wx-order svelte-i0lrhp"> </div>'),Eu=H("<!> <i></i>",1),Hu=H('<div class="wx-sort svelte-i0lrhp"><!></div>'),Ou=H('<div role="columnheader"><!> <!> <!> <!></div>');function Iu(n,t){ft(t,!0);const e=()=>ct(o,"$sortMarks",a),[a,r]=ge(),i=At("grid-store"),{sortMarks:o}=i.getReactiveState();let s,c=F(()=>e()[t.column.id]);function d(S){s=t.cell.flexgrow?S.parentNode.clientWidth:t.cell.width}function u(S){g(S,!0)}function f(S){g(S,!1)}function g(S,W){i.exec("resize-column",{id:t.cell.id,width:Math.max(1,s+S),inProgress:W})}function h(S){!t.column.sort||t.cell.filter||i.exec("sort-rows",{key:t.cell.id,add:S.ctrlKey})}function m(S){S&&S.stopPropagation(),i.exec("collapse-column",{id:t.cell.id,row:t.row})}let w=F(()=>t.cell.collapsed&&t.column.collapsed),v=F(()=>l(w)&&!t.hasSplit&&t.cell.collapsible!=="header"),x=F(()=>l(v)?`top:-${t.bodyHeight/2}px;position:absolute;`:""),_=F(()=>oa(t.cell.width,t.cell.flexgrow,t.column.fixed,t.column.left,t.cell.right??t.column.right,t.cell.height+(l(w)&&l(v)?t.bodyHeight:0)));const b=F(()=>Xi(t.column,t.cell,t.columnStyle));function p(){return Object.fromEntries(Object.entries(t.cell).filter(([S])=>S!=="cell"))}var M=at(),y=K(M);{var D=S=>{var W=Mu();W.__keydown=[Lr,m],W.__click=m;var P=A(W),T=A(P,!0);I(P),I(W),L(()=>{vt(W,1,`wx-cell ${l(b)??""} ${(t.cell.css||"")??""} wx-collapsed`,"svelte-i0lrhp"),bt(W,l(_)),st(W,"aria-label",`Expand column ${t.cell.text||""}`),st(W,"aria-expanded",!t.cell.collapsed),st(W,"data-header-id",t.column.id),bt(P,l(x)),ut(T,t.cell.text||"")}),k(S,W)},C=S=>{var W=Ou();let P;W.__click=h,W.__keydown=[Su,t,h];var T=A(W);{var j=Q=>{var et=Du();et.__keydown=[Lr,m],et.__click=m;var St=A(et);I(et),L(()=>{st(et,"aria-label",t.cell.collapsed?"Expand column":"Collapse column"),st(et,"aria-expanded",!t.cell.collapsed),vt(St,1,`wxi-angle-${t.cell.collapsed?"down":"right"}`,"svelte-i0lrhp")}),k(Q,et)};z(T,Q=>{t.cell.collapsible&&Q(j)})}var R=tt(T,2);{var U=Q=>{var et=at(),St=K(et);{let Ht=F(p);le(St,()=>t.cell.cell,(It,_t)=>{_t(It,{get api(){return i},get cell(){return l(Ht)},get column(){return t.column},get row(){return t.row},onaction:({action:Lt,data:Pt})=>i.exec(Lt,Pt)})})}k(Q,et)},J=Q=>{var et=at(),St=K(et);{var Ht=_t=>{pu(_t,{get filter(){return t.cell.filter},get column(){return t.column}})},It=_t=>{var Lt=Tu(),Pt=A(Lt,!0);I(Lt),L(()=>ut(Pt,t.cell.text||"")),k(_t,Lt)};z(St,_t=>{t.cell.filter?_t(Ht):_t(It,!1)},!0)}k(Q,et)};z(R,Q=>{t.cell.cell?Q(U):Q(J,!1)})}var N=tt(R,2);{var Z=Q=>{var et=Wu();et.__click=[Cu],he(et,(St,Ht)=>ka==null?void 0:ka(St,Ht),()=>({down:d,move:u,up:f})),k(Q,et)};z(N,Q=>{t.column.resize&&t.lastRow&&!t.cell._hidden&&Q(Z)})}var gt=tt(N,2);{var Ct=Q=>{var et=Hu(),St=A(et);{var Ht=It=>{var _t=Eu(),Lt=K(_t);{var Pt=rt=>{var Wt=Pu(),X=A(Wt,!0);I(Wt),L(()=>ut(X,l(c).index+1)),k(rt,Wt)};z(Lt,rt=>{typeof l(c).index<"u"&&rt(Pt)})}var Zt=tt(Lt,2);L(()=>vt(Zt,1,`wxi-arrow-${l(c).order==="asc"?"up":"down"}`,"svelte-i0lrhp")),k(It,_t)};z(St,It=>{l(c)&&It(Ht)})}I(et),k(Q,et)};z(gt,Q=>{t.sortRow&&Q(Ct)})}I(W),L(Q=>{var et,St;P=vt(W,1,`wx-cell ${l(b)??""} ${(t.cell.css||"")??""}`,"svelte-i0lrhp",P,Q),bt(W,l(_)),st(W,"data-header-id",t.column.id),st(W,"tabindex",!t.cell._hidden&&t.column.sort&&!t.cell.filter?"0":void 0),st(W,"aria-colindex",t.cell._colindex),st(W,"aria-colspan",t.cell.colspan>1?t.cell.colspan:void 0),st(W,"aria-rowspan",t.cell.rowspan>1?t.cell.rowspan:void 0),st(W,"aria-sort",!((et=l(c))!=null&&et.order)||t.cell.filter?"none":((St=l(c))==null?void 0:St.order)==="asc"?"ascending":"descending")},[()=>({"wx-filter":t.cell.filter,"wx-fixed-right":t.column.fixed&&t.column.fixed.right})]),k(S,W)};z(y,S=>{l(w)?S(D):S(C,!1)})}k(n,M),ht(),r()}dt(["keydown","click"]);var Ru=H('<div class="wx-text svelte-1bigdvr"> </div>'),Lu=H("<div><!></div>");function Nu(n,t){ft(t,!0);const e=At("grid-store");let a=F(()=>oa(t.cell.width,t.cell.flexgrow,t.column.fixed,t.column.left,t.cell.right??t.column.right,t.cell.height)),r=F(()=>Xi(t.column,t.cell,t.columnStyle));function i(){return Object.fromEntries(Object.entries(t.cell).filter(([u])=>u!=="cell"))}var o=Lu();let s;var c=A(o);{var d=u=>{var f=at(),g=K(f);{var h=w=>{var v=at(),x=K(v);{let _=F(i);le(x,()=>t.cell.cell,(b,p)=>{p(b,{get api(){return e},get cell(){return l(_)},get column(){return t.column},get row(){return t.row},onaction:({action:M,data:y})=>e.exec(M,y)})})}k(w,v)},m=w=>{var v=Ru(),x=A(v,!0);I(v),L(()=>ut(x,t.cell.text||"")),k(w,v)};z(g,w=>{t.cell.cell?w(h):w(m,!1)})}k(u,f)};z(c,u=>{!t.column.collapsed&&!t.cell.collapsed&&u(d)})}I(o),L(u=>{s=vt(o,1,`wx-cell ${l(r)??""} ${(t.cell.css||"")??""}`,"svelte-1bigdvr",s,u),bt(o,l(a))},[()=>({"wx-fixed-right":t.column.fixed&&t.column.fixed.right})]),k(n,o),ht()}var Fu=H('<div role="row"></div>'),Yu=H('<div role="rowgroup"></div>');function Nr(n,t){ft(t,!0);const e=()=>ct(c,"$sizes",r),a=()=>ct(d,"$split",r),[r,i]=ge();let o=E(t,"type",3,"header");const s=At("grid-store"),{_sizes:c,split:d}=s.getReactiveState();let u=F(()=>e()[`${o()}RowHeights`]),f=F(()=>{let x=[];if(t.columns.length){const _=t.columns[0][o()].length;for(let b=0;b<_;b++){let p=0;x.push([]),t.columns.forEach((M,y)=>{const D={...M[o()][b]};if(p||x[b].push(D),D.colspan>1){if(p=D.colspan-1,!$a()&&M.right){let C=M.right;for(let S=1;S<D.colspan;S++)C-=t.columns[y+S].width;D.right=C}}else p&&p--})}}return x});const g=F(()=>{var x,_;return((x=a())==null?void 0:x.left)||((_=a())==null?void 0:_.right)});function h(x){return t.columns.find(_=>_.id===x)}function m(x,_){return x.rowspan&&(_+=x.rowspan-1),_===l(f).length-1}function w(x,_,b){if(!b.sort)return!1;for(let p=l(f).length-1;p>=0;p--){const M=b.header[p];if(!M.filter&&!M._hidden)return _===p}return m(x,_)}var v=Yu();Jt(v,21,()=>l(f),be,(x,_,b)=>{var p=Fu();Jt(p,21,()=>l(_),M=>M.id,(M,y)=>{const D=F(()=>h(l(y).id));var C=at(),S=K(C);{var W=T=>{{let j=F(()=>m(l(y),b)),R=F(()=>w(l(y),b,l(D)));Iu(T,{get cell(){return l(y)},get columnStyle(){return t.columnStyle},get column(){return l(D)},row:b,get lastRow(){return l(j)},get bodyHeight(){return t.bodyHeight},get sortRow(){return l(R)},get hasSplit(){return l(g)}})}},P=T=>{{let j=F(()=>h(l(y).id));Nu(T,{get cell(){return l(y)},get columnStyle(){return t.columnStyle},get column(){return l(j)},row:b})}};z(S,T=>{o()==="header"?T(W):T(P,!1)})}k(M,C)}),I(p),L(()=>{vt(p,1,Hn(o()==="header"?"wx-h-row":"wx-f-row")),bt(p,`height:${l(u)[b]??""}px; display: flex`)}),k(x,p)}),I(v),L(()=>{vt(v,1,`wx-${o()}`,"svelte-10yip7c"),bt(v,`padding-left:${t.deltaLeft??""}px;width:${t.contentWidth??""}px;`)}),k(n,v),ht(),i()}var Au=H('<div class="wx-overlay svelte-1uud3pa"><!></div>');function zu(n,t){ft(t,!0);const e=At("grid-store");function a(c){return typeof c=="function"}var r=Au(),i=A(r);{var o=c=>{const d=F(()=>t.overlay);var u=at(),f=K(u);le(f,()=>l(d),(g,h)=>{h(g,{onaction:({action:m,data:w})=>e.exec(m,w)})}),k(c,u)},s=c=>{var d=ee();L(()=>ut(d,t.overlay)),k(c,d)};z(i,c=>{a(t.overlay)?c(o):c(s,!1)})}I(r),k(n,r),ht()}function ju(n,t,e,a){G(t,l(e).value,!0),a.actions.updateValue(l(e).value)}function qu({key:n},t){n==="Enter"&&t.actions.save()}var Bu=H('<input class="wx-text svelte-1uw7a81" type="text"/>');function Vu(n,t){ft(t,!0);let e=lt(ue(t.editor.value||"")),a=lt(void 0);ze(()=>l(a).focus());var r=Bu();sn(r),r.__input=[ju,e,a,t],r.__keydown=[qu,t],Ut(r,i=>G(a,i),()=>l(a)),L(()=>ti(r,l(e))),k(n,r),ht()}dt(["input","keydown"]);var Uu=(n,t,e)=>l(t)(n,l(e)),Xu=H('<input class="wx-input svelte-65hrri"/> <!>',1);function Gu(n,t){var b;ft(t,!0);let e=t.editor,a=ue(e.value),r=lt(ue(e.renderedValue)),i=lt(ue(e.options)),o=((b=t.editor)==null?void 0:b.config)||{},s=ue(o.template),c=ue(o.cell),d=F(()=>l(i).findIndex(p=>p.id===a));function u({id:p}){t.actions.updateValue(p),t.actions.save()}let f,g=lt(void 0);function h(p){f=p.navigate,G(g,p.keydown,!0),f(l(d))}function m(){G(i,l(r)?t.editor.options.filter(p=>p.label.toLowerCase().includes(l(r).toLowerCase())):t.editor.options,!0),l(i).length?f(-1/0):f(null)}let w=lt(void 0);ze(()=>{l(w).focus()});var v=Xu(),x=K(v);sn(x),x.__input=m,x.__keydown=[Uu,g,d],Ut(x,p=>G(w,p),()=>l(w));var _=tt(x,2);ja(_,{get items(){return l(i)},onready:h,onselect:u,children:(M,y)=>{let D=()=>y==null?void 0:y().option;var C=at(),S=K(C);{var W=T=>{var j=ee();L(R=>ut(j,R),[()=>s(D())]),k(T,j)},P=T=>{var j=at(),R=K(j);{var U=N=>{const Z=F(()=>c);var gt=at(),Ct=K(gt);le(Ct,()=>l(Z),(Q,et)=>{et(Q,{get data(){return D()},get onaction(){return t.onaction}})}),k(N,gt)},J=N=>{var Z=ee();L(()=>ut(Z,D().label)),k(N,Z)};z(R,N=>{c?N(U):N(J,!1)},!0)}k(T,j)};z(S,T=>{s?T(W):T(P,!1)})}k(M,C)},$$slots:{default:!0}}),Mn(x,()=>l(r),p=>G(r,p)),k(n,v),ht()}dt(["input","keydown"]);var Qu=(n,t)=>t.actions.cancel(),Ku=n=>n.preventDefault(),Ju=H('<span class="wx-text svelte-x6i98q"> </span>'),Zu=H('<div class="wx-value svelte-x6i98q" tabindex="0"><!></div> <!>',1);function $u(n,t){var h,m;ft(t,!0);let e=ue(t.editor.value||new Date),a=ue((h=t.editor.config)==null?void 0:h.template),r=ue((m=t.editor.config)==null?void 0:m.cell);function i({value:w}){t.actions.updateValue(w),t.actions.save()}let o;ze(()=>{o.focus(),window.getSelection&&window.getSelection().removeAllRanges()});var s=Zu(),c=K(s);c.__click=[Qu,t],c.__keydown=[Ku];var d=A(c);{var u=w=>{var v=ee();L(x=>ut(v,x),[()=>a(e)]),k(w,v)},f=w=>{var v=at(),x=K(v);{var _=p=>{const M=F(()=>r);var y=at(),D=K(y);le(D,()=>l(M),(C,S)=>{S(C,{get data(){return t.editor.value},get onaction(){return t.onaction}})}),k(p,y)},b=p=>{var M=Ju(),y=A(M,!0);I(M),L(()=>ut(y,t.editor.renderedValue)),k(p,M)};z(x,p=>{r?p(_):p(b,!1)},!0)}k(w,v)};z(d,w=>{a?w(u):w(f,!1)})}I(c),Ut(c,w=>o=w,()=>o);var g=tt(c,2);ii(g,{width:"auto",children:(w,v)=>{{let x=F(()=>{var _;return(_=t.editor.config)==null?void 0:_.buttons});Ss(w,{get value(){return e},onchange:i,get buttons(){return l(x)}})}},$$slots:{default:!0}}),k(n,s),ht()}dt(["click","keydown"]);var tf=(n,t)=>t.actions.cancel(),ef=(n,t,e)=>{l(t)(n,l(e)),n.preventDefault()},nf=H('<span class="wx-text svelte-3ipghm"> </span>'),af=H('<div class="wx-value svelte-3ipghm" tabindex="0"><!></div> <!>',1);function rf(n,t){var M;ft(t,!0);let e=ue(t.editor.options.find(y=>y.id===t.editor.value)),a=t.editor,r=ue(a.value),i=ue(a.options),o=((M=t.editor)==null?void 0:M.config)||{},s=ue(o.template),c=ue(o.cell),d=F(()=>i.findIndex(y=>y.id===r));function u({id:y}){t.actions.updateValue(y),t.actions.save()}let f,g=lt(void 0);function h(y){f=y.navigate,G(g,y.keydown,!0),f(l(d))}let m=lt(void 0);ze(()=>{l(m).focus(),window&&window.getSelection&&window.getSelection().removeAllRanges()});var w=af(),v=K(w);v.__click=[tf,t],v.__keydown=[ef,g,d];var x=A(v);{var _=y=>{var D=ee();L(C=>ut(D,C),[()=>s(e)]),k(y,D)},b=y=>{var D=at(),C=K(D);{var S=P=>{const T=F(()=>c);var j=at(),R=K(j);le(R,()=>l(T),(U,J)=>{J(U,{get data(){return e},get onaction(){return t.onaction}})}),k(P,j)},W=P=>{var T=nf(),j=A(T,!0);I(T),L(()=>ut(j,t.editor.renderedValue)),k(P,T)};z(C,P=>{c?P(S):P(W,!1)},!0)}k(y,D)};z(x,y=>{s?y(_):y(b,!1)})}I(v),Ut(v,y=>G(m,y),()=>l(m));var p=tt(v,2);ja(p,{get items(){return i},onready:h,onselect:u,children:(D,C)=>{let S=()=>C==null?void 0:C().option;var W=at(),P=K(W);{var T=R=>{var U=ee();L(J=>ut(U,J),[()=>s(S())]),k(R,U)},j=R=>{var U=at(),J=K(U);{var N=gt=>{const Ct=F(()=>c);var Q=at(),et=K(Q);le(et,()=>l(Ct),(St,Ht)=>{Ht(St,{get data(){return S()},get onaction(){return t.onaction}})}),k(gt,Q)},Z=gt=>{var Ct=ee();L(()=>ut(Ct,S().label)),k(gt,Ct)};z(J,gt=>{c?gt(N):gt(Z,!1)},!0)}k(R,U)};z(P,R=>{s?R(T):R(j,!1)})}k(D,W)},$$slots:{default:!0}}),k(n,w),ht()}dt(["click","keydown"]);const of={text:Vu,combo:Gu,datepicker:$u,richselect:rf};function sf(n,t,e,a){n.key==="Enter"&&t()&&a()}var lf=n=>n.stopPropagation(),cf=n=>n.stopPropagation(),df=H('<div class="wx-cell wx-editor svelte-18cc9rz" tabindex="-1"><!></div>');function uf(n,t){ft(t,!0);const e=()=>ct(o,"$editor",a),[a,r]=ge(),i=At("grid-store"),{editor:o}=i.getReactiveState();function s(w){const v=w?null:{row:e().id,column:e().column};u(!1,v)}function c(){u(!0,{row:e().id,column:e().column})}function d(w){i.exec("editor",{value:w})}function u(w,v){i.exec("close-editor",{ignore:w}),v&&i.exec("focus-cell",{...v,eventSource:"click"})}let f=F(()=>oa(t.column.width,t.column.flexgrow,t.column.fixed,t.column.left,t.column.right));const g=F(()=>{let w=t.column.editor;typeof w=="function"&&(w=w(t.row,t.column));let v=typeof w=="string"?w:w.type;return of[v]});var h=df();h.__click=[lf],h.__dblclick=[cf],h.__keydown=[sf,e,o,c];var m=A(h);le(m,()=>l(g),(w,v)=>{v(w,{get editor(){return e()},actions:{save:s,cancel:c,updateValue:d},onaction:({action:x,data:_})=>i.exec(x,_)})}),I(h),he(h,(w,v)=>Ee==null?void 0:Ee(w,v),()=>()=>s(!0)),L(()=>{bt(h,l(f)),st(h,"role",typeof t.row.$parent<"u"?"gridcell":"cell"),st(h,"aria-readonly",typeof t.row.$parent<"u"?!t.column.editor:void 0)}),k(n,h),ht(),r()}dt(["click","dblclick","keydown"]);var ff=H('<div class="wx-print-filter"> </div>'),hf=H('<div class="wx-text"> </div>'),gf=H("<th><!></th>"),mf=H("<tr></tr>");function Fr(n,t){ft(t,!0);const e=At("grid-store"),{filterValues:a,_columns:r,_sizes:i}=e.getState();function o(d){return t.columnStyle?" "+t.columnStyle(d):""}var s=at(),c=K(s);Jt(c,17,()=>t.columns,be,(d,u,f)=>{var g=mf();Jt(g,21,()=>l(u),h=>h.id,(h,m)=>{const w=F(()=>r.find(M=>M.id==l(m).id));var v=gf();let x;var _=A(v);{var b=M=>{var y=at(),D=K(y);{let C=F(()=>Object.fromEntries(Object.entries(l(m)).filter(([S])=>S!=="cell")));le(D,()=>l(m).cell,(S,W)=>{W(S,{get api(){return e},get cell(){return l(C)},get column(){return l(w)},row:f})})}k(M,y)},p=M=>{var y=at(),D=K(y);{var C=W=>{var P=ff(),T=A(P,!0);I(P),L(j=>ut(T,j),[()=>Od(a,r,l(m))]),k(W,P)},S=W=>{var P=hf(),T=A(P,!0);I(P),L(()=>ut(T,l(m).text??"")),k(W,P)};z(D,W=>{l(m).filter?W(C):W(S,!1)},!0)}k(M,y)};z(_,M=>{l(m).cell?M(b):M(p,!1)})}I(v),L((M,y,D)=>{bt(v,M),x=vt(v,1,`wx-print-cell-${t.type??""} ${y??""}`,null,x,D),st(v,"rowspan",l(m).rowspan),st(v,"colspan",l(m).colspan)},[()=>qi(l(m),i.columnWidth),()=>o(l(w)),()=>({"wx-print-cell-filter":l(m).filter,"wx-vertical":l(m).vertical})]),k(h,v)}),I(g),k(d,g)}),k(n,s),ht()}var vf=H("<thead><!></thead>"),wf=H('<i class="wxi-drag"></i>'),yf=H('<span class="wx-print-draggable"><!></span>'),xf=H("<i></i>"),_f=H("<span></span> <!>",1),bf=H("<span> </span>"),kf=H("<td><!> <!> <!></td>"),pf=H("<tr></tr>"),Sf=H("<tfoot><!></tfoot>"),Mf=H("<table><!><tbody></tbody><!></table>");function Df(n,t){ft(t,!0);const e=At("grid-store"),{flatData:a,_sizes:r}=e.getState(),i=t.header&&Pr(t.columns,"header",r.headerRowHeights),o=t.footer&&Pr(t.columns,"footer",r.footerRowHeights);function s(v,x){let _="";return _+=t.columnStyle?" "+t.columnStyle(x):"",_+=t.cellStyle?" "+t.cellStyle(v,x):"",_}function c(v,x){return typeof x.draggable=="function"?x.draggable(v,x)!==!1:x.draggable}var d=Mf();let u;var f=A(d);{var g=v=>{var x=vf(),_=A(x);Fr(_,{get columns(){return i},type:"header",get columnStyle(){return t.columnStyle}}),I(x),k(v,x)};z(f,v=>{t.header&&v(g)})}var h=tt(f);Jt(h,21,()=>a,be,(v,x)=>{var _=pf();Jt(_,21,()=>t.columns,b=>b.id,(b,p)=>{var M=at(),y=K(M);{var D=C=>{var S=kf(),W=A(S);{var P=N=>{var Z=yf(),gt=A(Z);{var Ct=Q=>{var et=wf();k(Q,et)};z(gt,Q=>{c(l(x),l(p))&&Q(Ct)})}I(Z),k(N,Z)};z(W,N=>{t.reorder&&l(p).draggable&&N(P)})}var T=tt(W,2);{var j=N=>{var Z=_f(),gt=K(Z),Ct=tt(gt,2);{var Q=et=>{var St=xf();L(()=>vt(St,1,`wx-print-grid-tree-toggle wxi-menu-${l(x).open!==!1?"down":"right"}`)),k(et,St)};z(Ct,et=>{l(x).$count&&et(Q)})}L(()=>bt(gt,`margin-left:${l(x).$level*28}px;`)),k(N,Z)};z(T,N=>{l(p).treetoggle&&N(j)})}var R=tt(T,2);{var U=N=>{var Z=at(),gt=K(Z);le(gt,()=>l(p).cell,(Ct,Q)=>{Q(Ct,{get api(){return e},get row(){return l(x)},get column(){return l(p)}})}),k(N,Z)},J=N=>{var Z=bf(),gt=A(Z,!0);I(Z),L(Ct=>ut(gt,Ct),[()=>vn(l(x),l(p))]),k(N,Z)};z(R,N=>{l(p).cell?N(U):N(J,!1)})}I(S),L((N,Z)=>{vt(S,1,`wx-print-cell wx-cell ${N??""}`,"svelte-cv008e"),bt(S,Z)},[()=>s(l(x),l(p)),()=>qi(l(p),r.columnWidth)]),k(C,S)};z(y,C=>{l(p).collapsed||C(D)})}k(b,M)}),I(_),L(b=>vt(_,1,b,"svelte-cv008e"),[()=>"wx-row"+(t.rowStyle?" "+t.rowStyle(l(x)):"")]),k(v,_)}),I(h);var m=tt(h);{var w=v=>{var x=Sf(),_=A(x);Fr(_,{get columns(){return o},type:"footer",get columnStyle(){return t.columnStyle}}),I(x),k(v,x)};z(m,v=>{t.footer&&v(w)})}I(d),L(v=>u=vt(d,1,"wx-print-grid svelte-cv008e",null,u,v),[()=>({"wx-flex-columns":t.columns.some(v=>v.flexgrow)})]),k(n,d),ht()}var Tf=H('<div class="wx-print-grid-wrapper"><!></div>'),Cf=H("<div></div>");function Wf(n,t){ft(t,!0);let e=Ya(t,["$$slots","$$events","$$legacy","config"]);const a=At("grid-store"),{_skin:r,_columns:i}=a.getState();let o=Wd(i,t.config),s=lt(void 0);ze(()=>{const d=document.body;d.classList.add("wx-print");const u=l(s).cloneNode(!0);d.appendChild(u);const f=`@media print { @page { size: ${t.config.paper} ${t.config.mode}; }`,g=document.createElement("style");g.setAttribute("type","text/css"),g.setAttribute("media","print"),document.getElementsByTagName("head")[0].appendChild(g),g.appendChild(document.createTextNode(f)),window.print(),g.remove(),d.classList.remove("wx-print"),u.remove()});var c=Cf();Jt(c,21,()=>o,be,(d,u)=>{var f=Tf(),g=A(f);Df(g,Fa({get columns(){return l(u)}},()=>e)),I(f),k(d,f)}),I(c),Ut(c,d=>G(s,d),()=>l(s)),L(()=>vt(c,1,`wx-${r??""}-theme wx-print-container`)),k(n,c),ht()}var Pf=H('<div class="wx-header-wrapper svelte-i5amn0"><!></div>'),Ef=(n,t)=>t(n),Hf=H('<div class="wx-cell wx-collapsed svelte-i5amn0"></div>'),Of=H('<div role="row" tabindex="-1"></div>'),If=H('<div><div class="wx-table-box svelte-i5amn0"><div class="wx-scroll svelte-i5amn0"><!> <div class="wx-body svelte-i5amn0"><!> <div class="wx-data svelte-i5amn0"></div></div> <!></div></div></div> <!>',1);function Rf(n,t){ft(t,!0);const e=()=>ct(_,"$_columns",m),a=()=>ct(M,"$_sizes",m),r=()=>ct(x,"$dynamic",m),i=()=>ct(b,"$data",m),o=()=>ct(p,"$split",m),s=()=>ct(y,"$selectedRows",m),c=()=>ct(D,"$select",m),d=()=>ct(P,"$focusCell",m),u=()=>ct(j,"$undo",m),f=()=>ct(W,"$tree",m),g=()=>ct(C,"$editor",m),h=()=>ct(T,"$_print",m),[m,w]=ge(),v=At("grid-store"),{dynamic:x,_columns:_,flatData:b,split:p,_sizes:M,selectedRows:y,select:D,editor:C,scroll:S,tree:W,focusCell:P,_print:T,undo:j}=v.getReactiveState();let R=lt(0);ze(()=>G(R,kt(),!0));let U=lt(0),J=lt(0);const N=F(()=>e().some(O=>!O.hidden&&O.flexgrow)),Z=F(()=>a().rowHeight);let gt,Ct=lt(null),Q=lt(null);const et=F(()=>{const O=r()?r().rowCount:i().length,B=O*l(Z);return t.autoRowHeight?l(fe)+l(q).d+(O-l(Bt))*l(Z):B}),St=F(()=>e().reduce((O,B)=>(B.hidden||(O+=B.width),O),0)),Ht=F(()=>{let O=[],B=0;return o().left&&(O=e().slice(0,o().left).filter(pt=>!pt.hidden).map(pt=>({...pt})),O.forEach(pt=>{pt.fixed={left:1},pt.left=B,B+=pt.width}),O.length&&(O[O.length-1].fixed={left:-1})),{columns:O,width:B}}),It=F(()=>{let O=[],B=0;if(o().right){O=e().slice(o().right*-1).filter(pt=>!pt.hidden).map(pt=>({...pt}));for(let pt=O.length-1;pt>=0;pt--){const Tt=O[pt];Tt.fixed={right:1},Tt.right=B,B+=Tt.width}O.length&&(O[0].fixed={right:-1})}return{columns:O,width:B}}),_t=F(()=>{const O=e().slice(o().left,e().length-(o().right??0)).filter(B=>!B.hidden);return O.forEach(B=>{B.fixed=0}),O}),Lt=1,Pt=F(()=>{let O,B,pt;const Tt=l(U),ne=l(U)+t.clientWidth;let Xt=0,Rt=0,Kt=0,ae=0;l(_t).forEach((oe,ye)=>{Tt>Kt&&(Xt=ye,ae=Kt),Kt=Kt+oe.width,ne>Kt&&(Rt=ye+Lt)});const Me={header:0,footer:0};for(let oe=Rt;oe>=Xt;oe--)["header","footer"].forEach(ye=>{l(_t)[oe]&&l(_t)[oe][ye].forEach(Fn=>{const $e=Fn.colspan;if($e&&$e>1){const er=$e-(Rt-oe+1);er>0&&(Me[ye]=Math.max(Me[ye],er))}})});const Ie=ot(Xt,ae,"header"),De=ot(Xt,ae,"footer"),Re=Ie.delta,yn=Ie.index,je=De.delta,Ze=De.index;return l(N)&&l(St)>t.clientWidth?O=B=pt=[...l(Ht).columns,...l(_t),...l(It).columns]:(O=[...l(Ht).columns,...l(_t).slice(Xt,Rt+1),...l(It).columns],B=[...l(Ht).columns,...l(_t).slice(yn,Rt+Me.header+1),...l(It).columns],pt=[...l(Ht).columns,...l(_t).slice(Ze,Rt+Me.footer+1),...l(It).columns]),{data:O,header:B,footer:pt,d:ae,df:je,dh:Re}}),Zt=F(()=>l(N)&&l(St)<=t.clientWidth?t.clientWidth-(l(X)?l(R):0):l(St)),rt=F(()=>t.header?a().headerHeight:0),Wt=F(()=>t.footer?a().footerHeight:0),X=F(()=>t.clientWidth&&t.clientHeight?l(et)+l(rt)+l(Wt)>=t.clientHeight-(l(St)>=t.clientWidth?l(R):0):!1),it=F(()=>t.clientWidth&&t.clientHeight?l(St)>=t.clientWidth:!1),Et=F(()=>l(N)&&l(St)<=t.clientWidth?t.clientWidth:l(Zt)<t.clientWidth?l(St)+(l(X)?l(R):0):-1),Ot=F(()=>t.clientHeight-l(rt)-l(Wt)-(l(it)?l(R):0)),xt=F(()=>Math.ceil(l(Ot)/l(Z))+1),Y=2,q=F(()=>{let O=0,B=0;if(t.autoRowHeight){let Tt=l(J);for(;Tt>0;)Tt-=re[O]||l(Z),O++;B=l(J)-Tt;for(let ne=Math.max(0,O-Y-1);ne<O;ne++)B-=re[O-ne]||l(Z);O=Math.max(0,O-Y)}else O=Math.floor(l(J)/l(Z)),O=Math.max(0,O-Y),B=O*l(Z);const pt=Math.min(r()?r().rowCount:i().length,O+l(xt)+Y);return{d:B,start:O,end:pt}});let wt={};te(()=>{if(r()&&(wt.start!==l(q).start||wt.end!==l(q).end)){const{start:O,end:B}=l(q);wt={start:O,end:B},v.exec("request-data",{row:{start:O,end:B}})}});const $=F(()=>r()?i():i().slice(l(q).start,l(q).end)),yt=F(()=>s().filter(O=>l($).some(B=>B.id===O)));let qt=F(()=>l(q).start),Bt=lt(void 0);function $t(O){G(J,O.target.scrollTop,!0),G(U,O.target.scrollLeft,!0)}function zt(O){O.shiftKey&&O.preventDefault(),gt.focus()}function Vt(){return!!e().find(O=>!!O.draggable)}let ce,Gt;const de={dblclick:(O,B)=>{const pt={id:O,column:Da(B,"data-col-id")};v.exec("open-editor",pt)},click:(O,B)=>{if(ce)return;const pt=Da(B,"data-col-id");if(v.exec("focus-cell",{row:O,column:pt,eventSource:"click"}),D===!1)return;const Tt=t.multiselect&&B.ctrlKey,ne=t.multiselect&&B.shiftKey;c()&&v.exec("select-row",{id:O,toggle:Tt,range:ne})},"toggle-row":O=>{const B=v.getRow(O);v.exec(B.open!==!1?"close-row":"open-row",{id:O})},"ignore-click":()=>!1},pe=F(()=>({top:l(rt),bottom:l(Wt),left:l(Ht).width,xScroll:l(it),yScroll:l(X),sense:t.autoRowHeight&&l(Q)?l(Q).offsetHeight:Math.max(a().rowHeight,40),node:gt&&gt.firstElementChild}));function V(O,B){const{container:pt,sourceNode:Tt,from:ne}=B;if(Vt()&&!Tt.getAttribute("draggable-data"))return!1;G(Ct,ne,!0),v.getRow(l(Ct)).open&&v.exec("close-row",{id:l(Ct),nested:!0});const Rt=xe(Tt,"data-id");G(Q,Rt.cloneNode(!0),!0),l(Q).classList.remove("wx-selected"),l(Q).querySelectorAll("[tabindex]").forEach(Ie=>Ie.setAttribute("tabindex","-1")),pt.appendChild(l(Q));const Kt=l(U)-l(Pt).d,ae=l(X)?l(R):0;pt.style.width=Math.min(t.clientWidth-ae,l(N)&&l(St)<=t.clientWidth?l(Zt):l(Zt)-ae)+Kt+"px";const Me=Vn(Rt);B.offset={x:Kt,y:-Math.round(Me.height/2)},Gt||(Gt=O.clientY)}function nt(O,B){var Rt;const{from:pt}=B,Tt=B.pos,ne=Vn(gt);Tt.x=ne.x;const Xt=l(pe).top;if(Tt.y<Xt)Tt.y=Xt;else{const Kt=ne.height-(l(it)&&l(R)>0?l(R):Math.round(l(pe).sense/2))-l(pe).bottom;Tt.y>Kt&&(Tt.y=Kt)}if(gt.contains(B.targetNode)){const Kt=xe(B.targetNode,"data-id"),ae=ea(Kt==null?void 0:Kt.getAttribute("data-id"));if(ae&&ae!==pt){B.to=ae;const Me=t.autoRowHeight?(Rt=l(Q))==null?void 0:Rt.offsetHeight:a().rowHeight;if(l(J)===0||Tt.y>Xt+Me-1){const Ie=Kt.getBoundingClientRect(),Re=Vn(l(Q)).y,yn=Ie.y,je=Re>yn?-1:1,Ze=je===1?"after":"before",oe=Math.abs(v.getRowIndex(pt)-v.getRowIndex(ae)),ye=oe!==1?Ze==="before"?"after":"before":Ze;if(oe===1&&(je===-1&&O.clientY>Gt||je===1&&O.clientY<Gt))return;Gt=O.clientY,v.exec("move-item",{id:pt,target:ae,mode:ye,inProgress:!0})}}t.onreorder&&t.onreorder({event:O,context:B})}ou(O,ne,B,l(pe))}function mt(O,B){const{from:pt,to:Tt}=B;v.exec("move-item",{id:pt,target:Tt,inProgress:!1}),ce=setTimeout(()=>{ce=0},1),G(Ct,G(Q,Gt=null,!0),!0),Vi(B)}function ot(O,B,pt){let Tt=B,ne=O;if(l(_t).length){let Xt=l(_t).length;for(let Rt=O;Rt>=0;Rt--)l(_t)[Rt][pt].forEach(ae=>{ae.colspan>1&&Rt>O-ae.colspan&&Rt<Xt&&(Xt=Rt)});if(Xt!==l(_t).length&&Xt<O){for(let Rt=Xt;Rt<O;Rt++)Tt-=l(_t)[Rt].width;ne=Xt}}return{index:ne,delta:Tt}}function kt(){const O=document.createElement("div");O.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(O);const B=O.offsetWidth-O.clientWidth;return document.body.removeChild(O),B}const Dt=F(()=>l(Et)>0?`width:${l(Et)}px;`:"");let Nt,re=[],fe=lt(0);function Ce(){Kr().then(()=>{let O=0,B=l(qt);Array.from(Nt.children).forEach((pt,Tt)=>{re[l(qt)+Tt]=pt.offsetHeight,O+=pt.offsetHeight,B++}),G(fe,O,!0),G(Bt,B,!0)})}te(()=>l($)&&t.autoRowHeight&&Ce());let ie=lt(void 0);te(()=>{if(d()&&(!c()||!l(yt).length||l(yt).includes(d().row)))G(ie,{...d()},!0);else if(l($).length&&l(Pt).data.length){if(!l(ie)||l(yt).length&&!l(yt).includes(l(ie).row)||l($).findIndex(O=>O.id==l(ie).row)===-1||l(Pt).data.findIndex(O=>O.id==l(ie).column&&!O.collapsed)===-1){const O=l(yt)[0]||l($)[0].id,B=l(Pt).data.findIndex(pt=>!pt.collapsed);B!==-1?G(ie,{row:O,column:l(Pt).data[B].id},!0):G(ie,null)}}else G(ie,null)});var Je=If(),Qt=K(Je),jt=A(Qt),me=A(jt),Ln=A(me);{var la=O=>{var B=Pf(),pt=A(B);{let Tt=F(()=>l(Ot)-+t.footer);Nr(pt,{get contentWidth(){return l(Zt)},get deltaLeft(){return l(Pt).dh},get columns(){return l(Pt).header},get columnStyle(){return t.columnStyle},get bodyHeight(){return l(Tt)}})}I(B),k(O,B)};z(Ln,O=>{t.header&&O(la)})}var We=tt(Ln,2);We.__mousedown=[Ef,zt];var tr=A(We);{var Zi=O=>{zu(O,{get overlay(){return t.overlay}})};z(tr,O=>{t.overlay&&O(Zi)})}var Nn=tt(tr,2);Jt(Nn,23,()=>l($),O=>O.id,(O,B,pt)=>{var Tt=Of();let ne;Jt(Tt,21,()=>l(Pt).data,Xt=>Xt.id,(Xt,Rt)=>{var Kt=at(),ae=K(Kt);{var Me=De=>{var Re=Hf();k(De,Re)},Ie=De=>{var Re=at(),yn=K(Re);{var je=oe=>{uf(oe,{get row(){return l(B)},get column(){return l(Rt)}})},Ze=oe=>{{let ye=F(()=>{var Fn,$e;return((Fn=l(ie))==null?void 0:Fn.row)===l(B).id&&(($e=l(ie))==null?void 0:$e.column)==l(Rt).id});wu(oe,{get row(){return l(B)},get column(){return l(Rt)},get columnStyle(){return t.columnStyle},get cellStyle(){return t.cellStyle},get reorder(){return t.reorder},get focusable(){return l(ye)}})}};z(yn,oe=>{var ye;((ye=g())==null?void 0:ye.id)===l(B).id&&g().column==l(Rt).id?oe(je):oe(Ze,!1)},!0)}k(De,Re)};z(ae,De=>{l(Rt).collapsed?De(Me):De(Ie,!1)})}k(Xt,Kt)}),I(Tt),L((Xt,Rt,Kt)=>{ne=vt(Tt,1,Xt,"svelte-i5amn0",ne,Rt),st(Tt,"data-id",l(B).id),st(Tt,"data-context-id",l(B).id),bt(Tt,`${t.autoRowHeight?"min-height":"height"}:${l(Z)}px;`),st(Tt,"aria-rowindex",l(pt)),st(Tt,"aria-expanded",l(B).open),st(Tt,"aria-level",f()?l(B).$level+1:void 0),st(Tt,"aria-selected",Kt)},[()=>"wx-row"+(t.rowStyle?" "+t.rowStyle(l(B)):""),()=>({"wx-autoheight":t.autoRowHeight,"wx-selected":s().indexOf(l(B).id)!==-1,"wx-inactive":l(Ct)===l(B).id}),()=>f()?s().indexOf(l(B).id)!==-1:void 0]),k(O,Tt)}),I(Nn),Ut(Nn,O=>Nt=O,()=>Nt),I(We),he(We,(O,B)=>Ee==null?void 0:Ee(O,B),()=>()=>v.exec("focus-cell",{eventSource:"click"})),he(We,(O,B)=>_e==null?void 0:_e(O,B),()=>de);var $i=tt(We,2);{var to=O=>{Nr(O,{type:"footer",get contentWidth(){return l(Zt)},get deltaLeft(){return l(Pt).df},get columns(){return l(Pt).footer},get columnStyle(){return t.columnStyle}})};z($i,O=>{t.footer&&i().length&&O(to)})}I(me),he(me,(O,B)=>ya==null?void 0:ya(O,B),()=>({scroll:S,getWidth:()=>t.clientWidth-(l(X)?l(R):0),getHeight:()=>l(Ot),getScrollMargin:()=>l(Ht).width+l(It).width})),I(jt),Ut(jt,O=>gt=O,()=>gt),he(jt,(O,B)=>_a==null?void 0:_a(O,B),()=>t.resize),he(jt,(O,B)=>ba==null?void 0:ba(O,B),()=>({start:V,move:nt,end:mt,getReorder:()=>t.reorder,getDraggableInfo:()=>({hasDraggable:Vt()})})),he(jt,(O,B)=>Oe==null?void 0:Oe(O,B),()=>({keys:uu({undo:u()}),exec:O=>v.exec("hotkey",O)})),I(Qt);var eo=tt(Qt,2);{var no=O=>{Wf(O,{get config(){return h()},get rowStyle(){return t.rowStyle},get columnStyle(){return t.columnStyle},get cellStyle(){return t.cellStyle},get header(){return t.header},get footer(){return t.footer},get reorder(){return t.reorder}})};z(eo,O=>{h()&&O(no)})}L(()=>{vt(Qt,1,`wx-grid ${t.responsiveLevel?`wx-responsive-${t.responsiveLevel}`:""}`,"svelte-i5amn0"),bt(Qt,`--header-height:${l(rt)??""}px; --footer-height:${l(Wt)??""}px;--split-left-width:${l(Ht).width??""}px;
		--split-right-width:${l(It).width??""}px;`),bt(jt,l(Dt)),st(jt,"role",f()?"treegrid":"grid"),st(jt,"aria-colcount",l(Pt).data.length),st(jt,"aria-rowcount",l($).length),st(jt,"aria-multiselectable",f()&&t.multiselect?!0:void 0),bt(me,`overflow-x:${l(it)?"scroll":"hidden"};overflow-y:${l(X)?"scroll":"hidden"};`),bt(We,`width:${l(Zt)??""}px;height:${l(et)??""}px;`),bt(Nn,`padding-top:${l(q).d??""}px;padding-left:${l(Pt).d??""}px;`)}),Ye("scroll",me,$t),k(n,Je),ht(),w()}dt(["mousedown"]);function Lf(n,t){ft(t,!0);let e=E(t,"data",19,()=>[]),a=E(t,"columns",19,()=>[]),r=E(t,"rowStyle",3,null),i=E(t,"columnStyle",3,null),o=E(t,"cellStyle",3,null),s=E(t,"selectedRows",19,()=>[]),c=E(t,"select",3,!0),d=E(t,"multiselect",3,!1),u=E(t,"header",3,!0),f=E(t,"footer",3,!1),g=E(t,"dynamic",3,null),h=E(t,"overlay",3,null),m=E(t,"reorder",3,!1),w=E(t,"onreorder",3,null),v=E(t,"autoRowHeight",3,!1),x=E(t,"sizes",19,()=>({})),_=E(t,"split",19,()=>({left:0})),b=E(t,"tree",3,!1),p=E(t,"autoConfig",3,!1),M=E(t,"init",3,null),y=E(t,"responsive",3,null),D=E(t,"sortMarks",19,()=>({})),C=E(t,"undo",3,!1),S=Ya(t,["$$slots","$$events","$$legacy","data","columns","rowStyle","columnStyle","cellStyle","selectedRows","select","multiselect","header","footer","dynamic","overlay","reorder","onreorder","autoRowHeight","sizes","split","tree","autoConfig","init","responsive","sortMarks","undo"]),W=lt(0),P=lt(0),T=lt(null),j=lt(null);const R=new Xd($r);let U=R.in;const J=/-/g;let N=new di((Y,q)=>{const wt="on"+Y.replace(J,"");S[wt]&&S[wt](q)});U.setNext(N);const Z=R.getState.bind(R),gt=R.getReactive.bind(R),Ct=()=>({data:R}),Q=U.exec,et=Y=>N=N.setNext(Y),St=U.intercept.bind(U),Ht=U.on.bind(U),It=U.detach.bind(U),_t=Y=>R.getRow(Y),Lt=Y=>R.getColumn(Y),Pt={exec:Q,setNext:et,intercept:St,on:Ht,detach:It,getRow:_t,getColumn:Lt,getState:Z,getReactiveState:gt,getStores:Ct};ta("grid-store",{getState:R.getState.bind(R),getReactiveState:R.getReactive.bind(R),exec:U.exec.bind(U),getRow:R.getRow.bind(R),getRowIndex:R.getRowIndex.bind(R)});const Zt=F(()=>{var Y;if(p()&&!a().length&&e().length){const q=e()[0],wt=[];for(let $ in q)if($!=="id"&&$[0]!=="$"){let yt={id:$,header:$[0].toUpperCase()+$.slice(1)};typeof p()=="object"&&(yt={...yt,...p()}),wt.push(yt)}return wt}return((Y=l(j))==null?void 0:Y.columns)??a()}),rt=F(()=>{var Y;return((Y=l(j))==null?void 0:Y.sizes)??x()});function Wt(Y){if(G(W,Y.width,!0),G(P,Y.height,!0),y()){const wt=Object.keys(y()).map(Number).sort(($,yt)=>$-yt).find($=>l(W)<=$)??null;wt!==l(T)&&(G(j,y()[wt],!0),G(T,wt,!0))}}const X=F(()=>{let Y=!b();return $a()||(Y=!0),Y?m():!1});let it=F(()=>At("wx-theme")),Et=!0;const Ot=()=>{R.init({data:e(),columns:l(Zt),split:_(),sizes:l(rt),selectedRows:s(),dynamic:g(),tree:b(),sortMarks:D(),select:c(),undo:C(),_skin:l(it)}),Et&&M()&&(M()(Pt),Et=!1)};Ot(),te(Ot);var xt={getState:Z,getReactiveState:gt,getStores:Ct,exec:Q,setNext:et,intercept:St,on:Ht,detach:It,getRow:_t,getColumn:Lt};return Ba(n,{get words(){return eu},optional:!0,children:(Y,q)=>{Rf(Y,{get header(){return u()},get footer(){return f()},get overlay(){return h()},get rowStyle(){return r()},get columnStyle(){return i()},get cellStyle(){return o()},get reorder(){return l(X)},get onreorder(){return w()},get multiselect(){return d()},get autoRowHeight(){return v()},get clientWidth(){return l(W)},get clientHeight(){return l(P)},get responsiveLevel(){return l(T)},resize:Wt})},$$slots:{default:!0}}),ht(xt)}dt(["click"]);dt(["click"]);dt(["click"]);dt(["click"]);dt(["contextmenu"]);dt(["mousemove"]);Aa(Va);var Nf=H('<i data-action="open-task"></i>'),Ff=H('<i class="wx-toggle-placeholder svelte-ko0kne"></i>'),Yf=H('<div class="wx-content svelte-ko0kne"><!> <div class="wx-text svelte-ko0kne"><!></div></div>');function Af(n,t){ft(t,!0);function e(f,g){return`justify-content:${g.align};padding-left: ${(f.$level-1)*20}px`}var a=Yf(),r=A(a);{var i=f=>{var g=Nf();L(()=>vt(g,1,`wx-toggle-icon wxi-menu-${t.row.open?"down":"right"}`,"svelte-ko0kne")),k(f,g)},o=f=>{var g=Ff();k(f,g)};z(r,f=>{t.row.data||t.row.lazy?f(i):f(o,!1)})}var s=tt(r,2),c=A(s);{var d=f=>{var g=at(),h=K(g);le(h,()=>t.column._cell,(m,w)=>{w(m,{get row(){return t.row},get column(){return t.column}})}),k(f,g)},u=f=>{var g=ee();L(()=>ut(g,t.row.text)),k(f,g)};z(c,f=>{t.column._cell?f(d):f(u,!1)})}I(s),I(a),L(f=>bt(a,f),[()=>e(t.row,t.column)]),k(n,a),ht()}var zf=H('<div><i class="wx-action-icon wxi-plus svelte-pkrxv5"></i></div>');function Yr(n,t){ft(t,!0);const e=F(()=>t.column.id);var a=at(),r=K(a);{var i=o=>{var s=zf(),c=A(s);I(s),L(()=>{bt(s,`text-align:${t.column.align??""}`),st(c,"data-action",l(e))}),k(o,s)};z(r,o=>{(t.cell||t.column.id=="add-task")&&o(i)})}k(n,a),ht()}function jf(n,t,e){const a=On(n),r=n.target.dataset.action;r&&n.preventDefault(),a?r=="add-task"||r=="open-task"?t(a,r):e.exec("select-task",{id:a,toggle:n.ctrlKey||n.metaKey,range:n.shiftKey,show:!0}):r=="add-task"&&t(null,r)}function qf(n,t,e,a){if(!t.readonly){const r=On(n),i=Da(n,"data-col-id"),o=i&&l(e).find(s=>s.id==i);!(o!=null&&o.editor)&&r&&a.exec("show-editor",{id:r})}}var Bf=H('<div class="wx-table-container svelte-1br6jrf"><div class="wx-table svelte-1br6jrf"><!></div></div>');function Vf(n,t){ft(t,!0);const e=()=>ct(b,"$scrollTop",f),a=()=>ct(P,"$sort",f),r=()=>ct(T,"$durationUnit",f),i=()=>ct(D,"$area",f),o=()=>ct(S,"$scales",f),s=()=>ct(y,"$selected",f),c=()=>ct(C,"$rTasks",f),d=()=>ct(W,"$columns",f),u=()=>ct(p,"$cellHeight",f),[f,g]=ge();let h=E(t,"width",3,0),m=E(t,"columnWidth",7),w=E(t,"display",11,"all"),v=E(t,"tableAPI",15);const x=At("wx-i18n").getGroup("gantt"),_=At("gantt-store"),{scrollTop:b,cellHeight:p,_scrollTask:M,_selected:y,area:D,_tasks:C,_scales:S,columns:W,_sort:P,durationUnit:T}=_.getReactiveState();let j=null,R=!0,U=lt(null);function J(V,nt){if(nt=="add-task")_.exec(nt,{target:V,task:{text:x("New Task")},mode:"child",show:!0});else if(nt=="open-task"){const mt=l(Y).find(ot=>ot.id===V);(mt.data||mt.lazy)&&_.exec(nt,{id:V,mode:!mt.open})}}function N(){R=!1}function Z(V){R=!0,j=V.touches[0].clientY+e()}function gt(V){if(R){const nt=j-V.touches[0].clientY;return _.exec("scroll-chart",{top:nt}),V.preventDefault(),!1}}let Ct;function Q(V){var re;const nt=V.id,{before:mt,after:ot}=V,kt=V.onMove;let Dt=mt||ot,Nt=mt?"before":"after";if(kt){if(Nt=="after"){const fe=_.getTask(Dt);(re=fe.data)!=null&&re.length&&fe.open&&(Nt="before",Dt=fe.data[0].id)}Ct={id:nt,[Nt]:Dt}}else Ct=null;_.exec("move-task",{id:nt,mode:Nt,target:Dt,inProgress:kt})}function et({id:V}){if(t.readonly||(_.getTask(V).open&&_.exec("open-task",{id:V,mode:!1}),G(U,l(Y).find(nt=>nt.id===V),!0),!l(U)))return!1}function St({id:V,top:nt}){Ct?Q({...Ct,onMove:!1}):_.exec("drag-task",{id:V,top:nt+l(Wt),inProgress:!1}),G(U,null)}function Ht({id:V,top:nt,detail:mt}){mt&&Q({...mt,onMove:!0}),_.exec("drag-task",{id:V,top:nt+l(Wt),inProgress:!0})}let It=lt(0),_t=lt(void 0),Lt=lt(void 0),Pt=lt(!1);function Zt(V){const{key:nt,isInput:mt}=V;if(!mt&&(nt==="arrowup"||nt==="arrowdown"))return V.eventSource="grid",_.exec("hotkey",V),!1;if(nt==="enter"){const ot=v().getState().focusCell;if(ot){const{row:kt,column:Dt}=ot;Dt==="add-task"?J(kt,"add-task"):Dt==="text"&&J(kt,"open-task")}}}function rt(V){v(V),V.intercept("hotkey",Zt),V.intercept("scroll",()=>!1),V.intercept("select-row",()=>!1),V.intercept("sort-rows",nt=>{const{key:mt,add:ot}=nt;let kt=a()?a().find(Nt=>Nt.key===mt):null,Dt="asc";return kt&&(Dt=!kt||kt.order==="asc"?"desc":"asc"),_.exec("sort-tasks",{key:mt,order:Dt,add:ot}),!1}),V.on("resize-column",()=>{yt(!0)}),V.on("hide-column",nt=>{nt.mode||qt(),yt()}),V.intercept("update-cell",nt=>{const{id:mt,column:ot,value:kt}=nt,Dt=l(Y).find(Nt=>Nt.id===mt);if(Dt){const Nt={...Dt};let re=kt;re&&!isNaN(re)&&!(re instanceof Date)&&(re*=1),Nt[ot]=re,Qn(Nt,r(),!0,ot),_.exec("update-task",{id:mt,task:Nt})}return!1})}const Wt=F(()=>i().from),X=F(()=>o().height),it=F(()=>!t.compactMode&&w()!=="grid"?m()>h():m()>l(It)),Et=F(()=>w()==="all"?`${h()}px`:w()==="grid"?"calc(100% - 4px)":l(Bt).find(V=>V.id==="add-task")?"50px":"0"),Ot=F(()=>l(it)&&w()==="all"?`width:${m()}px;`:w()==="grid"?l(it)?`width:${m()}px;`:"width:100%;":""),xt=F(()=>s().map(V=>V.id)),Y=F(()=>c().slice(i().start,i().end)),q=F(()=>l(U)&&!l(Y).find(V=>V.id===l(U).id)?[...l(Y),l(U)]:l(Y));function wt(){return l(Bt).some(V=>V.flexgrow&&!V.hidden)}const $=F(()=>(l(Pt),wt()));function yt(V){if(!wt()){const nt=l(zt).reduce((mt,ot)=>(V&&ot.$width&&(ot.$width=ot.width),mt+(ot.hidden?0:ot.width)),0);nt!==m()&&m(nt)}G(Pt,!0),G(Pt,!1)}function qt(){l(Bt).filter(nt=>nt.flexgrow&&!nt.hidden).length===1&&l(Bt).forEach(nt=>{nt.$width&&!nt.flexgrow&&!nt.hidden&&(nt.width=nt.$width)})}const Bt=F(()=>{let V=d().map(ot=>{ot={...ot};const kt=ot.header;if(typeof kt=="object"){const Dt=kt.text&&x(kt.text);ot.header={...kt,text:Dt}}else ot.header=x(kt);return ot});const nt=V.findIndex(ot=>ot.id==="text"),mt=V.findIndex(ot=>ot.id==="add-task");if(nt!==-1&&(V[nt].cell&&(V[nt]._cell=V[nt].cell),V[nt].cell=Af),mt!==-1){V[mt].cell=V[mt].cell||Yr;const ot=V[mt].header;if(typeof ot!="object"&&(V[mt].header={text:ot}),V[mt].header.cell=ot.cell||Yr,t.readonly)V.splice(mt,1);else if(t.compactMode){const[kt]=V.splice(mt,1);V.unshift(kt)}}return V.length>0&&(V[V.length-1].resize=!1),V});let $t=F(()=>{var V;if(l(q)&&((V=a())!=null&&V.length)){const nt={};return a().forEach(({key:mt,order:ot},kt)=>{nt[mt]={order:ot,...a().length>1&&{index:kt}}}),nt}return{}});const zt=F(()=>{let V=w()==="chart"?l(Bt).filter(mt=>mt.id==="add-task"):l(Bt);const nt=w()==="all"?h():l(It);if(!l($)){let mt=m(),ot=!1;if(l(Bt).some(kt=>kt.$width)){let kt=0;mt=l(Bt).reduce((Dt,Nt)=>(Nt.hidden||(kt+=Nt.width,Dt+=Nt.$width||Nt.width),Dt),0),kt>mt&&mt>nt&&(ot=!0)}if(ot||mt<nt){let kt=1;return ot||(kt=(nt-50)/(mt-50||1)),V.map(Dt=>(Dt.id!=="add-task"&&!Dt.hidden&&(Dt.$width||(Dt.$width=Dt.width),Dt.width=Dt.$width*kt),Dt))}}return V});te(()=>{l(_t)&&(e(),l(Wt),Vt())});function Vt(){l(_t)&&l(q)!==null&&(l(_t).querySelector(".wx-body").style.top=-(e()-l(Wt))+"px"),l(Lt).scrollTop=0}const ce=new ResizeObserver(()=>{Vt()});te(()=>(l(_t)&&(l(zt),l(Ot),w(),l(Et),l(q),ce.observe(l(_t).querySelector(".wx-table-box .wx-body"))),()=>{ce.disconnect()})),M.subscribe(V=>{if(!V)return;const{id:nt}=V,mt=v().getState().focusCell;mt&&mt.row!==nt&&l(_t)&&l(_t).contains(document.activeElement)&&v().exec("focus-cell",{row:nt,column:mt.column})});var Gt=Bf();Ye("touchend",Jr,N);var de=A(Gt);de.__touchstart=Z,de.__touchmove=gt,de.__click=[jf,J,_],de.__dblclick=[qf,t,Bt,_];var pe=A(de);{let V=F(()=>({rowHeight:u(),headerHeight:l(X)-1})),nt=F(()=>[...l(xt)]);Lf(pe,{init:rt,get sizes(){return l(V)},rowStyle:mt=>mt.$reorder?"wx-reorder-task":"",columnStyle:mt=>`wx-text-${mt.align} ${mt.id==="add-task"?"wx-action":""}`,get data(){return l(q)},get columns(){return l(zt)},get selectedRows(){return l(nt)},get sortMarks(){return l($t)}})}I(de),Ut(de,V=>G(_t,V),()=>l(_t)),he(de,(V,nt)=>xa==null?void 0:xa(V,nt),()=>({start:et,touchStart:N,end:St,move:Ht,getTask:_.getTask})),I(Gt),Ut(Gt,V=>G(Lt,V),()=>l(Lt)),L(()=>{bt(Gt,`flex: 0 0 ${l(Et)??""};`),bt(de,l(Ot))}),ln(Gt,"clientWidth",V=>G(It,V)),k(n,Gt),ht(),g()}dt(["touchstart","touchmove","click","dblclick"]);var Uf=H("<div></div>");function Xf(n,t){ft(t,!0);const e=()=>ct(c,"$cellWidth",r),a=()=>ct(d,"$cellHeight",r),[r,i]=ge(),o=E(t,"borders",3,""),s=At("gantt-store"),{cellWidth:c,cellHeight:d}=s.getReactiveState();let u,f=lt("#e4e4e4");te(()=>{if(typeof getComputedStyle<"u"){const h=getComputedStyle(u).getPropertyValue("--wx-gantt-border");G(f,h?h.substring(h.indexOf("#")):"#1d1e261a",!0)}});var g=Uf();Ut(g,h=>u=h,()=>u),L(h=>bt(g,`width:100%; height:100%; background:url(${h??""}); position: absolute;`),[()=>od(e(),a(),l(f),o())]),k(n,g),ht(),i()}function Gf(n,t){if(n.button!==0)return;const e=xe(n);e&&t(e,n)}function Qf(n,t){t(n,n)}function Kf(n,t,e){if(!t.readonly){const a=On(n.target);a&&!n.target.classList.contains("wx-link")&&e.exec("show-editor",{id:a})}}var Jf=H('<div><div class="wx-inner svelte-s05ouj"></div></div>'),Zf=H('<div class="wx-progress-wrapper svelte-s05ouj"><div class="wx-progress-percent svelte-s05ouj"></div></div>'),$f=H('<div class="wx-progress-marker svelte-s05ouj"> </div>'),th=H('<div class="wx-content svelte-s05ouj"> </div>'),eh=H("<!> <!> <!>",1),nh=H('<div class="wx-text-out svelte-s05ouj"> </div>'),ah=H('<div class="wx-content svelte-s05ouj"></div> <!>',1),rh=H('<div><div class="wx-inner svelte-s05ouj"></div></div>'),ih=H("<div><!> <!> <!></div>"),oh=H("<div></div>"),sh=H("<!> <!>",1),lh=H('<div class="wx-bars svelte-s05ouj"></div>');function ch(n,t){ft(t,!0);const e=()=>ct(g,"$rTasks",d),a=()=>ct(m,"$area",d),r=()=>ct(w,"$scales",d),i=()=>ct(h,"$rLinks",d),o=()=>ct(v,"$taskTypes",d),s=()=>ct(_,"$selected",d),c=()=>ct(x,"$baselines",d),[d,u]=ge(),f=At("gantt-store"),{_tasks:g,_links:h,area:m,_scales:w,taskTypes:v,baselines:x,_selected:_,_scrollTask:b}=f.getReactiveState();let p=F(()=>e().slice(a().start,a().end).map(Y=>({...Y}))),M=F(()=>r().lengthUnitWidth),y=!1,D=lt(void 0),C=lt(null),S=null,W=lt(void 0),P;function T(Y){const q=xe(Y);q&&(P=setTimeout(()=>{G(W,!0),j(q,Y.touches[0])},300))}function j(Y,q){const{clientX:wt}=q,$=Tn(Y),yt=f.getTask($),qt=q.target.classList;if(!t.readonly){if(qt.contains("wx-progress-marker")){const{progress:Bt}=f.getTask($);S={id:$,x:wt,progress:Bt,dx:0,node:Y,marker:q.target},q.target.classList.add("wx-progress-in-drag")}else{const Bt=R(Y,q,yt)||"move";G(C,{id:$,mode:Bt,x:wt,dx:0,l:yt.$x,w:yt.$w},!0)}Ct()}}function R(Y,q,wt){if(wt||(wt=f.getTask(Tn(Y))),wt.type==="milestone"||wt.type=="summary")return"";const $=Y.getBoundingClientRect(),yt=(q.clientX-$.left)/$.width;let qt=.2/($.width>200?$.width/200:1);return yt<qt?"start":yt>1-qt?"end":""}function U(Y){l(W)?(Y.preventDefault(),J(Y,Y.touches[0])):P&&(clearTimeout(P),P=null)}function J(Y,q){const{clientX:wt}=q;if(!t.readonly)if(S){const{node:$,x:yt,id:qt}=S,Bt=S.dx=wt-yt,$t=Math.round(Bt/$.offsetWidth*100);let zt=S.progress+$t;S.value=zt=Math.min(Math.max(0,zt),100),f.exec("update-task",{id:qt,task:{progress:zt},inProgress:!0})}else if(l(C)){const{mode:$,l:yt,w:qt,x:Bt,id:$t,start:zt}=l(C),Vt=wt-Bt;if(!zt&&Math.abs(Vt)<20||$==="start"&&qt-Vt<l(M)||$==="end"&&qt+Vt<l(M)||$=="move"&&(Vt<0&&yt+Vt<0||Vt>0&&yt+qt+Vt>l(X)))return;l(C).dx=Vt;let ce,Gt;$==="start"?(ce=yt+Vt,Gt=qt-Vt):$==="end"?(ce=yt,Gt=qt+Vt):$==="move"&&(ce=yt+Vt,Gt=qt);let de={id:$t,width:Gt,left:ce,inProgress:!0};f.exec("drag-task",de);const pe=f.getTask($t);if(!l(C).start&&($=="move"&&pe.$x==yt||$!="move"&&pe.$w==qt))return y=!0,gt();l(C).start=!0}else{const $=xe(Y);if($){const yt=R($,q);$.style.cursor=yt&&!t.readonly?"col-resize":"pointer"}}}function N(){gt()}function Z(){G(W,null),P&&(clearTimeout(P),P=null),gt()}function gt(){if(S){const{dx:Y,id:q,marker:wt,value:$}=S;S=null,typeof $<"u"&&Y&&f.exec("update-task",{id:q,task:{progress:$}}),wt.classList.remove("wx-progress-in-drag"),y=!0,Q()}else if(l(C)){const{id:Y,mode:q,dx:wt,l:$,w:yt,start:qt}=l(C);if(G(C,null),qt){const Bt=Math.round(wt/l(M));if(!Bt)f.exec("drag-task",{id:Y,width:yt,left:$,inProgress:!1});else{let $t={},zt=f.getTask(Y);q=="move"?($t.start=zt.start,$t.end=zt.end):$t[q]=zt[q],f.exec("update-task",{id:Y,task:$t,diff:Bt})}y=!0}Q()}}function Ct(){document.body.style.userSelect="none"}function Q(){document.body.style.userSelect=""}function et(Y){if(y){y=!1;return}const q=On(Y.target);if(q){const wt=Y.target.classList;if(wt.contains("wx-link")){const $=wt.contains("wx-left");if(!l(D)){G(D,{id:q,start:$},!0);return}l(D).id!==q&&!Pt(q,$)&&f.exec("add-link",{link:{source:l(D).id,target:q,type:Lt(l(D).start,$)}})}else f.exec("select-task",{id:q,toggle:Y.ctrlKey||Y.metaKey,range:Y.shiftKey})}Zt()}function St(Y){return`left:${Y.$x}px;top:${Y.$y}px;width:${Y.$w}px;height:${Y.$h}px;`}function Ht(Y){return`left:${Y.$x_base}px;top:${Y.$y_base}px;width:${Y.$w_base}px;height:${Y.$h_base}px;`}function It(Y){if(l(W)||P)return Y.preventDefault(),!1}const _t=["e2s","s2s","e2e","s2e"];function Lt(Y,q){return _t[(Y?1:0)+(q?0:2)]}function Pt(Y,q){const wt=l(D).id,$=l(D).start;return Y===wt?!0:i().find(yt=>yt.target==Y&&yt.source==wt&&yt.type===Lt($,q))}function Zt(){l(D)&&G(D,null)}function rt(Y){let q=o().some(wt=>Y===wt.id)?Y:"task";return q!=="task"&&q!=="milestone"&&q!=="summary"&&(q=`task ${q}`),q}function Wt(Y){f.exec(Y.action,Y.data)}let X=lt(0),it=lt(void 0);const Et=F(()=>s().length&&l(it)&&l(it).contains(document.activeElement)),Ot=F(()=>l(Et)&&s()[s().length-1].id);b.subscribe(Y=>{if(l(Et)&&Y){const{id:q}=Y,wt=l(it).querySelector(`.wx-bar[data-id='${q}']`);wt&&wt.focus()}});var xt=lh();Ye("mouseup",Jr,N),xt.__contextmenu=It,xt.__mousedown=[Gf,j],xt.__mousemove=[Qf,J],xt.__touchstart=T,xt.__touchmove=U,xt.__touchend=Z,xt.__click=et,xt.__dblclick=[Kf,t,f],Jt(xt,21,()=>l(p),Y=>Y.id,(Y,q)=>{var wt=sh(),$=K(wt);{var yt=$t=>{var zt=ih();let Vt;var ce=A(zt);{var Gt=ot=>{var kt=Jf();let Dt;L(Nt=>Dt=vt(kt,1,"wx-link wx-left svelte-s05ouj",null,Dt,Nt),[()=>({"wx-visible":l(D),"wx-target":!l(D)||!Pt(l(q).id,!0),"wx-selected":l(D)&&l(D).id===l(q).id&&l(D).start})]),k(ot,kt)};z(ce,ot=>{t.readonly||ot(Gt)})}var de=tt(ce,2);{var pe=ot=>{var kt=eh(),Dt=K(kt);{var Nt=Qt=>{var jt=Zf(),me=A(jt);I(jt),L(()=>bt(me,`width:${l(q).progress??""}%`)),k(Qt,jt)};z(Dt,Qt=>{l(q).progress&&Qt(Nt)})}var re=tt(Dt,2);{var fe=Qt=>{var jt=$f(),me=A(jt,!0);I(jt),L(()=>{bt(jt,`left:calc(${l(q).progress??""}% - 10px);`),ut(me,l(q).progress)}),k(Qt,jt)};z(re,Qt=>{t.readonly||Qt(fe)})}var Ce=tt(re,2);{var ie=Qt=>{const jt=F(()=>t.taskTemplate);var me=at(),Ln=K(me);le(Ln,()=>l(jt),(la,We)=>{We(la,{get data(){return l(q)},get api(){return f},onaction:Wt})}),k(Qt,me)},Je=Qt=>{var jt=th(),me=A(jt,!0);I(jt),L(()=>ut(me,l(q).text||"")),k(Qt,jt)};z(Ce,Qt=>{t.taskTemplate?Qt(ie):Qt(Je,!1)})}k(ot,kt)},V=ot=>{var kt=ah(),Dt=tt(K(kt),2);{var Nt=fe=>{const Ce=F(()=>t.taskTemplate);var ie=at(),Je=K(ie);le(Je,()=>l(Ce),(Qt,jt)=>{jt(Qt,{get data(){return l(q)},get api(){return f},onaction:Wt})}),k(fe,ie)},re=fe=>{var Ce=nh(),ie=A(Ce,!0);I(Ce),L(()=>ut(ie,l(q).text)),k(fe,Ce)};z(Dt,fe=>{t.taskTemplate?fe(Nt):fe(re,!1)})}k(ot,kt)};z(de,ot=>{l(q).type!=="milestone"?ot(pe):ot(V,!1)})}var nt=tt(de,2);{var mt=ot=>{var kt=rh();let Dt;L(Nt=>Dt=vt(kt,1,"wx-link wx-right svelte-s05ouj",null,Dt,Nt),[()=>({"wx-visible":l(D),"wx-target":!l(D)||!Pt(l(q).id,!1),"wx-selected":l(D)&&l(D).id===l(q).id&&!l(D).start})]),k(ot,kt)};z(nt,ot=>{t.readonly||ot(mt)})}I(zt),L((ot,kt,Dt)=>{Vt=vt(zt,1,`wx-bar wx-${ot??""}`,"svelte-s05ouj",Vt,kt),bt(zt,Dt),st(zt,"data-tooltip-id",l(q).id),st(zt,"data-id",l(q).id),st(zt,"tabindex",l(Ot)===l(q).id?"0":"-1")},[()=>rt(l(q).type),()=>({"wx-touch":l(W)&&l(C)&&l(q).id==l(C).id,"wx-selected":l(D)&&l(D).id===l(q).id,"wx-reorder-task":l(q).$reorder}),()=>St(l(q))]),k($t,zt)};z($,$t=>{l(q).$skip||$t(yt)})}var qt=tt($,2);{var Bt=$t=>{var zt=oh();let Vt;L((ce,Gt)=>{Vt=vt(zt,1,"wx-baseline svelte-s05ouj",null,Vt,ce),bt(zt,Gt)},[()=>({"wx-milestone":l(q).type==="milestone"}),()=>Ht(l(q))]),k($t,zt)};z(qt,$t=>{c()&&!l(q).$skip_baseline&&$t(Bt)})}k(Y,wt)}),I(xt),Ut(xt,Y=>G(it,Y),()=>l(it)),L(()=>bt(xt,`line-height: ${(l(p).length?l(p)[0].$h:0)??""}px`)),Ye("dragstart",xt,()=>!1),ln(xt,"offsetWidth",Y=>G(X,Y)),k(n,xt),ht(),u()}dt(["contextmenu","mousedown","mousemove","touchstart","touchmove","touchend","click","dblclick"]);var dh=Zr('<polyline class="wx-line svelte-11h8y6i"></polyline>'),uh=Zr('<svg class="wx-links svelte-11h8y6i"></svg>');function fh(n,t){ft(t,!1);const e=()=>ct(o,"$links",a),[a,r]=ge(),o=At("gantt-store").getReactiveState()._links;Na();var s=uh();Jt(s,5,e,c=>c.id,(c,d)=>{var u=dh();L(()=>st(u,"points",l(d).$p)),k(c,u)}),I(s),k(n,s),ht(),r()}var hh=H('<div><div class="wx-content svelte-1k3mrll"> </div></div>'),gh=H('<div class="wx-markers svelte-1k3mrll"></div>'),mh=H("<div></div>"),vh=H('<div class="wx-gantt-holidays svelte-1k3mrll" style="height:100%;"></div>'),wh=H('<div class="wx-selected svelte-1k3mrll"></div>'),yh=H('<div class="wx-chart svelte-1k3mrll" tabindex="-1"><!> <div class="wx-area svelte-1k3mrll"><!> <!> <!> <!> <!></div></div>');function xh(n,t){ft(t,!0);const e=()=>ct(g,"$selected",d),a=()=>ct(v,"$cellHeight",d),r=()=>ct(b,"$context",d),i=()=>ct(w,"$cellWidth",d),o=()=>ct(_,"$zoom",d),s=()=>ct(x,"$scales",d),c=()=>ct(p,"$markers",d),[d,u]=ge(),f=At("gantt-store"),{_selected:g,scrollLeft:h,scrollTop:m,cellWidth:w,cellHeight:v,_scales:x,zoom:_,context:b,_markers:p,_scrollTask:M}=f.getReactiveState();let y=lt(void 0),D=lt(void 0),C=lt(void 0),S=lt(void 0),W=1;h.subscribe(X=>G(y,X,!0)),m.subscribe(X=>G(D,X,!0));const P=F(()=>{const X=[];return e().length&&a()&&e().forEach(it=>{X.push([`height: ${a()}px;top: ${it.$y-3}px`])}),X});te(()=>{l(C),U()});const T=F(()=>Math.max(l(C),t.fullHeight));te(()=>{l(S).scrollTop=l(D),l(S).scrollLeft=l(y),l(D)!=l(S).scrollTop&&R({top:!0}),l(y)!=l(S).scrollLeft&&R({left:!0})});function j(){R({left:!0,top:!0}),U()}function R(X){const it={};X.top&&(it.top=l(S).scrollTop),X.left&&(it.left=l(S).scrollLeft),f.exec("scroll-chart",it)}function U(){const X=l(C)||0,it=Math.ceil(X/a())+1,Et=Math.floor((l(S).scrollTop||0)/a()),Ot=Math.max(0,Et-W),xt=Et+it+W,Y=Ot*a();f.exec("render-data",{start:Ot,end:xt,from:Y})}function J(X){if(r()||!X)return;const{id:it,mode:Et}=X;if(Et.toString().indexOf("x")<0)return;const{clientWidth:Ot}=l(S),xt=f.getTask(it);if(xt.$x+xt.$w<l(y))G(y,xt.$x-i());else if(xt.$x>=Ot+l(y)){const Y=Ot<xt.$w?i():xt.$w;G(y,xt.$x-Ot+Y)}}M.subscribe(X=>J(X));function N(X){if(o()&&(X.ctrlKey||X.metaKey)){X.preventDefault();const it=-Math.sign(X.deltaY),Et=X.clientX-l(S).getBoundingClientRect().left;f.exec("zoom-scale",{dir:it,offset:Et})}}function Z(X){const it=t.highlightTime(X.date,X.unit);return it?{css:it,width:X.width}:null}const gt=F(()=>(s().minUnit==="hour"||s().minUnit==="day")&&t.highlightTime?s().rows[s().rows.length-1].cells.map(Z):null);function Ct(X){X.eventSource="chart",f.exec("hotkey",X)}var Q=yh(),et=A(Q);{var St=X=>{var it=gh();Jt(it,5,c,be,(Et,Ot)=>{var xt=hh(),Y=A(xt),q=A(Y,!0);I(Y),I(xt),L(()=>{vt(xt,1,`wx-marker ${(l(Ot).css||"wx-default")??""}`,"svelte-1k3mrll"),bt(xt,`left:${l(Ot).left??""}px`),ut(q,l(Ot).text)}),k(Et,xt)}),I(it),L(()=>bt(it,`height:${l(T)??""}px;`)),k(X,it)};z(et,X=>{c().length&&X(St)})}var Ht=tt(et,2),It=A(Ht);{var _t=X=>{var it=vh();Jt(it,21,()=>l(gt),be,(Et,Ot,xt)=>{var Y=at(),q=K(Y);{var wt=$=>{var yt=mh();L(()=>{vt(yt,1,Hn(l(Ot).css),"svelte-1k3mrll"),bt(yt,`width: ${l(Ot).width??""}px; left:${xt*l(Ot).width}px`)}),k($,yt)};z(q,$=>{l(Ot)&&$(wt)})}k(Et,Y)}),I(it),k(X,it)};z(It,X=>{l(gt)&&X(_t)})}var Lt=tt(It,2);Xf(Lt,{get borders(){return t.cellBorders}});var Pt=tt(Lt,2);{var Zt=X=>{var it=at(),Et=K(it);Jt(Et,3,e,Ot=>Ot.id,(Ot,xt,Y)=>{var q=at(),wt=K(q);{var $=yt=>{var qt=wh();L(()=>{st(qt,"data-id",l(xt).id),bt(qt,l(P)[l(Y)])}),k(yt,qt)};z(wt,yt=>{l(xt).$y&&yt($)})}k(Ot,q)}),k(X,it)};z(Pt,X=>{e().length&&X(Zt)})}var rt=tt(Pt,2);fh(rt,{});var Wt=tt(rt,2);ch(Wt,{get readonly(){return t.readonly},get taskTemplate(){return t.taskTemplate}}),I(Ht),I(Q),Ut(Q,X=>G(S,X),()=>l(S)),Qr(()=>ln(Q,"clientHeight",X=>G(C,X))),he(Q,(X,it)=>Oe==null?void 0:Oe(X,it),()=>({keys:{arrowup:!0,arrowdown:!0},exec:X=>Ct(X)})),L(()=>bt(Ht,`width:${t.fullWidth??""}px;height:${l(T)??""}px`)),Ye("scroll",Q,j),Ye("wheel",Q,N),k(n,Q),ht(),u()}function _h(n,t,e){t.compactMode?e(e()==="chart"?"grid":"chart"):e(e()==="all"?"chart":"all")}function bh(n,t,e){t.compactMode?e(e()==="grid"?"chart":"grid"):e(e()==="all"?"grid":"all")}var kh=H('<div><div class="wx-button-expand-box svelte-dmdpua"><div class="wx-button-expand-content wx-button-expand-left svelte-dmdpua"><i class="wxi-menu-left svelte-dmdpua"></i></div> <div class="wx-button-expand-content wx-button-expand-right svelte-dmdpua"><i class="wxi-menu-right svelte-dmdpua"></i></div></div> <div class="wx-resizer-line"></div></div>');function ph(n,t){ft(t,!0);let e=E(t,"position",3,"after"),a=E(t,"size",3,4),r=E(t,"dir",3,"x"),i=E(t,"value",15,0),o=E(t,"minValue",3,0),s=E(t,"maxValue",3,0),c=E(t,"display",15,"all");function d(P){let T=0;e()=="center"?T=a()/2:e()=="before"&&(T=a());const j={size:[a()+"px","auto"],p:[P-T+"px","0px"],p2:["auto","0px"]};if(r()!="x")for(let R in j)j[R]=j[R].reverse();return j}let u=0,f,g=lt(!1);function h(P){return r()=="x"?P.clientX:P.clientY}function m(P){u=h(P),f=i(),G(g,!0),document.body.style.cursor=l(b),document.body.style.userSelect="none",window.addEventListener("mousemove",v),window.addEventListener("mouseup",x)}let w;function v(P){const T=f+h(P)-u;(!o()||o()<=T)&&(!s()||s()>=T)&&(i(T),w&&clearTimeout(w),w=setTimeout(()=>t.onmove&&t.onmove(i()),100))}function x(){document.body.style.cursor="",document.body.style.userSelect="",G(g,!1),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",x)}const _=F(()=>d(i())),b=F(()=>c()!=="all"?"auto":r()=="x"?"ew-resize":"ns-resize");var p=kh();let M;p.__mousedown=m;var y=A(p),D=A(y),C=A(D);C.__click=[_h,t,c],I(D);var S=tt(D,2),W=A(S);W.__click=[bh,t,c],I(S),I(y),Ke(2),I(p),L(P=>{M=vt(p,1,`wx-resizer wx-resizer-${r()??""} wx-resizer-display-${c()??""}`,"svelte-dmdpua",M,P),bt(p,`width:${l(_).size[0]??""}; height: ${l(_).size[1]??""}; cursor:${l(b)??""};`)},[()=>({"wx-resizer-active":l(g)})]),k(n,p),ht()}dt(["mousedown","click"]);const Sh=650;function Mh(n){let t;function e(){t=new ResizeObserver(r=>{for(let i of r)if(i.target===document.body){let o=i.contentRect.width<=Sh;n(o)}}),t.observe(document.body)}function a(){t&&(t.disconnect(),t=null)}return{observe:e,disconnect:a}}var Dh=H("<!> <!>",1),Th=H('<div class="wx-gantt svelte-1xvkgdq"><div class="wx-pseudo-rows svelte-1xvkgdq"><div class="wx-stuck svelte-1xvkgdq"><div tabindex="0" class="wx-layout svelte-1xvkgdq"><!> <div class="wx-content svelte-1xvkgdq"><!> <!></div></div></div></div></div>');function Ch(n,t){ft(t,!0);const e=()=>ct(m,"$rColumns",s),a=()=>ct(g,"$rScales",s),r=()=>ct(f,"$rTasks",s),i=()=>ct(h,"$rCellHeight",s),o=()=>ct(w,"$scrollTop",s),[s,c]=ge();let d=E(t,"tableAPI",15);const u=At("gantt-store"),{_tasks:f,_scales:g,cellHeight:h,columns:m,scrollTop:w,_scrollTask:v}=u.getReactiveState();let x=lt(!1),_=lt(0),b=lt(void 0),p=lt(void 0),M=lt(void 0),y=lt(void 0),D=lt("all");te(()=>{const rt=Mh(S);return rt.observe(),()=>{rt.disconnect()}});let C=null;function S(rt){rt!=l(x)&&(G(x,rt,!0),l(x)?(C=l(D),l(D)=="all"&&G(D,"grid")):(!C||C=="all")&&G(D,"all"))}const W=F(()=>{var Wt;let rt;return e().every(X=>X.width&&!X.flexgrow)?rt=e().reduce((X,it)=>X+parseInt(it.width),0):l(x)&&l(D)==="chart"?rt=parseInt((Wt=e().find(X=>X.id==="action"))==null?void 0:Wt.width)||50:rt=440,rt});te(()=>{G(_,l(W),!0)});const P=F(()=>l(b)-l(M)),T=F(()=>a().width),j=F(()=>r().length*i()),R=F(()=>a().height+l(j)+l(P)),U=F(()=>l(_)+l(T));te(()=>{let rt;return l(y)&&(rt=new ResizeObserver(J),rt.observe(l(y))),()=>{rt&&rt.disconnect()}});function J(){Kr().then(()=>{if(l(b)>l(U)){const rt=l(b)-l(_);u.exec("expand-scale",{minWidth:rt})}})}let N=lt(void 0);function Z(){l(N)&&o()!==l(N).scrollTop&&(l(N).scrollTop=o())}te(()=>{o(),Z()});function gt(){u.exec("scroll-chart",{top:l(N).scrollTop})}function Ct(rt){if(!rt||!l(N))return;const{id:Wt}=rt,X=r().findIndex(it=>it.id===Wt);if(X>-1){const it=l(p)-a().height,Et=X*i(),Ot=l(N).scrollTop;let xt=null;Et<Ot?xt=Et:Et+i()>Ot+it&&(xt=Et-it+i()+l(P)),xt!==null&&u.exec("scroll-chart",{top:Math.max(xt,0)})}}v.subscribe(Ct);var Q=Th(),et=A(Q),St=A(et),Ht=A(St),It=A(Ht);{var _t=rt=>{var Wt=Dh(),X=K(Wt);Vf(X,{get compactMode(){return l(x)},get columnWidth(){return l(W)},get width(){return l(_)},get readonly(){return t.readonly},get fullHeight(){return l(j)},get display(){return l(D)},set display(Et){G(D,Et,!0)},get tableAPI(){return d()},set tableAPI(Et){d(Et)}});var it=tt(X,2);ph(it,{get compactMode(){return l(x)},minValue:"50",maxValue:"800",get value(){return l(_)},set value(Et){G(_,Et,!0)},get display(){return l(D)},set display(Et){G(D,Et,!0)}}),k(rt,Wt)};z(It,rt=>{e().length&&rt(_t)})}var Lt=tt(It,2),Pt=A(Lt);$d(Pt,{get highlightTime(){return t.highlightTime}});var Zt=tt(Pt,2);xh(Zt,{get readonly(){return t.readonly},get fullWidth(){return l(T)},get fullHeight(){return l(j)},get taskTemplate(){return t.taskTemplate},get cellBorders(){return t.cellBorders},get highlightTime(){return t.highlightTime}}),I(Lt),Ut(Lt,rt=>G(y,rt),()=>l(y)),I(Ht),he(Ht,(rt,Wt)=>Oe==null?void 0:Oe(rt,Wt),()=>({keys:{"ctrl+c":!0,"ctrl+v":!0,"ctrl+x":!0,"ctrl+d":!0,backspace:!0},exec:rt=>{rt.isInput||u.exec("hotkey",rt)}})),I(St),I(et),I(Q),Ut(Q,rt=>G(N,rt),()=>l(N)),L(()=>{bt(et,`height:${l(R)??""}px;width:100%;`),bt(St,`height:${l(p)??""}px;width:${l(M)??""}px;`)}),Ye("scroll",Q,gt),ln(et,"offsetWidth",rt=>G(M,rt)),ln(Q,"offsetHeight",rt=>G(p,rt)),ln(Q,"offsetWidth",rt=>G(b,rt)),k(n,Q),ht(),c()}function Wh(n,t){ft(t,!0);let e=E(t,"taskTemplate",3,null),a=E(t,"markers",19,()=>[]),r=E(t,"taskTypes",3,gd),i=E(t,"tasks",19,()=>[]),o=E(t,"selected",19,()=>[]),s=E(t,"activeTask",3,null),c=E(t,"links",19,()=>[]),d=E(t,"scales",19,()=>[{unit:"month",step:1,format:"MMMM yyy"},{unit:"day",step:1,format:"d"}]),u=E(t,"columns",3,$c),f=E(t,"start",3,null),g=E(t,"end",3,null),h=E(t,"lengthUnit",3,"day"),m=E(t,"durationUnit",3,"day"),w=E(t,"cellWidth",3,100),v=E(t,"cellHeight",3,38),x=E(t,"scaleHeight",3,36),_=E(t,"readonly",3,!1),b=E(t,"cellBorders",3,"full"),p=E(t,"zoom",3,!1),M=E(t,"baselines",3,!1),y=E(t,"highlightTime",3,null),D=E(t,"init",3,null),C=E(t,"autoScale",3,!0),S=E(t,"unscheduledTasks",3,!1),W=Ya(t,["$$slots","$$events","$$legacy","taskTemplate","markers","taskTypes","tasks","selected","activeTask","links","scales","columns","start","end","lengthUnit","durationUnit","cellWidth","cellHeight","scaleHeight","readonly","cellBorders","zoom","baselines","highlightTime","init","autoScale","unscheduledTasks"]);const P=new id($r);let T=P.in;const j=/-/g;let R=new di((Wt,X)=>{const it="on"+Wt.replace(j,"");W[it]&&W[it](X)});T.setNext(R);let U=lt(void 0);const J=P.getState.bind(P),N=P.getReactive.bind(P),Z=()=>({data:P}),gt=T.exec,Ct=Wt=>R=R.setNext(Wt),Q=T.intercept.bind(T),et=T.on.bind(T),St=T.detach.bind(T),Ht=Wt=>P.getTask(Wt),It=()=>P.serialize(),_t=Wt=>Wt?new Promise(X=>setTimeout(()=>X(l(U)),1)):l(U),Lt={getState:J,getReactiveState:N,getStores:Z,exec:gt,setNext:Ct,intercept:Q,on:et,detach:St,getTable:_t,getTask:Ht,serialize:It};ta("gantt-store",{getReactiveState:P.getReactive.bind(P),exec:T.exec.bind(T),getTask:P.getTask.bind(P)});let Pt=!0;const Zt=()=>{P.init({tasks:i(),links:c(),start:f(),columns:u(),end:g(),lengthUnit:h(),cellWidth:w(),cellHeight:v(),scaleHeight:x(),scales:d(),taskTypes:r(),zoom:p(),selected:o(),activeTask:s(),baselines:M(),autoScale:C(),unscheduledTasks:S(),markers:a(),durationUnit:m()}),Pt&&D()&&(D()(Lt),Pt=!1)};Zt(),te(Zt);var rt={getState:J,getReactiveState:N,getStores:Z,exec:gt,setNext:Ct,intercept:Q,on:et,detach:St,getTask:Ht,serialize:It,getTable:_t};return Ba(n,{get words(){return Xs},optional:!0,children:(Wt,X)=>{Ch(Wt,{get taskTemplate(){return e()},get readonly(){return _()},get cellBorders(){return b()},get highlightTime(){return y()},get tableAPI(){return l(U)},set tableAPI(it){G(U,it,!0)}})},$$slots:{default:!0}}),ht(rt)}var Ph=H("<i></i>"),Eh=H("<button><!></button>");function Hh(n,t){let e=E(t,"appearance",3,"primary"),a=E(t,"icon",3,"");var r=Eh();r.__click=function(...s){var c;(c=t.onclick)==null||c.apply(this,s)};var i=A(r);{var o=s=>{var c=Ph();L(()=>vt(c,1,`wx-button-icon ${a()??""}`,"svelte-aofjyk")),k(s,c)};z(i,s=>{a()&&s(o)})}I(r),L(()=>vt(r,1,`wx-button ${e()??""}`,"svelte-aofjyk")),k(n,r)}dt(["click"]);class Oh{constructor(){this.store=new Map}limit(t){this._scope=t}isActive(){return!this._scope||this._scope()}add(t,e){this.store.set(t.toLowerCase().replace(/[ ]/g,""),e)}}const un=[],Ih={subscribe:n=>{Rh();const t=new Oh;return un.push(t),n(t),()=>{const e=un.findIndex(a=>a===t);e>=0&&un.splice(e,1)}}};var Ar=!1;function Rh(){Ar||(Ar=!0,document.addEventListener("keydown",n=>{if(un.length&&(n.ctrlKey||n.altKey||n.metaKey||n.shiftKey||n.key.length>1||n.key===" ")){const t=[];n.ctrlKey&&t.push("ctrl"),n.altKey&&t.push("alt"),n.metaKey&&t.push("meta"),n.shiftKey&&t.push("shift");let e=n.key.toLocaleLowerCase();n.key===" "&&(e="space"),t.push(e);const a=t.join("+");for(let r=un.length-1;r>=0;r--){const i=un[r],o=i.store.get(a)||i.store.get(e),s=n.target.tagName;if(o&&s!=="INPUT"&&s!=="TEXTAREA"&&i.isActive()){o(n),n.preventDefault();return}}}}))}var Lh=H('<div tabindex="0" class="wx-fullscreen svelte-sywovx"><!> <div class="wx-fullscreen-icon svelte-sywovx"><!></div></div>');function Nh(n,t){ft(t,!0);const e=()=>ct(Ih,"$hotkeys",a),[a,r]=ge();let i=E(t,"hotkey",3,null);te(()=>{i()&&e().add(i(),c)});let o=null,s=lt(!1);function c(){let m=!l(s);m&&o?o.requestFullscreen():l(s)&&document.exitFullscreen(),G(s,m)}const d=()=>{G(s,document.fullscreenElement===o)};te(()=>(document.addEventListener("fullscreenchange",d),()=>{document.removeEventListener("fullscreenchange",d)}));var u=Lh(),f=A(u);we(f,()=>t.children??mn);var g=tt(f,2),h=A(g);{let m=F(()=>l(s)?"collapse":"expand");Hh(h,{appearance:"transparent",get icon(){return`wxi-${l(m)??""}`},onclick:()=>c()})}I(g),I(u),Ut(u,m=>o=m,()=>o),k(n,u),ht(),r()}const Fh={};function wn(n,t){Fh[n]=t}var Yh=H("<div>&nbsp;</div>");function Ah(n,t){let e=E(t,"menu",3,!1);var a=Yh();L(()=>vt(a,1,`wx-separator${e()?"-menu":""}`,"svelte-1r0dt0v")),k(n,a)}var zh=H('<div class="wx-spacer svelte-i5gjts"></div>');function jh(n){var t=zh();k(n,t)}dt(["click"]);var qh=H('<div class="wx-item svelte-1s3wiw0"><i></i> </div>');function Bh(n,t){let e=E(t,"text",3,"");var a=at(),r=K(a);{var i=s=>{var c=qh();c.__click=function(...f){var g;(g=t.onclick)==null||g.apply(this,f)};var d=A(c),u=tt(d);I(c),L(()=>{vt(d,1,`${(t.icon||"wxi-empty")??""} ${(t.css||"")??""}`,"svelte-1s3wiw0"),ut(u,` ${e()??""}`)}),k(s,c)},o=s=>{ri(s,{get icon(){return t.icon},get type(){return t.type},get css(){return t.css},get text(){return e()},get disabled(){return t.disabled},get onclick(){return t.onclick}})};z(r,s=>{t.menu?s(i):s(o,!1)})}k(n,a)}dt(["click"]);var Vh=H('<div class="wx-label svelte-hf53ue"><!></div>'),Uh=H('<div class="wx-label svelte-hf53ue"> </div>');function Xh(n,t){var e=at(),a=K(e);{var r=o=>{var s=Vh(),c=A(s);we(c,()=>t.children),I(s),k(o,s)},i=o=>{var s=Uh(),c=A(s,!0);I(s),L(()=>ut(c,t.value||t.text)),k(o,s)};z(a,o=>{t.children?o(r):o(i,!1)})}k(n,e)}var Gh=H("<i></i>"),Qh=H('<div class="wx-item svelte-1ajar0v"><!> </div>');function Kh(n,t){var e=at(),a=K(e);{var r=o=>{var s=Qh();s.__click=function(...f){var g;(g=t.onclick)==null||g.apply(this,f)};var c=A(s);{var d=f=>{var g=Gh();L(()=>vt(g,1,`${t.icon??""} ${t.css??""}`,"svelte-1ajar0v")),k(f,g)};z(c,f=>{t.icon&&f(d)})}var u=tt(c);I(s),L(()=>ut(u,` ${t.text??""}`)),k(o,s)},i=o=>{ri(o,{get icon(){return t.icon},get type(){return t.type},get css(){return t.css},get title(){return t.text},get disabled(){return t.disabled},get onclick(){return t.onclick}})};z(a,o=>{t.menu?o(r):o(i,!1)})}k(n,e)}dt(["click"]);function Jh(n,t,e){t.onclick&&t.onclick({id:e()})}var Zh=H("<i></i>"),$h=H("<div><!> </div>");function tg(n,t){ft(t,!0);let e=E(t,"id",3,""),a=E(t,"text",3,""),r=E(t,"css",3,""),i=E(t,"icon",3,"");var o=$h();o.__click=[Jh,t,e];var s=A(o);{var c=u=>{var f=Zh();L(()=>vt(f,1,Hn(i()),"svelte-v98dh1")),k(u,f)};z(s,u=>{i()&&u(c)})}var d=tt(s);I(o),L(()=>{vt(o,1,`wx-label ${r()??""}`,"svelte-v98dh1"),ut(d,` ${a()??""}`)}),k(n,o),ht()}dt(["click"]);wn("button",Bh);wn("separator",Ah);wn("spacer",jh);wn("label",Xh);wn("item",tg);wn("icon",Kh);dt(["contextmenu"]);const eg={};function Rn(n,t){eg[n]=t}function ng(n,t){ft(t,!0);const e=At("wx-i18n").getGroup("editor");let a=F(()=>{let s=t.value;if(typeof t.value=="boolean"&&(s=t.value?e("Yes"):e("No")),t.options){const c=t.options.find(d=>d.id===t.value);c&&(s=c.label)}return s});var r=at(),i=K(r);{var o=s=>{Os(s,{get label(){return t.label},children:(c,d)=>{Ke();var u=ee();L(()=>ut(u,l(a))),k(c,u)},$$slots:{default:!0}})};z(i,s=>{(l(a)||l(a)===0)&&s(o)})}k(n,r),ht()}var ag=(n,t)=>t.onclick&&t.onclick({item:{id:"toggle-section",key:t.activeSection?null:t.key}}),rg=H("<div><h3> </h3> <i></i></div>");function ig(n,t){ft(t,!0);var e=rg();let a;e.__click=[ag,t];var r=A(e),i=A(r,!0);I(r);var o=tt(r,2);I(e),L(s=>{a=vt(e,1,"wx-section svelte-80lbjp",null,a,s),ut(i,t.label),vt(o,1,`wxi-angle-${t.activeSection?"down":"right"} wx-icon`,"svelte-80lbjp")},[()=>({"wx-section-active":t.activeSection})]),k(n,e),ht()}dt(["click"]);Rn("text",li);Rn("textarea",po);Rn("checkbox",Po);Rn("readonly",ng);Rn("section",ig);Aa(Va);dt(["click"]);var og=H('<div class="wx-gantt-tooltip-text svelte-v4t2go"> </div>'),sg=H('<div class="wx-gantt-tooltip"><!></div>'),lg=H('<div class="wx-tooltip-area svelte-v4t2go"><!> <!></div>');function cg(n,t){ft(t,!0);let e,a=lt(ue({})),r=lt(null),i=lt(null),o=lt(ue({}));function s(b){for(;b;){if(b.getAttribute){const p=b.getAttribute("data-tooltip-id"),M=b.getAttribute("data-tooltip-at"),y=b.getAttribute("data-tooltip");if(p||y)return{id:p,tooltip:y,target:b,at:M}}b=b.parentNode}return{id:null,tooltip:null,target:null,at:null}}te(()=>{if(l(i)){const b=l(i).getBoundingClientRect();b.right>=l(a).right&&(l(o).left=l(a).width-b.width-5),b.bottom>=l(a).bottom&&(l(o).top-=b.bottom-l(a).bottom+2)}});let c;const d=300,u=b=>{clearTimeout(c),c=setTimeout(()=>{b()},d)};function f(b){let{id:p,tooltip:M,target:y,at:D}=s(b.target);if(G(o,null),G(r,null),!M)if(p)M=h(p);else{clearTimeout(c);return}u(()=>{p&&G(r,g(m(p)),!0);const C=y.getBoundingClientRect();G(a,e.getBoundingClientRect(),!0);let S,W;D==="left"?(S=C.top+5-l(a).top,W=C.right+5-l(a).left):(S=C.top+C.height-l(a).top,W=b.clientX-l(a).left),G(o,{top:S,left:W,text:M},!0)})}function g(b){var p;return((p=t.api)==null?void 0:p.getTask(m(b)))||null}function h(b){var p;return((p=g(b))==null?void 0:p.text)||""}function m(b){const p=parseInt(b);return isNaN(p)?b:p}var w=lg();w.__mousemove=f;var v=A(w);{var x=b=>{var p=sg(),M=A(p);{var y=C=>{var S=at(),W=K(S);le(W,()=>t.content,(P,T)=>{T(P,{get data(){return l(r)}})}),k(C,S)},D=C=>{var S=at(),W=K(S);{var P=T=>{var j=og(),R=A(j,!0);I(j),L(()=>ut(R,l(o).text)),k(T,j)};z(W,T=>{l(o).text&&T(P)},!0)}k(C,S)};z(M,C=>{t.content?C(y):C(D,!1)})}I(p),Ut(p,C=>G(i,C),()=>l(i)),L(()=>bt(p,`top:${l(o).top??""}px;left:${l(o).left??""}px`)),k(b,p)};z(v,b=>{l(o)&&(l(o).text||t.content)&&b(x)})}var _=tt(v,2);we(_,()=>t.children),I(w),Ut(w,b=>e=b,()=>e),k(n,w),ht()}dt(["mousemove"]);function dg(n,t){let e=E(t,"fonts",3,!0);var a=at(),r=K(a);{var i=s=>{dr(s,{get fonts(){return e()},children:(c,d)=>{var u=at(),f=K(u);we(f,()=>t.children),k(c,u)},$$slots:{default:!0}})},o=s=>{dr(s,{get fonts(){return e()}})};z(r,s=>{t.children?s(i):s(o,!1)})}k(n,a)}function Se(n){const t=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&t==="[object Date]"?new n.constructor(+n):typeof n=="number"||t==="[object Number]"||typeof n=="string"||t==="[object String]"?new Date(n):new Date(NaN)}function Qe(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}const Gi=6048e5,ug=864e5;let fg={};function sa(){return fg}function Pn(n,t){var s,c,d,u;const e=sa(),a=(t==null?void 0:t.weekStartsOn)??((c=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:c.weekStartsOn)??e.weekStartsOn??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,r=Se(n),i=r.getDay(),o=(i<a?7:0)+i-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Jn(n){return Pn(n,{weekStartsOn:1})}function Qi(n){const t=Se(n),e=t.getFullYear(),a=Qe(n,0);a.setFullYear(e+1,0,4),a.setHours(0,0,0,0);const r=Jn(a),i=Qe(n,0);i.setFullYear(e,0,4),i.setHours(0,0,0,0);const o=Jn(i);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function zr(n){const t=Se(n);return t.setHours(0,0,0,0),t}function jr(n){const t=Se(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function hg(n,t){const e=zr(n),a=zr(t),r=+e-jr(e),i=+a-jr(a);return Math.round((r-i)/ug)}function gg(n){const t=Qi(n),e=Qe(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),Jn(e)}function mg(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function vg(n){if(!mg(n)&&typeof n!="number")return!1;const t=Se(n);return!isNaN(Number(t))}function wg(n){const t=Se(n),e=Qe(n,0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}const yg={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xg=(n,t,e)=>{let a;const r=yg[n];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+a:a+" ago":a};function pa(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const _g={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bg={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kg={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pg={date:pa({formats:_g,defaultWidth:"full"}),time:pa({formats:bg,defaultWidth:"full"}),dateTime:pa({formats:kg,defaultWidth:"full"})},Sg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mg=(n,t,e,a)=>Sg[n];function kn(n){return(t,e)=>{const a=e!=null&&e.context?String(e.context):"standalone";let r;if(a==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,s=e!=null&&e.width?String(e.width):o;r=n.formattingValues[s]||n.formattingValues[o]}else{const o=n.defaultWidth,s=e!=null&&e.width?String(e.width):n.defaultWidth;r=n.values[s]||n.values[o]}const i=n.argumentCallback?n.argumentCallback(t):t;return r[i]}}const Dg={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Tg={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cg={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wg={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Eg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hg=(n,t)=>{const e=Number(n),a=e%100;if(a>20||a<10)switch(a%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Og={ordinalNumber:Hg,era:kn({values:Dg,defaultWidth:"wide"}),quarter:kn({values:Tg,defaultWidth:"wide",argumentCallback:n=>n-1}),month:kn({values:Cg,defaultWidth:"wide"}),day:kn({values:Wg,defaultWidth:"wide"}),dayPeriod:kn({values:Pg,defaultWidth:"wide",formattingValues:Eg,defaultFormattingWidth:"wide"})};function pn(n){return(t,e={})=>{const a=e.width,r=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],i=t.match(r);if(!i)return null;const o=i[0],s=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(s)?Rg(s,f=>f.test(o)):Ig(s,f=>f.test(o));let d;d=n.valueCallback?n.valueCallback(c):c,d=e.valueCallback?e.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function Ig(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Rg(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function Lg(n){return(t,e={})=>{const a=t.match(n.matchPattern);if(!a)return null;const r=a[0],i=t.match(n.parsePattern);if(!i)return null;let o=n.valueCallback?n.valueCallback(i[0]):i[0];o=e.valueCallback?e.valueCallback(o):o;const s=t.slice(r.length);return{value:o,rest:s}}}const Ng=/^(\d+)(th|st|nd|rd)?/i,Fg=/\d+/i,Yg={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ag={any:[/^b/i,/^(a|c)/i]},zg={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jg={any:[/1/i,/2/i,/3/i,/4/i]},qg={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ug={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xg={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gg={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qg={ordinalNumber:Lg({matchPattern:Ng,parsePattern:Fg,valueCallback:n=>parseInt(n,10)}),era:pn({matchPatterns:Yg,defaultMatchWidth:"wide",parsePatterns:Ag,defaultParseWidth:"any"}),quarter:pn({matchPatterns:zg,defaultMatchWidth:"wide",parsePatterns:jg,defaultParseWidth:"any",valueCallback:n=>n+1}),month:pn({matchPatterns:qg,defaultMatchWidth:"wide",parsePatterns:Bg,defaultParseWidth:"any"}),day:pn({matchPatterns:Vg,defaultMatchWidth:"wide",parsePatterns:Ug,defaultParseWidth:"any"}),dayPeriod:pn({matchPatterns:Xg,defaultMatchWidth:"any",parsePatterns:Gg,defaultParseWidth:"any"})},Kg={code:"en-US",formatDistance:xg,formatLong:pg,formatRelative:Mg,localize:Og,match:Qg,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jg(n){const t=Se(n);return hg(t,wg(t))+1}function Zg(n){const t=Se(n),e=+Jn(t)-+gg(t);return Math.round(e/Gi)+1}function Ki(n,t){var u,f,g,h;const e=Se(n),a=e.getFullYear(),r=sa(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(g=r.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=Qe(n,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const s=Pn(o,t),c=Qe(n,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Pn(c,t);return e.getTime()>=s.getTime()?a+1:e.getTime()>=d.getTime()?a:a-1}function $g(n,t){var s,c,d,u;const e=sa(),a=(t==null?void 0:t.firstWeekContainsDate)??((c=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:c.firstWeekContainsDate)??e.firstWeekContainsDate??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,r=Ki(n,t),i=Qe(n,0);return i.setFullYear(r,0,a),i.setHours(0,0,0,0),Pn(i,t)}function tm(n,t){const e=Se(n),a=+Pn(e,t)-+$g(e,t);return Math.round(a/Gi)+1}function Yt(n,t){const e=n<0?"-":"",a=Math.abs(n).toString().padStart(t,"0");return e+a}const Ne={y(n,t){const e=n.getFullYear(),a=e>0?e:1-e;return Yt(t==="yy"?a%100:a,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):Yt(e+1,2)},d(n,t){return Yt(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Yt(n.getHours()%12||12,t.length)},H(n,t){return Yt(n.getHours(),t.length)},m(n,t){return Yt(n.getMinutes(),t.length)},s(n,t){return Yt(n.getSeconds(),t.length)},S(n,t){const e=t.length,a=n.getMilliseconds(),r=Math.trunc(a*Math.pow(10,e-3));return Yt(r,t.length)}},en={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qr={G:function(n,t,e){const a=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(a,{width:"abbreviated"});case"GGGGG":return e.era(a,{width:"narrow"});case"GGGG":default:return e.era(a,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const a=n.getFullYear(),r=a>0?a:1-a;return e.ordinalNumber(r,{unit:"year"})}return Ne.y(n,t)},Y:function(n,t,e,a){const r=Ki(n,a),i=r>0?r:1-r;if(t==="YY"){const o=i%100;return Yt(o,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):Yt(i,t.length)},R:function(n,t){const e=Qi(n);return Yt(e,t.length)},u:function(n,t){const e=n.getFullYear();return Yt(e,t.length)},Q:function(n,t,e){const a=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Yt(a,2);case"Qo":return e.ordinalNumber(a,{unit:"quarter"});case"QQQ":return e.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(a,{width:"wide",context:"formatting"})}},q:function(n,t,e){const a=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Yt(a,2);case"qo":return e.ordinalNumber(a,{unit:"quarter"});case"qqq":return e.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(a,{width:"wide",context:"standalone"})}},M:function(n,t,e){const a=n.getMonth();switch(t){case"M":case"MM":return Ne.M(n,t);case"Mo":return e.ordinalNumber(a+1,{unit:"month"});case"MMM":return e.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(a,{width:"wide",context:"formatting"})}},L:function(n,t,e){const a=n.getMonth();switch(t){case"L":return String(a+1);case"LL":return Yt(a+1,2);case"Lo":return e.ordinalNumber(a+1,{unit:"month"});case"LLL":return e.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(a,{width:"wide",context:"standalone"})}},w:function(n,t,e,a){const r=tm(n,a);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):Yt(r,t.length)},I:function(n,t,e){const a=Zg(n);return t==="Io"?e.ordinalNumber(a,{unit:"week"}):Yt(a,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Ne.d(n,t)},D:function(n,t,e){const a=Jg(n);return t==="Do"?e.ordinalNumber(a,{unit:"dayOfYear"}):Yt(a,t.length)},E:function(n,t,e){const a=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(a,{width:"short",context:"formatting"});case"EEEE":default:return e.day(a,{width:"wide",context:"formatting"})}},e:function(n,t,e,a){const r=n.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Yt(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,a){const r=n.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Yt(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){const a=n.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return Yt(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(a,{width:"short",context:"formatting"});case"iiii":default:return e.day(a,{width:"wide",context:"formatting"})}},a:function(n,t,e){const r=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,t,e){const a=n.getHours();let r;switch(a===12?r=en.noon:a===0?r=en.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){const a=n.getHours();let r;switch(a>=17?r=en.evening:a>=12?r=en.afternoon:a>=4?r=en.morning:r=en.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let a=n.getHours()%12;return a===0&&(a=12),e.ordinalNumber(a,{unit:"hour"})}return Ne.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Ne.H(n,t)},K:function(n,t,e){const a=n.getHours()%12;return t==="Ko"?e.ordinalNumber(a,{unit:"hour"}):Yt(a,t.length)},k:function(n,t,e){let a=n.getHours();return a===0&&(a=24),t==="ko"?e.ordinalNumber(a,{unit:"hour"}):Yt(a,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ne.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Ne.s(n,t)},S:function(n,t){return Ne.S(n,t)},X:function(n,t,e){const a=n.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Vr(a);case"XXXX":case"XX":return Ve(a);case"XXXXX":case"XXX":default:return Ve(a,":")}},x:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"x":return Vr(a);case"xxxx":case"xx":return Ve(a);case"xxxxx":case"xxx":default:return Ve(a,":")}},O:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Br(a,":");case"OOOO":default:return"GMT"+Ve(a,":")}},z:function(n,t,e){const a=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Br(a,":");case"zzzz":default:return"GMT"+Ve(a,":")}},t:function(n,t,e){const a=Math.trunc(n.getTime()/1e3);return Yt(a,t.length)},T:function(n,t,e){const a=n.getTime();return Yt(a,t.length)}};function Br(n,t=""){const e=n>0?"-":"+",a=Math.abs(n),r=Math.trunc(a/60),i=a%60;return i===0?e+String(r):e+String(r)+t+Yt(i,2)}function Vr(n,t){return n%60===0?(n>0?"-":"+")+Yt(Math.abs(n)/60,2):Ve(n,t)}function Ve(n,t=""){const e=n>0?"-":"+",a=Math.abs(n),r=Yt(Math.trunc(a/60),2),i=Yt(a%60,2);return e+r+t+i}const Ur=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ji=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},em=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],a=e[1],r=e[2];if(!r)return Ur(n,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Ur(a,t)).replace("{{time}}",Ji(r,t))},nm={p:Ji,P:em},am=/^D+$/,rm=/^Y+$/,im=["D","DD","YY","YYYY"];function om(n){return am.test(n)}function sm(n){return rm.test(n)}function lm(n,t,e){const a=cm(n,t,e);if(console.warn(a),im.includes(n))throw new RangeError(a)}function cm(n,t,e){const a=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${a} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,um=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fm=/^'([^]*?)'?$/,hm=/''/g,gm=/[a-zA-Z]/;function on(n,t,e){var u,f,g,h,m,w,v,x;const a=sa(),r=(e==null?void 0:e.locale)??a.locale??Kg,i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(g=a.locale)==null?void 0:g.options)==null?void 0:h.firstWeekContainsDate)??1,o=(e==null?void 0:e.weekStartsOn)??((w=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??a.weekStartsOn??((x=(v=a.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,s=Se(n);if(!vg(s))throw new RangeError("Invalid time value");let c=t.match(um).map(_=>{const b=_[0];if(b==="p"||b==="P"){const p=nm[b];return p(_,r.formatLong)}return _}).join("").match(dm).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const b=_[0];if(b==="'")return{isToken:!1,value:mm(_)};if(qr[b])return{isToken:!0,value:_};if(b.match(gm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:_}});r.localize.preprocessor&&(c=r.localize.preprocessor(s,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return c.map(_=>{if(!_.isToken)return _.value;const b=_.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&sm(b)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&om(b))&&lm(b,t,String(n));const p=qr[b[0]];return p(s,b,r.localize,d)}).join("")}function mm(n){const t=n.match(fm);return t?t[1].replace(hm,"'"):n}var vm=H('<div class="text svelte-h03cyr"><span class="caption svelte-h03cyr">end:</span> </div>'),wm=H('<div class="data svelte-h03cyr"><div class="text svelte-h03cyr"><span class="caption svelte-h03cyr"> </span> </div> <div class="text svelte-h03cyr"><span class="caption svelte-h03cyr">start:</span> </div> <!></div>');function ym(n,t){ft(t,!1);let e=E(t,"data",8);const a="yyyy.MM.dd";Na();var r=at(),i=K(r);{var o=s=>{var c=wm(),d=A(c),u=A(d),f=A(u);I(u);var g=tt(u);I(d);var h=tt(d,2),m=tt(A(h));I(h);var w=tt(h,2);{var v=x=>{var _=vm(),b=tt(A(_));I(_),L(p=>ut(b,` ${p??""}`),[()=>(qe(on),qe(e()),nn(()=>on(e().end,a)))]),k(x,_)};z(w,x=>{qe(e()),nn(()=>e().end)&&x(v)})}I(c),L(x=>{ut(f,`${qe(e()),nn(()=>e().type)??""}:`),ut(g,` ${qe(e()),nn(()=>e().text)??""}`),ut(m,` ${x??""}`)},[()=>(qe(on),qe(e()),nn(()=>on(e().start,a)))]),k(s,c)};z(i,s=>{e()&&s(o)})}k(n,r),ht()}const Sa={tasks:[{id:1,text:"Website Redesign",start:new Date(2024,5,1),end:new Date(2024,7,1),duration:62,progress:0,parent:0,type:"summary"},{id:2,text:"Planning Phase",start:new Date(2024,5,1),end:new Date(2024,5,15),duration:15,progress:0,parent:1,type:"summary"},{id:3,text:"Requirements Gathering",start:new Date(2024,5,1),end:new Date(2024,5,5),duration:5,progress:1,parent:2,type:"task"},{id:4,text:"Stakeholder Interviews",start:new Date(2024,5,6),end:new Date(2024,5,10),duration:5,progress:.5,parent:2,type:"task"},{id:5,text:"Milestone: Planning Complete",start:new Date(2024,5,15),end:new Date(2024,5,15),duration:0,progress:1,parent:2,type:"milestone"},{id:6,text:"Design Phase",start:new Date(2024,5,16),end:new Date(2024,6,10),duration:25,progress:0,parent:1,type:"summary"},{id:7,text:"Wireframing",start:new Date(2024,5,16),end:new Date(2024,5,25),duration:10,progress:.7,parent:6,type:"task"},{id:8,text:"UI Design",start:new Date(2024,5,26),end:new Date(2024,6,5),duration:10,progress:.3,parent:6,type:"task"},{id:9,text:"Milestone: Design Approved",start:new Date(2024,6,10),end:new Date(2024,6,10),duration:0,progress:0,parent:6,type:"milestone"},{id:10,text:"Kickoff Meeting",start:new Date(2024,4,28),end:new Date(2024,4,28),duration:0,progress:1,parent:0,type:"milestone"},{id:11,text:"Prototype Review",start:new Date(2024,6,1),end:new Date(2024,6,5),duration:5,progress:0,parent:6,type:"summary"},{id:12,text:"Internal Review",start:new Date(2024,6,1),end:new Date(2024,6,3),duration:3,progress:.2,parent:11,type:"task"},{id:13,text:"Client Feedback",start:new Date(2024,6,4),end:new Date(2024,6,5),duration:2,progress:0,parent:11,type:"task"},{id:14,text:"Development Phase",start:new Date(2024,6,11),end:new Date(2024,7,1),duration:21,progress:0,parent:1,type:"summary"},{id:15,text:"Frontend Implementation",start:new Date(2024,6,11),end:new Date(2024,6,20),duration:10,progress:.4,parent:14,type:"task"},{id:16,text:"Backend Integration",start:new Date(2024,6,21),end:new Date(2024,6,28),duration:8,progress:.1,parent:14,type:"task"},{id:17,text:"Milestone: Dev Complete",start:new Date(2024,7,1),end:new Date(2024,7,1),duration:0,progress:0,parent:14,type:"milestone"},{id:18,text:"Milestone: Planning Sign-off",start:new Date(2024,5,16),end:new Date(2024,5,16),duration:0,progress:0,parent:1,type:"milestone"},{id:19,text:"Milestone: Design Handover",start:new Date(2024,6,11),end:new Date(2024,6,11),duration:0,progress:0,parent:1,type:"milestone"},{id:20,text:"Milestone: Prototype Accepted",start:new Date(2024,6,6),end:new Date(2024,6,6),duration:0,progress:0,parent:6,type:"milestone"},{id:21,text:"Milestone: Go-Live",start:new Date(2024,7,2),end:new Date(2024,7,2),duration:0,progress:0,parent:1,type:"milestone"},{id:100,text:"Mobile App Launch",start:new Date(2024,5,10),end:new Date(2024,8,1),duration:83,progress:0,parent:0,type:"summary"},{id:101,text:"App Planning",start:new Date(2024,5,10),end:new Date(2024,5,20),duration:11,progress:.5,parent:100,type:"task"},{id:102,text:"App Development",start:new Date(2024,5,21),end:new Date(2024,7,15),duration:56,progress:.2,parent:100,type:"task"},{id:103,text:"Milestone: Beta Release",start:new Date(2024,7,16),end:new Date(2024,7,16),duration:0,progress:0,parent:100,type:"milestone"},{id:104,text:"Marketing Campaign",start:new Date(2024,7,17),end:new Date(2024,7,31),duration:15,progress:0,parent:100,type:"task"},{id:105,text:"Milestone: App Launch",start:new Date(2024,8,1),end:new Date(2024,8,1),duration:0,progress:0,parent:100,type:"milestone"}],links:[{id:1,source:3,target:4,type:"e2e"},{id:2,source:4,target:5,type:"e2e"},{id:3,source:7,target:8,type:"e2e"},{id:4,source:8,target:9,type:"e2e"},{id:5,source:12,target:13,type:"e2e"},{id:6,source:1,target:2,type:"e2e"},{id:7,source:2,target:6,type:"e2e"},{id:8,source:6,target:11,type:"e2e"},{id:9,source:14,target:15,type:"e2e"},{id:10,source:15,target:16,type:"e2e"},{id:11,source:16,target:17,type:"e2e"},{id:12,source:5,target:18,type:"e2e"},{id:13,source:9,target:19,type:"e2e"},{id:14,source:13,target:20,type:"e2e"},{id:15,source:17,target:21,type:"e2e"},{id:16,source:101,target:102,type:"e2e"},{id:17,source:102,target:103,type:"e2e"},{id:18,source:103,target:104,type:"e2e"},{id:19,source:104,target:105,type:"e2e"}],scales:[{unit:"month",step:1,format:"MMMM yyy"},{unit:"day",step:1,format:"d"}]};var xm=H('<div class="space-y-8"><div class="relative overflow-hidden bg-gradient-to-r from-primary/5 via-secondary/5 to-accent/5 rounded-2xl p-6 border border-base-300/50 mb-6"><div class="absolute top-0 right-0 w-16 h-16 opacity-10"><!></div> <div class="relative flex items-center justify-between"><div><h1 class="text-3xl font-bold text-primary">Gantt Chart</h1> <p class="mt-2 text-sm text-base-content/70 max-w-md">Visualize your project timeline and tasks interactively.</p></div></div></div> <div class="bg-base-100 rounded-2xl shadow-md border border-base-300/50 p-4"><!> <!></div></div>');function _m(n,t){ft(t,!1);let e=Sa.tasks,a=Sa.links,r=Sa.scales,i=ua(null),o,s=ua(),c=ua(30);function d(D,C){const S=(D-C)/1e3/60/60/24;return Math.ceil(Math.abs(S))}function u(D){const[C,S]=f(D),W=C/S;return isNaN(W)?0:Math.round(W)}function f(D){let C=0,S=0;const W=l(s).getTask(D).data;return W==null||W.forEach(P=>{let T=0;P.type!=="milestone"&&P.type!=="summary"&&(T=P.duration||d(P.end,P.start),S+=T,C+=T*P.progress);const[j,R]=f(P.id);C+=j,S+=R}),[C,S]}function g(D,C){const{tasks:S}=l(s).getState(),W=l(s).getTask(D);if(W.type!="milestone"){const P=C&&W.type==="summary"?D:S.getSummaryId(D);if(P){const T=u(P);l(s).exec("update-task",{id:P,task:{progress:T}})}}}function h(D){G(s,D),o=D.getState().tasks,D.intercept("show-editor",C=>(G(i,o.byId(C.id)),!1)),l(s).getState().tasks.forEach(C=>{g(C.id,!0)}),l(s).on("add-task",({id:C})=>{g(C)}),l(s).on("update-task",({id:C})=>{g(C)}),l(s).on("delete-task",({source:C})=>{g(C,!0)}),l(s).on("copy-task",({id:C})=>{g(C)}),l(s).on("move-task",({id:C,source:S,inProgress:W})=>{W||(l(s).getTask(C).parent!=S&&g(S,!0),g(C))})}const m={level:3,levels:[{minCellWidth:200,maxCellWidth:400,scales:[{unit:"year",step:1,format:"yyyy"}]},{minCellWidth:150,maxCellWidth:400,scales:[{unit:"year",step:1,format:"yyyy"},{unit:"quarter",step:1,format:"QQQQ"}]},{minCellWidth:250,maxCellWidth:350,scales:[{unit:"quarter",step:1,format:"QQQQ"},{unit:"month",step:1,format:"MMMM yyy"}]},{minCellWidth:100,scales:[{unit:"month",step:1,format:"MMMM yyy"},{unit:"week",step:1,format:"'week' w"}]},{maxCellWidth:200,scales:[{unit:"month",step:1,format:"MMMM yyy"},{unit:"day",step:1,format:"d"}]},{minCellWidth:25,maxCellWidth:100,scales:[{unit:"day",step:1,format:"MMM d"},{unit:"hour",step:6,format:(D,C)=>`${on(D,"HH:mm")} - ${on(C,"HH:mm")}`}]},{maxCellWidth:120,scales:[{unit:"day",step:1,format:"MMM d"},{unit:"hour",step:1,format:"HH:mm"}]}]};Na();var w=xm(),v=A(w),x=A(v),_=A(x);uo(_,{icon:"heroicons:calendar",class:"w-full h-full text-primary"}),I(x),Ke(2),I(v);var b=tt(v,2),p=A(b);dg(p,{children:(D,C)=>{Nh(D,{children:(S,W)=>{cg(S,{get api(){return l(s)},get content(){return ym},children:(P,T)=>{Ut(Wh(P,{get tasks(){return e},get links(){return a},get scales(){return r},init:h,get cellWidth(){return l(c)},get zoom(){return m},$$legacy:!0}),j=>G(s,j),()=>l(s))},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var M=tt(p,2);{var y=D=>{};z(M,D=>{l(i)&&D(y)})}I(b),I(w),k(n,w),ht()}function jm(n){_m(n,{})}export{jm as component};
