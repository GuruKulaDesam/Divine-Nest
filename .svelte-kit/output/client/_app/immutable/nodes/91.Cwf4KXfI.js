import"../chunks/Bzak7iHL.js";import"../chunks/vwNg4zDZ.js";import{o as Fe,a as Ie}from"../chunks/BQBbAM3R.js";import{p as He,d as f,h as n,e as t,t as A,g as o,m as y,i as w,s as i,j as u,a as b,b as Ue,r as s,ar as L,c as We,f as ue}from"../chunks/D17TB34f.js";import{i as M}from"../chunks/CzCGRA_2.js";import{e as ve,i as me}from"../chunks/Cw7o17-n.js";import{r as pe}from"../chunks/CFHZ0_TH.js";import{b as be}from"../chunks/aleVj_GK.js";import{i as qe}from"../chunks/YnfMsfdI.js";import{I as c}from"../chunks/B2ZXU26p.js";import{s as ze,a as Qe}from"../chunks/CfCzXxk-.js";import{buildMusicPrompt as $e,generateMusic as Je,getTemplatePrompt as Ke}from"../chunks/BKKHa0w5.js";import{s as fe,c as he,r as Ne,b as Oe,p as Xe,a as Ye,d as Ze}from"../chunks/DOHrubB3.js";var ea=f('<button class="btn btn-error"><!> Stop Listening</button>'),aa=f('<button class="btn btn-primary"><!> Start Listening</button>'),sa=f('<p class="text-sm text-base-content/60 mt-2"><strong>Last prompt:</strong> </p>'),ta=f('<div class="loading loading-spinner loading-lg text-primary"></div>'),oa=f('<button class="btn btn-outline btn-block h-auto py-4"><!> </button>'),ia=f('<button class="btn btn-outline"><!></button> <button class="btn btn-outline"><!></button>',1),ra=f('<button class="btn btn-outline"><!></button>'),na=f('<button class="btn btn-ghost btn-block justify-start text-left h-auto py-3"><!> <span class="text-sm"> </span></button>'),la=f('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold text-base-content">🎼 Shivo Music Companion</h1> <p class="text-base-content/70 mt-2">Voice-controlled music generation with AI</p></div> <div class="flex gap-3"><!></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><div class="flex items-center gap-4"><div class="flex-1"><h3 class="font-semibold text-lg mb-2">Status</h3> <p class="text-base-content/80"> </p> <!></div> <!></div></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><h3 class="font-semibold text-lg mb-4">🎙️ Voice Commands</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 bg-base-200 rounded-lg"><h4 class="font-medium mb-2">Music Generation</h4> <ul class="text-sm text-base-content/70 space-y-1"><li>• "Create a Tamil folk melody"</li> <li>• "Make devotional music with flute"</li> <li>• "Generate ambient background music"</li> <li>• "Play classical orchestral piece"</li></ul></div> <div class="p-4 bg-base-200 rounded-lg"><h4 class="font-medium mb-2">Controls</h4> <ul class="text-sm text-base-content/70 space-y-1"><li>• "Start humming" (records melody)</li> <li>• "Stop" or "Pause"</li> <li>• "Play" or "Resume"</li> <li>• "Volume up/down"</li></ul></div></div></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><h3 class="font-semibold text-lg mb-4">🎵 Quick Templates</h3> <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"></div></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><h3 class="font-semibold text-lg mb-4">🎛️ Manual Controls</h3> <div class="flex flex-wrap gap-4 items-center"><div class="flex items-center gap-3"><!> <input type="range" min="0" max="1" step="0.1" class="range range-primary"/> <span class="text-sm font-medium w-12"> </span></div> <div class="flex gap-2"><!></div> <button class="btn btn-secondary"><!> Record Melody</button></div></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><h3 class="font-semibold text-lg mb-4">✏️ Custom Prompt</h3> <div class="flex gap-3"><input type="text" placeholder="Describe the music you want to generate..." class="input input-bordered flex-1"/> <button class="btn btn-primary"><!> Generate</button></div></div></div> <div class="card bg-base-100 shadow-lg"><div class="card-body"><h3 class="font-semibold text-lg mb-4">💡 Sample Prompts</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div></div></div>');function ca(R,ge){He(ge,!1);let l=y("🎙️ Shivo is listening..."),x=y(!1),g=y(!1),_=y(!1),v=y(.8),h=y(""),T=y(""),P=null;function _e(e){const a=e.toLowerCase().trim();a.includes("start humming")||a.includes("record melody")?z():a.includes("stop")||a.includes("pause")?Q():a.includes("play")||a.includes("resume")?$():a.includes("volume up")||a.includes("louder")?J(Math.min(o(v)+.2,1)):a.includes("volume down")||a.includes("quieter")?J(Math.max(o(v)-.2,0)):k(e)}async function k(e){try{i(g,!0),i(h,e),i(l,`🎧 Generating music for: "${e}"`);const a=$e(e);i(T,a);const r=await Je(a);await Xe(r,{volume:o(v),onEnded:()=>{i(_,!1),i(l,"✅ Music playback completed")}}),i(_,!0),i(l,"✅ Music playback started")}catch(a){console.error("Music generation failed:",a),i(l,`❌ Error: ${a instanceof Error?a.message:"Unknown error"}`)}finally{i(g,!1)}}async function z(){try{i(l,"🎤 Recording your melody... (5 seconds)");const e=await Ne({duration:5,onError:d=>{i(l,`❌ Recording failed: ${d.message}`)}});i(l,"🎼 Processing your melody...");const a=await Oe(e);await k("Build a musical track around this melody, add harmonies and accompaniment")}catch(e){console.error("Humming recording failed:",e),i(l,`❌ Recording failed: ${e instanceof Error?e.message:"Unknown error"}`)}}function Q(){fe(),i(_,!1),i(l,"⏹️ Playback stopped")}function $(){o(_)||(Ye(),i(_,!0),i(l,"▶️ Playback resumed"))}function J(e){i(v,e),he(o(v)),i(l,`🔊 Volume set to ${Math.round(o(v)*100)}%`)}function K(){o(x)||(i(x,!0),i(l,"🎙️ Listening for voice commands..."),P=()=>Qe(),ze({continuous:!0,onResult:e=>{console.log("Voice command:",e),_e(e)},onError:e=>{console.error("Speech capture error:",e),i(l,`❌ Speech error: ${e}`),i(x,!1)},onEnd:()=>{i(x,!1),i(l,"🎙️ Voice listening stopped")}}))}function N(){P&&(P(),P=null),i(x,!1),i(l,"🎙️ Voice listening stopped")}const ye=[{key:"devotional",label:"Devotional",icon:"heroicons:sparkles"},{key:"folk",label:"Folk",icon:"heroicons:musical-note"},{key:"ambient",label:"Ambient",icon:"heroicons:cloud"},{key:"classical",label:"Classical",icon:"heroicons:building-library"},{key:"electronic",label:"Electronic",icon:"heroicons:bolt"},{key:"world",label:"World Music",icon:"heroicons:globe-asia-australia"}];function xe(e){const a=Ke(e);k(a)}Fe(()=>{K()}),Ie(()=>{N(),fe()}),qe();var G=la(),B=t(G),O=n(t(B),2),ke=t(O);{var we=e=>{var a=ea(),r=t(a);c(r,{icon:"heroicons:microphone",class:"w-5 h-5 mr-2"}),L(),s(a),u("click",a,N),b(e,a)},Me=e=>{var a=aa(),r=t(a);c(r,{icon:"heroicons:microphone",class:"w-5 h-5 mr-2"}),L(),s(a),u("click",a,K),b(e,a)};M(ke,e=>{o(x)?e(we):e(Me,!1)})}s(O),s(B);var j=n(B,2),X=t(j),Y=t(X),D=t(Y),F=n(t(D),2),Pe=t(F,!0);s(F);var Ce=n(F,2);{var Se=e=>{var a=sa(),r=n(t(a));s(a),A(()=>w(r,` ${o(T)??""}`)),b(e,a)};M(Ce,e=>{o(T)&&e(Se)})}s(D);var Ve=n(D,2);{var Ee=e=>{var a=ta();b(e,a)},Ae=e=>{var a=We(),r=ue(a);{var d=p=>{c(p,{icon:"heroicons:speaker-wave",class:"w-8 h-8 text-success"})},m=p=>{c(p,{icon:"heroicons:speaker-x-mark",class:"w-8 h-8 text-base-content/50"})};M(r,p=>{o(_)?p(d):p(m,!1)},!0)}b(e,a)};M(Ve,e=>{o(g)?e(Ee):e(Ae,!1)})}s(Y),s(X),s(j);var I=n(j,4),Z=t(I),ee=n(t(Z),2);ve(ee,5,()=>ye,me,(e,a)=>{var r=oa(),d=t(r);c(d,{get icon(){return o(a).icon},class:"w-6 h-6 mb-2"});var m=n(d);s(r),A(()=>{r.disabled=o(g),w(m,` ${o(a).label??""}`)}),u("click",r,()=>xe(o(a).key)),b(e,r)}),s(ee),s(Z),s(I);var H=n(I,2),ae=t(H),se=n(t(ae),2),U=t(se),te=t(U);c(te,{icon:"heroicons:speaker-wave",class:"w-5 h-5"});var C=n(te,2);pe(C);var oe=n(C,2),Le=t(oe);s(oe),s(U);var W=n(U,2),Re=t(W);{var Te=e=>{var a=ia(),r=ue(a),d=t(r);c(d,{icon:"heroicons:stop",class:"w-5 h-5"}),s(r);var m=n(r,2),p=t(m);c(p,{icon:"heroicons:pause",class:"w-5 h-5"}),s(m),u("click",r,Q),u("click",m,function(...De){var de;(de=Ze)==null||de.apply(this,De)}),b(e,a)},Ge=e=>{var a=ra(),r=t(a);c(r,{icon:"heroicons:play",class:"w-5 h-5"}),s(a),u("click",a,$),b(e,a)};M(Re,e=>{o(_)?e(Te):e(Ge,!1)})}s(W);var S=n(W,2),Be=t(S);c(Be,{icon:"heroicons:microphone",class:"w-5 h-5 mr-2"}),L(),s(S),s(se),s(ae),s(H);var q=n(H,2),ie=t(q),re=n(t(ie),2),V=t(re);pe(V);var E=n(V,2),je=t(E);c(je,{icon:"heroicons:sparkles",class:"w-5 h-5 mr-2"}),L(),s(E),s(re),s(ie),s(q);var ne=n(q,2),le=t(ne),ce=n(t(le),2);ve(ce,4,()=>["Shivo, make a Tamil folk melody with ambient pads","Create a devotional tune with flute and tanpura","Generate a chill beat with soft percussion and strings","Classical orchestral piece with piano and strings","Electronic ambient music with synthesizers","World music fusion with traditional instruments"],me,(e,a)=>{var r=na(),d=t(r);c(d,{icon:"heroicons:chat-bubble-left",class:"w-4 h-4 mr-3 flex-shrink-0"});var m=n(d,2),p=t(m,!0);s(m),s(r),A(()=>{r.disabled=o(g),w(p,a)}),u("click",r,()=>k(a)),b(e,r)}),s(ce),s(le),s(ne),s(G),A((e,a)=>{w(Pe,o(l)),w(Le,`${e??""}%`),S.disabled=o(g),E.disabled=a},[()=>Math.round(o(v)*100),()=>o(g)||!o(h).trim()]),be(C,()=>o(v),e=>i(v,e)),u("input",C,()=>he(o(v))),u("click",S,z),be(V,()=>o(h),e=>i(h,e)),u("keydown",V,e=>{e.key==="Enter"&&o(h).trim()&&k(o(h))}),u("click",E,()=>o(h)&&k(o(h))),b(R,G),Ue()}function wa(R){ca(R,{})}export{wa as component};
