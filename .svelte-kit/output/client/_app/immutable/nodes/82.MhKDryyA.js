import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as qt}from"../chunks/DlrJBDXQ.js";import{ad as Kt,ag as c,ah as P,ap as b,ai as o,aj as Zt,am as s,ak as i,t as e,K as I,al as R,y as v,an as a,aq as Ce,ar as Ae,aZ as Le,aC as Ye,ao as X}from"../chunks/B7bOZ5S9.js";import{i as f}from"../chunks/DIwmiGeX.js";import{e as ee,i as oe}from"../chunks/BpwsUEBk.js";import{s as de,r as te,h as Qt,d as $e,a as et}from"../chunks/BUszLdvL.js";import{a as le,c as mt}from"../chunks/DnAqKgy0.js";import{i as Xt}from"../chunks/5L-6EDXk.js";import{g as G,t as N}from"../chunks/DKif01VT.js";var Yt=c('<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center svelte-1l5usla"><svg class="w-4 h-4 text-white svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg></div>'),$t=c('<div class="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center svelte-1l5usla"><svg class="w-4 h-4 text-white svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg></div>'),el=c('<div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center svelte-1l5usla"><svg class="w-4 h-4 text-white svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg></div>'),tl=c('<div><div class="flex items-center gap-3 svelte-1l5usla"><!> <p class="text-sm font-medium text-gray-800 svelte-1l5usla"> </p></div></div>'),ll=Le('<svg class="w-8 h-8 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg>'),al=Le('<svg class="w-8 h-8 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0 5 5 0 01-10 0 1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg>'),sl=Le('<svg class="w-8 h-8 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg>'),rl=Le('<svg class="w-8 h-8 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path d="M4 3a1 1 0 00-1 1v8a1 1 0 001 1h1a1 1 0 001-1V4a1 1 0 00-1-1H4zM14 3a1 1 0 00-1 1v8a1 1 0 001 1h1a1 1 0 001-1V4a1 1 0 00-1-1h-1z" class="svelte-1l5usla"></path></svg>'),il=c('<div class="alert alert-success shadow-lg svelte-1l5usla"><svg class="w-6 h-6 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg> <span class="svelte-1l5usla"> </span></div>'),ol=c('<div class="alert alert-warning shadow-lg svelte-1l5usla"><svg class="w-6 h-6 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg> <span class="svelte-1l5usla">Recording audio...</span></div>'),dl=c('<button class="relative group svelte-1l5usla" aria-label="Remove attachment"><img alt="attachment" class="w-16 h-16 object-cover rounded-lg border-2 border-white/30 svelte-1l5usla"/> <div class="absolute inset-0 bg-red-500/80 opacity-0 group-hover:opacity-100 rounded-lg flex items-center justify-center text-white font-bold svelte-1l5usla">×</div></button>'),vl=c('<div class="flex flex-wrap gap-2 justify-center svelte-1l5usla"></div>'),nl=c('<div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 mb-8 svelte-1l5usla"><div class="text-center mb-6 svelte-1l5usla"><div class="text-6xl mb-4 svelte-1l5usla">✍️</div> <h2 class="text-2xl font-bold text-theme mb-2 svelte-1l5usla">Create Note</h2> <p class="text-theme/80 svelte-1l5usla">Write your thoughts or paste content</p></div> <div class="space-y-4 svelte-1l5usla"><div class="flex items-center gap-4 justify-center svelte-1l5usla"><label for="note-color-input" class="text-theme font-medium svelte-1l5usla">Color:</label> <input type="color" class="w-12 h-10 rounded-lg border-2 border-white/30 svelte-1l5usla" id="note-color-input"/></div> <textarea class="textarea textarea-bordered w-full h-64 resize-none bg-white/20 text-white placeholder-white/50 border-white/30 svelte-1l5usla" placeholder="Start writing your note..."></textarea> <div class="flex flex-wrap gap-2 justify-center svelte-1l5usla"><label class="btn btn-outline btn-sm text-white border-white/50 hover:bg-white/20 svelte-1l5usla"><input type="file" accept="image/*" class="hidden svelte-1l5usla"/> <span class="text-green-400 svelte-1l5usla">📷</span> Add Image</label></div> <!> <div class="text-center text-theme/60 text-sm svelte-1l5usla">Notes are automatically saved as you type!</div></div></div>'),cl=c(`<div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 mb-8 svelte-1l5usla"><div class="text-center mb-6 svelte-1l5usla"><div class="text-6xl mb-4 svelte-1l5usla">📋</div> <h2 class="text-2xl font-bold text-theme mb-2 svelte-1l5usla">Create Checklist</h2> <p class="text-theme/80 svelte-1l5usla">Add items to your checklist (one per line)</p></div> <div class="space-y-4 svelte-1l5usla"><div class="flex items-center gap-4 justify-center svelte-1l5usla"><label for="checklist-color-input" class="text-theme font-medium svelte-1l5usla">Color:</label> <input type="color" class="w-12 h-10 rounded-lg border-2 border-white/30 svelte-1l5usla" id="checklist-color-input"/></div> <textarea class="textarea textarea-bordered w-full h-48 resize-none bg-white/20 text-white placeholder-white/50 border-white/30 svelte-1l5usla" placeholder="Enter checklist items (one per line):
Buy groceries
Call dentist
Finish project
Exercise"></textarea> <div class="text-center svelte-1l5usla"><button class="btn btn-primary svelte-1l5usla">➕ Create Checklist</button></div> <div class="text-center text-theme/60 text-sm svelte-1l5usla">Checklists are saved when you click "Create Checklist"</div></div></div>`),ul=c('<button class="relative group svelte-1l5usla" aria-label="Remove attachment"><img alt="attachment" class="w-16 h-16 object-cover rounded-lg border-2 border-white/30 svelte-1l5usla"/> <div class="absolute inset-0 bg-red-500/80 opacity-0 group-hover:opacity-100 rounded-lg flex items-center justify-center text-white font-bold svelte-1l5usla">×</div></button>'),hl=c('<div class="flex flex-wrap gap-2 justify-center svelte-1l5usla"></div>'),pl=c('<label class="flex items-center gap-3 cursor-pointer svelte-1l5usla"><input type="checkbox" class="checkbox checkbox-primary svelte-1l5usla"/> <span> </span></label>'),bl=c('<div class="bg-white/10 rounded-xl p-4 svelte-1l5usla"><h3 class="text-lg font-bold text-theme mb-3 svelte-1l5usla"> </h3> <div class="space-y-2 svelte-1l5usla"></div> <div class="flex gap-2 mt-4 svelte-1l5usla"><input class="input input-bordered input-sm flex-1 bg-white/20 text-theme placeholder-theme/50 border-white/30 svelte-1l5usla" placeholder="Add new item..."/> <button class="btn btn-primary btn-sm svelte-1l5usla">➕</button></div></div>'),fl=c('<div class="text-center py-8 svelte-1l5usla"><p class="text-theme/60 svelte-1l5usla">No checklists yet. Use voice input above to create one!</p></div>'),ml=c('<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 svelte-1l5usla"><div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 svelte-1l5usla"><div class="text-center mb-6 svelte-1l5usla"><div class="text-6xl mb-4 svelte-1l5usla">✍️</div> <h2 class="text-2xl font-bold text-theme mb-2 svelte-1l5usla">Write a Note</h2> <p class="text-theme/80 svelte-1l5usla">Type your thoughts or paste content</p></div> <div class="space-y-4 svelte-1l5usla"><div class="flex gap-2 justify-center svelte-1l5usla"><input type="radio" name="noteType" class="radio radio-primary svelte-1l5usla" id="note-radio"/> <label for="note-radio" class="text-theme font-medium svelte-1l5usla">Note</label> <input type="radio" name="noteType" class="radio radio-primary ml-4 svelte-1l5usla" id="checklist-radio"/> <label for="checklist-radio" class="text-theme font-medium svelte-1l5usla">Checklist</label></div> <div class="flex items-center gap-4 svelte-1l5usla"><label for="color-input" class="text-theme font-medium svelte-1l5usla">Color:</label> <input type="color" class="w-12 h-10 rounded-lg border-2 border-white/30 svelte-1l5usla" id="color-input"/></div> <textarea class="textarea textarea-bordered w-full h-64 resize-none bg-white/20 text-white placeholder-white/50 border-white/30 svelte-1l5usla" placeholder="Start writing your note... Use - or numbers for checklists"></textarea> <div class="flex flex-wrap gap-2 justify-center svelte-1l5usla"><label class="btn btn-outline btn-sm text-white border-white/50 hover:bg-white/20 svelte-1l5usla"><input type="file" accept="image/*" class="hidden svelte-1l5usla"/> <span class="text-green-400 svelte-1l5usla">📷</span> Add Image</label></div> <!> <div class="text-center text-theme/60 text-sm svelte-1l5usla">Notes are automatically saved as you type!</div></div></div> <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 svelte-1l5usla"><div class="text-center mb-6 svelte-1l5usla"><div class="text-6xl mb-4 svelte-1l5usla">📋</div> <h2 class="text-2xl font-bold text-theme mb-2 svelte-1l5usla">Create Checklist</h2> <p class="text-theme/80 svelte-1l5usla">Add items to your checklist</p></div> <div class="space-y-4 svelte-1l5usla"><!> <!></div></div></div>'),xl=c('<div class="text-center py-16 svelte-1l5usla"><div class="text-8xl mb-6 svelte-1l5usla">📝</div> <h3 class="text-2xl font-bold text-theme mb-4 svelte-1l5usla">No notes yet!</h3> <p class="text-theme/80 mb-6 svelte-1l5usla">Use voice input above or type in the note editor to create your first note</p></div>'),gl=c('<span class="text-yellow-400 svelte-1l5usla">📌</span> Unpin',1),wl=c('<span class="text-blue-400 svelte-1l5usla">📌</span> Pin',1),_l=c('<button class="btn btn-circle btn-sm bg-white/20 hover:bg-white/30 border-white/30 svelte-1l5usla" aria-label="Play audio attachment"><svg class="w-4 h-4 text-white svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z" class="svelte-1l5usla"></path></svg></button>'),yl=c('<img alt="attachment" class="w-12 h-12 object-cover rounded-lg border-2 border-white/30 svelte-1l5usla"/>'),kl=c('<div class="flex flex-wrap gap-2 mb-4 svelte-1l5usla"></div>'),Cl=c('<span class="text-yellow-400 drop-shadow-lg svelte-1l5usla">📌</span>'),Al=c('<div class="card bg-white/20 backdrop-blur-sm border border-white/30 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 svelte-1l5usla"><div class="card-body p-6 svelte-1l5usla"><div class="flex justify-between items-start mb-3 svelte-1l5usla"><h3 class="card-title text-lg font-bold text-white line-clamp-2 svelte-1l5usla"> </h3> <div class="dropdown dropdown-end svelte-1l5usla"><button class="btn btn-ghost btn-sm text-white/80 hover:text-white svelte-1l5usla" aria-label="Note options menu"><svg class="w-5 h-5 svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z" class="svelte-1l5usla"></path></svg></button> <ul class="dropdown-content menu p-2 shadow bg-white/90 backdrop-blur rounded-box w-48 svelte-1l5usla"><li class="svelte-1l5usla"><button class="text-gray-700 w-full text-left svelte-1l5usla"><!></button></li> <li class="svelte-1l5usla"><button class="text-red-600 w-full text-left svelte-1l5usla"><span class="text-red-500 svelte-1l5usla">🗑️</span> Delete</button></li></ul></div></div> <div class="text-white/90 text-sm line-clamp-4 mb-4 whitespace-pre-wrap svelte-1l5usla"> </div> <!> <div class="flex justify-between items-center text-xs text-white/60 svelte-1l5usla"><span class="svelte-1l5usla"> </span> <!></div></div></div>'),Ml=c('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 svelte-1l5usla"></div>'),jl=c('<div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 svelte-1l5usla"><div class="flex items-center justify-between mb-6 svelte-1l5usla"><h2 class="text-3xl font-bold text-theme svelte-1l5usla">📚 My Notes</h2> <div class="flex items-center gap-4 svelte-1l5usla"><input class="input input-bordered bg-white/20 text-theme placeholder-theme/50 border-white/30 svelte-1l5usla" placeholder="🔍 Search notes..."/></div></div> <!></div>'),zl=c('<div class="text-center py-16 svelte-1l5usla"><div class="text-8xl mb-6 svelte-1l5usla">📋</div> <h3 class="text-2xl font-bold text-theme mb-4 svelte-1l5usla">No checklists yet!</h3> <p class="text-theme/80 mb-6 svelte-1l5usla">Switch to the Checklists tab above to create your first checklist</p></div>'),Nl=c('<div class="w-6 h-6 bg-green-500 rounded-md flex items-center justify-center flex-shrink-0 svelte-1l5usla"><svg class="w-4 h-4 text-white svelte-1l5usla" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1l5usla"></path></svg></div>'),Sl=c('<div class="w-6 h-6 border-2 border-white/60 rounded-full flex items-center justify-center cursor-pointer hover:border-white transition-colors flex-shrink-0 svelte-1l5usla"><div class="w-2 h-2 bg-white/40 rounded-full svelte-1l5usla"></div></div>'),Il=c('<div class="w-6 h-6 border-2 border-white/60 rounded flex items-center justify-center cursor-pointer hover:border-white transition-colors flex-shrink-0 svelte-1l5usla"></div>'),Dl=c('<div class="w-6 h-6 flex items-center justify-center cursor-pointer flex-shrink-0 svelte-1l5usla"><div class="w-3 h-3 border-2 border-white/60 rotate-45 hover:border-white transition-colors svelte-1l5usla"></div></div>'),Tl=c('<div class="flex items-center gap-3 svelte-1l5usla"><!> <span> </span></div>'),Vl=c('<div class="card bg-white/15 backdrop-blur-sm border border-white/30 shadow-xl svelte-1l5usla"><div class="card-body p-6 svelte-1l5usla"><div class="flex justify-between items-start mb-4 svelte-1l5usla"><h3 class="card-title text-xl font-bold text-white svelte-1l5usla"> </h3> <button class="btn btn-ghost btn-sm text-white/60 hover:text-red-300 svelte-1l5usla"><span class="text-red-400 svelte-1l5usla">🗑️</span></button></div> <div class="space-y-3 mb-4 svelte-1l5usla"></div> <div class="flex items-center justify-between text-sm text-white/80 mb-4 svelte-1l5usla"><span class="svelte-1l5usla"> </span> <div class="w-24 bg-white/20 rounded-full h-2 svelte-1l5usla"><div class="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300 svelte-1l5usla"></div></div></div> <div class="flex gap-2 svelte-1l5usla"><input class="input input-bordered input-sm flex-1 bg-white/20 text-white placeholder-white/50 border-white/30 svelte-1l5usla" placeholder="Add new item..."/> <button class="btn btn-primary btn-sm svelte-1l5usla">➕</button></div></div></div>'),Bl=c('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 svelte-1l5usla"></div>'),Ll=c('<div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 svelte-1l5usla"><div class="flex items-center justify-between mb-6 svelte-1l5usla"><h2 class="text-3xl font-bold text-theme svelte-1l5usla">✅ My Checklists</h2></div> <!></div>'),Rl=c('<div class="notes-app min-h-screen p-6 svelte-1l5usla"><div class="fixed bottom-4 right-4 z-50 space-y-2 svelte-1l5usla"></div> <div class="max-w-7xl mx-auto svelte-1l5usla"><div class="text-center mb-8 svelte-1l5usla"><h1 class="text-5xl font-bold text-theme mb-2 drop-shadow-lg svelte-1l5usla">📝 My Notes</h1> <p class="text-theme/80 text-lg svelte-1l5usla">Create, organize, and remember everything important</p></div> <div class="flex justify-center mb-8 svelte-1l5usla"><div class="bg-white/20 backdrop-blur-lg rounded-2xl p-2 shadow-2xl border border-white/30 svelte-1l5usla"><div class="flex space-x-2 svelte-1l5usla"><button> </button> <button> </button></div></div></div> <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20 mb-8 svelte-1l5usla"><div class="text-center mb-6 svelte-1l5usla"><div class="text-6xl mb-4 text-blue-400 animate-pulse svelte-1l5usla">🎤</div> <h2 class="text-2xl font-bold text-theme mb-2 svelte-1l5usla">Voice Input</h2> <p class="text-theme/80 svelte-1l5usla">Speak to create notes or checklists automatically</p></div> <div class="space-y-4 svelte-1l5usla"><div class="flex justify-center gap-4 mb-4 svelte-1l5usla"><button>📝 Notes</button> <button>✅ Checklists</button></div> <div class="flex justify-center gap-4 svelte-1l5usla"><button><!></button> <button class="btn btn-circle btn-lg btn-warning shadow-lg svelte-1l5usla"><!></button></div> <!> <!> <div class="text-center text-theme/60 text-sm svelte-1l5usla"> </div></div></div> <!> <!> <!> <!></div></div>');function Ul(Me,xt){Kt(xt,!1);const tt=[];let Re,U=I([]),ae=[],T=I(""),ge=I(""),ve=I(""),ne=I(null),we=I("#6366f1"),Ue=I("#10b981"),F=I([]),se=I(!1),ce,_e=I(!1),Fe=[],Te=[],Ee=I(!1),Y,ue="",je=I(""),V=I("notes"),he=I("notes"),ze=I([]),gt=0,lt;function Z(l,t="info"){const r=++gt;v(ze,[...e(ze),{id:r,message:l,type:t}]),setTimeout(()=>{v(ze,e(ze).filter(d=>d.id!==r))},3e3)}function at(){clearTimeout(lt),lt=setTimeout(()=>{(e(T).trim()||e(F).length>0||Te.length>0)&&_t()},2e3)}qt(async()=>{v(U,await G("notes"));const l=e(U).filter(t=>{var r;return t&&(((r=t.body)==null?void 0:r.trim())||t.attachments&&t.attachments.length>0)});if(l.length!==e(U).length){const t=e(U).filter(r=>{var d;return!r||!((d=r.body)!=null&&d.trim())&&(!r.attachments||r.attachments.length===0)}).map(r=>r.id);for(const r of t)await N("notes").delete(r);v(U,l)}ae=await G("todo"),Re=window.SpeechRecognition||window.webkitSpeechRecognition,Re&&(v(Ee,!0),Y=new Re,Y.continuous=!0,Y.interimResults=!0,Y.lang="en-US",Y.onresult=t=>{let r="";for(let d=t.resultIndex;d<t.results.length;++d){const p=t.results[d],u=p[0].transcript;p.isFinal?(ue=ue+" "+u,jt(u.trim())):r+=u}r&&v(T,e(T)+" "+r)},Y.onend=()=>{ue&&ue.trim()&&(v(T,(e(T)+" "+ue).trim()),ue=""),v(se,!1)},Y.onerror=t=>console.warn("Speech recognition error",t))});function wt(){if(!e(Ee)){alert("Speech recognition not available in this browser");return}try{e(se)?Y.stop():(ue="",Y.start()),v(se,!e(se))}catch(l){console.warn("Recognition toggle failed",l),v(se,!1)}}async function _t(){if(!e(T).trim()&&e(F).length===0&&Te.length===0)return;const l=new Date().toISOString(),r={title:e(T).split(`
`)[0].slice(0,60)||"Untitled Note",body:e(T),pinned:!1,color:e(we),createdAt:l,updatedAt:l,user:"John Doe",type:"note",attachments:[...e(F),...Te]};await N("notes").add(r),v(U,await G("notes")),Z("✅ Note saved automatically!","success"),v(T,""),v(F,[]),Te=[]}async function yt(){if(!e(ge).trim())return;const l=e(ge).split(`
`).map(d=>d.trim()).filter(Boolean);if(l.length===0)return;const t=Date.now(),r=l[0].slice(0,40)||"New Checklist";await N("todo").add({id:t,text:r,isGroup:!0,color:e(Ue)});for(const d of l){const p=d.replace(/^[-*•\d]+\.?\s*/,"").trim();p&&await N("todo").add({text:p,done:!1,groupId:t})}ae=await G("todo"),Z("✅ Checklist created and saved!","success"),v(ge,"")}async function kt(l){const t=await N("notes").get(l);t&&(await N("notes").update(l,{pinned:!t.pinned,updatedAt:new Date().toISOString()}),v(U,await G("notes")))}async function Ct(l){confirm("Delete this note?")&&(await N("notes").delete(l),v(U,await G("notes")))}function st(l){const t=l.target,r=t.files&&t.files[0];if(!r)return;const d=new FileReader;d.onload=()=>{v(F,[...e(F),String(d.result||"")])},d.readAsDataURL(r)}async function At(){if(!navigator.mediaDevices||!window.MediaRecorder){Z("Audio recording not supported","error");return}try{const l=await navigator.mediaDevices.getUserMedia({audio:!0});Fe=[],ce=new MediaRecorder(l),ce.ondataavailable=t=>{t.data&&t.data.size&&Fe.push(t.data)},ce.onstop=async()=>{const t=new Blob(Fe,{type:"audio/webm"}),r=new FileReader;r.onload=async()=>{const d=String(r.result||""),p=new Date().toISOString(),m={title:"🎵 Voice Recording "+new Date().toLocaleTimeString(),body:"[Voice recording - tap play to listen]",pinned:!1,color:"#f59e0b",createdAt:p,updatedAt:p,user:"John Doe",type:"note",attachments:[d]};await N("notes").add(m),v(U,await G("notes")),v(_e,!1),Z("🎵 Voice recording saved automatically!","success")},r.readAsDataURL(t)},ce.start(),v(_e,!0)}catch(l){console.error(l),Z("Microphone access denied","error")}}function Mt(){ce&&ce.state!=="inactive"&&ce.stop(),v(_e,!1)}async function jt(l){if(!l||!l.trim())return;const t=l.trim();if(e(he)==="checklists"){const r=t.split(/\n|,|;| then /i).map(p=>p.trim()).filter(Boolean),d=Date.now();await N("todo").add({id:d,text:r[0].slice(0,40)||"Voice checklist",isGroup:!0});for(const p of r){const u=p.replace(/^\d+\.|[-*\u2022]\s*/g,"").trim();u&&await N("todo").add({text:u,done:!1,groupId:d})}ae=await G("todo"),Z("✅ Voice converted to checklist and saved!","success")}else{const r=new Date().toISOString(),d=t.split(/\n/)[0].slice(0,60)||"🎤 Voice Note";await N("notes").add({title:d,body:t,pinned:!1,color:e(we),createdAt:r,updatedAt:r,user:"John Doe",type:"note",attachments:[]}),v(U,await G("notes")),Z("✅ Voice note saved automatically!","success")}}function zt(l){try{const t=new Audio(l);t.oncanplaythrough=()=>{t.play().catch(r=>{console.error("Audio play failed:",r),Z("Failed to play audio","error")})},t.onerror=()=>{console.error("Audio load failed"),Z("Failed to load audio","error")}}catch(t){console.error("Audio creation failed:",t),Z("Audio playback not supported","error")}}async function Ne(l){const t=await N("todo").get(l);t&&(await N("todo").update(l,{done:!t.done}),ae=await G("todo"))}async function Ve(){!e(ve).trim()||!e(ne)||(await N("todo").add({text:e(ve),done:!1,groupId:e(ne)}),ae=await G("todo"),v(ve,""))}async function Nt(l){confirm("Delete this entire checklist?")&&(await N("todo").where("groupId").equals(l).delete(),await N("todo").delete(l),ae=await G("todo"))}function Se(){const l=new Map;return ae.forEach(t=>{t.isGroup&&l.set(t.id,{group:t,items:[]})}),ae.forEach(t=>{t.groupId&&l.has(t.groupId)&&l.get(t.groupId).items.push(t)}),Array.from(l.values())}function rt(){return e(U).filter(l=>!e(je)||l.title.toLowerCase().includes(e(je).toLowerCase())||l.body.toLowerCase().includes(e(je).toLowerCase())).sort((l,t)=>(t.pinned?1:0)-(l.pinned?1:0))}Xt();var He=Rl(),Oe=s(He);ee(Oe,5,()=>e(ze),l=>l.id,(l,t)=>{var r=tl();let d;var p=s(r),u=s(p);{var m=w=>{var n=Yt();o(w,n)},j=w=>{var n=Ce(),_=Ae(n);{var Q=C=>{var M=$t();o(C,M)},J=C=>{var M=el();o(C,M)};f(_,C=>{e(t).type==="error"?C(Q):C(J,!1)},!0)}o(w,n)};f(u,w=>{e(t).type==="success"?w(m):w(j,!1)})}var h=i(u,2),x=s(h,!0);a(h),a(p),a(r),P(w=>{d=de(r,1,"notification-card bg-white/90 backdrop-blur-lg border border-white/20 rounded-lg p-4 shadow-lg animate-slide-in-right max-w-sm svelte-1l5usla",null,d,w),R(x,e(t).message)},[()=>({"bg-green-50":e(t).type==="success","bg-red-50":e(t).type==="error","bg-blue-50":e(t).type==="info"})]),o(l,r)}),a(Oe);var it=i(Oe,2),Pe=i(s(it),2),ot=s(Pe),dt=s(ot),Ie=s(dt),St=s(Ie);a(Ie);var Be=i(Ie,2),It=s(Be);a(Be),a(dt),a(ot),a(Pe);var Ge=i(Pe,2),vt=i(s(Ge),2),Je=s(vt),We=s(Je),nt=i(We,2);a(Je);var qe=i(Je,2),ye=s(qe),Dt=s(ye);{var Tt=l=>{var t=ll();o(l,t)},Vt=l=>{var t=al();o(l,t)};f(Dt,l=>{e(se)?l(Tt):l(Vt,!1)})}a(ye);var Ke=i(ye,2),Bt=s(Ke);{var Lt=l=>{var t=sl();o(l,t)},Rt=l=>{var t=rl();o(l,t)};f(Bt,l=>{e(_e)?l(Lt):l(Rt,!1)})}a(Ke),a(qe);var ct=i(qe,2);{var Ut=l=>{var t=il(),r=i(s(t),2),d=s(r);a(r),a(t),P(()=>R(d,`Listening for ${e(he)==="notes"?"notes":"checklists"}... Speak now!`)),o(l,t)};f(ct,l=>{e(se)&&l(Ut)})}var ut=i(ct,2);{var Ft=l=>{var t=ol();o(l,t)};f(ut,l=>{e(_e)&&l(Ft)})}var ht=i(ut,2),Et=s(ht);a(ht),a(vt),a(Ge);var pt=i(Ge,2);{var Ht=l=>{var t=nl(),r=i(s(t),2),d=s(r),p=i(s(d),2);te(p),a(d);var u=i(d,2);Ye(u);var m=i(u,2),j=s(m),h=s(j);X(3),a(j),a(m);var x=i(m,2);{var w=n=>{var _=vl();ee(_,5,()=>e(F),oe,(Q,J,C)=>{var M=dl(),W=s(M);X(2),a(M),P(()=>$e(W,"src",e(J))),b("click",M,()=>e(F).splice(C,1)),o(Q,M)}),a(_),o(n,_)};f(x,n=>{e(F).length>0&&n(w)})}X(2),a(r),a(t),le(p,()=>e(we),n=>v(we,n)),le(u,()=>e(T),n=>v(T,n)),b("input",u,at),b("change",h,st),o(l,t)},Ot=l=>{var t=Ce(),r=Ae(t);{var d=p=>{var u=cl(),m=i(s(u),2),j=s(m),h=i(s(j),2);te(h),a(j);var x=i(j,2);Ye(x);var w=i(x,2),n=s(w);a(w),X(2),a(m),a(u),P(_=>n.disabled=_,[()=>!e(ge).trim()]),le(h,()=>e(Ue),_=>v(Ue,_)),le(x,()=>e(ge),_=>v(ge,_)),b("click",n,yt),o(p,u)};f(r,p=>{e(V)==="checklists"&&p(d)},!0)}o(l,t)};f(pt,l=>{e(V)==="notes"?l(Ht):l(Ot,!1)})}var bt=i(pt,2);{var Pt=l=>{var t=ml(),r=s(t),d=i(s(r),2),p=s(d),u=s(p);te(u),u.value=u.__value="notes";var m=i(u,4);te(m),m.value=m.__value="checklists",X(2),a(p);var j=i(p,2),h=i(s(j),2);te(h),a(j);var x=i(j,2);Ye(x);var w=i(x,2),n=s(w),_=s(n);X(3),a(n),a(w);var Q=i(w,2);{var J=g=>{var S=hl();ee(S,5,()=>e(F),oe,(E,pe,A)=>{var k=ul(),H=s(k);X(2),a(k),P(()=>$e(H,"src",e(pe))),b("click",k,()=>e(F).splice(A,1)),o(E,k)}),a(S),o(g,S)};f(Q,g=>{e(F).length>0&&g(J)})}X(2),a(d),a(r);var C=i(r,2),M=i(s(C),2),W=s(M);ee(W,1,Se,oe,(g,S)=>{var E=Ce(),pe=Ae(E);{var A=k=>{var H=bl(),$=s(H),be=s($,!0);a($);var fe=i($,2);ee(fe,5,()=>e(S).items,oe,(D,q)=>{var y=pl(),z=s(y);te(z);var xe=i(z,2),O=s(xe,!0);a(xe),a(y),P(()=>{Qt(z,e(q).done),de(xe,1,`text-theme ${e(q).done?"line-through text-theme/50":""}`,"svelte-1l5usla"),R(O,e(q).text)}),b("change",z,()=>Ne(e(q).id)),o(D,y)}),a(fe);var me=i(fe,2),B=s(me);te(B);var De=i(B,2);a(me),a(H),P(()=>R(be,e(S).group.text)),le(B,()=>e(ve),D=>v(ve,D)),b("keydown",B,D=>D.key==="Enter"&&Ve()),b("click",De,()=>{v(ne,e(S).group.id),Ve()}),o(k,H)};f(pe,k=>{(e(S).group.id===e(ne)||e(ne)===null)&&k(A)})}o(g,E)});var ke=i(W,2);{var re=g=>{var S=fl();o(g,S)};f(ke,g=>{Se().length===0&&g(re)})}a(M),a(C),a(t),mt(tt,[],u,()=>e(V),g=>v(V,g)),mt(tt,[],m,()=>e(V),g=>v(V,g)),le(h,()=>e(we),g=>v(we,g)),le(x,()=>e(T),g=>v(T,g)),b("input",x,at),b("change",_,st),o(l,t)};f(bt,l=>{e(V)==="create"&&l(Pt)})}var ft=i(bt,2);{var Gt=l=>{var t=jl(),r=s(t),d=i(s(r),2),p=s(d);te(p),a(d),a(r);var u=i(r,2);{var m=h=>{var x=xl();o(h,x)},j=h=>{var x=Ml();ee(x,5,rt,oe,(w,n)=>{var _=Al(),Q=s(_),J=s(Q),C=s(J),M=s(C,!0);a(C);var W=i(C,2),ke=i(s(W),2),re=s(ke),g=s(re),S=s(g);{var E=y=>{var z=gl();X(),o(y,z)},pe=y=>{var z=wl();X(),o(y,z)};f(S,y=>{e(n).pinned?y(E):y(pe,!1)})}a(g),a(re);var A=i(re,2),k=s(A);a(A),a(ke),a(W),a(J);var H=i(J,2),$=s(H,!0);a(H);var be=i(H,2);{var fe=y=>{var z=kl();ee(z,5,()=>e(n).attachments,oe,(xe,O)=>{var ie=Ce(),Ze=Ae(ie);{var Qe=L=>{var K=_l();b("click",K,()=>zt(e(O))),o(L,K)},Xe=L=>{var K=yl();P(()=>$e(K,"src",e(O))),o(L,K)};f(Ze,L=>{e(O).startsWith("data:audio")?L(Qe):L(Xe,!1)})}o(xe,ie)}),a(z),o(y,z)};f(be,y=>{e(n).attachments&&e(n).attachments.length>0&&y(fe)})}var me=i(be,2),B=s(me),De=s(B);a(B);var D=i(B,2);{var q=y=>{var z=Cl();o(y,z)};f(D,y=>{e(n).pinned&&y(q)})}a(me),a(Q),a(_),P(y=>{et(_,`background-color: ${e(n).color??""}20; border-color: ${e(n).color??""}40;`),R(M,e(n).title),R($,e(n).body),R(De,`Created: ${y??""} by ${(e(n).user||"Unknown")??""}`)},[()=>new Date(e(n).createdAt||e(n).updatedAt).toLocaleDateString()]),b("click",g,()=>kt(e(n).id)),b("click",k,()=>Ct(e(n).id)),o(w,_)}),a(x),o(h,x)};f(u,h=>{rt().length===0?h(m):h(j,!1)})}a(t),le(p,()=>e(je),h=>v(je,h)),o(l,t)};f(ft,l=>{e(V)==="notes"&&l(Gt)})}var Jt=i(ft,2);{var Wt=l=>{var t=Ll(),r=i(s(t),2);{var d=u=>{var m=zl();o(u,m)},p=u=>{var m=Bl();ee(m,5,Se,oe,(j,h)=>{var x=Vl(),w=s(x),n=s(w),_=s(n),Q=s(_,!0);a(_);var J=i(_,2);a(n);var C=i(n,2);ee(C,5,()=>e(h).items,oe,(A,k,H)=>{var $=Tl(),be=s($);{var fe=D=>{var q=Nl();o(D,q)},me=D=>{var q=Ce(),y=Ae(q);{var z=O=>{var ie=Sl();b("click",ie,()=>Ne(e(k).id)),o(O,ie)},xe=O=>{var ie=Ce(),Ze=Ae(ie);{var Qe=L=>{var K=Il();b("click",K,()=>Ne(e(k).id)),o(L,K)},Xe=L=>{var K=Dl();b("click",K,()=>Ne(e(k).id)),o(L,K)};f(Ze,L=>{H%3===1?L(Qe):L(Xe,!1)},!0)}o(O,ie)};f(y,O=>{H%3===0?O(z):O(xe,!1)})}o(D,q)};f(be,D=>{e(k).done?D(fe):D(me,!1)})}var B=i(be,2),De=s(B,!0);a(B),a($),P(()=>{de(B,1,`text-white ${e(k).done?"line-through text-white/50":""} cursor-pointer`,"svelte-1l5usla"),R(De,e(k).text)}),b("click",B,()=>Ne(e(k).id)),o(A,$)}),a(C);var M=i(C,2),W=s(M),ke=s(W);a(W);var re=i(W,2),g=s(re);a(re),a(M);var S=i(M,2),E=s(S);te(E);var pe=i(E,2);a(S),a(w),a(x),P((A,k)=>{et(x,`background-color: ${(e(h).group.color||"#10b981")??""}20; border-color: ${(e(h).group.color||"#10b981")??""}40;`),R(Q,e(h).group.text),R(ke,`${A??""} / ${e(h).items.length??""} completed`),et(g,`width: ${k??""}%`)},[()=>e(h).items.filter(A=>A.done).length,()=>e(h).items.length>0?e(h).items.filter(A=>A.done).length/e(h).items.length*100:0]),b("click",J,()=>Nt(e(h).group.id)),le(E,()=>e(ve),A=>v(ve,A)),b("focus",E,()=>v(ne,e(h).group.id)),b("keydown",E,A=>A.key==="Enter"&&Ve()),b("click",pe,()=>{v(ne,e(h).group.id),Ve()}),o(j,x)}),a(m),o(u,m)};f(r,u=>{Se().length===0?u(d):u(p,!1)})}a(t),o(l,t)};f(Jt,l=>{e(V)==="checklists"&&l(Wt)})}a(it),a(He),P(l=>{de(Ie,1,`px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${e(V)==="notes"?"bg-white text-purple-600 shadow-lg":"text-theme hover:bg-white/20"}`,"svelte-1l5usla"),R(St,`📚 My Notes (${e(U).length??""})`),de(Be,1,`px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${e(V)==="checklists"?"bg-white text-purple-600 shadow-lg":"text-theme hover:bg-white/20"}`,"svelte-1l5usla"),R(It,`✅ Checklists (${l??""})`),de(We,1,`btn btn-sm ${e(he)==="notes"?"btn-primary":"btn-outline"}`,"svelte-1l5usla"),de(nt,1,`btn btn-sm ${e(he)==="checklists"?"btn-primary":"btn-outline"}`,"svelte-1l5usla"),de(ye,1,`btn btn-circle btn-lg ${e(se)?"btn-error":"btn-success"} shadow-lg`,"svelte-1l5usla"),ye.disabled=!e(Ee),R(Et,`Voice input automatically creates ${e(he)==="notes"?"notes":"checklists"}!`)},[()=>Se().length]),b("click",Ie,()=>v(V,"notes")),b("click",Be,()=>v(V,"checklists")),b("click",We,()=>v(he,"notes")),b("click",nt,()=>v(he,"checklists")),b("click",ye,wt),b("click",Ke,()=>e(_e)?Mt():At()),o(Me,He),Zt()}function Fl(Me){Ul(Me,{})}function Ql(Me){Fl(Me)}export{Ql as component};
