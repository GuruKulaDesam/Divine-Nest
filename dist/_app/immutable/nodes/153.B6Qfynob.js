import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as ga}from"../chunks/Dl7RRJWM.js";import{p as wa,m as x,l as re,d as ya,e as w,h as Ua,f as ka,t as m,i as t,j as V,g as e,a as g,b as Aa,$ as Sa,k as s,s as v,n as W,r as a,o as se,u as p,q as b,v as Qe,w as ja,y as U,z as Ca}from"../chunks/6uIj5N_2.js";import{i as X}from"../chunks/Dvp2nKH1.js";import{e as le,i as oe}from"../chunks/D27cKp0K.js";import{b as ie,r as L,a as Ve}from"../chunks/CuqaNdSY.js";import{c as Da,s as $a}from"../chunks/DtCY3ta1.js";import{b as E}from"../chunks/DgriDnSR.js";import{p as Pa}from"../chunks/Bfc47y5P.js";import{i as La}from"../chunks/CRscWiiN.js";import{I as k}from"../chunks/BHUeFzQU.js";import{s as ne}from"../chunks/BesrdQ_8.js";var Ea=w("<option> </option>"),Ma=w("<option> </option>"),qa=w("<img/>"),Fa=w('<div class="bg-primary text-primary-content flex items-center justify-center text-xl font-bold"> </div>'),Ia=w('<p class="text-sm text-base-content/70"> </p>'),Ra=w('<p class="text-sm"><strong>Location:</strong> </p>'),Ga=w('<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow"><div class="card-body"><div class="flex items-start gap-4"><div class="avatar"><div class="w-16 h-16 rounded-full"><!></div></div> <div class="flex-1"><div class="flex justify-between items-start"><div><h3 class="card-title text-lg"> </h3> <!></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32"><li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div> <div class="mt-4 space-y-2"><p class="text-sm"><strong>Email:</strong> </p> <!> <p class="text-sm"><strong>Joined:</strong> </p> <div class="flex justify-between items-center pt-2"><span class="text-sm text-base-content/60">Auth: <span> </span></span> <!></div></div></div></div></div></div>'),Na=w('<div class="mb-8"><h2 class="text-2xl font-semibold mb-4 text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),Oa=w('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No users found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),Ta=w('<div class="modal modal-open"><div class="modal-box max-w-lg"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Role *</span></label> <select class="select select-bordered" required><option>Father</option><option>Mother</option><option>Child</option><option>Grandparent</option><option>Guest</option><option>Service Provider</option><option>Admin</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Auth Provider *</span></label> <select class="select select-bordered" required><option>Manual</option><option>Google</option><option>Facebook</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Full Name *</span></label> <input type="text" placeholder="Enter full name..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Nick Name</span></label> <input type="text" placeholder="Optional nickname..." class="input input-bordered"/></div></div> <div class="form-control"><label class="label"><span class="label-text">Email *</span></label> <input type="email" placeholder="user@example.com" class="input input-bordered" required/></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Location</span></label> <input type="text" placeholder="City, State..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Joined Date *</span></label> <input type="date" class="input input-bordered" required/></div></div> <div class="form-control"><label class="label"><span class="label-text">Profile Picture URL</span></label> <input type="url" placeholder="https://..." class="input input-bordered"/></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),za=w('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> User Management</h1> <p class="text-base-content/70 mt-1">Manage family members, guests, and service providers</p></div> <button class="btn btn-primary"><!> Add User</button></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search users..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Role</span></label> <select class="select select-bordered"><option>All Roles</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Auth Provider</span></label> <select class="select select-bordered"><option>All Providers</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function rt(We,Xe){wa(Xe,!1);const T=x(),ce=x(),de=x(),ve=x();let A=x([]),z=x(!1),f=x(null),y=x(""),S=x(""),j=x(""),o=x({role:"Child",name:"",nick_name:"",email:"",location:"",joined_date:new Date().toISOString().split("T")[0],picture_url:"",auth_provider:"Manual"});ga(async()=>{await pe()});async function pe(){try{v(A,await ne.getUsers())}catch(r){console.error("Error loading users:",r)}}function _e(){v(o,{role:"Child",name:"",nick_name:"",email:"",location:"",joined_date:new Date().toISOString().split("T")[0],picture_url:"",auth_provider:"Manual"})}async function Ye(){try{const r={...e(o),id:e(f)?e(f).id:crypto.randomUUID(),created_at:e(f)?e(f).created_at:new Date().toISOString()};e(f)?await ne.updateUser(r):await ne.saveUser(r),await pe(),v(z,!1),v(f,null),_e()}catch(r){console.error("Error saving user:",r)}}function Ze(r){v(f,r),v(o,{...r,joined_date:r.joined_date.split("T")[0]}),v(z,!0)}async function ea(r){if(confirm(`Delete user "${r.name}"?`))try{await ne.deleteUser(r.id),await pe()}catch(i){console.error("Error deleting user:",i)}}function aa(){v(z,!1),v(f,null),_e()}function qe(r){switch(r){case"Father":return"heroicons:user";case"Mother":return"heroicons:user";case"Child":return"heroicons:face-smile";case"Grandparent":return"heroicons:user-group";case"Guest":return"heroicons:user-plus";case"Service Provider":return"heroicons:wrench-screwdriver";case"Admin":return"heroicons:shield-check";default:return"heroicons:user"}}function ta(r){switch(r){case"Google":return"text-red-600";case"Facebook":return"text-blue-600";case"Manual":return"text-green-600";default:return"text-base-content"}}re(()=>(e(A),e(y),e(S),e(j)),()=>{v(T,e(A).filter(r=>{const i=!e(y)||r.name.toLowerCase().includes(e(y).toLowerCase())||r.email.toLowerCase().includes(e(y).toLowerCase())||r.nick_name&&r.nick_name.toLowerCase().includes(e(y).toLowerCase()),n=!e(S)||r.role===e(S),u=!e(j)||r.auth_provider===e(j);return i&&n&&u}))}),re(()=>e(A),()=>{v(ce,[...new Set(e(A).map(r=>r.role))])}),re(()=>e(A),()=>{v(de,[...new Set(e(A).map(r=>r.auth_provider))])}),re(()=>e(T),()=>{v(ve,e(T).reduce((r,i)=>(r[i.role]||(r[i.role]=[]),r[i.role].push(i),r),{}))}),ya(),La();var Fe=za();Ua(r=>{Sa.title="Users - Divine-Nest"});var ue=ka(Fe),Ie=t(ue),me=t(Ie),be=t(me),Re=t(be),ra=t(Re);k(ra,{icon:"heroicons:users",class:"w-8 h-8"}),W(),a(Re),W(2),a(be);var he=s(be,2),sa=t(he);k(sa,{icon:"heroicons:plus",class:"w-5 h-5"}),W(),a(he),a(me);var fe=s(me,2),Ge=t(fe),xe=t(Ge),Ne=s(t(xe),2);L(Ne),a(xe);var ge=s(xe,2),we=s(t(ge),2);m(()=>{e(S),se(()=>{e(ce)})});var ye=t(we);ye.value=ye.__value="";var la=s(ye);le(la,1,()=>e(ce),oe,(r,i)=>{var n=Ea(),u=t(n,!0);a(n);var h={};m(()=>{b(u,e(i)),h!==(h=e(i))&&(n.value=(n.__value=e(i))??"")}),g(r,n)}),a(we),a(ge);var Oe=s(ge,2),Ue=s(t(Oe),2);m(()=>{e(j),se(()=>{e(de)})});var ke=t(Ue);ke.value=ke.__value="";var oa=s(ke);le(oa,1,()=>e(de),oe,(r,i)=>{var n=Ma(),u=t(n,!0);a(n);var h={};m(()=>{b(u,e(i)),h!==(h=e(i))&&(n.value=(n.__value=e(i))??"")}),g(r,n)}),a(Ue),a(Oe),a(Ge),a(fe);var Te=s(fe,2);le(Te,1,()=>(e(ve),p(()=>Object.entries(e(ve)))),oe,(r,i)=>{var n=ja(()=>Ca(e(i),2));let u=()=>e(n)[0],h=()=>e(n)[1];var C=Na(),D=t(C),M=t(D);{let $=Qe(()=>(u(),p(()=>qe(u()))));k(M,{get icon(){return e($)},class:"w-6 h-6"})}var Y=s(M),J=s(Y),Ae=t(J,!0);a(J),a(D);var q=s(D,2);le(q,5,h,oe,($,l)=>{var F=Ga(),B=t(F),I=t(B),R=t(I),G=t(R),H=t(G);{var Z=d=>{var _=qa();m(()=>{Ve(_,"src",(e(l),p(()=>e(l).picture_url))),Ve(_,"alt",(e(l),p(()=>e(l).name)))}),g(d,_)},ee=d=>{var _=Fa(),Q=t(_,!0);a(_),m(xa=>b(Q,xa),[()=>(e(l),p(()=>e(l).name.charAt(0).toUpperCase()))]),g(d,_)};X(H,d=>{e(l),p(()=>e(l).picture_url)?d(Z):d(ee,!1)})}a(G),a(R);var K=s(R,2),P=t(K),N=t(P),O=t(N),ae=t(O,!0);a(O);var te=s(O,2);{var Se=d=>{var _=Ia(),Q=t(_);a(_),m(()=>b(Q,`"${e(l),p(()=>e(l).nick_name)??""}"`)),g(d,_)};X(te,d=>{e(l),p(()=>e(l).nick_name)&&d(Se)})}a(N);var c=s(N,2),je=t(c),va=t(je);k(va,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),a(je);var ze=s(je,2),Ce=t(ze),De=t(Ce),pa=t(De);k(pa,{icon:"heroicons:pencil",class:"w-4 h-4"}),W(),a(De),a(Ce);var Je=s(Ce,2),$e=t(Je),_a=t($e);k(_a,{icon:"heroicons:trash",class:"w-4 h-4"}),W(),a($e),a(Je),a(ze),a(c),a(P);var Be=s(P,2),Pe=t(Be),ua=s(t(Pe));a(Pe);var He=s(Pe,2);{var ma=d=>{var _=Ra(),Q=s(t(_));a(_),m(()=>b(Q,` ${e(l),p(()=>e(l).location)??""}`)),g(d,_)};X(He,d=>{e(l),p(()=>e(l).location)&&d(ma)})}var Le=s(He,2),ba=s(t(Le));a(Le);var Ke=s(Le,2),Ee=t(Ke),Me=s(t(Ee)),ha=t(Me,!0);a(Me),a(Ee);var fa=s(Ee,2);{let d=Qe(()=>(e(l),p(()=>qe(e(l).role))));k(fa,{get icon(){return e(d)},class:"w-5 h-5 text-primary"})}a(Ke),a(Be),a(K),a(I),a(B),a(F),m((d,_)=>{b(ae,(e(l),p(()=>e(l).name))),b(ua,` ${e(l),p(()=>e(l).email)??""}`),b(ba,` ${d??""}`),$a(Me,1,_),b(ha,(e(l),p(()=>e(l).auth_provider)))},[()=>(e(l),p(()=>new Date(e(l).joined_date).toLocaleDateString())),()=>Da((e(l),p(()=>ta(e(l).auth_provider))))]),V("click",De,()=>Ze(e(l))),V("click",$e,()=>ea(e(l))),g($,F)}),a(q),a(C),m(()=>{b(Y,` ${u()??""}s `),b(Ae,(h(),p(()=>h().length)))}),g(r,C)});var ia=s(Te,2);{var na=r=>{var i=Oa(),n=t(i);k(n,{icon:"heroicons:users",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var u=s(n,4),h=t(u,!0);a(u),a(i),m(()=>b(h,e(y)||e(S)||e(j)?"Try adjusting your filters":"Add your first user to get started")),g(r,i)};X(ia,r=>{e(T),p(()=>e(T).length===0)&&r(na)})}a(Ie),a(ue);var ca=s(ue,2);{var da=r=>{var i=Ta(),n=t(i),u=t(n),h=t(u,!0);a(u);var C=s(u,2),D=t(C),M=t(D),Y=s(t(M),2);m(()=>{e(o),se(()=>{})}),a(M);var J=s(M,2),Ae=s(t(J),2);m(()=>{e(o),se(()=>{})}),a(J),a(D);var q=s(D,2),$=t(q),l=s(t($),2);L(l),a($);var F=s($,2),B=s(t(F),2);L(B),a(F),a(q);var I=s(q,2),R=s(t(I),2);L(R),a(I);var G=s(I,2),H=t(G),Z=s(t(H),2);L(Z),a(H);var ee=s(H,2),K=s(t(ee),2);L(K),a(ee),a(G);var P=s(G,2),N=s(t(P),2);L(N),a(P);var O=s(P,2),ae=t(O),te=s(ae,2),Se=t(te);a(te),a(O),a(C),a(n),a(i),m(()=>{b(h,e(f)?"Edit User":"Add New User"),b(Se,`${e(f)?"Update":"Add"} User`)}),ie(Y,()=>e(o).role,c=>U(o,e(o).role=c)),ie(Ae,()=>e(o).auth_provider,c=>U(o,e(o).auth_provider=c)),E(l,()=>e(o).name,c=>U(o,e(o).name=c)),E(B,()=>e(o).nick_name,c=>U(o,e(o).nick_name=c)),E(R,()=>e(o).email,c=>U(o,e(o).email=c)),E(Z,()=>e(o).location,c=>U(o,e(o).location=c)),E(K,()=>e(o).joined_date,c=>U(o,e(o).joined_date=c)),E(N,()=>e(o).picture_url,c=>U(o,e(o).picture_url=c)),V("click",ae,aa),V("submit",C,Pa(Ye)),g(r,i)};X(ca,r=>{e(z)&&r(da)})}V("click",he,()=>{v(z,!0),v(f,null),_e()}),E(Ne,()=>e(y),r=>v(y,r)),ie(we,()=>e(S),r=>v(S,r)),ie(Ue,()=>e(j),r=>v(j,r)),g(We,Fe),Aa()}export{rt as component};
