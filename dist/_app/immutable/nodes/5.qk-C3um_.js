import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as Vt}from"../chunks/Dl7RRJWM.js";import{p as Wt,m as f,l as ce,d as Yt,e as h,h as Gt,f as Jt,t as m,i as a,j as X,g as e,a as x,b as Kt,$ as Qt,k as s,s as _,n as $,r as t,o as U,u as v,q as b,v as pt,w as Xt,x as Zt,y,z as ea}from"../chunks/6uIj5N_2.js";import{i as z}from"../chunks/Dvp2nKH1.js";import{e as de,i as ve}from"../chunks/D27cKp0K.js";import{b as B,r as D}from"../chunks/CuqaNdSY.js";import{s as Ke}from"../chunks/DtCY3ta1.js";import{b as V,a as _t}from"../chunks/DgriDnSR.js";import{p as ta}from"../chunks/Bfc47y5P.js";import{i as aa}from"../chunks/CRscWiiN.js";import{I as w}from"../chunks/BHUeFzQU.js";import{s as pe}from"../chunks/BesrdQ_8.js";var ra=h("<option> </option>"),sa=h("<option> </option>"),ia=h("<option> </option>"),oa=h("<p><strong>Repeat:</strong> </p>"),la=h("<p><strong>Location:</strong> </p>"),na=h('<div class="alert alert-error mt-3 py-2"><!> <span class="text-sm">Overdue!</span></div>'),ca=h('<span class="flex items-center gap-1"><!> Sound</span>'),da=h('<span class="flex items-center gap-1"><!> Vibrate</span>'),va=h('<div><div class="card-body"><div class="flex items-start justify-between"><div class="flex items-start gap-3"><div class="avatar"><div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center"><!></div></div> <div class="flex-1"><h3 class="card-title text-lg"> </h3> <p class="text-sm text-base-content/70 mb-2"> </p> <div class="flex flex-wrap gap-2 mb-3"><span> </span> <span> </span> <span class="badge badge-outline badge-sm"> </span></div> <div class="text-sm text-base-content/60 space-y-1"><p><strong>Trigger:</strong> </p> <!> <!></div> <!></div></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-40"><li><a><!> </a></li> <li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div> <div class="flex justify-between items-center pt-3 border-t border-base-300"><div class="flex gap-4 text-sm text-base-content/60"><!> <!></div> <span class="text-xs text-base-content/50"> </span></div></div></div>'),pa=h('<div class="mb-8"><h2 class="text-2xl font-semibold mb-4 text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),_a=h('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No alerts found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),ua=h('<div class="modal modal-open"><div class="modal-box max-w-2xl"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="form-control"><label class="label"><span class="label-text">Type *</span></label> <select class="select select-bordered" required><option>Reminder</option><option>Festival</option><option>Emergency</option><option>Health</option><option>Finance</option><option>Maintenance</option><option>Birthday</option><option>Custom</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Priority *</span></label> <select class="select select-bordered" required><option>Low</option><option>Medium</option><option>High</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Status *</span></label> <select class="select select-bordered" required><option>Active</option><option>Inactive</option><option>Completed</option></select></div></div> <div class="form-control"><label class="label"><span class="label-text">Title *</span></label> <input type="text" placeholder="Alert title..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Message *</span></label> <textarea placeholder="Alert message..." class="textarea textarea-bordered" rows="3" required></textarea></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Trigger Date *</span></label> <input type="date" class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Trigger Time *</span></label> <input type="time" class="input input-bordered" required/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Repeat Interval</span></label> <select class="select select-bordered"><option>No Repeat</option><option>Daily</option><option>Weekly</option><option>Monthly</option><option>Yearly</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Location Trigger</span></label> <input type="text" placeholder="e.g., Home, Office..." class="input input-bordered"/></div></div> <div class="form-control"><label class="label"><span class="label-text">User ID (Optional)</span></label> <input type="text" placeholder="Specific user ID..." class="input input-bordered"/></div> <div class="form-group"><label class="label cursor-pointer"><span class="label-text">Enable Sound</span> <input type="checkbox" class="toggle toggle-primary"/></label></div> <div class="form-group"><label class="label cursor-pointer"><span class="label-text">Enable Vibration</span> <input type="checkbox" class="toggle toggle-primary"/></label></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),ba=h('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> Alert Management</h1> <p class="text-base-content/70 mt-1">Manage reminders, notifications, and automated alerts</p></div> <button class="btn btn-primary"><!> Create Alert</button></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search alerts..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Type</span></label> <select class="select select-bordered"><option>All Types</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Priority</span></label> <select class="select select-bordered"><option>All Priorities</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Status</span></label> <select class="select select-bordered"><option>All Statuses</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function Ca(ut,bt){Wt(bt,!1);const Z=f(),ye=f(),we=f(),Ae=f(),Se=f();let T=f([]),ee=f(!1),A=f(null),k=f(""),C=f(""),I=f(""),E=f(""),o=f({type:"Reminder",title:"",message:"",priority:"Medium",status:"Active",trigger_date:new Date().toISOString().split("T")[0],trigger_time:"09:00",repeat_interval:"",user_id:"",location_trigger:"",sound_enabled:!0,vibration_enabled:!0});Vt(async()=>{await _e()});async function _e(){try{_(T,await pe.getAlerts())}catch(r){console.error("Error loading alerts:",r)}}function Te(){_(o,{type:"Reminder",title:"",message:"",priority:"Medium",status:"Active",trigger_date:new Date().toISOString().split("T")[0],trigger_time:"09:00",repeat_interval:"",user_id:"",location_trigger:"",sound_enabled:!0,vibration_enabled:!0})}async function gt(){try{const r={...e(o),id:e(A)?e(A).id:crypto.randomUUID(),created_at:e(A)?e(A).created_at:new Date().toISOString(),trigger_datetime:`${e(o).trigger_date}T${e(o).trigger_time}:00`};e(A)?await pe.updateAlert(r):await pe.saveAlert(r),await _e(),_(ee,!1),_(A,null),Te()}catch(r){console.error("Error saving alert:",r)}}function mt(r){_(A,r);const[l,n]=r.trigger_datetime.split("T");_(o,{...r,trigger_date:l,trigger_time:n.substring(0,5)}),_(ee,!0)}async function ft(r){if(confirm(`Delete alert "${r.title}"?`))try{await pe.deleteAlert(r.id),await _e()}catch(l){console.error("Error deleting alert:",l)}}async function xt(r){try{const l={...r,status:r.status==="Active"?"Inactive":"Active"};await pe.updateAlert(l),await _e()}catch(l){console.error("Error toggling alert status:",l)}}function ht(){_(ee,!1),_(A,null),Te()}function yt(r){switch(r){case"Reminder":return"heroicons:clock";case"Festival":return"heroicons:sparkles";case"Emergency":return"heroicons:exclamation-triangle";case"Health":return"heroicons:heart";case"Finance":return"heroicons:currency-dollar";case"Maintenance":return"heroicons:wrench-screwdriver";case"Birthday":return"heroicons:cake";case"Custom":return"heroicons:bell";default:return"heroicons:bell"}}function wt(r){switch(r){case"High":return"text-red-600 bg-red-100";case"Medium":return"text-yellow-600 bg-yellow-100";case"Low":return"text-green-600 bg-green-100";default:return"text-base-content bg-base-200"}}function At(r){switch(r){case"Active":return"text-green-600 bg-green-100";case"Inactive":return"text-gray-600 bg-gray-100";case"Completed":return"text-blue-600 bg-blue-100";default:return"text-base-content bg-base-200"}}function Qe(r){const l=new Date;return new Date(r.trigger_datetime)<l&&r.status==="Active"}function St(r){return new Date(r).toLocaleString()}ce(()=>(e(T),e(k),e(C),e(I),e(E)),()=>{_(Z,e(T).filter(r=>{const l=!e(k)||r.title.toLowerCase().includes(e(k).toLowerCase())||r.message.toLowerCase().includes(e(k).toLowerCase()),n=!e(C)||r.type===e(C),g=!e(I)||r.priority===e(I),u=!e(E)||r.status===e(E);return l&&n&&g&&u}))}),ce(()=>e(T),()=>{_(ye,[...new Set(e(T).map(r=>r.type))])}),ce(()=>e(T),()=>{_(we,[...new Set(e(T).map(r=>r.priority))])}),ce(()=>e(T),()=>{_(Ae,[...new Set(e(T).map(r=>r.status))])}),ce(()=>e(Z),()=>{_(Se,e(Z).reduce((r,l)=>(r[l.status]||(r[l.status]=[]),r[l.status].push(l),r),{}))}),Yt(),aa();var Xe=ba();Gt(r=>{Qt.title="Alerts - Divine-Nest"});var $e=Jt(Xe),Ze=a($e),De=a(Ze),ke=a(De),et=a(ke),Tt=a(et);w(Tt,{icon:"heroicons:bell-alert",class:"w-8 h-8"}),$(),t(et),$(2),t(ke);var Ce=s(ke,2),$t=a(Ce);w($t,{icon:"heroicons:plus",class:"w-5 h-5"}),$(),t(Ce),t(De);var Ie=s(De,2),tt=a(Ie),Ee=a(tt),at=s(a(Ee),2);D(at),t(Ee);var Me=s(Ee,2),qe=s(a(Me),2);m(()=>{e(C),U(()=>{e(ye)})});var Le=a(qe);Le.value=Le.__value="";var Dt=s(Le);de(Dt,1,()=>e(ye),ve,(r,l)=>{var n=ra(),g=a(n,!0);t(n);var u={};m(()=>{b(g,e(l)),u!==(u=e(l))&&(n.value=(n.__value=e(l))??"")}),x(r,n)}),t(qe),t(Me);var Oe=s(Me,2),je=s(a(Oe),2);m(()=>{e(I),U(()=>{e(we)})});var Re=a(je);Re.value=Re.__value="";var kt=s(Re);de(kt,1,()=>e(we),ve,(r,l)=>{var n=sa(),g=a(n,!0);t(n);var u={};m(()=>{b(g,e(l)),u!==(u=e(l))&&(n.value=(n.__value=e(l))??"")}),x(r,n)}),t(je),t(Oe);var rt=s(Oe,2),Fe=s(a(rt),2);m(()=>{e(E),U(()=>{e(Ae)})});var Pe=a(Fe);Pe.value=Pe.__value="";var Ct=s(Pe);de(Ct,1,()=>e(Ae),ve,(r,l)=>{var n=ia(),g=a(n,!0);t(n);var u={};m(()=>{b(g,e(l)),u!==(u=e(l))&&(n.value=(n.__value=e(l))??"")}),x(r,n)}),t(Fe),t(rt),t(tt),t(Ie);var st=s(Ie,2);de(st,1,()=>(e(Se),v(()=>Object.entries(e(Se)))),ve,(r,l)=>{var n=Xt(()=>ea(e(l),2));let g=()=>e(n)[0],u=()=>e(n)[1];var M=pa(),q=a(M),W=a(q);w(W,{icon:"heroicons:circle-stack",class:"w-6 h-6"});var ue=s(W),Y=s(ue),He=a(Y,!0);t(Y),t(q);var te=s(q,2);de(te,5,u,ve,(Ne,i)=>{var L=va(),G=a(L),J=a(G),O=a(J),j=a(O),ae=a(j),be=a(ae);{let d=pt(()=>(e(i),v(()=>yt(e(i).type))));w(be,{get icon(){return e(d)},class:"w-6 h-6 text-primary"})}t(ae),t(j);var re=s(j,2),R=a(re),se=a(R,!0);t(R);var F=s(R,2),ge=a(F,!0);t(F);var K=s(F,2),P=a(K),ie=a(P,!0);t(P);var H=s(P,2),oe=a(H,!0);t(H);var le=s(H,2),me=a(le,!0);t(le),t(K);var N=s(K,2),Q=a(N),fe=s(a(Q));t(Q);var ne=s(Q,2);{var xe=d=>{var p=oa(),S=s(a(p));t(p),m(()=>b(S,` ${e(i),v(()=>e(i).repeat_interval)??""}`)),x(d,p)};z(ne,d=>{e(i),v(()=>e(i).repeat_interval)&&d(xe)})}var he=s(ne,2);{var Ue=d=>{var p=la(),S=s(a(p));t(p),m(()=>b(S,` ${e(i),v(()=>e(i).location_trigger)??""}`)),x(d,p)};z(he,d=>{e(i),v(()=>e(i).location_trigger)&&d(Ue)})}t(N);var c=s(N,2);{var Lt=d=>{var p=na(),S=a(p);w(S,{icon:"heroicons:exclamation-triangle",class:"w-4 h-4"}),$(2),t(p),x(d,p)};z(c,d=>{e(i),v(()=>Qe(e(i)))&&d(Lt)})}t(re),t(O);var it=s(O,2),ze=a(it),Ot=a(ze);w(Ot,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),t(ze);var ot=s(ze,2),Be=a(ot),Ve=a(Be),lt=a(Ve);{let d=pt(()=>(e(i),v(()=>e(i).status==="Active"?"heroicons:eye-slash":"heroicons:eye")));w(lt,{get icon(){return e(d)},class:"w-4 h-4"})}var jt=s(lt);t(Ve),t(Be);var We=s(Be,2),Ye=a(We),Rt=a(Ye);w(Rt,{icon:"heroicons:pencil",class:"w-4 h-4"}),$(),t(Ye),t(We);var nt=s(We,2),Ge=a(nt),Ft=a(Ge);w(Ft,{icon:"heroicons:trash",class:"w-4 h-4"}),$(),t(Ge),t(nt),t(ot),t(it),t(J);var ct=s(J,2),Je=a(ct),dt=a(Je);{var Pt=d=>{var p=ca(),S=a(p);w(S,{icon:"heroicons:speaker-wave",class:"w-4 h-4"}),$(),t(p),x(d,p)};z(dt,d=>{e(i),v(()=>e(i).sound_enabled)&&d(Pt)})}var Ht=s(dt,2);{var Nt=d=>{var p=da(),S=a(p);w(S,{icon:"heroicons:phone",class:"w-4 h-4"}),$(),t(p),x(d,p)};z(Ht,d=>{e(i),v(()=>e(i).vibration_enabled)&&d(Nt)})}t(Je);var vt=s(Je,2),Ut=a(vt);t(vt),t(ct),t(G),t(L),m((d,p,S,zt,Bt)=>{Ke(L,1,`card bg-base-100 shadow-lg hover:shadow-xl transition-shadow ${d??""}`),b(se,(e(i),v(()=>e(i).title))),b(ge,(e(i),v(()=>e(i).message))),Ke(P,1,`badge badge-sm ${p??""}`),b(ie,(e(i),v(()=>e(i).priority))),Ke(H,1,`badge badge-sm ${S??""}`),b(oe,(e(i),v(()=>e(i).status))),b(me,(e(i),v(()=>e(i).type))),b(fe,` ${zt??""}`),b(jt,` ${e(i),v(()=>e(i).status==="Active"?"Deactivate":"Activate")??""}`),b(Ut,`Created ${Bt??""}`)},[()=>(e(i),v(()=>Qe(e(i))?"border-l-4 border-l-red-500":"")),()=>(e(i),v(()=>wt(e(i).priority))),()=>(e(i),v(()=>At(e(i).status))),()=>(e(i),v(()=>St(e(i).trigger_datetime))),()=>(e(i),v(()=>new Date(e(i).created_at).toLocaleDateString()))]),X("click",Ve,()=>xt(e(i))),X("click",Ye,()=>mt(e(i))),X("click",Ge,()=>ft(e(i))),x(Ne,L)}),t(te),t(M),m(()=>{b(ue,` ${g()??""} Alerts `),b(He,(u(),v(()=>u().length)))}),x(r,M)});var It=s(st,2);{var Et=r=>{var l=_a(),n=a(l);w(n,{icon:"heroicons:bell",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var g=s(n,4),u=a(g,!0);t(g),t(l),m(()=>b(u,e(k)||e(C)||e(I)||e(E)?"Try adjusting your filters":"Create your first alert to get started")),x(r,l)};z(It,r=>{e(Z),v(()=>e(Z).length===0)&&r(Et)})}t(Ze),t($e);var Mt=s($e,2);{var qt=r=>{var l=ua(),n=a(l),g=a(n),u=a(g,!0);t(g);var M=s(g,2),q=a(M),W=a(q),ue=s(a(W),2);m(()=>{e(o),U(()=>{})}),t(W);var Y=s(W,2),He=s(a(Y),2);m(()=>{e(o),U(()=>{})}),t(Y);var te=s(Y,2),Ne=s(a(te),2);m(()=>{e(o),U(()=>{})}),t(te),t(q);var i=s(q,2),L=s(a(i),2);D(L),t(i);var G=s(i,2),J=s(a(G),2);Zt(J),t(G);var O=s(G,2),j=a(O),ae=s(a(j),2);D(ae),t(j);var be=s(j,2),re=s(a(be),2);D(re),t(be),t(O);var R=s(O,2),se=a(R),F=s(a(se),2);m(()=>{e(o),U(()=>{})});var ge=a(F);ge.value=ge.__value="",$(4),t(F),t(se);var K=s(se,2),P=s(a(K),2);D(P),t(K),t(R);var ie=s(R,2),H=s(a(ie),2);D(H),t(ie);var oe=s(ie,2),le=a(oe),me=s(a(le),2);D(me),t(le),t(oe);var N=s(oe,2),Q=a(N),fe=s(a(Q),2);D(fe),t(Q),t(N);var ne=s(N,2),xe=a(ne),he=s(xe,2),Ue=a(he);t(he),t(ne),t(M),t(n),t(l),m(()=>{b(u,e(A)?"Edit Alert":"Create New Alert"),b(Ue,`${e(A)?"Update":"Create"} Alert`)}),B(ue,()=>e(o).type,c=>y(o,e(o).type=c)),B(He,()=>e(o).priority,c=>y(o,e(o).priority=c)),B(Ne,()=>e(o).status,c=>y(o,e(o).status=c)),V(L,()=>e(o).title,c=>y(o,e(o).title=c)),V(J,()=>e(o).message,c=>y(o,e(o).message=c)),V(ae,()=>e(o).trigger_date,c=>y(o,e(o).trigger_date=c)),V(re,()=>e(o).trigger_time,c=>y(o,e(o).trigger_time=c)),B(F,()=>e(o).repeat_interval,c=>y(o,e(o).repeat_interval=c)),V(P,()=>e(o).location_trigger,c=>y(o,e(o).location_trigger=c)),V(H,()=>e(o).user_id,c=>y(o,e(o).user_id=c)),_t(me,()=>e(o).sound_enabled,c=>y(o,e(o).sound_enabled=c)),_t(fe,()=>e(o).vibration_enabled,c=>y(o,e(o).vibration_enabled=c)),X("click",xe,ht),X("submit",M,ta(gt)),x(r,l)};z(Mt,r=>{e(ee)&&r(qt)})}X("click",Ce,()=>{_(ee,!0),_(A,null),Te()}),V(at,()=>e(k),r=>_(k,r)),B(qe,()=>e(C),r=>_(C,r)),B(je,()=>e(I),r=>_(I,r)),B(Fe,()=>e(E),r=>_(E,r)),x(ut,Xe),Kt()}export{Ca as component};
