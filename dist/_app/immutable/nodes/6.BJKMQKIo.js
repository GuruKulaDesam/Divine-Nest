import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as da}from"../chunks/Dl7RRJWM.js";import{p as va,m as y,l as Ne,d as pa,e as g,h as ua,f as ba,t as f,i as r,j as T,g as e,a as _,b as _a,$ as ma,k as s,s as d,n as ne,r as a,o as Fe,u,q as m,v as ga,w as fa,x as ha,y as S,z as xa}from"../chunks/6uIj5N_2.js";import{i as $}from"../chunks/Dvp2nKH1.js";import{e as le,i as ce}from"../chunks/D27cKp0K.js";import{b as He,r as q}from"../chunks/CuqaNdSY.js";import{b as L}from"../chunks/DgriDnSR.js";import{p as ya}from"../chunks/Bfc47y5P.js";import{i as wa}from"../chunks/CRscWiiN.js";import{I as k}from"../chunks/BHUeFzQU.js";import{s as me}from"../chunks/BesrdQ_8.js";var Aa=g("<option> </option>"),Sa=g('<span class="badge badge-outline"> </span>'),ka=g('<p class="text-sm"> </p>'),Da=g('<p class="text-sm"><strong>Owner:</strong> </p>'),Ca=g('<p class="text-sm"><strong>Location:</strong> </p>'),Ta=g('<span class="badge badge-ghost badge-sm"> </span>'),$a=g('<div class="flex flex-wrap gap-1 mt-2"></div>'),La=g('<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow"><div class="card-body"><div class="flex justify-between items-start"><div class="flex-1"><h3 class="card-title text-lg"> </h3> <div class="flex flex-wrap gap-2 mt-2"><!></div></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32"><li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div> <div class="mt-4 space-y-2"><!> <!> <!> <p class="text-sm"><strong>Added:</strong> </p> <!></div></div></div>'),Oa=g('<div class="mb-8"><h2 class="text-2xl font-semibold mb-4 text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),Ia=g('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No assets found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),Na=g('<span class="badge badge-primary gap-2"> <button type="button" class="btn btn-ghost btn-xs"><!></button></span>'),Ea=g('<div class="flex flex-wrap gap-2 mt-2"></div>'),qa=g('<div class="modal modal-open"><div class="modal-box max-w-2xl"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Category *</span></label> <select class="select select-bordered" required><option>Documents</option><option>Certificates</option><option>Photos</option><option>Valuables</option><option>Inventory</option><option>Vehicles</option><option>Land</option><option>Buildings</option><option>Software</option><option>Hardware</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Sub Category</span></label> <input type="text" placeholder="Specific sub-category..." class="input input-bordered"/></div></div> <div class="form-control"><label class="label"><span class="label-text">Name *</span></label> <input type="text" placeholder="Asset name..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Description</span></label> <textarea placeholder="Asset description..." class="textarea textarea-bordered" rows="3"></textarea></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Location</span></label> <input type="text" placeholder="Where is it stored..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Owner</span></label> <input type="text" placeholder="Who owns this asset..." class="input input-bordered"/></div></div> <div class="form-control"><label class="label"><span class="label-text">Date Added *</span></label> <input type="date" class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Tags</span></label> <div class="flex gap-2"><input type="text" placeholder="Add a tag..." class="input input-bordered flex-1"/> <button type="button" class="btn btn-outline"><!></button></div> <!></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),ja=g('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> Assets Management</h1> <p class="text-base-content/70 mt-1">Track documents, valuables, vehicles, and other family assets</p></div> <button class="btn btn-primary"><!> Add Asset</button></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search assets..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Category</span></label> <select class="select select-bordered"><option>All Categories</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function Qa(Me,Pe){va(Pe,!1);const G=y(),ge=y(),fe=y();let K=y([]),Q=y(!1),h=y(null),w=y(""),O=y(""),D=y(""),o=y({category:"Documents",sub_category:"",name:"",description:"",location:"",owner:"",date_added:new Date().toISOString().split("T")[0],tags:""});da(async()=>{await he()});async function he(){try{d(K,await me.getAssets())}catch(t){console.error("Error loading assets:",t)}}function xe(){d(o,{category:"Documents",sub_category:"",name:"",description:"",location:"",owner:"",date_added:new Date().toISOString().split("T")[0],tags:""}),d(D,"")}async function We(){try{const t={...e(o),id:e(h)?e(h).id:crypto.randomUUID(),created_at:e(h)?e(h).created_at:new Date().toISOString()};e(h)?await me.updateAsset(t):await me.saveAsset(t),await he(),d(Q,!1),d(h,null),xe()}catch(t){console.error("Error saving asset:",t)}}function Ge(t){d(h,t),d(o,{...t,date_added:t.date_added.split("T")[0]}),d(D,t.tags||""),d(Q,!0)}async function Ke(t){if(confirm(`Delete "${t.name}"?`))try{await me.deleteAsset(t.id),await he()}catch(l){console.error("Error deleting asset:",l)}}function Qe(){d(Q,!1),d(h,null),xe()}function Ee(){if(e(D).trim()){const t=e(o).tags?JSON.parse(e(o).tags):[];t.includes(e(D).trim())||(t.push(e(D).trim()),S(o,e(o).tags=JSON.stringify(t))),d(D,"")}}function Re(t){const p=(e(o).tags?JSON.parse(e(o).tags):[]).filter(b=>b!==t);S(o,e(o).tags=JSON.stringify(p))}function Xe(t){switch(t){case"Documents":return"heroicons:document";case"Certificates":return"heroicons:academic-cap";case"Photos":return"heroicons:photo";case"Valuables":return"heroicons:sparkles";case"Inventory":return"heroicons:archive-box";case"Vehicles":return"heroicons:truck";case"Land":return"heroicons:map";case"Buildings":return"heroicons:home";case"Software":return"heroicons:computer-desktop";case"Hardware":return"heroicons:cog";default:return"heroicons:circle-stack"}}function ye(t){try{return t?JSON.parse(t):[]}catch{return[]}}Ne(()=>(e(K),e(w),e(O)),()=>{d(G,e(K).filter(t=>{const l=!e(w)||t.name.toLowerCase().includes(e(w).toLowerCase())||t.description&&t.description.toLowerCase().includes(e(w).toLowerCase())||t.sub_category&&t.sub_category.toLowerCase().includes(e(w).toLowerCase())||t.owner&&t.owner.toLowerCase().includes(e(w).toLowerCase()),p=!e(O)||t.category===e(O);return l&&p}))}),Ne(()=>e(K),()=>{d(ge,[...new Set(e(K).map(t=>t.category))])}),Ne(()=>e(G),()=>{d(fe,e(G).reduce((t,l)=>(t[l.category]||(t[l.category]=[]),t[l.category].push(l),t),{}))}),pa(),wa();var qe=ja();ua(t=>{ma.title="Assets - Divine-Nest"});var we=ba(qe),je=r(we),Ae=r(je),Se=r(Ae),Je=r(Se),Ye=r(Je);k(Ye,{icon:"heroicons:circle-stack",class:"w-8 h-8"}),ne(),a(Je),ne(2),a(Se);var ke=s(Se,2),Ze=r(ke);k(Ze,{icon:"heroicons:plus",class:"w-5 h-5"}),ne(),a(ke),a(Ae);var De=s(Ae,2),Ve=r(De),Ce=r(Ve),Ue=s(r(Ce),2);q(Ue),a(Ce);var ze=s(Ce,2),Te=s(r(ze),2);f(()=>{e(O),Fe(()=>{e(ge)})});var $e=r(Te);$e.value=$e.__value="";var ea=s($e);le(ea,1,()=>e(ge),ce,(t,l)=>{var p=Aa(),b=r(p,!0);a(p);var x={};f(()=>{m(b,e(l)),x!==(x=e(l))&&(p.value=(p.__value=e(l))??"")}),_(t,p)}),a(Te),a(ze),a(Ve),a(De);var Be=s(De,2);le(Be,1,()=>(e(fe),u(()=>Object.entries(e(fe)))),ce,(t,l)=>{var p=fa(()=>xa(e(l),2));let b=()=>e(p)[0],x=()=>e(p)[1];var I=Oa(),N=r(I),j=r(N);{let V=ga(()=>(b(),u(()=>Xe(b()))));k(j,{get icon(){return e(V)},class:"w-6 h-6"})}var de=s(j),R=s(de),ve=r(R,!0);a(R),a(N);var J=s(N,2);le(J,5,x,ce,(V,i)=>{var U=La(),z=r(U),E=r(z),B=r(E),F=r(B),pe=r(F,!0);a(F);var H=s(F,2),ue=r(H);{var X=c=>{var v=Sa(),A=r(v,!0);a(v),f(()=>m(A,(e(i),u(()=>e(i).sub_category)))),_(c,v)};$(ue,c=>{e(i),u(()=>e(i).sub_category)&&c(X)})}a(H),a(B);var M=s(B,2),C=r(M),Y=r(C);k(Y,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),a(C);var be=s(C,2),Z=r(be),ee=r(Z),_e=r(ee);k(_e,{icon:"heroicons:pencil",class:"w-4 h-4"}),ne(),a(ee),a(Z);var ae=s(Z,2),P=r(ae),Le=r(P);k(Le,{icon:"heroicons:trash",class:"w-4 h-4"}),ne(),a(P),a(ae),a(be),a(M),a(E);var n=s(E,2),W=r(n);{var Oe=c=>{var v=ka(),A=r(v,!0);a(v),f(()=>m(A,(e(i),u(()=>e(i).description)))),_(c,v)};$(W,c=>{e(i),u(()=>e(i).description)&&c(Oe)})}var te=s(W,2);{var re=c=>{var v=Da(),A=s(r(v));a(v),f(()=>m(A,` ${e(i),u(()=>e(i).owner)??""}`)),_(c,v)};$(te,c=>{e(i),u(()=>e(i).owner)&&c(re)})}var se=s(te,2);{var oe=c=>{var v=Ca(),A=s(r(v));a(v),f(()=>m(A,` ${e(i),u(()=>e(i).location)??""}`)),_(c,v)};$(se,c=>{e(i),u(()=>e(i).location)&&c(oe)})}var ie=s(se,2),oa=s(r(ie));a(ie);var ia=s(ie,2);{var na=c=>{var v=$a();le(v,5,()=>(e(i),u(()=>ye(e(i).tags))),ce,(A,la)=>{var Ie=Ta(),ca=r(Ie,!0);a(Ie),f(()=>m(ca,e(la))),_(A,Ie)}),a(v),_(c,v)};$(ia,c=>{e(i),u(()=>ye(e(i).tags).length>0)&&c(na)})}a(n),a(z),a(U),f(c=>{m(pe,(e(i),u(()=>e(i).name))),m(oa,` ${c??""}`)},[()=>(e(i),u(()=>new Date(e(i).date_added).toLocaleDateString()))]),T("click",ee,()=>Ge(e(i))),T("click",P,()=>Ke(e(i))),_(V,U)}),a(J),a(I),f(()=>{m(de,` ${b()??""} `),m(ve,(x(),u(()=>x().length)))}),_(t,I)});var aa=s(Be,2);{var ta=t=>{var l=Ia(),p=r(l);k(p,{icon:"heroicons:circle-stack",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var b=s(p,4),x=r(b,!0);a(b),a(l),f(()=>m(x,e(w)||e(O)?"Try adjusting your filters":"Add your first asset to get started")),_(t,l)};$(aa,t=>{e(G),u(()=>e(G).length===0)&&t(ta)})}a(je),a(we);var ra=s(we,2);{var sa=t=>{var l=qa(),p=r(l),b=r(p),x=r(b,!0);a(b);var I=s(b,2),N=r(I),j=r(N),de=s(r(j),2);f(()=>{e(o),Fe(()=>{})}),a(j);var R=s(j,2),ve=s(r(R),2);q(ve),a(R),a(N);var J=s(N,2),V=s(r(J),2);q(V),a(J);var i=s(J,2),U=s(r(i),2);ha(U),a(i);var z=s(i,2),E=r(z),B=s(r(E),2);q(B),a(E);var F=s(E,2),pe=s(r(F),2);q(pe),a(F),a(z);var H=s(z,2),ue=s(r(H),2);q(ue),a(H);var X=s(H,2),M=s(r(X),2),C=r(M);q(C);var Y=s(C,2),be=r(Y);k(be,{icon:"heroicons:plus",class:"w-4 h-4"}),a(Y),a(M);var Z=s(M,2);{var ee=n=>{var W=Ea();le(W,5,()=>(e(o),u(()=>ye(e(o).tags))),ce,(Oe,te)=>{var re=Na(),se=r(re),oe=s(se),ie=r(oe);k(ie,{icon:"heroicons:x-mark",class:"w-3 h-3"}),a(oe),a(re),f(()=>m(se,`${e(te)??""} `)),T("click",oe,()=>Re(e(te))),_(Oe,re)}),a(W),_(n,W)};$(Z,n=>{e(o),u(()=>e(o).tags)&&n(ee)})}a(X);var _e=s(X,2),ae=r(_e),P=s(ae,2),Le=r(P);a(P),a(_e),a(I),a(p),a(l),f(()=>{m(x,e(h)?"Edit Asset":"Add New Asset"),m(Le,`${e(h)?"Update":"Add"} Asset`)}),He(de,()=>e(o).category,n=>S(o,e(o).category=n)),L(ve,()=>e(o).sub_category,n=>S(o,e(o).sub_category=n)),L(V,()=>e(o).name,n=>S(o,e(o).name=n)),L(U,()=>e(o).description,n=>S(o,e(o).description=n)),L(B,()=>e(o).location,n=>S(o,e(o).location=n)),L(pe,()=>e(o).owner,n=>S(o,e(o).owner=n)),L(ue,()=>e(o).date_added,n=>S(o,e(o).date_added=n)),L(C,()=>e(D),n=>d(D,n)),T("keydown",C,n=>n.key==="Enter"&&(n.preventDefault(),Ee())),T("click",Y,Ee),T("click",ae,Qe),T("submit",I,ya(We)),_(t,l)};$(ra,t=>{e(Q)&&t(sa)})}T("click",ke,()=>{d(Q,!0),d(h,null),xe()}),L(Ue,()=>e(w),t=>d(w,t)),He(Te,()=>e(O),t=>d(O,t)),_(Me,qe),_a()}export{Qa as component};
