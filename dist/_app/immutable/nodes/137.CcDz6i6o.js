import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as va}from"../chunks/Dl7RRJWM.js";import{p as pa,m as u,l as B,d as _a,e as D,h as ma,f as ua,t as f,i as s,j as G,g as e,a as k,b as ba,$ as fa,k as r,s as c,n as H,r as t,o as V,u as p,q as _,v as Me,w as xa,x as ha,y as O,z as ga}from"../chunks/6uIj5N_2.js";import{i as De}from"../chunks/Dvp2nKH1.js";import{e as X,i as Y}from"../chunks/D27cKp0K.js";import{b as Z,r as ee}from"../chunks/CuqaNdSY.js";import{s as ya}from"../chunks/DtCY3ta1.js";import{b as J}from"../chunks/DgriDnSR.js";import{p as wa}from"../chunks/Bfc47y5P.js";import{i as Ra}from"../chunks/CRscWiiN.js";import{I as g}from"../chunks/BHUeFzQU.js";import{s as ae}from"../chunks/BesrdQ_8.js";var Sa=D("<option> </option>"),$a=D("<option> </option>"),Ta=D('<div class="flex gap-4 text-sm"><span class="flex items-center gap-1"><!> </span> <span class="flex items-center gap-1"><!> </span> <span class="font-bold"> </span></div>'),ka=D('<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow"><div class="card-body"><div class="flex justify-between items-start"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><!> <h3 class="card-title text-lg"> </h3> <span class="badge badge-secondary"> </span></div> <p class="text-sm mb-2"> </p> <div class="flex justify-between items-center"><span class="text-sm text-base-content/60"> </span> <span> </span></div></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32"><li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div></div></div>'),Da=D('<div class="mb-8"><div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-semibold text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span></h2> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),qa=D('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No rewards found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),Ca=D('<div class="modal modal-open"><div class="modal-box max-w-md"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Person *</span></label> <input type="text" placeholder="Who receives the reward..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Role *</span></label> <select class="select select-bordered" required><option>Child</option><option>Adult</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Type *</span></label> <select class="select select-bordered" required><option>Star</option><option>Karma</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Points *</span></label> <input type="number" placeholder="Number of points..." class="input input-bordered" required min="1"/></div></div> <div class="form-control"><label class="label"><span class="label-text">Reason *</span></label> <textarea placeholder="Why are they receiving this reward..." class="textarea textarea-bordered" required rows="3"></textarea></div> <div class="form-control"><label class="label"><span class="label-text">Date *</span></label> <input type="date" class="input input-bordered" required/></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),Aa=D('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> Rewards Management</h1> <p class="text-base-content/70 mt-1">Track stars and karma points for family members</p></div> <button class="btn btn-primary"><!> Add Reward</button></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search rewards..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Type</span></label> <select class="select select-bordered"><option>All Types</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Role</span></label> <select class="select select-bordered"><option>All Roles</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function Ba(Pe,We){pa(We,!1);const K=u(),te=u(),se=u(),re=u(),y=u();let w=u([]),U=u(!1),b=u(null),q=u(""),C=u(""),A=u(""),i=u({person:"",role:"Child",type:"Star",reason:"",points:"",date:new Date().toISOString().split("T")[0]});va(async()=>{await le()});async function le(){try{c(w,await ae.getRewards())}catch(a){console.error("Error loading rewards:",a)}}function oe(){c(i,{person:"",role:"Child",type:"Star",reason:"",points:"",date:new Date().toISOString().split("T")[0]})}async function Be(){try{const a={...e(i),id:e(b)?e(b).id:crypto.randomUUID(),points:parseInt(e(i).points),created_at:e(b)?e(b).created_at:new Date().toISOString()};e(b)?await ae.updateReward(a):await ae.saveReward(a),await le(),c(U,!1),c(b,null),oe()}catch(a){console.error("Error saving reward:",a)}}function Ge(a){c(b,a),c(i,{...a,date:a.date.split("T")[0]}),c(U,!0)}async function He(a){if(confirm(`Delete reward for "${a.person}"?`))try{await ae.deleteReward(a.id),await le()}catch(l){console.error("Error deleting reward:",l)}}function Je(){c(U,!1),c(b,null),oe()}function Qe(a){switch(a){case"Star":return"heroicons:star";case"Karma":return"heroicons:sparkles";default:return"heroicons:gift"}}function qe(a){switch(a){case"Star":return"text-yellow-500";case"Karma":return"text-purple-500";default:return"text-primary"}}B(()=>(e(w),e(q),e(C),e(A)),()=>{c(K,e(w).filter(a=>{const l=!e(q)||a.person.toLowerCase().includes(e(q).toLowerCase())||a.reason.toLowerCase().includes(e(q).toLowerCase()),n=!e(C)||a.type===e(C),d=!e(A)||a.role===e(A);return l&&n&&d}))}),B(()=>e(w),()=>{c(te,[...new Set(e(w).map(a=>a.type))])}),B(()=>e(w),()=>{c(se,[...new Set(e(w).map(a=>a.role))])}),B(()=>e(K),()=>{c(re,e(K).reduce((a,l)=>(a[l.person]||(a[l.person]=[]),a[l.person].push(l),a),{}))}),B(()=>e(w),()=>{c(y,e(w).reduce((a,l)=>(a[l.person]||(a[l.person]={stars:0,karma:0,total:0}),l.type==="Star"?a[l.person].stars+=l.points:a[l.person].karma+=l.points,a[l.person].total+=l.points,a),{}))}),_a(),Ra();var Ce=Aa();ma(a=>{fa.title="Rewards - Divine-Nest"});var ie=ua(Ce),Ae=s(ie),ne=s(Ae),de=s(ne),Ie=s(de),Ve=s(Ie);g(Ve,{icon:"heroicons:star",class:"w-8 h-8"}),H(),t(Ie),H(2),t(de);var ce=r(de,2),Xe=s(ce);g(Xe,{icon:"heroicons:plus",class:"w-5 h-5"}),H(),t(ce),t(ne);var ve=r(ne,2),je=s(ve),pe=s(je),Ee=r(s(pe),2);ee(Ee),t(pe);var _e=r(pe,2),me=r(s(_e),2);f(()=>{e(C),V(()=>{e(te)})});var ue=s(me);ue.value=ue.__value="";var Ye=r(ue);X(Ye,1,()=>e(te),Y,(a,l)=>{var n=Sa(),d=s(n,!0);t(n);var m={};f(()=>{_(d,e(l)),m!==(m=e(l))&&(n.value=(n.__value=e(l))??"")}),k(a,n)}),t(me),t(_e);var Le=r(_e,2),be=r(s(Le),2);f(()=>{e(A),V(()=>{e(se)})});var fe=s(be);fe.value=fe.__value="";var Ze=r(fe);X(Ze,1,()=>e(se),Y,(a,l)=>{var n=$a(),d=s(n,!0);t(n);var m={};f(()=>{_(d,e(l)),m!==(m=e(l))&&(n.value=(n.__value=e(l))??"")}),k(a,n)}),t(be),t(Le),t(je),t(ve);var Ne=r(ve,2);X(Ne,1,()=>(e(re),p(()=>Object.entries(e(re)))),Y,(a,l)=>{var n=xa(()=>ga(e(l),2));let d=()=>e(n)[0],m=()=>e(n)[1];var I=Da(),j=s(I),E=s(j),z=s(E);g(z,{icon:"heroicons:user",class:"w-6 h-6"});var F=r(z),Q=r(F),M=s(Q,!0);t(Q),t(E);var P=r(E,2);{var xe=$=>{var o=Ta(),x=s(o),R=s(x);g(R,{icon:"heroicons:star",class:"w-4 h-4 text-yellow-500"});var L=r(R);t(x);var h=r(x,2),S=s(h);g(S,{icon:"heroicons:sparkles",class:"w-4 h-4 text-purple-500"});var N=r(S);t(h);var T=r(h,2),v=s(T);t(T),t(o),f(()=>{_(L,` ${e(y),d(),p(()=>e(y)[d()].stars)??""}`),_(N,` ${e(y),d(),p(()=>e(y)[d()].karma)??""}`),_(v,`Total: ${e(y),d(),p(()=>e(y)[d()].total)??""}`)}),k($,o)};De(P,$=>{e(y),d(),p(()=>e(y)[d()])&&$(xe)})}t(j);var W=r(j,2);X(W,5,m,Y,($,o)=>{var x=ka(),R=s(x),L=s(R),h=s(L),S=s(h),N=s(S);{let Te=Me(()=>(e(o),p(()=>Qe(e(o).type)))),ke=Me(()=>(e(o),p(()=>qe(e(o).type))));g(N,{get icon(){return e(Te)},get class(){return`w-6 h-6 ${e(ke)??""}`}})}var T=r(N,2),v=s(T,!0);t(T);var Oe=r(T,2),ra=s(Oe,!0);t(Oe),t(S);var he=r(S,2),la=s(he,!0);t(he);var Ke=r(he,2),ge=s(Ke),oa=s(ge,!0);t(ge);var ye=r(ge,2),ia=s(ye);t(ye),t(Ke),t(h);var Ue=r(h,2),we=s(Ue),na=s(we);g(na,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),t(we);var ze=r(we,2),Re=s(ze),Se=s(Re),da=s(Se);g(da,{icon:"heroicons:pencil",class:"w-4 h-4"}),H(),t(Se),t(Re);var Fe=r(Re,2),$e=s(Fe),ca=s($e);g(ca,{icon:"heroicons:trash",class:"w-4 h-4"}),H(),t($e),t(Fe),t(ze),t(Ue),t(L),t(R),t(x),f((Te,ke)=>{_(v,(e(o),p(()=>e(o).type))),_(ra,(e(o),p(()=>e(o).role))),_(la,(e(o),p(()=>e(o).reason))),_(oa,Te),ya(ye,1,`text-lg font-bold ${ke??""}`),_(ia,`+${e(o),p(()=>e(o).points)??""}`)},[()=>(e(o),p(()=>new Date(e(o).date).toLocaleDateString())),()=>(e(o),p(()=>qe(e(o).type)))]),G("click",Se,()=>Ge(e(o))),G("click",$e,()=>He(e(o))),k($,x)}),t(W),t(I),f(()=>{_(F,` ${d()??""} `),_(M,(m(),p(()=>m().length)))}),k(a,I)});var ea=r(Ne,2);{var aa=a=>{var l=qa(),n=s(l);g(n,{icon:"heroicons:star",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var d=r(n,4),m=s(d,!0);t(d),t(l),f(()=>_(m,e(q)||e(C)||e(A)?"Try adjusting your filters":"Add your first reward to get started")),k(a,l)};De(ea,a=>{e(K),p(()=>e(K).length===0)&&a(aa)})}t(Ae),t(ie);var ta=r(ie,2);{var sa=a=>{var l=Ca(),n=s(l),d=s(n),m=s(d,!0);t(d);var I=r(d,2),j=s(I),E=s(j),z=r(s(E),2);ee(z),t(E);var F=r(E,2),Q=r(s(F),2);f(()=>{e(i),V(()=>{})}),t(F),t(j);var M=r(j,2),P=s(M),xe=r(s(P),2);f(()=>{e(i),V(()=>{})}),t(P);var W=r(P,2),$=r(s(W),2);ee($),t(W),t(M);var o=r(M,2),x=r(s(o),2);ha(x),t(o);var R=r(o,2),L=r(s(R),2);ee(L),t(R);var h=r(R,2),S=s(h),N=r(S,2),T=s(N);t(N),t(h),t(I),t(n),t(l),f(()=>{_(m,e(b)?"Edit Reward":"Add New Reward"),_(T,`${e(b)?"Update":"Add"} Reward`)}),J(z,()=>e(i).person,v=>O(i,e(i).person=v)),Z(Q,()=>e(i).role,v=>O(i,e(i).role=v)),Z(xe,()=>e(i).type,v=>O(i,e(i).type=v)),J($,()=>e(i).points,v=>O(i,e(i).points=v)),J(x,()=>e(i).reason,v=>O(i,e(i).reason=v)),J(L,()=>e(i).date,v=>O(i,e(i).date=v)),G("click",S,Je),G("submit",I,wa(Be)),k(a,l)};De(ta,a=>{e(U)&&a(sa)})}G("click",ce,()=>{c(U,!0),c(b,null),oe()}),J(Ee,()=>e(q),a=>c(q,a)),Z(me,()=>e(C),a=>c(C,a)),Z(be,()=>e(A),a=>c(A,a)),k(Pe,Ce),ba()}export{Ba as component};
