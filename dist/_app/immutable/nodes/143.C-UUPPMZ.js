import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as Da}from"../chunks/Dl7RRJWM.js";import{p as qa,l as ce,d as Sa,e as x,h as Aa,f as $a,t as p,i as t,j as de,g as e,a as y,b as Ca,m as f,$ as La,k as o,s as v,n as X,r as a,o as q,u as b,q as m,w as Ma,x as Ea,y as h,z as Fa}from"../chunks/6uIj5N_2.js";import{i as S}from"../chunks/Dvp2nKH1.js";import{e as ve,i as pe}from"../chunks/D27cKp0K.js";import{b as A,r as I}from"../chunks/CuqaNdSY.js";import{b as P,a as ja}from"../chunks/DgriDnSR.js";import{p as ka}from"../chunks/Bfc47y5P.js";import{i as Ha}from"../chunks/CRscWiiN.js";import{I as $}from"../chunks/BHUeFzQU.js";import{s as ye}from"../chunks/BesrdQ_8.js";var Na=x("<option> </option>"),Ia=x("<option> </option>"),Pa=x("<option> </option>"),Ua=x('<span class="badge badge-error">Mandatory</span>'),za=x('<p class="text-sm"><strong>Sub-category:</strong> </p>'),Oa=x('<p class="text-sm"><strong>Time:</strong> </p>'),Ra=x('<p class="text-sm"><strong>Location:</strong> </p>'),Wa=x('<p class="text-sm"><strong>Due:</strong> </p>'),Ya=x('<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow"><div class="card-body"><div class="flex justify-between items-start"><div class="flex-1"><h3 class="card-title text-lg"> </h3> <div class="flex flex-wrap gap-2 mt-2"><span class="badge badge-primary"> </span> <span class="badge badge-secondary"> </span> <!></div></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32"><li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div> <div class="mt-4 space-y-2"><!> <p class="text-sm"><strong>Assigned to:</strong> </p> <!> <!> <!> <div class="flex justify-between items-center pt-2"><span class="text-sm text-base-content/60"> </span> <!></div></div></div></div>'),Ba=x('<div class="mb-8"><h2 class="text-2xl font-semibold mb-4 text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),Ga=x('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No tasks found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),Ja=x('<div class="modal modal-open"><div class="modal-box max-w-2xl"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Type *</span></label> <select class="select select-bordered" required><option>Duty</option><option>Responsibility</option><option>Ritual</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Category *</span></label> <select class="select select-bordered" required><option>Self</option><option>Family</option><option>Parenting</option><option>Education</option><option>Health</option><option>Household</option><option>Spiritual</option></select></div></div> <div class="form-control"><label class="label"><span class="label-text">Sub Category</span></label> <input type="text" placeholder="Specific sub-category..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Description *</span></label> <textarea placeholder="Task description..." class="textarea textarea-bordered" required rows="3"></textarea></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Assigned To *</span></label> <input type="text" placeholder="Person responsible..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Frequency *</span></label> <select class="select select-bordered" required><option>Daily</option><option>Weekly</option><option>Monthly</option><option>Yearly</option><option>Ad-Hoc</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Time of Day</span></label> <select class="select select-bordered"><option>Any Time</option><option>Morning</option><option>Afternoon</option><option>Evening</option><option>Night</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Alert Type *</span></label> <select class="select select-bordered" required><option>ToDo</option><option>SMS</option><option>Alarm</option><option>Notes</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Location</span></label> <input type="text" placeholder="Where to perform..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Due Date</span></label> <input type="date" class="input input-bordered"/></div></div> <div class="form-control"><label class="label"><span class="label-text">Panchangam Link</span></label> <input type="text" placeholder="Link to panchangam reference..." class="input input-bordered"/></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">Mandatory Task</span> <input type="checkbox" class="checkbox checkbox-primary"/></label></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),Ka=x('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> Tasks Management</h1> <p class="text-base-content/70 mt-1">Manage duties, responsibilities, and rituals</p></div> <button class="btn btn-primary"><!> Add Task</button></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search tasks..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Type</span></label> <select class="select select-bordered"><option>All Types</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Category</span></label> <select class="select select-bordered"><option>All Categories</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Frequency</span></label> <select class="select select-bordered"><option>All Frequencies</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function nt(aa,ta){qa(ta,!1);const Z=f(),fe=f(),xe=f(),he=f(),we=f();let T=f([]),ee=f(!1),w=f(null),D=f(""),C=f(""),L=f(""),M=f(""),r=f({type:"Duty",category:"Household",sub_category:"",description:"",assigned_to:"",mandatory:!1,frequency:"Daily",panchangam_link:"",time_of_day:"Morning",location:"",due_date:"",alert_type:"ToDo"});Da(async()=>{await Te()});async function Te(){try{v(T,await ye.getTasks())}catch(s){console.error("Error loading tasks:",s)}}function De(){v(r,{type:"Duty",category:"Household",sub_category:"",description:"",assigned_to:"",mandatory:!1,frequency:"Daily",panchangam_link:"",time_of_day:"Morning",location:"",due_date:"",alert_type:"ToDo"})}async function oa(){try{const s={...e(r),id:e(w)?e(w).id:crypto.randomUUID(),created_by:"current_user",created_at:e(w)?e(w).created_at:new Date().toISOString()};e(w)?await ye.updateTask(s):await ye.saveTask(s),await Te(),v(ee,!1),v(w,null),De()}catch(s){console.error("Error saving task:",s)}}function sa(s){v(w,s),v(r,{...s}),v(ee,!0)}async function ra(s){if(confirm(`Delete "${s.description}"?`))try{await ye.deleteTask(s.id),await Te()}catch(i){console.error("Error deleting task:",i)}}function la(){v(ee,!1),v(w,null),De()}ce(()=>(e(T),e(D),e(C),e(L),e(M)),()=>{v(Z,e(T).filter(s=>{const i=!e(D)||s.description.toLowerCase().includes(e(D).toLowerCase())||s.sub_category&&s.sub_category.toLowerCase().includes(e(D).toLowerCase())||s.assigned_to.toLowerCase().includes(e(D).toLowerCase()),n=!e(C)||s.type===e(C),g=!e(L)||s.category===e(L),_=!e(M)||s.frequency===e(M);return i&&n&&g&&_}))}),ce(()=>e(T),()=>{v(fe,[...new Set(e(T).map(s=>s.type))])}),ce(()=>e(T),()=>{v(xe,[...new Set(e(T).map(s=>s.category))])}),ce(()=>e(T),()=>{v(he,[...new Set(e(T).map(s=>s.frequency))])}),ce(()=>e(Z),()=>{v(we,e(Z).reduce((s,i)=>(s[i.category]||(s[i.category]=[]),s[i.category].push(i),s),{}))}),Sa(),Ha();var We=Ka();Aa(s=>{La.title="Tasks - Divine-Nest"});var qe=$a(We),Ye=t(qe),Se=t(Ye),Ae=t(Se),Be=t(Ae),ia=t(Be);$(ia,{icon:"heroicons:clipboard-document-list",class:"w-8 h-8"}),X(),a(Be),X(2),a(Ae);var $e=o(Ae,2),na=t($e);$(na,{icon:"heroicons:plus",class:"w-5 h-5"}),X(),a($e),a(Se);var Ce=o(Se,2),Ge=t(Ce),Le=t(Ge),Je=o(t(Le),2);I(Je),a(Le);var Me=o(Le,2),Ee=o(t(Me),2);p(()=>{e(C),q(()=>{e(fe)})});var Fe=t(Ee);Fe.value=Fe.__value="";var ca=o(Fe);ve(ca,1,()=>e(fe),pe,(s,i)=>{var n=Na(),g=t(n,!0);a(n);var _={};p(()=>{m(g,e(i)),_!==(_=e(i))&&(n.value=(n.__value=e(i))??"")}),y(s,n)}),a(Ee),a(Me);var je=o(Me,2),ke=o(t(je),2);p(()=>{e(L),q(()=>{e(xe)})});var He=t(ke);He.value=He.__value="";var da=o(He);ve(da,1,()=>e(xe),pe,(s,i)=>{var n=Ia(),g=t(n,!0);a(n);var _={};p(()=>{m(g,e(i)),_!==(_=e(i))&&(n.value=(n.__value=e(i))??"")}),y(s,n)}),a(ke),a(je);var Ke=o(je,2),Ne=o(t(Ke),2);p(()=>{e(M),q(()=>{e(he)})});var Ie=t(Ne);Ie.value=Ie.__value="";var va=o(Ie);ve(va,1,()=>e(he),pe,(s,i)=>{var n=Pa(),g=t(n,!0);a(n);var _={};p(()=>{m(g,e(i)),_!==(_=e(i))&&(n.value=(n.__value=e(i))??"")}),y(s,n)}),a(Ne),a(Ke),a(Ge),a(Ce);var Qe=o(Ce,2);ve(Qe,1,()=>(e(we),b(()=>Object.entries(e(we)))),pe,(s,i)=>{var n=Ma(()=>Fa(e(i),2));let g=()=>e(n)[0],_=()=>e(n)[1];var E=Ba(),F=t(E),U=t(F);$(U,{icon:"heroicons:tag",class:"w-6 h-6"});var _e=o(U),ae=o(_e),Pe=t(ae,!0);a(ae),a(F);var z=o(F,2);ve(z,5,_,pe,(be,l)=>{var O=Ya(),R=t(O),j=t(R),W=t(j),Y=t(W),Ue=t(Y,!0);a(Y);var B=o(Y,2),k=t(B),te=t(k,!0);a(k);var G=o(k,2),ue=t(G,!0);a(G);var ze=o(G,2);{var oe=d=>{var u=Ua();y(d,u)};S(ze,d=>{e(l),b(()=>e(l).mandatory)&&d(oe)})}a(B),a(W);var J=o(W,2),K=t(J),me=t(K);$(me,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),a(K);var se=o(K,2),H=t(se),Q=t(H),re=t(Q);$(re,{icon:"heroicons:pencil",class:"w-4 h-4"}),X(),a(Q),a(H);var le=o(H,2),V=t(le),ge=t(V);$(ge,{icon:"heroicons:trash",class:"w-4 h-4"}),X(),a(V),a(le),a(se),a(J),a(j);var ie=o(j,2),ne=t(ie);{var Oe=d=>{var u=za(),N=o(t(u));a(u),p(()=>m(N,` ${e(l),b(()=>e(l).sub_category)??""}`)),y(d,u)};S(ne,d=>{e(l),b(()=>e(l).sub_category)&&d(Oe)})}var c=o(ne,2),ma=o(t(c));a(c);var Ve=o(c,2);{var ga=d=>{var u=Oa(),N=o(t(u));a(u),p(()=>m(N,` ${e(l),b(()=>e(l).time_of_day)??""}`)),y(d,u)};S(Ve,d=>{e(l),b(()=>e(l).time_of_day)&&d(ga)})}var Xe=o(Ve,2);{var ya=d=>{var u=Ra(),N=o(t(u));a(u),p(()=>m(N,` ${e(l),b(()=>e(l).location)??""}`)),y(d,u)};S(Xe,d=>{e(l),b(()=>e(l).location)&&d(ya)})}var Ze=o(Xe,2);{var fa=d=>{var u=Wa(),N=o(t(u));a(u),p(Ta=>m(N,` ${Ta??""}`),[()=>(e(l),b(()=>new Date(e(l).due_date).toLocaleDateString()))]),y(d,u)};S(Ze,d=>{e(l),b(()=>e(l).due_date)&&d(fa)})}var ea=o(Ze,2),Re=t(ea),xa=t(Re);a(Re);var ha=o(Re,2);{var wa=d=>{$(d,{icon:"heroicons:sparkles",class:"w-5 h-5 text-purple-500"})};S(ha,d=>{e(l),b(()=>e(l).panchangam_link)&&d(wa)})}a(ea),a(ie),a(R),a(O),p(()=>{m(Ue,(e(l),b(()=>e(l).description))),m(te,(e(l),b(()=>e(l).type))),m(ue,(e(l),b(()=>e(l).frequency))),m(ma,` ${e(l),b(()=>e(l).assigned_to)??""}`),m(xa,`Alert: ${e(l),b(()=>e(l).alert_type)??""}`)}),de("click",Q,()=>sa(e(l))),de("click",V,()=>ra(e(l))),y(be,O)}),a(z),a(E),p(()=>{m(_e,` ${g()??""} `),m(Pe,(_(),b(()=>_().length)))}),y(s,E)});var pa=o(Qe,2);{var _a=s=>{var i=Ga(),n=t(i);$(n,{icon:"heroicons:clipboard-document-list",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var g=o(n,4),_=t(g,!0);a(g),a(i),p(()=>m(_,e(D)||e(C)||e(L)||e(M)?"Try adjusting your filters":"Add your first task to get started")),y(s,i)};S(pa,s=>{e(Z),b(()=>e(Z).length===0)&&s(_a)})}a(Ye),a(qe);var ba=o(qe,2);{var ua=s=>{var i=Ja(),n=t(i),g=t(n),_=t(g,!0);a(g);var E=o(g,2),F=t(E),U=t(F),_e=o(t(U),2);p(()=>{e(r),q(()=>{})}),a(U);var ae=o(U,2),Pe=o(t(ae),2);p(()=>{e(r),q(()=>{})}),a(ae),a(F);var z=o(F,2),be=o(t(z),2);I(be),a(z);var l=o(z,2),O=o(t(l),2);Ea(O),a(l);var R=o(l,2),j=t(R),W=o(t(j),2);I(W),a(j);var Y=o(j,2),Ue=o(t(Y),2);p(()=>{e(r),q(()=>{})}),a(Y),a(R);var B=o(R,2),k=t(B),te=o(t(k),2);p(()=>{e(r),q(()=>{})});var G=t(te);G.value=G.__value="",X(4),a(te),a(k);var ue=o(k,2),ze=o(t(ue),2);p(()=>{e(r),q(()=>{})}),a(ue),a(B);var oe=o(B,2),J=t(oe),K=o(t(J),2);I(K),a(J);var me=o(J,2),se=o(t(me),2);I(se),a(me),a(oe);var H=o(oe,2),Q=o(t(H),2);I(Q),a(H);var re=o(H,2),le=t(re),V=o(t(le),2);I(V),a(le),a(re);var ge=o(re,2),ie=t(ge),ne=o(ie,2),Oe=t(ne);a(ne),a(ge),a(E),a(n),a(i),p(()=>{m(_,e(w)?"Edit Task":"Add New Task"),m(Oe,`${e(w)?"Update":"Add"} Task`)}),A(_e,()=>e(r).type,c=>h(r,e(r).type=c)),A(Pe,()=>e(r).category,c=>h(r,e(r).category=c)),P(be,()=>e(r).sub_category,c=>h(r,e(r).sub_category=c)),P(O,()=>e(r).description,c=>h(r,e(r).description=c)),P(W,()=>e(r).assigned_to,c=>h(r,e(r).assigned_to=c)),A(Ue,()=>e(r).frequency,c=>h(r,e(r).frequency=c)),A(te,()=>e(r).time_of_day,c=>h(r,e(r).time_of_day=c)),A(ze,()=>e(r).alert_type,c=>h(r,e(r).alert_type=c)),P(K,()=>e(r).location,c=>h(r,e(r).location=c)),P(se,()=>e(r).due_date,c=>h(r,e(r).due_date=c)),P(Q,()=>e(r).panchangam_link,c=>h(r,e(r).panchangam_link=c)),ja(V,()=>e(r).mandatory,c=>h(r,e(r).mandatory=c)),de("click",ie,la),de("submit",E,ka(oa)),y(s,i)};S(ba,s=>{e(ee)&&s(ua)})}de("click",$e,()=>{v(ee,!0),v(w,null),De()}),P(Je,()=>e(D),s=>v(D,s)),A(Ee,()=>e(C),s=>v(C,s)),A(ke,()=>e(L),s=>v(L,s)),A(Ne,()=>e(M),s=>v(M,s)),y(aa,We),Ca()}export{nt as component};
