import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{o as ft}from"../chunks/Dl7RRJWM.js";import{p as wt,m as g,l as re,d as St,e as $,h as $t,f as Ft,t as m,i as a,j as se,g as e,a as S,b as Et,$ as Dt,k as s,s as p,n as oe,r as t,u as d,o as le,v as Xe,q as u,w as Ye,x as Tt,y as C,z as Ze}from"../chunks/6uIj5N_2.js";import{i as pe}from"../chunks/Dvp2nKH1.js";import{e as ie,i as ne}from"../chunks/D27cKp0K.js";import{b as ce,r as V}from"../chunks/CuqaNdSY.js";import{s as Re}from"../chunks/DtCY3ta1.js";import{b as O}from"../chunks/DgriDnSR.js";import{p as At}from"../chunks/Bfc47y5P.js";import{i as Ct}from"../chunks/CRscWiiN.js";import{I as q}from"../chunks/BHUeFzQU.js";import{s as ue}from"../chunks/BesrdQ_8.js";var Lt=$('<div class="card bg-base-100 shadow"><div class="card-body p-4"><div class="flex items-center justify-between"><div><p class="text-sm text-base-content/70"> </p> <p> </p></div> <!></div></div></div>'),qt=$("<option> </option>"),It=$("<option> </option>"),kt=$('<span class="badge badge-outline"> </span>'),jt=$('<p class="text-sm"><strong>Notes:</strong> </p>'),Nt=$('<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow"><div class="card-body"><div class="flex justify-between items-start"><div class="flex-1"><h3 class="card-title text-lg"> </h3> <div class="flex flex-wrap gap-2 mt-2"><!> <span class="badge badge-secondary"> </span> <span class="badge badge-ghost"> </span></div></div> <div class="dropdown dropdown-left"><label tabindex="0" class="btn btn-ghost btn-sm"><!></label> <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32"><li><a><!> Edit</a></li> <li><a class="text-error"><!> Delete</a></li></ul></div></div> <div class="mt-4 space-y-2"><div class="flex justify-between items-center"><span class="text-sm font-medium">Amount:</span> <span> </span></div> <p class="text-sm"><strong>Actor:</strong> </p> <p class="text-sm"><strong>Date:</strong> </p> <!></div></div></div>'),Mt=$('<div class="mb-8"><h2 class="text-2xl font-semibold mb-4 text-base-content flex items-center gap-2"><!> <span class="badge badge-primary badge-sm"> </span> <span> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>'),Ot=$('<div class="text-center py-12"><!> <h3 class="text-xl font-semibold text-base-content/70">No finance entries found</h3> <p class="text-base-content/50 mt-2"> </p></div>'),Bt=$('<div class="modal modal-open"><div class="modal-box max-w-lg"><h3 class="font-bold text-lg mb-4"> </h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Type *</span></label> <select class="select select-bordered" required><option>Budget</option><option>Income</option><option>Expenses</option><option>Savings</option></select></div> <div class="form-control"><label class="label"><span class="label-text">Recurring *</span></label> <select class="select select-bordered" required><option>None</option><option>By Period (Flexible)</option><option>By Period (Fixed)</option></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Category *</span></label> <input type="text" placeholder="e.g., Groceries, Salary..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Sub Category</span></label> <input type="text" placeholder="Specific sub-category..." class="input input-bordered"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Amount (₹) *</span></label> <input type="number" step="0.01" placeholder="0.00" class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Date *</span></label> <input type="date" class="input input-bordered" required/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="form-control"><label class="label"><span class="label-text">Actor *</span></label> <input type="text" placeholder="Who is involved..." class="input input-bordered" required/></div> <div class="form-control"><label class="label"><span class="label-text">Source *</span></label> <select class="select select-bordered" required><option>Manual</option><option>Voice</option><option>SMS</option></select></div></div> <div class="form-control"><label class="label"><span class="label-text">Notes</span></label> <textarea placeholder="Additional notes..." class="textarea textarea-bordered" rows="2"></textarea></div> <div class="modal-action"><button type="button" class="btn">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),Rt=$('<div class="min-h-screen bg-base-200 p-4"><div class="max-w-7xl mx-auto"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"><div><h1 class="text-3xl font-bold text-primary flex items-center gap-2"><!> Finance Management</h1> <p class="text-base-content/70 mt-1">Track income, expenses, budgets, and savings</p></div> <button class="btn btn-primary"><!> Add Entry</button></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"></div> <div class="bg-base-100 rounded-lg p-4 mb-6 shadow"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="form-control"><label class="label"><span class="label-text">Search</span></label> <input type="text" placeholder="Search finances..." class="input input-bordered"/></div> <div class="form-control"><label class="label"><span class="label-text">Type</span></label> <select class="select select-bordered"><option>All Types</option><!></select></div> <div class="form-control"><label class="label"><span class="label-text">Recurring</span></label> <select class="select select-bordered"><option>All</option><!></select></div></div></div> <!> <!></div></div> <!>',1);function ea(et,tt){wt(tt,!1);const W=g(),be=g(),_e=g(),me=g(),H=g();let F=g([]),J=g(!1),x=g(null),E=g(""),I=g(""),k=g(""),o=g({type:"Expenses",category:"",sub_category:"",amount:"",recurring:"None",date:new Date().toISOString().split("T")[0],actor:"",source:"Manual",notes:""});ft(async()=>{await ge()});async function ge(){try{p(F,await ue.getFinances())}catch(r){console.error("Error loading finances:",r)}}function xe(){p(o,{type:"Expenses",category:"",sub_category:"",amount:"",recurring:"None",date:new Date().toISOString().split("T")[0],actor:"",source:"Manual",notes:""})}async function at(){try{const r={...e(o),id:e(x)?e(x).id:crypto.randomUUID(),amount:parseFloat(e(o).amount),created_at:e(x)?e(x).created_at:new Date().toISOString()};e(x)?await ue.updateFinance(r):await ue.saveFinance(r),await ge(),p(J,!1),p(x,null),xe()}catch(r){console.error("Error saving finance:",r)}}function rt(r){p(x,r),p(o,{...r,date:r.date.split("T")[0]}),p(J,!0)}async function st(r){if(confirm(`Delete "${r.category}" entry?`))try{await ue.deleteFinance(r.id),await ge()}catch(l){console.error("Error deleting finance:",l)}}function ot(){p(J,!1),p(x,null),xe()}function Ue(r){switch(r){case"Income":return"heroicons:arrow-trending-up";case"Expenses":return"heroicons:arrow-trending-down";case"Budget":return"heroicons:calculator";case"Savings":return"heroicons:banknotes";default:return"heroicons:currency-dollar"}}function ye(r){switch(r){case"Income":return"text-green-600";case"Expenses":return"text-red-600";case"Budget":return"text-blue-600";case"Savings":return"text-purple-600";default:return"text-base-content"}}re(()=>(e(F),e(E),e(I),e(k)),()=>{p(W,e(F).filter(r=>{const l=!e(E)||r.category.toLowerCase().includes(e(E).toLowerCase())||r.sub_category&&r.sub_category.toLowerCase().includes(e(E).toLowerCase())||r.actor.toLowerCase().includes(e(E).toLowerCase())||r.notes&&r.notes.toLowerCase().includes(e(E).toLowerCase()),c=!e(I)||r.type===e(I),n=!e(k)||r.recurring===e(k);return l&&c&&n}))}),re(()=>e(F),()=>{p(be,[...new Set(e(F).map(r=>r.type))])}),re(()=>e(F),()=>{p(_e,[...new Set(e(F).map(r=>r.recurring))])}),re(()=>e(W),()=>{p(me,e(W).reduce((r,l)=>(r[l.type]||(r[l.type]=[]),r[l.type].push(l),r),{}))}),re(()=>e(F),()=>{p(H,e(F).reduce((r,l)=>(r[l.type]||(r[l.type]=0),r[l.type]+=l.amount,r),{}))}),St(),Ct();var ze=Rt();$t(r=>{Dt.title="Finance - Divine-Nest"});var he=Ft(ze),Pe=a(he),fe=a(Pe),we=a(fe),Ge=a(we),lt=a(Ge);q(lt,{icon:"heroicons:currency-dollar",class:"w-8 h-8"}),oe(),t(Ge),oe(2),t(we);var Se=s(we,2),it=a(Se);q(it,{icon:"heroicons:plus",class:"w-5 h-5"}),oe(),t(Se),t(fe);var $e=s(fe,2);ie($e,5,()=>(e(H),d(()=>Object.entries(e(H)))),ne,(r,l)=>{var c=Ye(()=>Ze(e(l),2));let n=()=>e(c)[0],b=()=>e(c)[1];var y=Lt(),f=a(y),D=a(f),L=a(D),w=a(L),K=a(w,!0);t(w);var h=s(w,2),j=a(h);t(h),t(L);var N=s(L,2);{let _=Xe(()=>(n(),d(()=>Ue(n()))));q(N,{get icon(){return e(_)},class:"w-8 h-8 text-base-content/50"})}t(D),t(f),t(y),m((_,i)=>{u(K,n()),Re(h,1,`text-2xl font-bold ${_??""}`),u(j,`₹${i??""}`)},[()=>(n(),d(()=>ye(n()))),()=>(b(),d(()=>b().toLocaleString()))]),S(r,y)}),t($e);var Fe=s($e,2),Ve=a(Fe),Ee=a(Ve),We=s(a(Ee),2);V(We),t(Ee);var De=s(Ee,2),Te=s(a(De),2);m(()=>{e(I),le(()=>{e(be)})});var Ae=a(Te);Ae.value=Ae.__value="";var nt=s(Ae);ie(nt,1,()=>e(be),ne,(r,l)=>{var c=qt(),n=a(c,!0);t(c);var b={};m(()=>{u(n,e(l)),b!==(b=e(l))&&(c.value=(c.__value=e(l))??"")}),S(r,c)}),t(Te),t(De);var He=s(De,2),Ce=s(a(He),2);m(()=>{e(k),le(()=>{e(_e)})});var Le=a(Ce);Le.value=Le.__value="";var ct=s(Le);ie(ct,1,()=>e(_e),ne,(r,l)=>{var c=It(),n=a(c,!0);t(c);var b={};m(()=>{u(n,e(l)),b!==(b=e(l))&&(c.value=(c.__value=e(l))??"")}),S(r,c)}),t(Ce),t(He),t(Ve),t(Fe);var Je=s(Fe,2);ie(Je,1,()=>(e(me),d(()=>Object.entries(e(me)))),ne,(r,l)=>{var c=Ye(()=>Ze(e(l),2));let n=()=>e(c)[0],b=()=>e(c)[1];var y=Mt(),f=a(y),D=a(f);{let _=Xe(()=>(n(),d(()=>Ue(n()))));q(D,{get icon(){return e(_)},class:"w-6 h-6"})}var L=s(D),w=s(L),K=a(w,!0);t(w);var h=s(w,2),j=a(h);t(h),t(f);var N=s(f,2);ie(N,5,b,ne,(_,i)=>{var M=Nt(),B=a(M),R=a(B),U=a(R),z=a(U),Q=a(z,!0);t(z);var P=s(z,2),X=a(P);{var de=T=>{var A=kt(),ae=a(A,!0);t(A),m(()=>u(ae,(e(i),d(()=>e(i).sub_category)))),S(T,A)};pe(X,T=>{e(i),d(()=>e(i).sub_category)&&T(de)})}var Y=s(X,2),Z=a(Y,!0);t(Y);var ee=s(Y,2),ve=a(ee,!0);t(ee),t(P),t(U);var te=s(U,2),G=a(te),qe=a(G);q(qe,{icon:"heroicons:ellipsis-vertical",class:"w-5 h-5"}),t(G);var v=s(G,2),Ie=a(v),ke=a(Ie),bt=a(ke);q(bt,{icon:"heroicons:pencil",class:"w-4 h-4"}),oe(),t(ke),t(Ie);var Ke=s(Ie,2),je=a(Ke),_t=a(je);q(_t,{icon:"heroicons:trash",class:"w-4 h-4"}),oe(),t(je),t(Ke),t(v),t(te),t(R);var Qe=s(R,2),Ne=a(Qe),Me=s(a(Ne),2),mt=a(Me);t(Me),t(Ne);var Oe=s(Ne,2),gt=s(a(Oe));t(Oe);var Be=s(Oe,2),xt=s(a(Be));t(Be);var yt=s(Be,2);{var ht=T=>{var A=jt(),ae=s(a(A));t(A),m(()=>u(ae,` ${e(i),d(()=>e(i).notes)??""}`)),S(T,A)};pe(yt,T=>{e(i),d(()=>e(i).notes)&&T(ht)})}t(Qe),t(B),t(M),m((T,A,ae)=>{u(Q,(e(i),d(()=>e(i).category))),u(Z,(e(i),d(()=>e(i).recurring))),u(ve,(e(i),d(()=>e(i).source))),Re(Me,1,`text-xl font-bold ${T??""}`),u(mt,`₹${A??""}`),u(gt,` ${e(i),d(()=>e(i).actor)??""}`),u(xt,` ${ae??""}`)},[()=>(e(i),d(()=>ye(e(i).type))),()=>(e(i),d(()=>e(i).amount.toLocaleString())),()=>(e(i),d(()=>new Date(e(i).date).toLocaleDateString()))]),se("click",ke,()=>rt(e(i))),se("click",je,()=>st(e(i))),S(_,M)}),t(N),t(y),m((_,i)=>{u(L,` ${n()??""} `),u(K,(b(),d(()=>b().length))),Re(h,1,`text-lg font-bold ${_??""} ml-auto`),u(j,`₹${i??""}`)},[()=>(n(),d(()=>ye(n()))),()=>(e(H),n(),d(()=>{var _;return((_=e(H)[n()])==null?void 0:_.toLocaleString())||0}))]),S(r,y)});var dt=s(Je,2);{var vt=r=>{var l=Ot(),c=a(l);q(c,{icon:"heroicons:currency-dollar",class:"w-16 h-16 text-base-content/30 mx-auto mb-4"});var n=s(c,4),b=a(n,!0);t(n),t(l),m(()=>u(b,e(E)||e(I)||e(k)?"Try adjusting your filters":"Add your first finance entry to get started")),S(r,l)};pe(dt,r=>{e(W),d(()=>e(W).length===0)&&r(vt)})}t(Pe),t(he);var pt=s(he,2);{var ut=r=>{var l=Bt(),c=a(l),n=a(c),b=a(n,!0);t(n);var y=s(n,2),f=a(y),D=a(f),L=s(a(D),2);m(()=>{e(o),le(()=>{})}),t(D);var w=s(D,2),K=s(a(w),2);m(()=>{e(o),le(()=>{})}),t(w),t(f);var h=s(f,2),j=a(h),N=s(a(j),2);V(N),t(j);var _=s(j,2),i=s(a(_),2);V(i),t(_),t(h);var M=s(h,2),B=a(M),R=s(a(B),2);V(R),t(B);var U=s(B,2),z=s(a(U),2);V(z),t(U),t(M);var Q=s(M,2),P=a(Q),X=s(a(P),2);V(X),t(P);var de=s(P,2),Y=s(a(de),2);m(()=>{e(o),le(()=>{})}),t(de),t(Q);var Z=s(Q,2),ee=s(a(Z),2);Tt(ee),t(Z);var ve=s(Z,2),te=a(ve),G=s(te,2),qe=a(G);t(G),t(ve),t(y),t(c),t(l),m(()=>{u(b,e(x)?"Edit Finance Entry":"Add New Finance Entry"),u(qe,`${e(x)?"Update":"Add"} Entry`)}),ce(L,()=>e(o).type,v=>C(o,e(o).type=v)),ce(K,()=>e(o).recurring,v=>C(o,e(o).recurring=v)),O(N,()=>e(o).category,v=>C(o,e(o).category=v)),O(i,()=>e(o).sub_category,v=>C(o,e(o).sub_category=v)),O(R,()=>e(o).amount,v=>C(o,e(o).amount=v)),O(z,()=>e(o).date,v=>C(o,e(o).date=v)),O(X,()=>e(o).actor,v=>C(o,e(o).actor=v)),ce(Y,()=>e(o).source,v=>C(o,e(o).source=v)),O(ee,()=>e(o).notes,v=>C(o,e(o).notes=v)),se("click",te,ot),se("submit",y,At(at)),S(r,l)};pe(pt,r=>{e(J)&&r(ut)})}se("click",Se,()=>{p(J,!0),p(x,null),xe()}),O(We,()=>e(E),r=>p(E,r)),ce(Te,()=>e(I),r=>p(I,r)),ce(Ce,()=>e(k),r=>p(k,r)),S(et,ze),Et()}export{ea as component};
