import"./Bzak7iHL.js";import"./69_IOA4Y.js";import{o as pe,a as ge}from"./Dl7RRJWM.js";import{p as he,s as m,m as O,g as e,e as q,i as o,r as s,n as B,k as u,t as H,q as D,j as ie,a as I,b as fe,v as we}from"./6uIj5N_2.js";import{i as J}from"./Dvp2nKH1.js";import{e as ye,i as be}from"./D27cKp0K.js";import{s as ve}from"./DtCY3ta1.js";import{i as xe}from"./CRscWiiN.js";import{I as N}from"./BHUeFzQU.js";import{u as _e}from"./ABFA-kSa.js";import{o as h}from"./D6ghY5g-.js";var De=q(`<div class="text-center py-8 svelte-7w4q6"><!> <h3 class="text-lg font-medium text-gray-800 mb-2 svelte-7w4q6">Voice Not Supported</h3> <p class="text-gray-600 svelte-7w4q6">Your browser doesn't support voice input. Try using Chrome or Edge.</p></div>`),Ne=q('<p class="text-lg text-gray-800 mb-2 svelte-7w4q6"> </p>'),Le=q('<p class="text-sm text-blue-600 italic svelte-7w4q6"> </p>'),Pe=q('<p class="text-gray-500 svelte-7w4q6">Tap the microphone and speak naturally</p> <p class="text-xs text-gray-400 mt-2 svelte-7w4q6">Try: "Show my tasks" or "Add grocery item"</p>',1),Me=q('<div class="text-center svelte-7w4q6"><button><!></button> <div class="min-h-[60px] svelte-7w4q6"><!> <!></div> <!></div>'),Ae=q('<button class="flex items-center space-x-2 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors svelte-7w4q6"><!> <span class="text-sm font-medium text-gray-700 svelte-7w4q6"> </span></button>'),Ce=q('<div class="voice-assistant bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200 svelte-7w4q6"><div class="flex items-center justify-between mb-6 svelte-7w4q6"><div class="flex items-center space-x-3 svelte-7w4q6"><div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center svelte-7w4q6"><!></div> <div class="svelte-7w4q6"><h2 class="text-xl font-bold text-gray-800 svelte-7w4q6">Voice Assistant</h2> <p class="text-sm text-gray-600 svelte-7w4q6">Speak naturally in your language</p></div></div> <div class="text-right svelte-7w4q6"><div class="text-xs text-gray-500 svelte-7w4q6">Status</div> <div class="flex items-center space-x-2 svelte-7w4q6"><div></div> <span class="text-sm font-medium svelte-7w4q6"> </span></div></div></div> <div class="bg-white rounded-lg p-6 mb-6 border border-gray-200 svelte-7w4q6"><!></div> <div class="bg-white rounded-lg p-4 border border-gray-200 svelte-7w4q6"><h3 class="text-sm font-medium text-gray-700 mb-3 svelte-7w4q6">Quick Commands</h3> <div class="grid grid-cols-2 gap-3 svelte-7w4q6"></div></div> <div class="mt-4 bg-blue-50 rounded-lg p-4 border border-blue-200 svelte-7w4q6"><div class="flex items-start space-x-3 svelte-7w4q6"><!> <div class="svelte-7w4q6"><h4 class="text-sm font-medium text-blue-800 mb-1 svelte-7w4q6">Voice Tips</h4> <ul class="text-xs text-blue-700 space-y-1 svelte-7w4q6"><li class="svelte-7w4q6">• Speak naturally in your preferred language</li> <li class="svelte-7w4q6">• Say "Nest" first to wake the assistant</li> <li class="svelte-7w4q6">• Try commands like "add task", "show reminders", "festival info"</li> <li class="svelte-7w4q6">• Works offline for basic commands</li></ul></div></div></div></div>');function Ue(oe,ne){he(ne,!1);let l,p=O(!1),g=O(!1),w=O(""),c=O(""),v=null,k=null,K=O(!1);const X={hello:{action:"greet",response:"Hello! How can I help you today?"},hi:{action:"greet",response:"Hi there! What can I do for you?"},namaste:{action:"greet",response:"Namaste! How may I assist you?"},vanakkam:{action:"greet",response:"Vanakkam! How can I help you?"},"add task":{action:"add_task",response:"What task would you like to add?"},"mark task done":{action:"complete_task",response:"Which task have you completed?"},"show tasks":{action:"list_tasks",response:"Here are your current tasks:"},"what are my tasks":{action:"list_tasks",response:"Let me show you your tasks:"},"remind me":{action:"set_reminder",response:"What would you like me to remind you about?"},"set reminder":{action:"set_reminder",response:"Sure, what reminder should I set?"},"what festival today":{action:"festival_today",response:"Let me check today's festivals:"},"upcoming festivals":{action:"upcoming_festivals",response:"Here are the upcoming festivals:"},"temple schedule":{action:"temple_schedule",response:"Here's the temple schedule:"},"what's for dinner":{action:"dinner_plan",response:"Let me check the dinner plans:"},"grocery list":{action:"grocery_list",response:"Here's your grocery list:"},"medicine reminder":{action:"medicine_reminder",response:"I'll remind you about your medicine."},"log my medicine":{action:"log_medicine",response:"Medicine logged successfully."},"start cooking":{action:"start_cooking",response:"Cooking session started. What are you preparing?"},"school pickup":{action:"school_pickup",response:"School pickup reminder set."},"mark chores done":{action:"complete_chores",response:"Great job! Chores marked as completed."}};_e.subscribe(i=>{l=i}),pe(()=>{const i=window.SpeechRecognition||window.webkitSpeechRecognition;i&&(v=new i,v.continuous=!1,v.interimResults=!1,v.lang=F(),v.onstart=()=>{m(p,!0),m(g,!1)},v.onresult=t=>{const r=t.results[0][0].transcript.toLowerCase();m(w,r),Z(r)},v.onend=()=>{m(p,!1)},v.onerror=t=>{console.error("Speech recognition error:",t.error),m(p,!1),m(c,"Sorry, I didn't catch that. Could you try again?"),f(e(c))},m(K,!0)),"speechSynthesis"in window&&(k=window.speechSynthesis)}),ge(()=>{v&&v.stop(),k&&k.cancel()});function F(){return{hi:"hi-IN",ta:"ta-IN",te:"te-IN",kn:"kn-IN",ml:"ml-IN",bn:"bn-IN",gu:"gu-IN",mr:"mr-IN",pa:"pa-IN",or:"or-IN",as:"as-IN",en:"en-IN"}[(l==null?void 0:l.preferredLanguage)||"en"]||"en-IN"}function re(){v&&!e(p)&&(v.lang=F(),v.start())}function E(){v&&e(p)&&v.stop()}function Z(i){m(g,!0),h.saveVoiceCommand(i,e(w),!0).catch(r=>{console.warn("Failed to save voice command:",r)});let t=null;for(const[r,x]of Object.entries(X))if(i.includes(r)){t=x;break}t?(m(c,t.response),Y(t.action,i)):(m(c,"I'm not sure what you mean. Try saying 'show tasks', 'add task', or 'set reminder'."),h.saveVoiceCommand(i,e(w),!1).catch(r=>{console.warn("Failed to save failed voice command:",r)})),f(e(c)),m(g,!1)}function Y(i,t){switch(i){case"greet":break;case"add_task":const r=t.replace(/add task/i,"").trim();r&&ee(r);break;case"complete_task":ce();break;case"list_tasks":G();break;case"set_reminder":const x=t.replace(/remind me|set reminder/i,"").trim();x&&te(x);break;case"festival_today":le();break;case"log_medicine":de();break;default:console.log("Action:",i)}}function f(i){if(k){const t=new SpeechSynthesisUtterance(i);t.lang=F(),t.rate=.9,t.pitch=1,k.speak(t)}}async function ee(i){try{const t={id:Date.now().toString(),title:i,description:i,status:"pending",user_id:(l==null?void 0:l.id)||"default",created_at:new Date().toISOString(),priority:"medium"};await h.saveData("tasks",t),m(c,`Task "${i}" has been added to your list.`),f(e(c))}catch(t){console.error("Failed to add task:",t),m(c,"Sorry, I couldn't add that task. Please try again."),f(e(c))}}async function ce(){try{const t=(await h.getAllData("tasks","user_id",(l==null?void 0:l.id)||"default")).filter(r=>r.status==="pending");if(t.length>0){const r=t[t.length-1];r.status="completed",r.completed_at=new Date().toISOString(),await h.saveData("tasks",r),m(c,`Great job! "${r.title}" has been marked as completed.`),f(e(c))}else m(c,"You don't have any pending tasks to complete."),f(e(c))}catch(i){console.error("Failed to complete task:",i),m(c,"Sorry, I couldn't complete the task. Please try again."),f(e(c))}}async function G(){try{const t=(await h.getAllData("tasks","user_id",(l==null?void 0:l.id)||"default")).filter(r=>r.status==="pending");if(t.length>0){const r=t.map(x=>x.title).join(", ");m(c,`You have ${t.length} pending tasks: ${r}`)}else m(c,"You have no pending tasks. Great job staying on top of things!");f(e(c))}catch(i){console.error("Failed to list tasks:",i),m(c,"Sorry, I couldn't retrieve your tasks right now."),f(e(c))}}async function te(i){try{const t={id:Date.now().toString(),title:i,description:i,scheduled_at:new Date(Date.now()+36e5).toISOString(),user_id:(l==null?void 0:l.id)||"default",created_at:new Date().toISOString(),status:"active"};await h.saveData("reminders",t),m(c,`Reminder set for "${i}" in one hour.`),f(e(c))}catch(t){console.error("Failed to set reminder:",t),m(c,"Sorry, I couldn't set that reminder. Please try again."),f(e(c))}}function le(){console.log("Checking today's festivals")}function de(){console.log("Logging medicine")}const me=[{text:"Add Task",icon:"mdi:plus",command:"add task"},{text:"Show Tasks",icon:"mdi:clipboard-list",command:"show tasks"},{text:"Set Reminder",icon:"mdi:bell",command:"set reminder"},{text:"Festival Info",icon:"mdi:calendar-star",command:"upcoming festivals"}];xe();var n=Ce(),a=o(n),d=o(a),y=o(d),L=o(y);N(L,{icon:"mdi:microphone",class:"w-6 h-6 text-white"}),s(y),B(2),s(d);var P=u(d,2),M=u(o(P),2),S=o(M),A=u(S,2),C=o(A,!0);s(A),s(M),s(P),s(a);var T=u(a,2),$=o(T);{var W=i=>{var t=De(),r=o(t);N(r,{icon:"mdi:microphone-off",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),B(4),s(t),I(i,t)},R=i=>{var t=Me(),r=o(t),x=o(r);{let b=we(()=>e(p)?"mdi:microphone-off":"mdi:microphone");N(x,{get icon(){return e(b)},class:"w-8 h-8 text-white"})}s(r);var V=u(r,2),se=o(V);{var ke=b=>{var _=Ne(),ue=o(_);s(_),H(()=>D(ue,`"${e(w)??""}"`)),I(b,_)};J(se,b=>{e(w)&&b(ke)})}var Se=u(se,2);{var Ie=b=>{var _=Le(),ue=o(_,!0);s(_),H(()=>D(ue,e(c))),I(b,_)};J(Se,b=>{e(c)&&b(Ie)})}s(V);var qe=u(V,2);{var Te=b=>{var _=Pe();B(2),I(b,_)};J(qe,b=>{!e(w)&&!e(c)&&b(Te)})}s(t),H(()=>ve(r,1,`w-20 h-20 rounded-full ${e(p)?"bg-red-500 animate-pulse":"bg-blue-500 hover:bg-blue-600"} transition-all duration-200 flex items-center justify-center mx-auto mb-4`,"svelte-7w4q6")),ie("click",r,function(...b){var _;(_=e(p)?E:re)==null||_.apply(this,b)}),I(i,t)};J($,i=>{e(K)?i(R,!1):i(W)})}s(T);var z=u(T,2),Q=u(o(z),2);ye(Q,5,()=>me,be,(i,t)=>{var r=Ae(),x=o(r);N(x,{get icon(){return e(t).icon},class:"w-5 h-5 text-blue-500"});var V=u(x,2),se=o(V,!0);s(V),s(r),H(()=>D(se,e(t).text)),ie("click",r,()=>Z(e(t).command)),I(i,r)}),s(Q),s(z);var ae=u(z,2),U=o(ae),j=o(U);N(j,{icon:"mdi:lightbulb",class:"w-5 h-5 text-blue-500 mt-0.5"}),B(2),s(U),s(ae),s(n),H(()=>{ve(S,1,`w-2 h-2 rounded-full ${e(p)?"bg-red-500 animate-pulse":"bg-green-500"}`,"svelte-7w4q6"),D(C,e(p)?"Listening...":e(g)?"Processing...":"Ready")}),I(oe,n),fe()}var $e=q('<div class="flex items-center justify-between p-3 bg-white rounded-lg border border-purple-100 hover:bg-purple-50 transition-colors"><div class="flex items-center space-x-3"><!> <div><p class="text-sm font-medium text-gray-800"> </p> <p class="text-xs text-gray-600"> </p></div></div> <div class="flex items-center space-x-2"><button class="text-xs text-purple-600 hover:text-purple-800 font-medium"> </button> <button class="text-gray-400 hover:text-gray-600"><!></button></div></div>'),Oe=q('<div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200 mb-6"><div class="flex items-center justify-between mb-3"><div class="flex items-center space-x-2"><!> <h3 class="text-sm font-medium text-purple-800">Smart Suggestions</h3></div> <span class="text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full">Ambient Intelligence</span></div> <div class="space-y-2"></div></div>'),He=q('<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-100 mb-6"><div class="flex items-center justify-between"><div class="flex items-center space-x-3"><!> <div><p class="text-sm font-medium text-gray-800"> </p> <p class="text-xs text-gray-600 capitalize"> </p></div></div> <div class="text-right"><p class="text-xs text-gray-500">Humidity</p> <p class="text-sm font-medium"> </p></div></div></div>'),Fe=q('<div class="ambient-intelligence"><!> <!></div>');function Ke(oe,ne){he(ne,!1);let l,p=O([]),g=O(null),w=null,c=[],v=[],k=[];_e.subscribe(n=>{l=n,f()}),pe(()=>{F(),Z(),K(),re();const n=setInterval(()=>{f()},300*1e3);return()=>clearInterval(n)}),ge(()=>{});function K(){setInterval(()=>{X()},60*1e3),X()}function X(){const n=new Date,a=n.getHours(),d=n.getMinutes();c=[],a>=6&&a<8?l==="mother"?c.push({type:"morning",title:"Morning Routine",message:"Time for school preparation and breakfast",icon:"mdi:weather-sunset-up",action:"Start morning checklist"}):l==="grandmother"&&c.push({type:"morning",title:"Morning Prayers",message:"Time for morning prayers and meditation",icon:"mdi:meditation",action:"Show prayer schedule"}):a>=18&&a<20&&(l==="mother"?c.push({type:"evening",title:"Evening Routine",message:"Time for homework help and dinner prep",icon:"mdi:weather-sunset-down",action:"Start evening checklist"}):l==="helper"&&c.push({type:"evening",title:"Evening Tasks",message:"Time for cleaning and dinner preparation",icon:"mdi:broom",action:"Show evening tasks"})),(a===8&&d>=0||a===14&&d>=0||a===20&&d>=0)&&(l==="grandmother"||l==="elder")&&c.push({type:"medicine",title:"Medicine Time",message:"Time to take your prescribed medicine",icon:"mdi:pill",action:"Log medicine intake",urgent:!0}),f()}async function F(){try{const n=await h.getPreference("location_data"),a=await h.getPreference("location_timestamp");if(n&&a){const d=Date.now()-new Date(a).getTime(),y=1800*1e3;if(d<y){w=JSON.parse(n),E();return}}if("geolocation"in navigator){const d=await new Promise((y,L)=>{navigator.geolocation.getCurrentPosition(y,L,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})});w={latitude:d.coords.latitude,longitude:d.coords.longitude,accuracy:d.coords.accuracy,timestamp:new Date().toISOString()},await h.savePreference("location_data",JSON.stringify(w)),await h.savePreference("location_timestamp",new Date().toISOString()),E()}}catch{console.log("Location access denied or unavailable, using cached data if available");const a=await h.getPreference("location_data");a&&(w=JSON.parse(a),E())}}function re(){setInterval(()=>{F()},600*1e3)}function E(){if(!w)return;v=[];const a=new Date().getHours();a>=15&&a<16&&l==="mother"&&v.push({type:"location",title:"School Pickup",message:"Time to pick up children from school",icon:"mdi:school",action:"Set school reminder"}),a>=17&&a<19&&v.push({type:"location",title:"Evening Temple",message:"Consider visiting the local temple",icon:"mdi:temple-hindu",action:"Show temple schedule"}),f()}async function Z(){try{const n=await h.getPreference("weather_data"),a=await h.getPreference("weather_timestamp");if(n&&a){const d=Date.now()-new Date(a).getTime(),y=3600*1e3;if(d<y){m(g,JSON.parse(n)),Y();return}}await new Promise(d=>setTimeout(d,1e3)),m(g,{temperature:28+Math.floor(Math.random()*10),condition:["sunny","cloudy","rainy"][Math.floor(Math.random()*3)],humidity:60+Math.floor(Math.random()*20),windSpeed:8+Math.floor(Math.random()*10),forecast:[{day:"Today",condition:"sunny",high:32,low:24},{day:"Tomorrow",condition:"cloudy",high:30,low:23},{day:"Day after",condition:"rainy",high:28,low:22}],location:w?`${w.latitude.toFixed(2)}, ${w.longitude.toFixed(2)}`:"Local"}),await h.savePreference("weather_data",JSON.stringify(e(g))),await h.savePreference("weather_timestamp",new Date().toISOString()),Y()}catch{console.log("Weather data unavailable, using cached data if available");const a=await h.getPreference("weather_data");a&&(m(g,JSON.parse(a)),Y())}}function Y(){if(!e(g))return;k=[],e(g).condition==="rainy"?k.push({type:"weather",title:"Rain Alert",message:"It's raining - bring clothes inside and check drainage",icon:"mdi:weather-rainy",action:"Add weather task"}):e(g).condition==="sunny"&&e(g).temperature>30&&k.push({type:"weather",title:"Hot Weather",message:"Stay hydrated and avoid outdoor work during peak sun",icon:"mdi:weather-sunny",action:"Health reminder"});const n=new Date().toLocaleDateString("en-IN",{month:"long",day:"numeric"});(n.includes("Diwali")||n.includes("Pongal"))&&k.push({type:"weather",title:"Festival Weather",message:"Check weather for outdoor festival activities",icon:"mdi:weather-partly-cloudy",action:"Festival planning"}),f()}async function f(){if(m(p,[...c,...v,...k].slice(0,4)),e(p).length>0){const n={id:Date.now().toString(),timestamp:new Date().toISOString(),user_id:(l==null?void 0:l.id)||"default",suggestions:e(p),context:{time:new Date().toISOString(),weather:e(g),location:w,role:l}};try{await h.saveData("ambient_suggestions",n)}catch(a){console.warn("Failed to save ambient suggestions:",a)}}}function ee(n){m(p,e(p).filter((a,d)=>d!==n))}function ce(n){console.log("Executing suggestion:",n.action);const a=e(p).indexOf(n);a>-1&&ee(a)}xe();var G=Fe(),te=o(G);{var le=n=>{var a=Oe(),d=o(a),y=o(d),L=o(y);N(L,{icon:"mdi:brain",class:"w-5 h-5 text-purple-600"}),B(2),s(y),B(2),s(d);var P=u(d,2);ye(P,5,()=>e(p),be,(M,S,A)=>{var C=$e(),T=o(C),$=o(T);{let x=we(()=>e(S).urgent?"text-red-500":"text-purple-500");N($,{get icon(){return e(S).icon},get class(){return`w-5 h-5 ${e(x)??""}`}})}var W=u($,2),R=o(W),z=o(R,!0);s(R);var Q=u(R,2),ae=o(Q,!0);s(Q),s(W),s(T);var U=u(T,2),j=o(U),i=o(j,!0);s(j);var t=u(j,2),r=o(t);N(r,{icon:"mdi:close",class:"w-4 h-4"}),s(t),s(U),s(C),H(()=>{D(z,e(S).title),D(ae,e(S).message),D(i,e(S).action)}),ie("click",j,()=>ce(e(S))),ie("click",t,()=>ee(A)),I(M,C)}),s(P),s(a),I(n,a)};J(te,n=>{e(p).length>0&&n(le)})}var de=u(te,2);{var me=n=>{var a=He(),d=o(a),y=o(d),L=o(y);N(L,{get icon(){return`mdi:weather-${e(g).condition??""}`},class:"w-6 h-6 text-blue-500"});var P=u(L,2),M=o(P),S=o(M);s(M);var A=u(M,2),C=o(A,!0);s(A),s(P),s(y);var T=u(y,2),$=u(o(T),2),W=o($);s($),s(T),s(d),s(a),H(()=>{D(S,`${e(g).temperature??""}°C`),D(C,e(g).condition),D(W,`${e(g).humidity??""}%`)}),I(n,a)};J(de,n=>{e(g)&&n(me)})}s(G),I(oe,G),fe()}export{Ke as A,Ue as V};
