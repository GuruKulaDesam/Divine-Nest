const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DB6HeVzm.js","./BrpUgTDZ.js"])))=>i.map(i=>d[i]);
var an=Object.defineProperty;var on=(X,a,n)=>a in X?an(X,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):X[a]=n;var H=(X,a,n)=>on(X,typeof a!="symbol"?a+"":a,n);import{_ as cr}from"./Dp1pzeXC.js";import{r as sn,C as cn}from"./BrpUgTDZ.js";import{a as ln,g as un}from"./D6-XlEtG.js";class Tn{constructor(a){this.sqlite=a,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(a){return Promise.reject(a)}}async saveToStore(a){try{return await this.sqlite.saveToStore({database:a}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(a){try{return await this.sqlite.saveToLocalDisk({database:a}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(a){const n=a??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(u){return Promise.reject(u)}}async echo(a){try{const n=await this.sqlite.echo({value:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const a=await this.sqlite.isSecretStored();return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async setEncryptionSecret(a){try{return await this.sqlite.setEncryptionSecret({passphrase:a}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(a,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:a,oldpassphrase:n}),Promise.resolve()}catch(u){return Promise.reject(u)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(a){return Promise.reject(a)}}async checkEncryptionSecret(a){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(a,n){try{return a.endsWith(".db")&&(a=a.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:a,upgrade:n}),Promise.resolve()}catch(u){return Promise.reject(u)}}async createConnection(a,n,u,y,N){try{a.endsWith(".db")&&(a=a.slice(0,-3)),await this.sqlite.createConnection({database:a,encrypted:n,mode:u,version:y,readonly:N});const R=new ar(a,N,this.sqlite),I=N?`RO_${a}`:`RW_${a}`;return this._connectionDict.set(I,R),Promise.resolve(R)}catch(R){return Promise.reject(R)}}async closeConnection(a,n){try{a.endsWith(".db")&&(a=a.slice(0,-3)),await this.sqlite.closeConnection({database:a,readonly:n});const u=n?`RO_${a}`:`RW_${a}`;return this._connectionDict.delete(u),Promise.resolve()}catch(u){return Promise.reject(u)}}async isConnection(a,n){const u={};a.endsWith(".db")&&(a=a.slice(0,-3));const y=n?`RO_${a}`:`RW_${a}`;return u.result=this._connectionDict.has(y),Promise.resolve(u)}async retrieveConnection(a,n){a.endsWith(".db")&&(a=a.slice(0,-3));const u=n?`RO_${a}`:`RW_${a}`;if(this._connectionDict.has(u)){const y=this._connectionDict.get(u);return typeof y<"u"?Promise.resolve(y):Promise.reject(`Connection ${a} is undefined`)}else return Promise.reject(`Connection ${a} does not exist`)}async getNCDatabasePath(a,n){try{const u=await this.sqlite.getNCDatabasePath({path:a,database:n});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async createNCConnection(a,n){try{await this.sqlite.createNCConnection({databasePath:a,version:n});const u=new ar(a,!0,this.sqlite),y=`RO_${a})`;return this._connectionDict.set(y,u),Promise.resolve(u)}catch(u){return Promise.reject(u)}}async closeNCConnection(a){try{await this.sqlite.closeNCConnection({databasePath:a});const n=`RO_${a})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(a){const n={},u=`RO_${a})`;return n.result=this._connectionDict.has(u),Promise.resolve(n)}async retrieveNCConnection(a){if(this._connectionDict.has(a)){const n=`RO_${a})`,u=this._connectionDict.get(n);return typeof u<"u"?Promise.resolve(u):Promise.reject(`Connection ${a} is undefined`)}else return Promise.reject(`Connection ${a} does not exist`)}async isNCDatabase(a){try{const n=await this.sqlite.isNCDatabase({databasePath:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const a=new Map;try{for(const n of this._connectionDict.keys()){const u=n.substring(3),y=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:u,readonly:y}),a.set(n,null)}for(const n of a.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const a=[...this._connectionDict.keys()],n=[],u=[];for(const N of a)n.push(N.substring(0,2)),u.push(N.substring(3));const y=await this.sqlite.checkConnectionsConsistency({dbNames:u,openModes:n});return y.result||(this._connectionDict=new Map),Promise.resolve(y)}catch(a){return this._connectionDict=new Map,Promise.reject(a)}}async importFromJson(a){try{const n=await this.sqlite.importFromJson({jsonstring:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(a){try{const n=await this.sqlite.isJsonValid({jsonstring:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(a){const n=a??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(u){return Promise.reject(u)}}async getFromHTTPRequest(a,n){const u=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:a,overwrite:u}),Promise.resolve()}catch(y){return Promise.reject(y)}}async isDatabaseEncrypted(a){a.endsWith(".db")&&(a=a.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const a=await this.sqlite.isInConfigEncryption();return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async isInConfigBiometricAuth(){try{const a=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async isDatabase(a){a.endsWith(".db")&&(a=a.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:a});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const u={values:n};return Promise.resolve(u)}catch(a){return Promise.reject(a)}}async getMigratableDbList(a){const n=a||"default";try{const u=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async addSQLiteSuffix(a,n){const u=a||"default",y=n||[];try{const N=await this.sqlite.addSQLiteSuffix({folderPath:u,dbNameList:y});return Promise.resolve(N)}catch(N){return Promise.reject(N)}}async deleteOldDatabases(a,n){const u=a||"default",y=n||[];try{const N=await this.sqlite.deleteOldDatabases({folderPath:u,dbNameList:y});return Promise.resolve(N)}catch(N){return Promise.reject(N)}}async moveDatabasesAndAddSuffix(a,n){const u=a||"default",y=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:u,dbNameList:y})}}class ar{constructor(a,n,u){this.dbName=a,this.readonly=n,this.sqlite=u}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(a){return Promise.reject(a)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(a){return Promise.reject(a)}}async beginTransaction(){try{const a=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async commitTransaction(){try{const a=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async rollbackTransaction(){try{const a=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async isTransactionActive(){try{const a=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async loadExtension(a){try{return await this.sqlite.loadExtension({database:this.dbName,path:a,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(a){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:a,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const a=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async getVersion(){try{const a=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async getTableList(){try{const a=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async execute(a,n=!0,u=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const y=await this.sqlite.execute({database:this.dbName,statements:a,transaction:n,readonly:!1,isSQL92:u});return Promise.resolve(y)}}catch(y){return Promise.reject(y)}}async query(a,n,u=!0){let y;try{return n&&n.length>0?y=await this.sqlite.query({database:this.dbName,statement:a,values:n,readonly:this.readonly,isSQL92:!0}):y=await this.sqlite.query({database:this.dbName,statement:a,values:[],readonly:this.readonly,isSQL92:u}),y=await this.reorderRows(y),Promise.resolve(y)}catch(N){return Promise.reject(N)}}async run(a,n,u=!0,y="no",N=!0){let R;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?R=await this.sqlite.run({database:this.dbName,statement:a,values:n,transaction:u,readonly:!1,returnMode:y,isSQL92:!0}):R=await this.sqlite.run({database:this.dbName,statement:a,values:[],transaction:u,readonly:!1,returnMode:y,isSQL92:N}),R.changes=await this.reorderRows(R.changes),Promise.resolve(R))}catch(I){return Promise.reject(I)}}async executeSet(a,n=!0,u="no",y=!0){let N;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(N=await this.sqlite.executeSet({database:this.dbName,set:a,transaction:n,readonly:!1,returnMode:u,isSQL92:y}),N.changes=await this.reorderRows(N.changes),Promise.resolve(N))}catch(R){return Promise.reject(R)}}async isExists(){try{const a=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async isTable(a){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:a,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const a=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(a){return Promise.reject(a)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const a=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(a)}}catch(a){return Promise.reject(a)}}async setSyncDate(a){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:a,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const a=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return a.syncDate>0&&(n=new Date(a.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(a){return Promise.reject(a)}}async exportToJson(a,n=!1){try{const u=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:a,readonly:this.readonly,encrypted:n});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(a){return Promise.reject(a)}}async executeTransaction(a,n=!0){let u=0,y=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),y=await this.sqlite.isTransactionActive({database:this.dbName}),!y)return Promise.reject("After Begin Transaction, no transaction active");try{for(const I of a){if(typeof I!="object"||!("statement"in I))throw new Error("Error a task.statement must be provided");if("values"in I&&I.values&&I.values.length>0){const W=I.statement.toUpperCase().includes("RETURNING")?"all":"no",s=await this.sqlite.run({database:this.dbName,statement:I.statement,values:I.values,transaction:!1,readonly:!1,returnMode:W,isSQL92:n});if(s.changes.changes<0)throw new Error("Error in transaction method run ");u+=s.changes.changes}else{const W=await this.sqlite.execute({database:this.dbName,statements:I.statement,transaction:!1,readonly:!1});if(W.changes.changes<0)throw new Error("Error in transaction method execute ");u+=W.changes.changes}}const N=await this.sqlite.commitTransaction({database:this.dbName});u+=N.changes.changes;const R={changes:{changes:u}};return Promise.resolve(R)}catch(N){const R=N.message?N.message:N;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(R)}}async reorderRows(a){const n=a;if(a!=null&&a.values&&typeof a.values[0]=="object"&&Object.keys(a.values[0]).includes("ios_columns")){const u=a.values[0].ios_columns,y=[];for(let N=1;N<a.values.length;N++){const R=a.values[N],I={};for(const W of u)I[W]=R[W];y.push(I)}n.values=y}return Promise.resolve(n)}}const dn=sn("CapacitorSQLite",{web:()=>cr(()=>import("./DB6HeVzm.js"),__vite__mapDeps([0,1]),import.meta.url).then(X=>new X.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite});var ht={exports:{}};const En={},hn=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"})),or=ln(hn);var sr;function fn(){return sr||(sr=1,(function(X,a){var n=void 0,u=function(y){return n||(n=new Promise(function(N,R){var I=typeof y<"u"?y:{},W=I.onAbort;I.onAbort=function(e){R(new Error(e)),W&&W(e)},I.postRun=I.postRun||[],I.postRun.push(function(){N(I)}),X=void 0;var s;s||(s=typeof I<"u"?I:{});var lr=typeof window=="object",ke=typeof WorkerGlobalScope<"u",Ne=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function e(c,d){switch(typeof d){case"boolean":rn(c,d?1:0);break;case"number":Zr(c,d);break;case"string":en(c,d,-1,-1);break;case"object":if(d===null)tr(c);else if(d.length!=null){var h=De(d,Pe);tn(c,h,d.length,-1),qe(h)}else Fe(c,"Wrong API use : tried to return a value of an unknown type ("+d+").",-1);break;default:tr(c)}}function t(c,d){for(var h=[],_=0;_<c;_+=1){var p=G(d+4*_,"i32"),w=Gr(p);if(w===1||w===2)p=Jr(p);else if(w===3)p=zr(p);else if(w===4){w=p,p=Vr(w),w=$r(w);for(var j=new Uint8Array(p),x=0;x<p;x+=1)j[x]=M[w+x];p=j}else p=null;h.push(p)}return h}function r(c,d){this.Qa=c,this.db=d,this.Oa=1,this.lb=[]}function i(c,d){if(this.db=d,d=he(c)+1,this.eb=Tt(d),this.eb===null)throw Error("Unable to allocate memory for the SQL string");V(c,A,this.eb,d),this.kb=this.eb,this.Za=this.pb=null}function o(c){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),c!=null){var d=this.filename,h="/",_=d;if(h&&(h=typeof h=="string"?h:Ze(h),_=d?ze(h+"/"+d):h),d=It(!0,!0),_=Ar(_,d),c){if(typeof c=="string"){h=Array(c.length);for(var p=0,w=c.length;p<w;++p)h[p]=c.charCodeAt(p);c=h}Ue(_,d|146),h=ue(_,577),Wt(h,c,0,c.length,0),at(h),Ue(_,d)}}this.handleError(f(this.filename,l)),this.db=G(l,"i32"),nr(this.db),this.fb={},this.Sa={}}var l=ee(4),T=s.cwrap,f=T("sqlite3_open","number",["string","number"]),g=T("sqlite3_close_v2","number",["number"]),L=T("sqlite3_exec","number",["number","string","number","number","number"]),U=T("sqlite3_changes","number",["number"]),q=T("sqlite3_prepare_v2","number",["number","string","number","number","number"]),zt=T("sqlite3_sql","string",["number"]),Ur=T("sqlite3_normalized_sql","string",["number"]),$t=T("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Or=T("sqlite3_bind_text","number",["number","number","number","number","number"]),Jt=T("sqlite3_bind_blob","number",["number","number","number","number","number"]),Mr=T("sqlite3_bind_double","number",["number","number","number"]),Xr=T("sqlite3_bind_int","number",["number","number","number"]),Pr=T("sqlite3_bind_parameter_index","number",["number","string"]),Dr=T("sqlite3_step","number",["number"]),qr=T("sqlite3_errmsg","string",["number"]),Fr=T("sqlite3_column_count","number",["number"]),kr=T("sqlite3_data_count","number",["number"]),xr=T("sqlite3_column_double","number",["number","number"]),Zt=T("sqlite3_column_text","string",["number","number"]),Hr=T("sqlite3_column_blob","number",["number","number"]),Kr=T("sqlite3_column_bytes","number",["number","number"]),jr=T("sqlite3_column_type","number",["number","number"]),Br=T("sqlite3_column_name","string",["number","number"]),Wr=T("sqlite3_reset","number",["number"]),Yr=T("sqlite3_clear_bindings","number",["number"]),Qr=T("sqlite3_finalize","number",["number"]),er=T("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Gr=T("sqlite3_value_type","number",["number"]),Vr=T("sqlite3_value_bytes","number",["number"]),zr=T("sqlite3_value_text","string",["number"]),$r=T("sqlite3_value_blob","number",["number"]),Jr=T("sqlite3_value_double","number",["number"]),Zr=T("sqlite3_result_double","",["number","number"]),tr=T("sqlite3_result_null","",["number"]),en=T("sqlite3_result_text","",["number","string","number","number"]),tn=T("sqlite3_result_blob","",["number","number","number","number"]),rn=T("sqlite3_result_int","",["number","number"]),Fe=T("sqlite3_result_error","",["number","string","number"]),rr=T("sqlite3_aggregate_context","number",["number","number"]),nr=T("RegisterExtensionFunctions","number",["number"]),ir=T("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(c){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(c)?this.Cb(c):c!=null&&typeof c=="object"?this.Db(c):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var c=Dr(this.Qa);switch(c){case 100:return!0;case 101:return!1;default:throw this.db.handleError(c)}},r.prototype.wb=function(c){return c==null&&(c=this.Oa,this.Oa+=1),xr(this.Qa,c)},r.prototype.Gb=function(c){if(c==null&&(c=this.Oa,this.Oa+=1),c=Zt(this.Qa,c),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(c)},r.prototype.Hb=function(c){return c==null&&(c=this.Oa,this.Oa+=1),Zt(this.Qa,c)},r.prototype.getBlob=function(c){c==null&&(c=this.Oa,this.Oa+=1);var d=Kr(this.Qa,c);c=Hr(this.Qa,c);for(var h=new Uint8Array(d),_=0;_<d;_+=1)h[_]=M[c+_];return h},r.prototype.get=function(c,d){d=d||{},c!=null&&this.bind(c)&&this.step(),c=[];for(var h=kr(this.Qa),_=0;_<h;_+=1)switch(jr(this.Qa,_)){case 1:var p=d.useBigInt?this.Gb(_):this.wb(_);c.push(p);break;case 2:c.push(this.wb(_));break;case 3:c.push(this.Hb(_));break;case 4:c.push(this.getBlob(_));break;default:c.push(null)}return c},r.prototype.getColumnNames=function(){for(var c=[],d=Fr(this.Qa),h=0;h<d;h+=1)c.push(Br(this.Qa,h));return c},r.prototype.getAsObject=function(c,d){c=this.get(c,d),d=this.getColumnNames();for(var h={},_=0;_<d.length;_+=1)h[d[_]]=c[_];return h},r.prototype.getSQL=function(){return zt(this.Qa)},r.prototype.getNormalizedSQL=function(){return Ur(this.Qa)},r.prototype.run=function(c){return c!=null&&this.bind(c),this.step(),this.reset()},r.prototype.sb=function(c,d){d==null&&(d=this.Oa,this.Oa+=1),c=wt(c);var h=De(c,Pe);this.lb.push(h),this.db.handleError(Or(this.Qa,d,h,c.length-1,0))},r.prototype.Bb=function(c,d){d==null&&(d=this.Oa,this.Oa+=1);var h=De(c,Pe);this.lb.push(h),this.db.handleError(Jt(this.Qa,d,h,c.length,0))},r.prototype.rb=function(c,d){d==null&&(d=this.Oa,this.Oa+=1),this.db.handleError((c===(c|0)?Xr:Mr)(this.Qa,d,c))},r.prototype.Eb=function(c){c==null&&(c=this.Oa,this.Oa+=1),Jt(this.Qa,c,0,0,0)},r.prototype.tb=function(c,d){switch(d==null&&(d=this.Oa,this.Oa+=1),typeof c){case"string":this.sb(c,d);return;case"number":this.rb(c,d);return;case"bigint":this.sb(c.toString(),d);return;case"boolean":this.rb(c+0,d);return;case"object":if(c===null){this.Eb(d);return}if(c.length!=null){this.Bb(c,d);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+c+")."},r.prototype.Db=function(c){var d=this;return Object.keys(c).forEach(function(h){var _=Pr(d.Qa,h);_!==0&&d.tb(c[h],_)}),!0},r.prototype.Cb=function(c){for(var d=0;d<c.length;d+=1)this.tb(c[d],d+1);return!0},r.prototype.reset=function(){return this.freemem(),Yr(this.Qa)===0&&Wr(this.Qa)===0},r.prototype.freemem=function(){for(var c;(c=this.lb.pop())!==void 0;)qe(c)},r.prototype.free=function(){this.freemem();var c=Qr(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,c},i.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var c=pe(),d=ee(4);Ee(l),Ee(d);try{this.db.handleError($t(this.db.db,this.kb,-1,l,d)),this.kb=G(d,"i32");var h=G(l,"i32");return h===0?(this.mb(),{done:!0}):(this.Za=new r(h,this.db),this.db.fb[h]=this.Za,{value:this.Za,done:!1})}catch(_){throw this.pb=Ve(this.kb),this.mb(),_}finally{_e(c)}},i.prototype.mb=function(){qe(this.eb),this.eb=null},i.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Ve(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(i.prototype[Symbol.iterator]=function(){return this}),o.prototype.run=function(c,d){if(!this.db)throw"Database closed";if(d){c=this.prepare(c,d);try{c.step()}finally{c.free()}}else this.handleError(L(this.db,c,0,0,l));return this},o.prototype.exec=function(c,d,h){if(!this.db)throw"Database closed";var _=pe(),p=null;try{var w=lt(c),j=ee(4);for(c=[];G(w,"i8")!==0;){Ee(l),Ee(j),this.handleError($t(this.db,w,-1,l,j));var x=G(l,"i32");if(w=G(j,"i32"),x!==0){var F=null;for(p=new r(x,this),d!=null&&p.bind(d);p.step();)F===null&&(F={columns:p.getColumnNames(),values:[]},c.push(F)),F.values.push(p.get(null,h));p.free()}}return c}catch(B){throw p&&p.free(),B}finally{_e(_)}},o.prototype.each=function(c,d,h,_,p){typeof d=="function"&&(_=h,h=d,d=void 0),c=this.prepare(c,d);try{for(;c.step();)h(c.getAsObject(null,p))}finally{c.free()}if(typeof _=="function")return _()},o.prototype.prepare=function(c,d){if(Ee(l),this.handleError(q(this.db,c,-1,l,0)),c=G(l,"i32"),c===0)throw"Nothing to prepare";var h=new r(c,this);return d!=null&&h.bind(d),this.fb[c]=h},o.prototype.iterateStatements=function(c){return new i(c,this)},o.prototype.export=function(){Object.values(this.fb).forEach(function(d){d.free()}),Object.values(this.Sa).forEach(Z),this.Sa={},this.handleError(g(this.db));var c=wr(this.filename);return this.handleError(f(this.filename,l)),this.db=G(l,"i32"),nr(this.db),c},o.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(c){c.free()}),Object.values(this.Sa).forEach(Z),this.Sa={},this.Ya&&(Z(this.Ya),this.Ya=void 0),this.handleError(g(this.db)),xt("/"+this.filename),this.db=null)},o.prototype.handleError=function(c){if(c===0)return null;throw c=qr(this.db),Error(c)},o.prototype.getRowsModified=function(){return U(this.db)},o.prototype.create_function=function(c,d){Object.prototype.hasOwnProperty.call(this.Sa,c)&&(Z(this.Sa[c]),delete this.Sa[c]);var h=ye(function(_,p,w){p=t(p,w);try{var j=d.apply(null,p)}catch(x){Fe(_,x,-1);return}e(_,j)},"viii");return this.Sa[c]=h,this.handleError(er(this.db,c,d.length,1,0,h,0,0,0)),this},o.prototype.create_aggregate=function(c,d){var h=d.init||function(){return null},_=d.finalize||function(F){return F},p=d.step;if(!p)throw"An aggregate function must have a step function in "+c;var w={};Object.hasOwnProperty.call(this.Sa,c)&&(Z(this.Sa[c]),delete this.Sa[c]),d=c+"__finalize",Object.hasOwnProperty.call(this.Sa,d)&&(Z(this.Sa[d]),delete this.Sa[d]);var j=ye(function(F,B,Et){var ae=rr(F,1);Object.hasOwnProperty.call(w,ae)||(w[ae]=h()),B=t(B,Et),B=[w[ae]].concat(B);try{w[ae]=p.apply(null,B)}catch(nn){delete w[ae],Fe(F,nn,-1)}},"viii"),x=ye(function(F){var B=rr(F,1);try{var Et=_(w[B])}catch(ae){delete w[B],Fe(F,ae,-1);return}e(F,Et),delete w[B]},"vi");return this.Sa[c]=j,this.Sa[d]=x,this.handleError(er(this.db,c,p.length-1,1,0,0,j,x,0)),this},o.prototype.updateHook=function(c){this.Ya&&(ir(this.db,0,0),Z(this.Ya),this.Ya=void 0),c&&(this.Ya=ye(function(d,h,_,p,w){switch(h){case 18:d="insert";break;case 23:d="update";break;case 9:d="delete";break;default:throw"unknown operationCode in updateHook callback: "+h}if(_=_?C(A,_):"",p=p?C(A,p):"",w>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";c(d,_,p,Number(w))},"viiiij"),ir(this.db,this.Ya,0))},s.Database=o};var ft={...s},xe="./this.program",be=(e,t)=>{throw t},Q="",He,Le;if(Ne){var Ke=or;Q=__dirname+"/",Le=e=>(e=ve(e)?new URL(e):e,Ke.readFileSync(e)),He=async e=>(e=ve(e)?new URL(e):e,Ke.readFileSync(e,void 0)),!s.thisProgram&&1<process.argv.length&&(xe=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),X.exports=s,be=(e,t)=>{throw process.exitCode=e,t}}else(lr||ke)&&(ke?Q=self.location.href:typeof document<"u"&&document.currentScript&&(Q=document.currentScript.src),Q=Q.startsWith("blob:")?"":Q.slice(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1),ke&&(Le=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),He=async e=>{if(ve(e))return new Promise((r,i)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?r(o.response):i(o.status)},o.onerror=i,o.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var mt=s.print||console.log.bind(console),oe=s.printErr||console.error.bind(console);Object.assign(s,ft),ft=null,s.thisProgram&&(xe=s.thisProgram);var ge=s.wasmBinary,Ae,we=!1,je,M,A,Te,v,O,Be,K,We,ve=e=>e.startsWith("file://");function yt(){var e=Ae.buffer;s.HEAP8=M=new Int8Array(e),s.HEAP16=Te=new Int16Array(e),s.HEAPU8=A=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=v=new Int32Array(e),s.HEAPU32=O=new Uint32Array(e),s.HEAPF32=Be=new Float32Array(e),s.HEAPF64=We=new Float64Array(e),s.HEAP64=K=new BigInt64Array(e),s.HEAPU64=new BigUint64Array(e)}var te=0,de=null;function se(e){var t;throw(t=s.onAbort)==null||t.call(s,e),e="Aborted("+e+")",oe(e),we=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Ye;async function ur(e){if(!ge)try{var t=await He(e);return new Uint8Array(t)}catch{}if(e==Ye&&ge)e=new Uint8Array(ge);else if(Le)e=Le(e);else throw"both async and sync fetching of the wasm failed";return e}async function Tr(e,t){try{var r=await ur(e);return await WebAssembly.instantiate(r,t)}catch(i){oe(`failed to asynchronously prepare wasm: ${i}`),se(i)}}async function dr(e){var t=Ye;if(!ge&&typeof WebAssembly.instantiateStreaming=="function"&&!ve(t)&&!Ne)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(i){oe(`wasm streaming compile failed: ${i}`),oe("falling back to ArrayBuffer instantiation")}return Tr(t,e)}class Qe{constructor(t){H(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var _t=e=>{for(;0<e.length;)e.shift()(s)},pt=[],Nt=[],Er=()=>{var e=s.preRun.shift();Nt.unshift(e)};function G(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return M[e];case"i8":return M[e];case"i16":return Te[e>>1];case"i32":return v[e>>2];case"i64":return K[e>>3];case"float":return Be[e>>2];case"double":return We[e>>3];case"*":return O[e>>2];default:se(`invalid type for getValue: ${t}`)}}var Ge=s.noExitRuntime||!0;function Ee(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":M[e]=0;break;case"i8":M[e]=0;break;case"i16":Te[e>>1]=0;break;case"i32":v[e>>2]=0;break;case"i64":K[e>>3]=BigInt(0);break;case"float":Be[e>>2]=0;break;case"double":We[e>>3]=0;break;case"*":O[e>>2]=0;break;default:se(`invalid type for setValue: ${t}`)}}var bt=typeof TextDecoder<"u"?new TextDecoder:void 0,C=(e,t=0,r=NaN)=>{var i=t+r;for(r=t;e[r]&&!(r>=i);)++r;if(16<r-t&&e.buffer&&bt)return bt.decode(e.subarray(t,r));for(i="";t<r;){var o=e[t++];if(o&128){var l=e[t++]&63;if((o&224)==192)i+=String.fromCharCode((o&31)<<6|l);else{var T=e[t++]&63;o=(o&240)==224?(o&15)<<12|l<<6|T:(o&7)<<18|l<<12|T<<6|e[t++]&63,65536>o?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else i+=String.fromCharCode(o)}return i},Ve=(e,t)=>e?C(A,e,t):"",Lt=(e,t)=>{for(var r=0,i=e.length-1;0<=i;i--){var o=e[i];o==="."?e.splice(i,1):o===".."?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},ze=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=Lt(e.split("/").filter(i=>!!i),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},gt=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},Re=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],hr=()=>{if(Ne){var e=or;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},At=e=>{(At=hr())(e)},fr=(...e)=>{for(var t="",r=!1,i=e.length-1;-1<=i&&!r;i--){if(r=0<=i?e[i]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Lt(t.split("/").filter(o=>!!o),!r).join("/"),(r?"/":"")+t||"."},$e=[],he=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);127>=i?t++:2047>=i?t+=2:55296<=i&&57343>=i?(t+=4,++r):t+=3}return t},V=(e,t,r,i)=>{if(!(0<i))return 0;var o=r;i=r+i-1;for(var l=0;l<e.length;++l){var T=e.charCodeAt(l);if(55296<=T&&57343>=T){var f=e.charCodeAt(++l);T=65536+((T&1023)<<10)|f&1023}if(127>=T){if(r>=i)break;t[r++]=T}else{if(2047>=T){if(r+1>=i)break;t[r++]=192|T>>6}else{if(65535>=T){if(r+2>=i)break;t[r++]=224|T>>12}else{if(r+3>=i)break;t[r++]=240|T>>18,t[r++]=128|T>>12&63}t[r++]=128|T>>6&63}t[r++]=128|T&63}}return t[r]=0,r-o},wt=(e,t)=>{var r=Array(he(e)+1);return e=V(e,r,0,r.length),t&&(r.length=e),r},vt=[];function Rt(e,t){vt[e]={input:[],output:[],cb:t},nt(e,mr)}var mr={open(e){var t=vt[e.node.rdev];if(!t)throw new E(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,i){if(!e.tty||!e.tty.cb.xb)throw new E(60);for(var o=0,l=0;l<i;l++){try{var T=e.tty.cb.xb(e.tty)}catch{throw new E(29)}if(T===void 0&&o===0)throw new E(6);if(T==null)break;o++,t[r+l]=T}return o&&(e.node.atime=Date.now()),o},write(e,t,r,i){if(!e.tty||!e.tty.cb.qb)throw new E(60);try{for(var o=0;o<i;o++)e.tty.cb.qb(e.tty,t[r+o])}catch{throw new E(29)}return i&&(e.node.mtime=e.node.ctime=Date.now()),o}},yr={xb(){e:{if(!$e.length){var e=null;if(Ne){var t=Buffer.alloc(256),r=0,i=process.stdin.fd;try{r=Ke.readSync(i,t,0,256)}catch(o){if(o.toString().includes("EOF"))r=0;else throw o}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}$e=wt(e,!0)}e=$e.shift()}return e},qb(e,t){t===null||t===10?(mt(C(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(mt(C(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},_r={qb(e,t){t===null||t===10?(oe(C(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(oe(C(e.output)),e.output=[])}},b={Wa:null,Xa(){return b.createNode(null,"/",16895,0)},createNode(e,t,r,i){if((r&61440)===24576||(r&61440)===4096)throw new E(63);return b.Wa||(b.Wa={dir:{node:{Ta:b.La.Ta,Ua:b.La.Ua,lookup:b.La.lookup,hb:b.La.hb,rename:b.La.rename,unlink:b.La.unlink,rmdir:b.La.rmdir,readdir:b.La.readdir,symlink:b.La.symlink},stream:{Va:b.Ma.Va}},file:{node:{Ta:b.La.Ta,Ua:b.La.Ua},stream:{Va:b.Ma.Va,read:b.Ma.read,write:b.Ma.write,ib:b.Ma.ib,jb:b.Ma.jb}},link:{node:{Ta:b.La.Ta,Ua:b.La.Ua,readlink:b.La.readlink},stream:{}},ub:{node:{Ta:b.La.Ta,Ua:b.La.Ua},stream:gr}}),r=Mt(e,t,r,i),D(r.mode)?(r.La=b.Wa.dir.node,r.Ma=b.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=b.Wa.file.node,r.Ma=b.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=b.Wa.link.node,r.Ma=b.Wa.link.stream):(r.mode&61440)===8192&&(r.La=b.Wa.ub.node,r.Ma=b.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,D(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw b.vb},hb(e,t,r,i){return b.createNode(e,t,r,i)},rename(e,t,r){try{var i=re(t,r)}catch{}if(i){if(D(e.mode))for(var o in i.Na)throw new E(55);tt(i)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=re(e,t),i;for(i in r.Na)throw new E(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=b.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new E(28);return e.link}},Ma:{read(e,t,r,i,o){var l=e.node.Na;if(o>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-o,i),8<e&&l.subarray)t.set(l.subarray(o,o+e),r);else for(i=0;i<e;i++)t[r+i]=l[o+i];return e},write(e,t,r,i,o,l){if(t.buffer===M.buffer&&(l=!1),!i)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(l)return e.Na=t.subarray(r,r+i),e.Ra=i;if(e.Ra===0&&o===0)return e.Na=t.slice(r,r+i),e.Ra=i;if(o+i<=e.Ra)return e.Na.set(t.subarray(r,r+i),o),i}l=o+i;var T=e.Na?e.Na.length:0;if(T>=l||(l=Math.max(l,T*(1048576>T?2:1.125)>>>0),T!=0&&(l=Math.max(l,256)),T=e.Na,e.Na=new Uint8Array(l),0<e.Ra&&e.Na.set(T.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+i),o);else for(l=0;l<i;l++)e.Na[o+l]=t[r+l];return e.Ra=Math.max(e.Ra,o+i),i},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new E(28);return t},ib(e,t,r,i,o){if((e.node.mode&61440)!==32768)throw new E(43);if(e=e.node.Na,o&2||!e||e.buffer!==M.buffer){o=!0,i=65536*Math.ceil(t/65536);var l=Gt(65536,i);if(l&&A.fill(0,l,l+i),i=l,!i)throw new E(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),M.set(e,i))}else o=!1,i=e.byteOffset;return{Kb:i,Ab:o}},jb(e,t,r,i){return b.Ma.write(e,t,0,i,r,!1),0}}},It=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},Je=null,St={},ce=[],pr=1,$=null,Ct=!1,Ut=!0,Ot={},E=class{constructor(e){H(this,"name","ErrnoError");this.Pa=e}},Nr=class{constructor(){H(this,"gb",{});H(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},br=class{constructor(e,t,r,i){H(this,"La",{});H(this,"Ma",{});H(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=pr++,this.name=t,this.mode=r,this.rdev=i,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function k(e,t={}){if(!e)throw new E(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(f=>!!f);for(var i=Je,o="/",l=0;l<e.length;l++){var T=l===e.length-1;if(T&&t.parent)break;if(e[l]!==".")if(e[l]==="..")o=gt(o),i=i.parent;else{o=ze(o+"/"+e[l]);try{i=re(i,e[l])}catch(f){if((f==null?void 0:f.Pa)===44&&T&&t.Jb)return{path:o};throw f}if(!i.ab||T&&!t.nb||(i=i.ab.root),(i.mode&61440)===40960&&(!T||t.$a)){if(!i.La.readlink)throw new E(52);i=i.La.readlink(i),i.charAt(0)==="/"||(i=gt(o)+"/"+i),e=i+"/"+e.slice(l+1).join("/");continue e}}}return{path:o,node:i}}throw new E(32)}function Ze(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function et(e,t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%$.length}function tt(e){var t=et(e.parent.id,e.name);if($[t]===e)$[t]=e.bb;else for(t=$[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function re(e,t){var r=D(e.mode)?(r=le(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new E(r);for(r=$[et(e.id,t)];r;r=r.bb){var i=r.name;if(r.parent.id===e.id&&i===t)return r}return e.La.lookup(e,t)}function Mt(e,t,r,i){return e=new br(e,t,r,i),t=et(e.parent.id,e.name),e.bb=$[t],$[t]=e}function D(e){return(e&61440)===16384}function Xt(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function le(e,t){if(Ut)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Pt(e,t){if(!D(e.mode))return 54;try{return re(e,t),20}catch{}return le(e,"wx")}function Dt(e,t,r){try{var i=re(e,t)}catch(o){return o.Pa}if(e=le(e,"wx"))return e;if(r){if(!D(i.mode))return 54;if(i===i.parent||Ze(i)==="/")return 10}else if(D(i.mode))return 31;return 0}function Ie(e){if(!e)throw new E(63);return e}function P(e){if(e=ce[e],!e)throw new E(8);return e}function qt(e,t=-1){if(e=Object.assign(new Nr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!ce[t])break e;throw new E(33)}return e.fd=t,ce[t]=e}function Lr(e,t=-1){var r,i;return e=qt(e,t),(i=(r=e.Ma)==null?void 0:r.Rb)==null||i.call(r,e),e}function rt(e,t,r){var i=e==null?void 0:e.Ma.Ua;e=i?e:t,i??(i=t.La.Ua),Ie(i),i(e,r)}var gr={open(e){var t,r;e.Ma=St[e.node.rdev].Ma,(r=(t=e.Ma).open)==null||r.call(t,e)},Va(){throw new E(70)}};function nt(e,t){St[e]={Ma:t}}function Ft(e,t){var r=t==="/";if(r&&Je)throw new E(10);if(!r&&t){var i=k(t,{nb:!1});if(t=i.path,i=i.node,i.ab)throw new E(10);if(!D(i.mode))throw new E(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?Je=e:i&&(i.ab=t,i.Xa&&i.Xa.Ib.push(t))}function Se(e,t,r){var i=k(e,{parent:!0}).node;if(e=Re(e),!e)throw new E(28);if(e==="."||e==="..")throw new E(20);var o=Pt(i,e);if(o)throw new E(o);if(!i.La.hb)throw new E(63);return i.La.hb(i,e,t,r)}function Ar(e,t=438){return Se(e,t&4095|32768,0)}function Y(e,t=511){return Se(e,t&1023|16384,0)}function Ce(e,t,r){typeof r>"u"&&(r=t,t=438),Se(e,t|8192,r)}function it(e,t){if(!fr(e))throw new E(44);var r=k(t,{parent:!0}).node;if(!r)throw new E(44);t=Re(t);var i=Pt(r,t);if(i)throw new E(i);if(!r.La.symlink)throw new E(63);r.La.symlink(r,t,e)}function kt(e){var t=k(e,{parent:!0}).node;e=Re(e);var r=re(t,e),i=Dt(t,e,!0);if(i)throw new E(i);if(!t.La.rmdir)throw new E(63);if(r.ab)throw new E(10);t.La.rmdir(t,e),tt(r)}function xt(e){var t=k(e,{parent:!0}).node;if(!t)throw new E(44);e=Re(e);var r=re(t,e),i=Dt(t,e,!1);if(i)throw new E(i);if(!t.La.unlink)throw new E(63);if(r.ab)throw new E(10);t.La.unlink(t,e),tt(r)}function fe(e,t){return e=k(e,{$a:!t}).node,Ie(e.La.Ta)(e)}function Ht(e,t,r,i){rt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:i})}function Ue(e,t){e=typeof e=="string"?k(e,{$a:!0}).node:e,Ht(null,e,t)}function Kt(e,t,r){if(D(t.mode))throw new E(31);if((t.mode&61440)!==32768)throw new E(28);var i=le(t,"w");if(i)throw new E(i);rt(e,t,{size:r,timestamp:Date.now()})}function ue(e,t,r=438){if(e==="")throw new E(44);if(typeof t=="string"){var i={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof i>"u")throw Error(`Unknown file open mode: ${t}`);t=i}if(r=t&64?r&4095|32768:0,typeof e=="object")i=e;else{var o=e.endsWith("/");e=k(e,{$a:!(t&131072),Jb:!0}),i=e.node,e=e.path}var l=!1;if(t&64)if(i){if(t&128)throw new E(20)}else{if(o)throw new E(31);i=Se(e,r|511,0),l=!0}if(!i)throw new E(44);if((i.mode&61440)===8192&&(t&=-513),t&65536&&!D(i.mode))throw new E(54);if(!l&&(o=i?(i.mode&61440)===40960?32:D(i.mode)&&(Xt(t)!=="r"||t&576)?31:le(i,Xt(t)):44))throw new E(o);return t&512&&!l&&(o=i,o=typeof o=="string"?k(o,{$a:!0}).node:o,Kt(null,o,0)),t&=-131713,o=qt({node:i,path:Ze(i),flags:t,seekable:!0,position:0,Ma:i.Ma,Lb:[],error:!1}),o.Ma.open&&o.Ma.open(o),l&&Ue(i,r&511),!s.logReadFiles||t&1||e in Ot||(Ot[e]=1),o}function at(e){if(e.fd===null)throw new E(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{ce[e.fd]=null}e.fd=null}function jt(e,t,r){if(e.fd===null)throw new E(8);if(!e.seekable||!e.Ma.Va)throw new E(70);if(r!=0&&r!=1&&r!=2)throw new E(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function Bt(e,t,r,i,o){if(0>i||0>o)throw new E(28);if(e.fd===null)throw new E(8);if((e.flags&2097155)===1)throw new E(8);if(D(e.node.mode))throw new E(31);if(!e.Ma.read)throw new E(28);var l=typeof o<"u";if(!l)o=e.position;else if(!e.seekable)throw new E(70);return t=e.Ma.read(e,t,r,i,o),l||(e.position+=t),t}function Wt(e,t,r,i,o){if(0>i||0>o)throw new E(28);if(e.fd===null)throw new E(8);if((e.flags&2097155)===0)throw new E(8);if(D(e.node.mode))throw new E(31);if(!e.Ma.write)throw new E(28);e.seekable&&e.flags&1024&&jt(e,0,2);var l=typeof o<"u";if(!l)o=e.position;else if(!e.seekable)throw new E(70);return t=e.Ma.write(e,t,r,i,o,void 0),l||(e.position+=t),t}function wr(e){var t,r=ue(e,r||0);e=fe(e).size;var i=new Uint8Array(e);return Bt(r,i,0,e,0),t=i,at(r),t}function J(e,t,r){e=ze("/dev/"+e);var i=It(!!t,!!r);J.yb??(J.yb=64);var o=J.yb++<<8|0;nt(o,{open(l){l.seekable=!1},close(){var l;(l=r==null?void 0:r.buffer)!=null&&l.length&&r(10)},read(l,T,f,g){for(var L=0,U=0;U<g;U++){try{var q=t()}catch{throw new E(29)}if(q===void 0&&L===0)throw new E(6);if(q==null)break;L++,T[f+U]=q}return L&&(l.node.atime=Date.now()),L},write(l,T,f,g){for(var L=0;L<g;L++)try{r(T[f+L])}catch{throw new E(29)}return g&&(l.node.mtime=l.node.ctime=Date.now()),L}}),Ce(e,i,o)}var S={};function ne(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":P(e).path,t.length==0){if(!r)throw new E(44);return e}return e+"/"+t}function Oe(e,t){v[e>>2]=t.dev,v[e+4>>2]=t.mode,O[e+8>>2]=t.nlink,v[e+12>>2]=t.uid,v[e+16>>2]=t.gid,v[e+20>>2]=t.rdev,K[e+24>>3]=BigInt(t.size),v[e+32>>2]=4096,v[e+36>>2]=t.blocks;var r=t.atime.getTime(),i=t.mtime.getTime(),o=t.ctime.getTime();return K[e+40>>3]=BigInt(Math.floor(r/1e3)),O[e+48>>2]=r%1e3*1e6,K[e+56>>3]=BigInt(Math.floor(i/1e3)),O[e+64>>2]=i%1e3*1e6,K[e+72>>3]=BigInt(Math.floor(o/1e3)),O[e+80>>2]=o%1e3*1e6,K[e+88>>3]=BigInt(t.ino),0}var Me=void 0,Xe=()=>{var e=v[+Me>>2];return Me+=4,e},ot=0,vr=[0,31,60,91,121,152,182,213,244,274,305,335],Rr=[0,31,59,90,120,151,181,212,243,273,304,334],me={},Yt=e=>{var t;je=e,Ge||0<ot||((t=s.onExit)==null||t.call(s,e),we=!0),be(e,new Qe(e))},Ir=e=>{if(!we)try{if(e(),!(Ge||0<ot))try{je=e=je,Yt(e)}catch(t){t instanceof Qe||t=="unwind"||be(1,t)}}catch(t){t instanceof Qe||t=="unwind"||be(1,t)}},st={},Qt=()=>{if(!ct){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:xe||"./this.program"},t;for(t in st)st[t]===void 0?delete e[t]:e[t]=st[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);ct=r}return ct},ct,lt=e=>{var t=he(e)+1,r=ee(t);return V(e,A,r,t),r},Sr=(e,t,r,i)=>{var o={string:L=>{var U=0;return L!=null&&L!==0&&(U=lt(L)),U},array:L=>{var U=ee(L.length);return M.set(L,U),U}};e=s["_"+e];var l=[],T=0;if(i)for(var f=0;f<i.length;f++){var g=o[r[f]];g?(T===0&&(T=pe()),l[f]=g(i[f])):l[f]=i[f]}return r=e(...l),r=(function(L){return T!==0&&_e(T),t==="string"?L?C(A,L):"":t==="boolean"?!!L:L})(r)},Pe=0,De=(e,t)=>(t=t==1?ee(e.length):Tt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),A.set(e,t),t),ie,ut=[],z,Z=e=>{ie.delete(z.get(e)),z.set(e,null),ut.push(e)},ye=(e,t)=>{if(!ie){ie=new WeakMap;var r=z.length;if(ie)for(var i=0;i<0+r;i++){var o=z.get(i);o&&ie.set(o,i)}}if(r=ie.get(e)||0)return r;if(ut.length)r=ut.pop();else{try{z.grow(1)}catch(g){throw g instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":g}r=z.length-1}try{z.set(r,e)}catch(g){if(!(g instanceof TypeError))throw g;if(typeof WebAssembly.Function=="function"){var l=WebAssembly.Function;i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},o={parameters:[],results:t[0]=="v"?[]:[i[t[0]]]};for(var T=1;T<t.length;++T)o.parameters.push(i[t[T]]);t=new l(o,e)}else{i=[1],o=t.slice(0,1),t=t.slice(1),T={i:127,p:127,j:126,f:125,d:124,e:111},i.push(96);var f=t.length;128>f?i.push(f):i.push(f%128|128,f>>7);for(l of t)i.push(T[l]);o=="v"?i.push(0):i.push(1,T[o]),t=[0,97,115,109,1,0,0,0,1],l=i.length,128>l?t.push(l):t.push(l%128|128,l>>7),t.push(...i),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}z.set(r,t)}return ie.set(e,r),r};$=Array(4096),Ft(b,"/"),Y("/tmp"),Y("/home"),Y("/home/web_user"),(function(){Y("/dev"),nt(259,{read:()=>0,write:(i,o,l,T)=>T,Va:()=>0}),Ce("/dev/null",259),Rt(1280,yr),Rt(1536,_r),Ce("/dev/tty",1280),Ce("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(At(e),t=e.byteLength),e[--t]);J("random",r),J("urandom",r),Y("/dev/shm"),Y("/dev/shm/tmp")})(),(function(){Y("/proc");var e=Y("/proc/self");Y("/proc/self/fd"),Ft({Xa(){var t=Mt(e,"fd",16895,73);return t.Ma={Va:b.Ma.Va},t.La={lookup(r,i){r=+i;var o=P(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>o.path},id:r+1},r.parent=r},readdir(){return Array.from(ce.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")})(),b.vb=new E(44),b.vb.stack="<generic error, no stack>";var Cr={a:(e,t,r,i)=>se(`Assertion failed: ${e?C(A,e):""}, at: `+[t?t?C(A,t):"":"unknown filename",r,i?i?C(A,i):"":"unknown function"]),i:function(e,t){try{return e=e?C(A,e):"",Ue(e,t),0}catch(r){if(typeof S>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?C(A,t):"",t=ne(e,t),r&-8)return-28;var i=k(t,{$a:!0}).node;return i?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&le(i,e)?-2:0):-44}catch(o){if(typeof S>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},j:function(e,t){try{var r=P(e);return Ht(r,r.node,t,!1),0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},h:function(e){try{var t=P(e);return rt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof S>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){Me=r;try{var i=P(e);switch(t){case 0:var o=Xe();if(0>o)break;for(;ce[o];)o++;return Lr(i,o).fd;case 1:case 2:return 0;case 3:return i.flags;case 4:return o=Xe(),i.flags|=o,0;case 12:return o=Xe(),Te[o+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(l){if(typeof S>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},g:function(e,t){try{var r=P(e),i=r.node,o=r.Ma.Ta;e=o?r:i,o??(o=i.La.Ta),Ie(o);var l=o(e);return Oe(t,l)}catch(T){if(typeof S>"u"||T.name!=="ErrnoError")throw T;return-T.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=P(e);if(0>t||(r.flags&2097155)===0)throw new E(28);return Kt(r,r.node,t),0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},G:function(e,t){try{if(t===0)return-28;var r=he("/")+1;return t<r?-68:(V("/",A,e,t),r)}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},K:function(e,t){try{return e=e?C(A,e):"",Oe(t,fe(e,!0))}catch(r){if(typeof S>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?C(A,t):"",t=ne(e,t),Y(t,r),0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},J:function(e,t,r,i){try{t=t?C(A,t):"";var o=i&256;return t=ne(e,t,i&4096),Oe(r,o?fe(t,!0):fe(t))}catch(l){if(typeof S>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},x:function(e,t,r,i){Me=i;try{t=t?C(A,t):"",t=ne(e,t);var o=i?Xe():0;return ue(t,r,o).fd}catch(l){if(typeof S>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},v:function(e,t,r,i){try{if(t=t?C(A,t):"",t=ne(e,t),0>=i)return-28;var o=k(t).node;if(!o)throw new E(44);if(!o.La.readlink)throw new E(28);var l=o.La.readlink(o),T=Math.min(i,he(l)),f=M[r+T];return V(l,A,r,i+1),M[r+T]=f,T}catch(g){if(typeof S>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},u:function(e){try{return e=e?C(A,e):"",kt(e),0}catch(t){if(typeof S>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?C(A,e):"",Oe(t,fe(e))}catch(r){if(typeof S>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?C(A,t):"",t=ne(e,t),r===0?xt(t):r===512?kt(t):se("Invalid flags passed to unlinkat"),0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},q:function(e,t,r){try{t=t?C(A,t):"",t=ne(e,t,!0);var i=Date.now(),o,l;if(r){var T=O[r>>2]+4294967296*v[r+4>>2],f=v[r+8>>2];f==1073741823?o=i:f==1073741822?o=null:o=1e3*T+f/1e6,r+=16,T=O[r>>2]+4294967296*v[r+4>>2],f=v[r+8>>2],f==1073741823?l=i:f==1073741822?l=null:l=1e3*T+f/1e6}else l=o=i;if((l??o)!==null){e=o;var g=k(t,{$a:!0}).node;Ie(g.La.Ua)(g,{atime:e,mtime:l})}return 0}catch(L){if(typeof S>"u"||L.name!=="ErrnoError")throw L;return-L.Pa}},m:()=>se(""),l:()=>{Ge=!1,ot=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),v[t>>2]=e.getSeconds(),v[t+4>>2]=e.getMinutes(),v[t+8>>2]=e.getHours(),v[t+12>>2]=e.getDate(),v[t+16>>2]=e.getMonth(),v[t+20>>2]=e.getFullYear()-1900,v[t+24>>2]=e.getDay();var r=e.getFullYear();v[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?Rr:vr)[e.getMonth()]+e.getDate()-1|0,v[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var i=new Date(e.getFullYear(),0,1).getTimezoneOffset();v[t+32>>2]=(r!=i&&e.getTimezoneOffset()==Math.min(i,r))|0},y:function(e,t,r,i,o,l,T){o=-9007199254740992>o||9007199254740992<o?NaN:Number(o);try{if(isNaN(o))return 61;var f=P(i);if((t&2)!==0&&(r&2)===0&&(f.flags&2097155)!==2)throw new E(2);if((f.flags&2097155)===1)throw new E(2);if(!f.Ma.ib)throw new E(43);if(!e)throw new E(28);var g=f.Ma.ib(f,e,o,t,r),L=g.Kb;return v[l>>2]=g.Ab,O[T>>2]=L,0}catch(U){if(typeof S>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},z:function(e,t,r,i,o,l){l=-9007199254740992>l||9007199254740992<l?NaN:Number(l);try{var T=P(o);if(r&2){if(r=l,(T.node.mode&61440)!==32768)throw new E(43);if(!(i&2)){var f=A.slice(e,e+t);T.Ma.jb&&T.Ma.jb(T,f,r,t,i)}}}catch(g){if(typeof S>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},n:(e,t)=>{if(me[e]&&(clearTimeout(me[e].id),delete me[e]),!t)return 0;var r=setTimeout(()=>{delete me[e],Ir(()=>Vt(e,performance.now()))},t);return me[e]={id:r,Xb:t},0},B:(e,t,r,i)=>{var o=new Date().getFullYear(),l=new Date(o,0,1).getTimezoneOffset();o=new Date(o,6,1).getTimezoneOffset(),O[e>>2]=60*Math.max(l,o),v[t>>2]=+(l!=o),t=T=>{var f=Math.abs(T);return`UTC${0<=T?"-":"+"}${String(Math.floor(f/60)).padStart(2,"0")}${String(f%60).padStart(2,"0")}`},e=t(l),t=t(o),o<l?(V(e,A,r,17),V(t,A,i,17)):(V(e,A,i,17),V(t,A,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=A.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);e:{i=(Math.min(2147483648,65536*Math.ceil(Math.max(e,i)/65536))-Ae.buffer.byteLength+65535)/65536|0;try{Ae.grow(i),yt();var o=1;break e}catch{}o=void 0}if(o)return!0}return!1},E:(e,t)=>{var r=0;return Qt().forEach((i,o)=>{var l=t+r;for(o=O[e+4*o>>2]=l,l=0;l<i.length;++l)M[o++]=i.charCodeAt(l);M[o]=0,r+=i.length+1}),0},F:(e,t)=>{var r=Qt();O[e>>2]=r.length;var i=0;return r.forEach(o=>i+=o.length+1),O[t>>2]=i,0},e:function(e){try{var t=P(e);return at(t),0}catch(r){if(typeof S>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=P(e);return M[t]=r.tty?2:D(r.mode)?3:(r.mode&61440)===40960?7:4,Te[t+2>>1]=0,K[t+8>>3]=BigInt(0),K[t+16>>3]=BigInt(0),0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return i.Pa}},w:function(e,t,r,i){try{e:{var o=P(e);e=t;for(var l,T=t=0;T<r;T++){var f=O[e>>2],g=O[e+4>>2];e+=8;var L=Bt(o,M,f,g,l);if(0>L){var U=-1;break e}if(t+=L,L<g)break;typeof l<"u"&&(l+=L)}U=t}return O[i>>2]=U,0}catch(q){if(typeof S>"u"||q.name!=="ErrnoError")throw q;return q.Pa}},D:function(e,t,r,i){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var o=P(e);return jt(o,t,r),K[i>>3]=BigInt(o.position),o.ob&&t===0&&r===0&&(o.ob=null),0}catch(l){if(typeof S>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},I:function(e){var r;try{var t=P(e);return(r=t.Ma)!=null&&r.fsync?t.Ma.fsync(t):0}catch(i){if(typeof S>"u"||i.name!=="ErrnoError")throw i;return i.Pa}},t:function(e,t,r,i){try{e:{var o=P(e);e=t;for(var l,T=t=0;T<r;T++){var f=O[e>>2],g=O[e+4>>2];e+=8;var L=Wt(o,M,f,g,l);if(0>L){var U=-1;break e}if(t+=L,L<g)break;typeof l<"u"&&(l+=L)}U=t}return O[i>>2]=U,0}catch(q){if(typeof S>"u"||q.name!=="ErrnoError")throw q;return q.Pa}},k:Yt},m;(async function(){var r;function e(i){var o;return m=i.exports,Ae=m.M,yt(),z=m.O,te--,(o=s.monitorRunDependencies)==null||o.call(s,te),te==0&&de&&(i=de,de=null,i()),m}te++,(r=s.monitorRunDependencies)==null||r.call(s,te);var t={a:Cr};return s.instantiateWasm?new Promise(i=>{s.instantiateWasm(t,(o,l)=>{e(o),i(o.exports)})}):(Ye??(Ye=s.locateFile?s.locateFile("sql-wasm.wasm",Q):Q+"sql-wasm.wasm"),e((await dr(t)).instance))})(),s._sqlite3_free=e=>(s._sqlite3_free=m.P)(e),s._sqlite3_value_text=e=>(s._sqlite3_value_text=m.Q)(e),s._sqlite3_prepare_v2=(e,t,r,i,o)=>(s._sqlite3_prepare_v2=m.R)(e,t,r,i,o),s._sqlite3_step=e=>(s._sqlite3_step=m.S)(e),s._sqlite3_reset=e=>(s._sqlite3_reset=m.T)(e),s._sqlite3_exec=(e,t,r,i,o)=>(s._sqlite3_exec=m.U)(e,t,r,i,o),s._sqlite3_finalize=e=>(s._sqlite3_finalize=m.V)(e),s._sqlite3_column_name=(e,t)=>(s._sqlite3_column_name=m.W)(e,t),s._sqlite3_column_text=(e,t)=>(s._sqlite3_column_text=m.X)(e,t),s._sqlite3_column_type=(e,t)=>(s._sqlite3_column_type=m.Y)(e,t),s._sqlite3_errmsg=e=>(s._sqlite3_errmsg=m.Z)(e),s._sqlite3_clear_bindings=e=>(s._sqlite3_clear_bindings=m._)(e),s._sqlite3_value_blob=e=>(s._sqlite3_value_blob=m.$)(e),s._sqlite3_value_bytes=e=>(s._sqlite3_value_bytes=m.aa)(e),s._sqlite3_value_double=e=>(s._sqlite3_value_double=m.ba)(e),s._sqlite3_value_int=e=>(s._sqlite3_value_int=m.ca)(e),s._sqlite3_value_type=e=>(s._sqlite3_value_type=m.da)(e),s._sqlite3_result_blob=(e,t,r,i)=>(s._sqlite3_result_blob=m.ea)(e,t,r,i),s._sqlite3_result_double=(e,t)=>(s._sqlite3_result_double=m.fa)(e,t),s._sqlite3_result_error=(e,t,r)=>(s._sqlite3_result_error=m.ga)(e,t,r),s._sqlite3_result_int=(e,t)=>(s._sqlite3_result_int=m.ha)(e,t),s._sqlite3_result_int64=(e,t)=>(s._sqlite3_result_int64=m.ia)(e,t),s._sqlite3_result_null=e=>(s._sqlite3_result_null=m.ja)(e),s._sqlite3_result_text=(e,t,r,i)=>(s._sqlite3_result_text=m.ka)(e,t,r,i),s._sqlite3_aggregate_context=(e,t)=>(s._sqlite3_aggregate_context=m.la)(e,t),s._sqlite3_column_count=e=>(s._sqlite3_column_count=m.ma)(e),s._sqlite3_data_count=e=>(s._sqlite3_data_count=m.na)(e),s._sqlite3_column_blob=(e,t)=>(s._sqlite3_column_blob=m.oa)(e,t),s._sqlite3_column_bytes=(e,t)=>(s._sqlite3_column_bytes=m.pa)(e,t),s._sqlite3_column_double=(e,t)=>(s._sqlite3_column_double=m.qa)(e,t),s._sqlite3_bind_blob=(e,t,r,i,o)=>(s._sqlite3_bind_blob=m.ra)(e,t,r,i,o),s._sqlite3_bind_double=(e,t,r)=>(s._sqlite3_bind_double=m.sa)(e,t,r),s._sqlite3_bind_int=(e,t,r)=>(s._sqlite3_bind_int=m.ta)(e,t,r),s._sqlite3_bind_text=(e,t,r,i,o)=>(s._sqlite3_bind_text=m.ua)(e,t,r,i,o),s._sqlite3_bind_parameter_index=(e,t)=>(s._sqlite3_bind_parameter_index=m.va)(e,t),s._sqlite3_sql=e=>(s._sqlite3_sql=m.wa)(e),s._sqlite3_normalized_sql=e=>(s._sqlite3_normalized_sql=m.xa)(e),s._sqlite3_changes=e=>(s._sqlite3_changes=m.ya)(e),s._sqlite3_close_v2=e=>(s._sqlite3_close_v2=m.za)(e),s._sqlite3_create_function_v2=(e,t,r,i,o,l,T,f,g)=>(s._sqlite3_create_function_v2=m.Aa)(e,t,r,i,o,l,T,f,g),s._sqlite3_update_hook=(e,t,r)=>(s._sqlite3_update_hook=m.Ba)(e,t,r),s._sqlite3_open=(e,t)=>(s._sqlite3_open=m.Ca)(e,t);var Tt=s._malloc=e=>(Tt=s._malloc=m.Da)(e),qe=s._free=e=>(qe=s._free=m.Ea)(e);s._RegisterExtensionFunctions=e=>(s._RegisterExtensionFunctions=m.Fa)(e);var Gt=(e,t)=>(Gt=m.Ga)(e,t),Vt=(e,t)=>(Vt=m.Ha)(e,t),_e=e=>(_e=m.Ia)(e),ee=e=>(ee=m.Ja)(e),pe=()=>(pe=m.Ka)();s.stackSave=()=>pe(),s.stackRestore=e=>_e(e),s.stackAlloc=e=>ee(e),s.cwrap=(e,t,r,i)=>{var o=!r||r.every(l=>l==="number"||l==="boolean");return t!=="string"&&o&&!i?s["_"+e]:(...l)=>Sr(e,t,r,l)},s.addFunction=ye,s.removeFunction=Z,s.UTF8ToString=Ve,s.ALLOC_NORMAL=Pe,s.allocate=De,s.allocateUTF8OnStack=lt;function dt(){function e(){var o;if(s.calledRun=!0,!we){if(!s.noFSInit&&!Ct){var t,r;Ct=!0,i??(i=s.stdin),t??(t=s.stdout),r??(r=s.stderr),i?J("stdin",i):it("/dev/tty","/dev/stdin"),t?J("stdout",null,t):it("/dev/tty","/dev/stdout"),r?J("stderr",null,r):it("/dev/tty1","/dev/stderr"),ue("/dev/stdin",0),ue("/dev/stdout",1),ue("/dev/stderr",1)}if(m.N(),Ut=!1,(o=s.onRuntimeInitialized)==null||o.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var i=s.postRun.shift();pt.unshift(i)}_t(pt)}}if(0<te)de=dt;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Er();_t(Nt),0<te?de=dt:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return dt(),I}),n)};X.exports=u,X.exports.default=u})(ht)),ht.exports}var mn=fn();const yn=un(mn);class _n{constructor(){H(this,"sqlite",null);H(this,"dbConnection",null);H(this,"isWeb",!1);H(this,"sqlJsDb",null);this.isWeb=typeof window<"u"&&!cn.isNativePlatform()}async initialize(){try{this.isWeb?await this.initializeWeb():await this.initializeMobile(),console.log("SQLite service initialized successfully")}catch(a){throw console.error("Failed to initialize SQLite service:",a),a}}async initializeWeb(){try{const a=await yn({locateFile:u=>`https://sql.js.org/dist/${u}`}),n=localStorage.getItem("divine_nest_db");if(n){const u=new Uint8Array(JSON.parse(n));this.sqlJsDb=new a.Database(u)}else this.sqlJsDb=new a.Database,await this.createTablesWeb();console.log("Web SQLite initialized successfully")}catch(a){throw console.error("Failed to initialize web SQLite:",a),a}}async initializeMobile(){try{this.sqlite=new Tn(dn),this.dbConnection=await this.sqlite.createConnection("divine_nest",!1,"no-encryption",1,!1),await this.dbConnection.open(),await this.createTablesMobile(),console.log("Mobile SQLite initialized successfully")}catch(a){throw console.error("Failed to initialize mobile SQLite:",a),a}}async createTablesWeb(){const a=[`CREATE TABLE IF NOT EXISTS user_roles (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        role TEXT NOT NULL,
        dashboard TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS family_members (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        relationship TEXT,
        phone TEXT,
        email TEXT,
        address TEXT,
        emergency_contact BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS reminders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        description TEXT,
        priority TEXT DEFAULT 'medium',
        due_date DATE,
        due_time TIME,
        completed BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS grocery_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        category TEXT,
        in_stock BOOLEAN DEFAULT 1,
        market_mode BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS chores (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        assigned_to TEXT,
        frequency TEXT,
        completed BOOLEAN DEFAULT 0,
        due_date DATE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS issues (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('External', 'Internal')) NOT NULL,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Other')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        location_lat REAL,
        location_lng REAL,
        location_address TEXT,
        contact TEXT NOT NULL,
        preferred_resolution_date DATE,
        assigned_to TEXT,
        status TEXT CHECK(status IN ('Reported', 'Assigned', 'In Progress', 'Resolved')) DEFAULT 'Reported',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS requests (
        id TEXT PRIMARY KEY,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Suggestion')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        location_lat REAL,
        location_lng REAL,
        location_address TEXT,
        contact TEXT NOT NULL,
        preferred_resolution_date DATE,
        assigned_to TEXT,
        status TEXT CHECK(status IN ('Reported', 'Assigned', 'In Progress', 'Resolved')) DEFAULT 'Reported',
        affected_audience TEXT NOT NULL,
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS foods (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Breakfast', 'Lunch', 'Dinner', 'Snacks', 'Drinks')) NOT NULL,
        category TEXT CHECK(category IN ('South Indian', 'North Indian', 'Chinese', 'European', 'American')) NOT NULL,
        sub_category TEXT NOT NULL,
        ingredients TEXT NOT NULL,
        preparation_stage TEXT,
        mixing_stage TEXT,
        boiling_stage TEXT,
        ready_stage TEXT,
        schedule TEXT CHECK(schedule IN ('Weekly', 'Daily', 'Monthly', 'Annually', 'Festivally', 'Ad-Hoc')) DEFAULT 'Weekly',
        audience TEXT NOT NULL,
        health_factor TEXT,
        time_factor TEXT,
        cost_per_serving REAL,
        serving_definition TEXT,
        aroma_factor TEXT CHECK(aroma_factor IN ('Earthy', 'Floral', 'Spicy', 'Sweet', 'Neutral')) DEFAULT 'Neutral',
        taste_factor TEXT CHECK(taste_factor IN ('Spicy', 'Sweet', 'Sour', 'Salty', 'Bitter', 'Umami')) DEFAULT 'Neutral',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS inventory (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Food Ingredient', 'Grocery', 'Toiletry', 'Pooja Item', 'Other')) NOT NULL,
        category TEXT CHECK(category IN ('Dry Goods', 'Fresh Produce', 'Spices', 'Cleaning', 'Personal Care', 'Ritual Supplies')) NOT NULL,
        sub_category TEXT,
        quantity_available REAL NOT NULL,
        unit TEXT CHECK(unit IN ('kg', 'g', 'litre', 'ml', 'pieces', 'packets')) NOT NULL,
        location TEXT,
        restock_threshold REAL,
        preferred_vendor TEXT,
        last_updated DATETIME DEFAULT CURRENT_TIMESTAMP,
        added_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS tasks (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Duty', 'Responsibility', 'Ritual')) NOT NULL,
        category TEXT CHECK(category IN ('Self', 'Family', 'Parenting', 'Education', 'Health', 'Household', 'Spiritual')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        assigned_to TEXT NOT NULL,
        mandatory BOOLEAN DEFAULT 0,
        frequency TEXT CHECK(frequency IN ('Daily', 'Weekly', 'Monthly', 'Yearly', 'Ad-Hoc')) DEFAULT 'Ad-Hoc',
        panchangam_link TEXT,
        time_of_day TEXT CHECK(time_of_day IN ('Morning', 'Afternoon', 'Evening', 'Night')),
        location TEXT,
        due_date DATE,
        alert_type TEXT CHECK(alert_type IN ('ToDo', 'SMS', 'Alarm', 'Notes')) DEFAULT 'ToDo',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS activities (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Physical', 'Mental', 'Soulful')) NOT NULL,
        category TEXT CHECK(category IN ('Learning', 'Crafting', 'Sports', 'Meditation', 'Reading', 'Music', 'Art')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        participant TEXT NOT NULL,
        frequency TEXT CHECK(frequency IN ('Daily', 'Weekly', 'Monthly', 'Ad-Hoc')) DEFAULT 'Ad-Hoc',
        location TEXT,
        time_of_day TEXT CHECK(time_of_day IN ('Morning', 'Afternoon', 'Evening', 'Night')),
        alert_type TEXT CHECK(alert_type IN ('Reminder', 'Alarm', 'None')) DEFAULT 'None',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS finance (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Budget', 'Income', 'Expenses', 'Savings')) NOT NULL,
        category TEXT NOT NULL,
        sub_category TEXT,
        amount REAL NOT NULL,
        recurring TEXT CHECK(recurring IN ('None', 'By Period (Flexible)', 'By Period (Fixed)')) DEFAULT 'None',
        date DATE NOT NULL,
        actor TEXT NOT NULL,
        source TEXT CHECK(source IN ('Manual', 'Voice', 'SMS')) DEFAULT 'Manual',
        notes TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS rewards (
        id TEXT PRIMARY KEY,
        person TEXT NOT NULL,
        role TEXT CHECK(role IN ('Child', 'Adult')) NOT NULL,
        type TEXT CHECK(type IN ('Star', 'Karma')) NOT NULL,
        reason TEXT NOT NULL,
        points INTEGER NOT NULL,
        date DATE NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS assets (
        id TEXT PRIMARY KEY,
        category TEXT CHECK(category IN ('Documents', 'Certificates', 'Photos', 'Valuables', 'Inventory', 'Vehicles', 'Land', 'Buildings', 'Software', 'Hardware')) NOT NULL,
        sub_category TEXT,
        name TEXT NOT NULL,
        description TEXT,
        location TEXT,
        owner TEXT,
        date_added DATE NOT NULL,
        tags TEXT, -- JSON array of tags
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS family (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Nuclear', 'Joined', 'Independent')) NOT NULL,
        category TEXT CHECK(category IN ('Profile', 'Wisdom', 'Heritage', 'Tradition', 'Stories', 'Legacy', 'Success', 'Achievements', 'Certifications', 'Photos', 'Videos', 'Life Lessons', 'Rules', 'Virtues', 'Memories')) NOT NULL,
        sub_category TEXT CHECK(sub_category IN ('Members', 'Relatives', 'Friends', 'Neighbours', 'Life Lessons', 'Stories', 'Virtues', 'Legacy', 'Family Line', 'Traditions', 'Festivals', 'Celebrations', 'Certifications', 'Awards', 'Rewards', 'Success', 'Strict Guidelines', 'Mistakes to Avoid', 'Habits to Avoid', 'To Dos', 'Not To Dos', 'Occasions', 'Rituals', 'Functions', 'Moments')),
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        date_time DATETIME NOT NULL,
        location TEXT,
        media_type TEXT CHECK(media_type IN ('Blog', 'Audio', 'Photo', 'Video')) NOT NULL,
        media_url TEXT,
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS ai_prompts (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Alert', 'Notes', 'Checklist', 'Query')) NOT NULL,
        category TEXT CHECK(category IN ('SMS', 'Email', 'Phone', 'Calendar Schedule', 'WhatsApp', 'Alarm')) NOT NULL,
        purpose TEXT NOT NULL,
        trigger_time DATETIME,
        trigger_location_lat REAL,
        trigger_location_lng REAL,
        trigger_radius_meters REAL,
        frequency TEXT CHECK(frequency IN ('Once', 'Daily', 'Weekly', 'Monthly', 'Custom')) DEFAULT 'Once',
        sound_type TEXT CHECK(sound_type IN ('Positive', 'Negative', 'Alarming', 'Pleasant')) DEFAULT 'Pleasant',
        volume_level TEXT CHECK(volume_level IN ('Low', 'Medium', 'High', 'Adaptive')) DEFAULT 'Medium',
        conditions TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS users (
        id TEXT PRIMARY KEY,
        role TEXT CHECK(role IN ('Father', 'Mother', 'Child', 'Grandparent', 'Guest', 'Service Provider', 'Admin')) NOT NULL,
        name TEXT NOT NULL,
        nick_name TEXT,
        email TEXT NOT NULL UNIQUE,
        location TEXT,
        joined_date DATE NOT NULL,
        picture_url TEXT,
        auth_provider TEXT CHECK(auth_provider IN ('Google', 'Facebook', 'Manual')) NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS alerts (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('SMS', 'WhatsApp', 'Email', 'Alarm')) NOT NULL,
        recipient TEXT NOT NULL,
        message TEXT NOT NULL,
        related_table TEXT NOT NULL,
        related_id TEXT NOT NULL,
        trigger_time DATETIME NOT NULL,
        sent_at DATETIME,
        status TEXT CHECK(status IN ('Pending', 'Sent', 'Failed')) DEFAULT 'Pending',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS directory (
        id TEXT PRIMARY KEY,
        name TEXT NOT NULL,
        type TEXT CHECK(type IN ('Service Provider', 'Family Member', 'Vendor', 'Professional')) NOT NULL,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Food', 'Health', 'Education', 'Other')) NOT NULL,
        sub_category TEXT,
        phone TEXT,
        email TEXT,
        address TEXT,
        location_lat REAL,
        location_lng REAL,
        rating REAL,
        notes TEXT,
        last_contacted DATE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS notifications (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('SMS', 'WhatsApp', 'Email', 'Alarm')) NOT NULL,
        recipient TEXT NOT NULL,
        message TEXT NOT NULL,
        related_to TEXT, -- issueId, activityId, etc.
        sent_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`];for(const n of a)this.sqlJsDb.run(n);this.saveWebDatabase()}async createTablesMobile(){if(!this.dbConnection)throw new Error("Database not initialized");const a=[`CREATE TABLE IF NOT EXISTS user_roles (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        role TEXT NOT NULL,
        dashboard TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS family_members (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        relationship TEXT,
        phone TEXT,
        email TEXT,
        address TEXT,
        emergency_contact BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS reminders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        description TEXT,
        priority TEXT DEFAULT 'medium',
        due_date DATE,
        due_time TIME,
        completed BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS grocery_items (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        category TEXT,
        in_stock BOOLEAN DEFAULT 1,
        market_mode BOOLEAN DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS chores (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        assigned_to TEXT,
        frequency TEXT,
        completed BOOLEAN DEFAULT 0,
        due_date DATE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS issues (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('External', 'Internal')) NOT NULL,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Other')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        location_lat REAL,
        location_lng REAL,
        location_address TEXT,
        contact TEXT NOT NULL,
        preferred_resolution_date DATE,
        assigned_to TEXT,
        status TEXT CHECK(status IN ('Reported', 'Assigned', 'In Progress', 'Resolved')) DEFAULT 'Reported',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS requests (
        id TEXT PRIMARY KEY,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Suggestion')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        location_lat REAL,
        location_lng REAL,
        location_address TEXT,
        contact TEXT NOT NULL,
        preferred_resolution_date DATE,
        assigned_to TEXT,
        status TEXT CHECK(status IN ('Reported', 'Assigned', 'In Progress', 'Resolved')) DEFAULT 'Reported',
        affected_audience TEXT NOT NULL,
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS foods (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Breakfast', 'Lunch', 'Dinner', 'Snacks', 'Drinks')) NOT NULL,
        category TEXT CHECK(category IN ('South Indian', 'North Indian', 'Chinese', 'European', 'American')) NOT NULL,
        sub_category TEXT NOT NULL,
        ingredients TEXT NOT NULL,
        preparation_stage TEXT,
        mixing_stage TEXT,
        boiling_stage TEXT,
        ready_stage TEXT,
        schedule TEXT CHECK(schedule IN ('Weekly', 'Daily', 'Monthly', 'Annually', 'Festivally', 'Ad-Hoc')) DEFAULT 'Weekly',
        audience TEXT NOT NULL,
        health_factor TEXT,
        time_factor TEXT,
        cost_per_serving REAL,
        serving_definition TEXT,
        aroma_factor TEXT CHECK(aroma_factor IN ('Earthy', 'Floral', 'Spicy', 'Sweet', 'Neutral')) DEFAULT 'Neutral',
        taste_factor TEXT CHECK(taste_factor IN ('Spicy', 'Sweet', 'Sour', 'Salty', 'Bitter', 'Umami')) DEFAULT 'Neutral',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS inventory (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Food Ingredient', 'Grocery', 'Toiletry', 'Pooja Item', 'Other')) NOT NULL,
        category TEXT CHECK(category IN ('Dry Goods', 'Fresh Produce', 'Spices', 'Cleaning', 'Personal Care', 'Ritual Supplies')) NOT NULL,
        sub_category TEXT,
        quantity_available REAL NOT NULL,
        unit TEXT CHECK(unit IN ('kg', 'g', 'litre', 'ml', 'pieces', 'packets')) NOT NULL,
        location TEXT,
        restock_threshold REAL,
        preferred_vendor TEXT,
        last_updated DATETIME DEFAULT CURRENT_TIMESTAMP,
        added_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS tasks (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Duty', 'Responsibility', 'Ritual')) NOT NULL,
        category TEXT CHECK(category IN ('Self', 'Family', 'Parenting', 'Education', 'Health', 'Household', 'Spiritual')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        assigned_to TEXT NOT NULL,
        mandatory BOOLEAN DEFAULT 0,
        frequency TEXT CHECK(frequency IN ('Daily', 'Weekly', 'Monthly', 'Yearly', 'Ad-Hoc')) DEFAULT 'Ad-Hoc',
        panchangam_link TEXT,
        time_of_day TEXT CHECK(time_of_day IN ('Morning', 'Afternoon', 'Evening', 'Night')),
        location TEXT,
        due_date DATE,
        alert_type TEXT CHECK(alert_type IN ('ToDo', 'SMS', 'Alarm', 'Notes')) DEFAULT 'ToDo',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS activities (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Physical', 'Mental', 'Soulful')) NOT NULL,
        category TEXT CHECK(category IN ('Learning', 'Crafting', 'Sports', 'Meditation', 'Reading', 'Music', 'Art')) NOT NULL,
        sub_category TEXT,
        description TEXT NOT NULL,
        participant TEXT NOT NULL,
        frequency TEXT CHECK(frequency IN ('Daily', 'Weekly', 'Monthly', 'Ad-Hoc')) DEFAULT 'Ad-Hoc',
        location TEXT,
        time_of_day TEXT CHECK(time_of_day IN ('Morning', 'Afternoon', 'Evening', 'Night')),
        alert_type TEXT CHECK(alert_type IN ('Reminder', 'Alarm', 'None')) DEFAULT 'None',
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS finance (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Budget', 'Income', 'Expenses', 'Savings')) NOT NULL,
        category TEXT NOT NULL,
        sub_category TEXT,
        amount REAL NOT NULL,
        recurring TEXT CHECK(recurring IN ('None', 'By Period (Flexible)', 'By Period (Fixed)')) DEFAULT 'None',
        date DATE NOT NULL,
        actor TEXT NOT NULL,
        source TEXT CHECK(source IN ('Manual', 'Voice', 'SMS')) DEFAULT 'Manual',
        notes TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS rewards (
        id TEXT PRIMARY KEY,
        person TEXT NOT NULL,
        role TEXT CHECK(role IN ('Child', 'Adult')) NOT NULL,
        type TEXT CHECK(type IN ('Star', 'Karma')) NOT NULL,
        reason TEXT NOT NULL,
        points INTEGER NOT NULL,
        date DATE NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS assets (
        id TEXT PRIMARY KEY,
        category TEXT CHECK(category IN ('Documents', 'Certificates', 'Photos', 'Valuables', 'Inventory', 'Vehicles', 'Land', 'Buildings', 'Software', 'Hardware')) NOT NULL,
        sub_category TEXT,
        name TEXT NOT NULL,
        description TEXT,
        location TEXT,
        owner TEXT,
        date_added DATE NOT NULL,
        tags TEXT, -- JSON array of tags
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS family (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Nuclear', 'Joined', 'Independent')) NOT NULL,
        category TEXT CHECK(category IN ('Profile', 'Wisdom', 'Heritage', 'Tradition', 'Stories', 'Legacy', 'Success', 'Achievements', 'Certifications', 'Photos', 'Videos', 'Life Lessons', 'Rules', 'Virtues', 'Memories')) NOT NULL,
        sub_category TEXT CHECK(sub_category IN ('Members', 'Relatives', 'Friends', 'Neighbours', 'Life Lessons', 'Stories', 'Virtues', 'Legacy', 'Family Line', 'Traditions', 'Festivals', 'Celebrations', 'Certifications', 'Awards', 'Rewards', 'Success', 'Strict Guidelines', 'Mistakes to Avoid', 'Habits to Avoid', 'To Dos', 'Not To Dos', 'Occasions', 'Rituals', 'Functions', 'Moments')),
        title TEXT NOT NULL,
        description TEXT NOT NULL,
        date_time DATETIME NOT NULL,
        location TEXT,
        media_type TEXT CHECK(media_type IN ('Blog', 'Audio', 'Photo', 'Video')) NOT NULL,
        media_url TEXT,
        created_by TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS ai_prompts (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('Alert', 'Notes', 'Checklist', 'Query')) NOT NULL,
        category TEXT CHECK(category IN ('SMS', 'Email', 'Phone', 'Calendar Schedule', 'WhatsApp', 'Alarm')) NOT NULL,
        purpose TEXT NOT NULL,
        trigger_time DATETIME,
        trigger_location_lat REAL,
        trigger_location_lng REAL,
        trigger_radius_meters REAL,
        frequency TEXT CHECK(frequency IN ('Once', 'Daily', 'Weekly', 'Monthly', 'Custom')) DEFAULT 'Once',
        sound_type TEXT CHECK(sound_type IN ('Positive', 'Negative', 'Alarming', 'Pleasant')) DEFAULT 'Pleasant',
        volume_level TEXT CHECK(volume_level IN ('Low', 'Medium', 'High', 'Adaptive')) DEFAULT 'Medium',
        conditions TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS users (
        id TEXT PRIMARY KEY,
        role TEXT CHECK(role IN ('Father', 'Mother', 'Child', 'Grandparent', 'Guest', 'Service Provider', 'Admin')) NOT NULL,
        name TEXT NOT NULL,
        nick_name TEXT,
        email TEXT NOT NULL UNIQUE,
        location TEXT,
        joined_date DATE NOT NULL,
        picture_url TEXT,
        auth_provider TEXT CHECK(auth_provider IN ('Google', 'Facebook', 'Manual')) NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS alerts (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('SMS', 'WhatsApp', 'Email', 'Alarm')) NOT NULL,
        recipient TEXT NOT NULL,
        message TEXT NOT NULL,
        related_table TEXT NOT NULL,
        related_id TEXT NOT NULL,
        trigger_time DATETIME NOT NULL,
        sent_at DATETIME,
        status TEXT CHECK(status IN ('Pending', 'Sent', 'Failed')) DEFAULT 'Pending',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS directory (
        id TEXT PRIMARY KEY,
        name TEXT NOT NULL,
        type TEXT CHECK(type IN ('Service Provider', 'Family Member', 'Vendor', 'Professional')) NOT NULL,
        category TEXT CHECK(category IN ('Emergency', 'Urgents', 'Repairs', 'Maintenance', 'Upgrades', 'Food', 'Health', 'Education', 'Other')) NOT NULL,
        sub_category TEXT,
        phone TEXT,
        email TEXT,
        address TEXT,
        location_lat REAL,
        location_lng REAL,
        rating REAL,
        notes TEXT,
        last_contacted DATE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS notifications (
        id TEXT PRIMARY KEY,
        type TEXT CHECK(type IN ('SMS', 'WhatsApp', 'Email', 'Alarm')) NOT NULL,
        recipient TEXT NOT NULL,
        message TEXT NOT NULL,
        related_to TEXT, -- issueId, activityId, etc.
        sent_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`];for(const n of a)await this.dbConnection.execute(n)}saveWebDatabase(){if(this.sqlJsDb&&this.isWeb)try{const a=this.sqlJsDb.export(),n=Array.from(a);localStorage.setItem("divine_nest_db",JSON.stringify(n))}catch(a){console.error("Failed to save web database:",a)}}async executeQuery(a,n=[]){try{return this.isWeb?this.executeWebQuery(a,n):await this.executeMobileQuery(a,n)}catch(u){throw console.error("Query execution failed:",u),u}}executeWebQuery(a,n=[]){if(!this.sqlJsDb)throw new Error("Web database not initialized");try{const u=this.sqlJsDb.prepare(a),y=[];for(n.length>0&&u.bind(n);u.step();)y.push(u.getAsObject());return u.free(),this.saveWebDatabase(),y}catch(u){throw console.error("Web query failed:",u),u}}async executeMobileQuery(a,n=[]){if(!this.dbConnection)throw new Error("Mobile database not initialized");try{return(await this.dbConnection.query(a,n)).values||[]}catch(u){throw console.error("Mobile query failed:",u),u}}async executeStatement(a,n=[]){try{this.isWeb?this.executeWebStatement(a,n):await this.executeMobileStatement(a,n)}catch(u){throw console.error("Statement execution failed:",u),u}}executeWebStatement(a,n=[]){if(!this.sqlJsDb)throw new Error("Web database not initialized");try{const u=this.sqlJsDb.prepare(a);n.length>0&&u.bind(n),u.step(),u.free(),this.saveWebDatabase()}catch(u){throw console.error("Web statement failed:",u),u}}async executeMobileStatement(a,n=[]){if(!this.dbConnection)throw new Error("Mobile database not initialized");try{n.length>0?await this.dbConnection.run(a,n):await this.dbConnection.execute(a)}catch(u){throw console.error("Mobile statement failed:",u),u}}async populateSampleData(){try{const{sampleData:a}=await cr(async()=>{const{sampleData:n}=await import("./CMSsqYmC.js");return{sampleData:n}},[],import.meta.url);for(const n of a.issues)await this.executeStatement("INSERT OR IGNORE INTO issues (id, type, category, sub_category, description, location_lat, location_lng, location_address, contact, preferred_resolution_date, assigned_to, status, created_by, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.description,n.location_lat,n.location_lng,n.location_address,n.contact,n.preferred_resolution_date,n.assigned_to,n.status,n.created_by,n.created_at,n.updated_at]);for(const n of a.requests)await this.executeStatement("INSERT OR IGNORE INTO requests (id, category, sub_category, description, location_lat, location_lng, location_address, contact, preferred_resolution_date, assigned_to, status, affected_audience, created_by, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.category,n.sub_category,n.description,n.location_lat,n.location_lng,n.location_address,n.contact,n.preferred_resolution_date,n.assigned_to,n.status,n.affected_audience,n.created_by,n.created_at,n.updated_at]);for(const n of a.foods)await this.executeStatement("INSERT OR IGNORE INTO foods (id, type, category, sub_category, ingredients, preparation_stage, mixing_stage, boiling_stage, ready_stage, schedule, audience, health_factor, time_factor, cost_per_serving, serving_definition, aroma_factor, taste_factor, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.ingredients,n.preparation_stage,n.mixing_stage,n.boiling_stage,n.ready_stage,n.schedule,n.audience,n.health_factor,n.time_factor,n.cost_per_serving,n.serving_definition,n.aroma_factor,n.taste_factor,n.created_at]);for(const n of a.inventory)await this.executeStatement("INSERT OR IGNORE INTO inventory (id, type, category, sub_category, quantity_available, unit, location, restock_threshold, preferred_vendor, last_updated, added_by, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.quantity_available,n.unit,n.location,n.restock_threshold,n.preferred_vendor,n.last_updated,n.added_by,n.created_at]);for(const n of a.tasks)await this.executeStatement("INSERT OR IGNORE INTO tasks (id, type, category, sub_category, description, assigned_to, mandatory, frequency, panchangam_link, time_of_day, location, due_date, alert_type, created_by, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.description,n.assigned_to,n.mandatory,n.frequency,n.panchangam_link,n.time_of_day,n.location,n.due_date,n.alert_type,n.created_by,n.created_at]);for(const n of a.activities)await this.executeStatement("INSERT OR IGNORE INTO activities (id, type, category, sub_category, description, participant, frequency, location, time_of_day, alert_type, created_by, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.description,n.participant,n.frequency,n.location,n.time_of_day,n.alert_type,n.created_by,n.created_at]);for(const n of a.finance)await this.executeStatement("INSERT OR IGNORE INTO finance (id, type, category, sub_category, amount, recurring, date, actor, source, notes, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.amount,n.recurring,n.date,n.actor,n.source,n.notes,n.created_at]);for(const n of a.rewards)await this.executeStatement("INSERT OR IGNORE INTO rewards (id, person, role, type, reason, points, date, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.person,n.role,n.type,n.reason,n.points,n.date,n.created_at]);for(const n of a.assets)await this.executeStatement("INSERT OR IGNORE INTO assets (id, category, sub_category, name, description, location, owner, date_added, tags, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.category,n.sub_category,n.name,n.description,n.location,n.owner,n.date_added,n.tags,n.created_at]);for(const n of a.family)await this.executeStatement("INSERT OR IGNORE INTO family (id, type, category, sub_category, title, description, date_time, location, media_type, media_url, created_by, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.sub_category,n.title,n.description,n.date_time,n.location,n.media_type,n.media_url,n.created_by,n.created_at]);for(const n of a.ai_prompts)await this.executeStatement("INSERT OR IGNORE INTO ai_prompts (id, type, category, purpose, trigger_time, trigger_location_lat, trigger_location_lng, trigger_radius_meters, frequency, sound_type, volume_level, conditions, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.category,n.purpose,n.trigger_time,n.trigger_location_lat,n.trigger_location_lng,n.trigger_radius_meters,n.frequency,n.sound_type,n.volume_level,n.conditions,n.created_at]);for(const n of a.users)await this.executeStatement("INSERT OR IGNORE INTO users (id, role, name, nick_name, email, location, joined_date, picture_url, auth_provider, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.role,n.name,n.nick_name,n.email,n.location,n.joined_date,n.picture_url,n.auth_provider,n.created_at]);for(const n of a.alerts)await this.executeStatement("INSERT OR IGNORE INTO alerts (id, type, recipient, message, related_table, related_id, trigger_time, sent_at, status, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.type,n.recipient,n.message,n.related_table,n.related_id,n.trigger_time,n.sent_at,n.status,n.created_at]);for(const n of a.directory)await this.executeStatement("INSERT OR IGNORE INTO directory (id, name, type, category, sub_category, phone, email, address, location_lat, location_lng, rating, notes, last_contacted, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n.id,n.name,n.type,n.category,n.sub_category,n.phone,n.email,n.address,n.location_lat,n.location_lng,n.rating,n.notes,n.last_contacted,n.created_at]);console.log("Sample data populated successfully")}catch(a){throw console.error("Error populating sample data:",a),a}}async getUserRole(){const a=await this.executeQuery("SELECT role, dashboard FROM user_roles WHERE id = 1");return a.length>0?a[0]:null}async saveFamilyMember(a){var u;return(u=(await this.executeQuery(`INSERT INTO family_members (name, relationship, phone, email, address, emergency_contact)
       VALUES (?, ?, ?, ?, ?, ?) RETURNING id`,[a.name,a.relationship,a.phone||null,a.email||null,a.address||null,a.emergency_contact?1:0]))[0])==null?void 0:u.id}async getFamilyMembers(){return await this.executeQuery("SELECT * FROM family_members ORDER BY name")}async saveReminder(a){var u;return(u=(await this.executeQuery(`INSERT INTO reminders (title, description, priority, due_date, due_time)
       VALUES (?, ?, ?, ?, ?) RETURNING id`,[a.title,a.description||null,a.priority||"medium",a.due_date||null,a.due_time||null]))[0])==null?void 0:u.id}async getReminders(){return await this.executeQuery("SELECT * FROM reminders ORDER BY due_date, due_time")}async updateReminder(a,n){const u=Object.keys(n),y=Object.values(n),N=u.map(R=>`${R} = ?`).join(", ");await this.executeStatement(`UPDATE reminders SET ${N} WHERE id = ?`,[...y,a])}async deleteReminder(a){await this.executeStatement("DELETE FROM reminders WHERE id = ?",[a])}async saveGroceryItem(a){var u;return(u=(await this.executeQuery(`INSERT INTO grocery_items (name, category, in_stock, market_mode)
       VALUES (?, ?, ?, ?) RETURNING id`,[a.name,a.category||null,a.in_stock?1:0,a.market_mode?1:0]))[0])==null?void 0:u.id}async getGroceryItems(){return await this.executeQuery("SELECT * FROM grocery_items ORDER BY name")}async updateGroceryItem(a,n){const u=Object.keys(n),y=Object.values(n),N=u.map(R=>`${R} = ?`).join(", ");await this.executeStatement(`UPDATE grocery_items SET ${N} WHERE id = ?`,[...y,a])}async deleteGroceryItem(a){await this.executeStatement("DELETE FROM grocery_items WHERE id = ?",[a])}async saveChore(a){var u;return(u=(await this.executeQuery(`INSERT INTO chores (title, assigned_to, frequency, due_date)
       VALUES (?, ?, ?, ?) RETURNING id`,[a.title,a.assigned_to||null,a.frequency||null,a.due_date||null]))[0])==null?void 0:u.id}async getChores(){return await this.executeQuery("SELECT * FROM chores ORDER BY due_date, title")}async updateChore(a,n){const u=Object.keys(n),y=Object.values(n),N=u.map(R=>`${R} = ?`).join(", ");await this.executeStatement(`UPDATE chores SET ${N} WHERE id = ?`,[...y,a])}async deleteChore(a){await this.executeStatement("DELETE FROM chores WHERE id = ?",[a])}async close(){try{this.isWeb?this.sqlJsDb&&(this.saveWebDatabase(),this.sqlJsDb.close()):(this.dbConnection&&await this.dbConnection.close(),this.sqlite&&await this.sqlite.closeConnection("divine_nest",!1)),console.log("SQLite service closed successfully")}catch(a){console.error("Failed to close SQLite service:",a)}}async closeConnection(){await this.close()}}const gn=new _n;export{gn as s};
